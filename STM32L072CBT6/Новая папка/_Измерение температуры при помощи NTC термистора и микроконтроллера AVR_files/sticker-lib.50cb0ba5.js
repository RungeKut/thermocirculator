"use strict";(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[46410],{521871:(e,t,i)=>{i.d(t,{default:()=>r});const r={sticker:"Sticker-module__sticker--CtZU6",placeholder:"Sticker-module__placeholder--5PW3m",in:"Sticker-module__in--pEnhZ",tappable:"Sticker-module__tappable--M4lob",content:"Sticker-module__content--MQWSP",disabled:"Sticker-module__disabled--cK_tc",favorite:"Sticker-module__favorite--Xqlbr"}},839888:(e,t,i)=>{i.d(t,{default:()=>r});const r={favorite:"FavoriteButton-module__favorite--jHzWm",active:"FavoriteButton-module__active--aUeeT"}},679218:(e,t,i)=>{i.d(t,{default:()=>r});const r={overlay:"Overlay-module__overlay--YyHpH"}},503416:(e,t,i)=>{i.d(t,{default:()=>r});const r={iconAnimated:"PopupWrapper-module__iconAnimated--jlPzq",horizontalTremble:"PopupWrapper-module__horizontalTremble--RrOKq",stickerAnimationIsPlaying:"PopupWrapper-module__stickerAnimationIsPlaying--yaedE"}},404308:(e,t,i)=>{i.d(t,{default:()=>r});const r={wrapper:"Wrapper-module__wrapper--UjlcM",wrapperFlex:"Wrapper-module__wrapperFlex--g0FiZ",wrapperFlexLeft:"Wrapper-module__wrapperFlexLeft--toZla",wrapperFlexRight:"Wrapper-module__wrapperFlexRight--EzB15",icon:"Wrapper-module__icon--FlANj",iconAbsolute:"Wrapper-module__iconAbsolute--Z0rTi",iconAbsoluteLeft:"Wrapper-module__iconAbsoluteLeft--q4aty",iconAbsoluteRight:"Wrapper-module__iconAbsoluteRight--ooVCb",iconAbsoluteInsetLeft:"Wrapper-module__iconAbsoluteInsetLeft--FMAKS",iconAbsoluteInsetRight:"Wrapper-module__iconAbsoluteInsetRight--_WGDJ",iconRelative:"Wrapper-module__iconRelative--o019B",iconRelativeLeft:"Wrapper-module__iconRelativeLeft--gRekN",iconRelativeRight:"Wrapper-module__iconRelativeRight--Be_dd"}},43684:(e,t,i)=>{i.d(t,{Sticker:()=>f});var r=i(474848),s=i(8520),a=i(753457),n=i(930095),o=i(296540),c=i(710173),l=i(237927),d=i(241360),u=i(74423),h=i(521871);const m=92,g=16,p=new Set;function f({size:e,theme:t,plain:i,configs:f,dynamic:_,favorite:v,disabled:k,defaultConfigId:b,onFavoriteClick:x,sticker:C,noAnimation:I,UNSAFE_imageUrl:A,UNSAFE_animationUrl:w,name:R,group:y="sticker",loading:S,className:N,style:j,...P}){const{onClick:L}=P,{hasPointer:U}=(0,a.useAdaptivityWithJSMediaQueries)(),F=(0,d.getStickerContext)(C),B=(0,l.useOverlay)(F),{imageUrl:M,animationUrl:W}=(0,o.useMemo)((()=>{if(A||w)return{imageUrl:A,animationUrl:w};if(!C)return{};const i=u.BaseUrlBuilder.getAnimation({type:t,animations:F.animations})?.url||F.animationUrl;return{imageUrl:new u.BaseUrlBuilder({size:e,theme:t,configs:f,defaultConfigId:b,imageId:F.id,configContext:F.imageConfigContext,images:t===u.Theme.LIGHT?F.images:F.imagesWithBackground}).build(),animationUrl:i}}),[e,t,C,f,b,A,w]),[O,z]=(0,o.useState)(!p.has(M)),{lottieContainerRef:T,lottieLoading:E,lottieError:D}=(0,n.useLottie)({group:y,width:e,height:e,loop:!0,autoplay:!I,name:W||"",animationUrl:B?void 0:W});(0,o.useEffect)((()=>{_||z(!p.has(M))}),[M,_]);const G=!W||D,$=O&&E,H=Boolean(!i&&L),X=$||Boolean(B),q=e/m,Z=Math.round(g*q);return(0,r.jsx)("div",{"data-testid":`sticker${W?"-animated":""}${F.id?`-${F.id}`:""}`,className:(0,s.classNames)(h.default.sticker,{[h.default.disabled]:k,[h.default.placeholder]:X,[h.default.tappable]:H},N),style:{"--sticker-size":`${e}px`,"--sticker-scale":String(q.toFixed(2)),width:e,height:e,...j},...P,children:(0,r.jsxs)("div",{ref:T,className:h.default.in,children:[x&&U&&!$&&(0,r.jsx)(c.FavoriteButton,{className:h.default.favorite,active:v,width:Z,height:Z,onClick:e=>{e.stopPropagation(),x?.()}}),G&&!B&&(0,r.jsx)("img",{className:h.default.content,alt:"",src:M,loading:S,onError:()=>{z(!p.has(M))},onLoad:()=>{p.add(M),z(!1)}}),B]})})}},710173:(e,t,i)=>{i.d(t,{FavoriteButton:()=>o});var r=i(474848),s=i(8520),a=i(965861),n=i(839888);function o({active:e,className:t,...i}){return(0,r.jsx)(a.Icon20Favorite,{className:(0,s.classNames)(n.default.favorite,{[n.default.active]:e},t),...i})}},833454:(e,t,i)=>{i.d(t,{AgeRestrictedOverlay:()=>o});var r=i(474848),s=i(788032),a=i(560150),n=i(863444);function o(){const{translate:e}=(0,s.useLangPack)();return(0,r.jsx)(n.Overlay,{icon:(0,r.jsx)(a.Icon2418CircleOutline,{}),description:e("stickers_kit_sticker_age_restricted")})}},808240:(e,t,i)=>{i.d(t,{BannedOverlay:()=>o});var r=i(474848),s=i(59835),a=i(788032),n=i(863444);function o(){const{translate:e}=(0,a.useLangPack)();return(0,r.jsx)(n.Overlay,{icon:(0,r.jsx)(s.Icon24BlockOutline,{}),description:e("stickers_kit_sticker_banned")})}},134124:(e,t,i)=>{i.d(t,{DeletedOverlay:()=>o});var r=i(474848),s=i(850767),a=i(788032),n=i(863444);function o(){const{translate:e}=(0,a.useLangPack)();return(0,r.jsx)(n.Overlay,{icon:(0,r.jsx)(s.Icon24DeleteOutline,{}),description:e("stickers_kit_sticker_deleted")})}},340720:(e,t,i)=>{i.d(t,{ModerationOverlay:()=>o});var r=i(474848),s=i(13966),a=i(788032),n=i(863444);function o(){const{translate:e}=(0,a.useLangPack)();return(0,r.jsx)(n.Overlay,{icon:(0,r.jsx)(s.Icon24ClockOutline,{}),description:e("stickers_kit_ugc_sticker_in_moderation")})}},863444:(e,t,i)=>{i.d(t,{Overlay:()=>o});var r=i(474848),s=i(8520),a=i(753457),n=i(679218);function o({icon:e,description:t,className:i}){return(0,r.jsxs)("div",{className:(0,s.classNames)(n.default.overlay,i),children:[e,t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Spacing,{size:2}),(0,r.jsx)(a.Subhead,{dangerouslySetInnerHTML:{__html:t}})]})]})}},237927:(e,t,i)=>{i.d(t,{useOverlay:()=>c});var r=i(474848),s=i(808240),a=i(134124),n=i(340720),o=i(833454);function c({isUGC:e,isDeleted:t,isBanned:i,isRejected:c,isClaimed:l,isActiveAgeRestriction:d}){return e?t?(0,r.jsx)(a.DeletedOverlay,{}):i||c?(0,r.jsx)(s.BannedOverlay,{}):l?(0,r.jsx)(n.ModerationOverlay,{}):d?(0,r.jsx)(o.AgeRestrictedOverlay,{}):null:null}},676762:(e,t,i)=>{i.d(t,{LazyStickerRich:()=>c});var r=i(474848),s=i(296540),a=i(753457),n=i(8520);const o=(0,s.lazy)((()=>(0,n.asyncImportLoader)((async()=>{const{StickerRich:e}=await Promise.all([i.e(89631),i.e(46410),i.e(15582),i.e(50756)]).then(i.bind(i,492924));return{default:e}}))));function c(e){const{size:t}=e.baseStickerProps;return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{style:{width:t,height:t},children:(0,r.jsx)(a.Spinner,{})}),children:(0,r.jsx)(o,{...e})})}},492924:(e,t,i)=>{i.d(t,{StickerRich:()=>l});var r=i(474848),s=i(43684),a=i(864585),n=i(465041),o=i(241360),c=i(292877);function l({baseStickerProps:e,wrapperProps:t,popupProps:i}){var l;const{sticker:d}=e,u=(0,o.getStickerContext)(d);e.sticker=u,(l=t).icon??(l.icon=(0,c.getDefaultIcon)(d));const h=(0,r.jsx)(s.Sticker,{...e}),{isUGC:m,isPopup:g}=u;return g?(0,r.jsx)(a.PopupWrapper,{wrapperProps:t,...i,children:h}):m?(0,r.jsx)(n.Wrapper,{...t,children:h}):h}},864585:(e,t,i)=>{i.d(t,{PopupWrapper:()=>o});var r=i(474848),s=i(8520),a=i(465041),n=i(503416);function o({wrapperProps:e,isAnimationPlaying:t,children:i}){return(0,r.jsx)(a.Wrapper,{...e,contentClassName:(0,s.classNames)(e.contentClassName,n.default.iconAnimated),stickerContainerClassName:(0,s.classNames)(e.stickerContainerClassName,{[n.default.stickerAnimationIsPlaying]:t}),children:i})}},465041:(e,t,i)=>{i.d(t,{Wrapper:()=>c});var r=i(474848),s=i(753457),a=i(8520),n=i(844731),o=i(404308);function c({icon:e,children:t,iconPosition:i,iconWrapperRef:c,onContentClick:l,contentClassName:d="",wrapperClassName:u="",stickerContainerClassName:h=""}){const m=(0,n.stylesModifier)(i);return(0,r.jsxs)("div",{"data-testid":"sticker-rich-wrapper",className:(0,a.classNames)(o.default.wrapper,m.wrapper,u),children:[(0,r.jsx)("div",{"data-testid":"sticker-rich-sticker-wrapper",className:(0,a.classNames)(h,m.stickerWrapper),children:t}),(0,r.jsx)("div",{"data-testid":"sticker-rich-icon-wrapper",className:(0,a.classNames)(o.default.icon,m.icon,d),children:(0,r.jsx)(s.Tappable,{hoverMode:"opacity",activeMode:"opacity",disabled:!l,getRootRef:c,onClick:l,children:e})})]})}},844731:(e,t,i)=>{i.d(t,{stylesModifier:()=>a});var r=i(8520),s=i(404308);const a=(e="rightInset")=>{let t={wrapper:"",stickerWrapper:"",icon:""};switch(e){case"leftAbsolute":return{...t,icon:(0,r.classNames)(s.default.iconAbsolute,s.default.iconAbsoluteLeft)};case"rightAbsolute":return{...t,icon:(0,r.classNames)(s.default.iconAbsolute,s.default.iconAbsoluteRight)};case"leftInset":return{...t,icon:(0,r.classNames)(s.default.iconAbsolute,s.default.iconAbsoluteInsetLeft)};case"rightInset":return{...t,icon:(0,r.classNames)(s.default.iconAbsolute,s.default.iconAbsoluteInsetRight)};case"leftRelative":return{...t,wrapper:(0,r.classNames)(s.default.wrapperFlex,s.default.wrapperFlexLeft),icon:(0,r.classNames)(s.default.iconRelative,s.default.iconRelativeLeft)};case"rightRelative":return{...t,wrapper:(0,r.classNames)(s.default.wrapperFlex,s.default.wrapperFlexRight),icon:(0,r.classNames)(s.default.iconRelative,s.default.iconRelativeRight)};default:return t}}},292877:(e,t,i)=>{i.d(t,{getDefaultIcon:()=>n});var r=i(474848),s=i(171741),a=i(241360);const n=e=>{const t=(0,a.getStickerContext)(e),{isUGC:i}=t;return i?(0,r.jsx)(s.Icon20UgcChatStickerCircleFillBlackAlpha,{}):null}},241360:(e,t,i)=>{i.d(t,{getStickerContext:()=>s});var r=i(160174);function s(e){return e instanceof r.StickerContext?e:new r.StickerContext(e)}},160174:(e,t,i)=>{i.d(t,{StickerContext:()=>r,getStickerContext:()=>s});class r{get rawData(){return this.ugc||this.base}get isUGC(){return Boolean(this.ugc)}get isPopup(){return Boolean(this.base?.popup)}get isBase(){return Boolean(this.base)}get id(){return this.base?.sticker_id||this.ugc?.id}get ownerId(){return this.ugc?.owner_id}get packId(){return this.base?.product_id||this.ugc?.pack_id}get images(){return this.base?.images||this.ugc?.images}get imagesWithBackground(){return this.base?.images_with_background||this.base?.images||this.ugc?.images}get animations(){return this.base?.animations}get animationUrl(){return this.base?.animation_url}get imageConfigContext(){return this.base?.image_config_context}get isAllowed(){return!!this.isUGC||this.base?.is_allowed}get isActiveAgeRestriction(){return"age_18"===this.ugc?.active_restriction}get isBanned(){return"banned"===this.ugc?.status}get isRejected(){return"rejected"===this.ugc?.status}get isDeleted(){return Boolean(this.ugc?.is_deleted)}get isClaimed(){return Boolean(this.ugc?.is_claimed)}get popupLayers(){return this.base?.popup?.layers}constructor(e){e&&("id"in e?this.ugc=e:"sticker_id"in e&&(this.base=e))}}function s(...e){return new r(...e)}},74423:(e,t,i)=>{i.d(t,{BaseUrlBuilder:()=>o,BaseUrlImageVariant:()=>a,Theme:()=>r});var r,s,a,n=i(472886);!function(e){e.LIGHT="light",e.DARK="dark"}(r||(r={})),function(e){e.PNG="png"}(s||(s={})),function(e){e.SQUARE="square"}(a||(a={}));class o{setSize(e){return this.size=e,this}setTheme(e){return this.theme=e,this}setFormat(e){return this.format=e,this}setImageId(e){return this.imageId=e,this}setDefaultConfigId(e){return this.defaultConfigId=e,this}setImages(e){return this.images=e,this}setConfigs(e){return this.configs=e,this}setConfigContext(e){return this.configContext=e,this}build(){return this.images?this.findImage():this.configContext||this.configs?.length?this.buildBaseUrl():void 0}static build({config:e,variant:t,size:i,retinaSize:r,format:s=o.DEFAULT_FORMAT}){if(!e)return"";const{base_url:a,version:c}=e;r&&n.PIXEL_RATIO>n.DEFAULT_PIXEL_RATIO&&(i=r);return`${a}/${t}${i>1?`_${i}x`:""}.${s}${void 0!==c?`?${c}`:""}`}get retinaSize(){return this.upscale?Number(this.size)*n.PIXEL_RATIO:Number(this.size)}static getAnimation({type:e,animations:t}){return t?.find((t=>t.type===e))}findImage(){const e=this.retinaSize;return this.images?.find((t=>t.theme===this.theme&&(t.height>=e||t.width>=e)))?.url||this.images?.[this.images.length-1]?.url}buildBaseUrl(){const{config_id:e}=this.configContext||{},t=this.configs?.find((({id:t})=>t===e||t===this.defaultConfigId));if(!t)return this.findImage();const{pattern:i,sizes:r,theme_modifiers:s}=t;return i.replace(/{([^]+?)}/g,((e,t)=>{switch(t){case"image_id":return this.getImageIdModifier();case"size":return this.getSizeModifier(r);case"version":return this.getVersionModifier();case"theme_modifier":return this.getCommonModifier(s,this.theme);case"format":return this.getCommonModifier(this.formatModifiers,this.format)}return""}))}getImageIdModifier(){return String(this.imageId)}getSizeModifier(e){const t=this.retinaSize,i=e.find((({width:e,height:i})=>e>=t||i>=t));if(!i)return String(t);const{modifier:r,format_modifiers:s}=i;return this.formatModifiers=s,r}getVersionModifier(){const e=this.configContext?.version;return e?String(e):""}getCommonModifier(e,t){const i=e?.find((({id:e})=>e===t));if(!i)return"";const{modifier:r}=i;return r}constructor({size:e,theme:t,format:i,upscale:a,imageId:n,defaultConfigId:c,images:l,configs:d,configContext:u}){this.format=o.DEFAULT_FORMAT,this.upscale=!0,this.size=e,this.theme=t||r.LIGHT,this.format=i||s.PNG,this.imageId=n,this.defaultConfigId=c,void 0!==a&&(this.upscale=a),l?.[0]?.theme&&(l=l.sort((({theme:e},{theme:i})=>Number(e===t)-Number(i===t)))),this.images=l,this.configs=d,this.configContext=u}}o.DEFAULT_FORMAT=s.PNG},993447:(e,t,i)=>{function r(e,t,i){return Math.max(t,Math.min(e,i))}i.d(t,{clamp:()=>r})},472886:(e,t,i)=>{i.d(t,{DEFAULT_PIXEL_RATIO:()=>s,PIXEL_RATIO:()=>a});var r=i(993447);const s=1,a=Math.ceil((0,r.clamp)(window.devicePixelRatio,1,2))}}]);try{stManager.done("dist/web/chunks/sticker-lib.50cb0ba5.js")}catch(e){}