/*! For license information please see common.ff777f3b.js.LICENSE.txt */
(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[23592],{708742:(e,t,o)=>{"use strict";o.d(t,{APIErrorType:()=>c,api:()=>P,login:()=>U,removeLoginCache:()=>F,setApiConfig:()=>I,setLoginConfig:()=>R,upload:()=>S});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},i=function(){return(i=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=function(){var e=this;this.get=function(){return e.promise},this.resolve=function(t){return e.resolveHandler(t)},this.reject=function(t){return e.rejectHandler(t)},this.promise=new Promise((function(t,o){e.resolveHandler=t,e.rejectHandler=o}))};function s(e){return Object.keys(e).map((function(t){var o=e[t];return t=encodeURIComponent(t||""),o=encodeURIComponent(void 0===o?"":o),"".concat(t,"=").concat(o)})).join("&")}function a(e,t,o){void 0===o&&(o={});var n=s(t);return fetch(e,i({method:"POST",body:n,mode:"cors",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"}},o)).then((function(e){return e.json()}))}var _,c,l=function(e){var t={v:e.version||"5.131"};return e.appId&&(t.client_id=e.appId),t},u=function(e){return{access_token:e.accessToken}},d=function(e,t){return void 0===t&&(t={}),"".concat(e,"-").concat(s(Object.assign({},t)))},p=function(e){return 29===e||9===e||6===e},h=function(e,t){if(e.apiConfig.throwFullErrors){var o=new Error("Api request failed",e.asyncBaseError?{cause:e.asyncBaseError}:void 0);Object.entries(t).forEach((function(e){var t=e[0],n=e[1];o[t]=n})),e.reject(o)}else e.reject(t)},m=function(){function e(e,t,o,n,i){void 0===o&&(o={}),void 0===n&&(n={}),void 0===i&&(i={});var r=this;this.method=e,this.methodParams=t,this.fetchOptions=i,this.overrideApiConfig=n,this.apiConfig=Object.assign({},o,n),this.grouping=this.apiConfig.grouping,this.queryParams=l(this.apiConfig),this.apiConfig.captureAsyncStacktrace&&(this.asyncBaseError=new Error("Async error"));var s=u(this.apiConfig);this.bodyParams=Object.assign({},t,s),this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t}))}return e.prototype.setAccessToken=function(e){this.bodyParams.access_token=e},e.prototype.setGrouping=function(e){this.grouping=e},e.prototype.setParams=function(e){this.methodParams=e},e.prototype.canGroupInExecute=function(){return!this.method.includes("execute")&&!!this.apiConfig.accessToken&&!this.methodParams.v&&!1!==this.grouping&&void 0===this.fetchOptions.method&&void 0===this.fetchOptions.headers&&void 0===this.fetchOptions.signal},e.prototype.toString=function(){var e=this,t={};return Object.keys(this.methodParams).forEach((function(o){var n=e.methodParams[o];null!=n&&(t[o]="object"==typeof n?String(n):n)})),"API.".concat(this.method,"(").concat(JSON.stringify(t),")")},e}(),E=function(e){void 0===e&&(e=1/0);var t=this;this.tries=0,this.increment=function(){t.tries++},this.get=function(){return t.tries},this.isExceeded=function(){return t.tries>=t.maxTries},this.maxTries=e},f=function(){var e=this;this.retries=new Map,this.get=function(t){return e.retries.get(t)},this.create=function(t,o){return e.retries.set(t,new E(o)),e.retries.get(t)},this.delete=function(t){e.retries.delete(t)}},g=function(e){return 0===e?Promise.resolve():new Promise((function(t){var o=function(e){if(0===e)return 0;if(window.FORCED_API_WAIT_TIME)return window.FORCED_API_WAIT_TIME;var t=Math.random(),o=100*Math.pow(2,e)/2;return o+o*t}(e);setTimeout((function(){return t()}),o)}))};!function(e){e.INPUT="input",e.ALERT="alert",e.FULLSCREEN="fullscreen"}(_||(_={})),function(e){e.API_ERROR="api_error",e.NETWORK_ERROR="network_error"}(c||(c={}));var y={domain:"api.vk.com",maxRetries:10,grouping:!0},v=new f,w=new f,A=null,b=null,T=[];function I(e){e=Object.assign({},y,e),y=e}function P(e,t,o,n){void 0===o&&(o={}),void 0===n&&(n={});var i=new m(e,t,y,o,n);return i.canGroupInExecute()?(T.push(i),b&&window.clearTimeout(b),b=window.setTimeout((function(){!function e(t,o,n,i){if(void 0===n&&(n={}),1===t.length)C(u=t.shift()),u.setGrouping(!1);else{for(var r=[],s=[],a=[],_=0;_<t.length;_+=1)if(t[_].canGroupInExecute()){var l=t.splice(_,1)[0];if(_-=1,r.push(l),i&&0!==t.length&&(s.push("'".concat(l.method,"': fork(").concat(l,")")),a.push("wait(forks['".concat(l.method,"'])"))),r.length>=25)break}var u,d="return [".concat(r.join(","),"];");if(i){var p=r[r.length-1];d="\n        var forks = { ".concat(s.join(",")," };\n\n        return [").concat(a.join(","),",").concat(p,"];\n      ")}(u=new m("execute",{code:d},y,o,n)).setGrouping(!0),C(u),u.promise.then((function(e){var t=0;e.response.forEach((function(o,n){!1===o?(h(r[n],{type:c.API_ERROR,error:e.execute_errors[t]}),t+=1):r[n].resolve(o)}))}),(function(e){r.forEach((function(t){return h(t,e)}))}))}t.length>0&&window.setTimeout((function(){return e(t,o,n,i)}),1e3)}(T,o,n,i.apiConfig.enableForks)}),0)):(i.setGrouping(!1),C(i)),i.promise}function C(e){var t=e.methodParams.captcha_sid;A&&A.sid!==t&&h(e,{type:c.API_ERROR,error:{error_code:0,error_msg:"Ddos limit exceeded",error_text:"Ddos limit exceeded"}});var o=e.apiConfig,n=o.domain,_=o.formattedExecuteResponse,l=s(e.queryParams),u="https://".concat(n,"/method/").concat(e.method,"?").concat(l),m=Object.assign({},e.methodParams,e.bodyParams),E=d(u,e.methodParams),f=w.get(E)||w.create(E,e.apiConfig.maxRetries),y=v.get(E)||v.create(E,e.apiConfig.maxRetries);g(f.get()||y.get()).then((function(){return a(u,m,e.fetchOptions)})).then((function(o){var n,s,a,l,u,d,m;if(void 0!==o.response)return w.delete(E),v.delete(E),A&&A.sid===t&&(null===(n=A.task)||void 0===n||n.resolve(void 0),A=null,null===(a=(s=e.apiConfig).onCaptchaSuccess)||void 0===a||a.call(s)),o.execute_errors?_||e.grouping?e.resolve({response:o.response||[],execute_errors:o.execute_errors}):e.resolve(i(i({},o.response),{execute_errors:o.execute_errors})):e.grouping?e.resolve({response:o.response}):e.resolve(o.response);var g=o.error;if(!g)return h(e,{type:c.API_ERROR,error:{error_code:0,error_msg:"Unknown",error_text:"Unknown"}});if(e.apiConfig.onCaptcha&&14===(null==g?void 0:g.error_code)){var b=g,T=b.captcha_sid,P=b.captcha_img,S=b.captcha_height,O=b.captcha_width,M=b.captcha_attempt,D=b.captcha_ts,L=b.is_refresh_enabled,k=b.is_sound_captcha_available,R=b.captcha_track,N=b.is_enabled_vkui,B=b.uiux_changes;if(A){if(A.sid!==t)return A.task.get().then((function(){return C(e)}));var x=new r;x.get().then(A.task.resolve).catch(A.task.reject),A={sid:T,task:x}}else A={sid:T,task:new r};return e.apiConfig.onCaptcha({captcha_sid:T,captcha_img:P,captcha_height:S,captcha_width:O,is_refresh_enabled:L,is_sound_captcha_available:k,captcha_track:R,is_enabled_vkui:N,uiux_changes:B}).then((function(t){var o={captcha_ts:D,captcha_attempt:M},n=Object.assign({},e.methodParams,t,o);return e.setParams(n),C(e)})).catch((function(t){return A=null,e.reject({type:c.API_ERROR,error:t})}))}if(A&&A.sid===t&&(null===(l=A.task)||void 0===l||l.resolve(void 0),A=null,null===(d=(u=e.apiConfig).onCaptchaSuccess)||void 0===d||d.call(u)),0===e.apiConfig.maxRetries)return h(e,{type:c.API_ERROR,error:g});if(f.isExceeded()||y.isExceeded())return w.delete(E),v.delete(E),h(e,{type:c.API_ERROR,error:{error_code:0,error_msg:"Maximum of api retries exceeded",error_text:g.error_text}});if(p(g.error_code))return y.increment(),w.delete(E),C(e);v.delete(E);var U=!(null===(m=e.overrideApiConfig)||void 0===m?void 0:m.accessToken)&&(5===g.error_code||28===g.error_code);return e.apiConfig.onTokenExpired&&U?e.apiConfig.onTokenExpired().then((function(t){return f.increment(),I({accessToken:t}),e.setAccessToken(t),C(e)})):(w.delete(E),h(e,{type:c.API_ERROR,error:o.error}))}),(function(t){return e.reject({type:c.NETWORK_ERROR,error:t})}))}function S(e,t){return fetch(e,{method:"POST",body:t,mode:"cors"}).then((function(e){return e.json()}))}var O=function(){function e(){}return e.setItemToStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){}},e.getItemFromStorage=function(e){try{return localStorage.getItem(e)}catch(e){}},e.removeItemFromStorage=function(e){try{localStorage.removeItem(e)}catch(e){}},e}(),M=/\d+:[a-zA-Z_]+:login:auth/,D=function(e){return new Promise((function(t){var o,n;null===O.getItemFromStorage(e)?(O.setItemToStorage(e,"1"),t()):setTimeout(t,(void 0===o&&(o=500),void 0===n&&(n=1500),window.FORCED_API_WAIT_TIME?window.FORCED_API_WAIT_TIME:~~(Math.random()*(n-o+1)+o)))}))},L=new f,k={domain:"login.vk.com",maxRetries:3};function R(e){e=Object.assign({},k,e),k=e}var N=new Map,B=new Map,x=!1;function U(e,t,o,n,s){void 0===o&&(o={}),void 0===n&&(n=!1),void 0===s&&(s={});var _=Object.assign({},k,o),c="".concat(_.appId,":").concat(e,":login:auth"),l="".concat(c,"--request"),u=N.get(l);if(u)return u.get();var d=L.get(l)||L.create(l,_.maxRetries);return u=new r,N.set(l,u),D(l).then((function(){return g(d.get())})).then((function(){var r,p=!B.get(l)||n;if(_.disableSaveToken||(r=function(e){var t=O.getItemFromStorage(e),o={};if(t)try{o=JSON.parse(t)}catch(e){}return o}(c)),!p&&(null==r?void 0:r.expires)&&1e3*Number(r.expires)-Date.now()>=6e4)return O.removeItemFromStorage(l),N.delete(l),u.resolve(r);var h={};(null==r?void 0:r.access_token)&&(h.access_token=r.access_token);var m=_.domain,E=_.onCaptcha,f="https://".concat(m,"/?act=").concat(e),g=function(e){return{version:e.version||"1",app_id:e.appId}}(_),y=Object.assign({},t,g,h);F(e,o),a(f,y,s).then((function(n){var r;if("error"in n&&(n=function(e){var t,o=e.error,n=o.error_code,i=o.error_msg;switch(n){case 14:var r=e.error,s=r.captcha_sid,a=r.captcha_img,_=r.captcha_width,c=r.captcha_height,l=r.captcha_attempt,u=r.captcha_ts,d=r.is_refresh_enabled,p=r.is_sound_captcha_available;t={type:"captcha",captcha_type:"regular",captcha_sid:s,captcha_img:a,captcha_track:r.captcha_track,captcha_height:c,captcha_width:_,captcha_attempt:l,captcha_ts:u,is_refresh_enabled:d,is_sound_captcha_available:p,is_enabled_vkui:r.is_enabled_vkui,uiux_changes:r.uiux_changes};break;case 6:t={type:"error",error_info:"check result failure",error_code:String(n)};break;default:t={type:"error",error_info:i,error_code:String(n)}}return t}(n)),"error"===n.type)return N.delete(l),"check result failure"===n.error_info?d.isExceeded()?(L.delete(l),u.reject({type:"login_error",error:{error_code:0,error_msg:"Maximum of login retries exceeded"}})):(d.increment(),U(e,t,o).then(u.resolve).catch(u.reject)):(L.delete(l),u.reject({type:"login_error",error:n.error_info,errorCode:null!==(r=n.error_code)&&void 0!==r?r:"unknown_error"}));if(L.delete(l),"captcha"===n.type){if(!E)return u.reject({type:"login_error",error:"captcha"});var s=n.captcha_sid,a=n.captcha_img,p=n.captcha_type,h=n.captcha_height,m=n.captcha_width,f=n.captcha_ts,g=n.captcha_attempt,y=n.is_refresh_enabled,v=n.is_sound_captcha_available,w=n.captcha_track,A=n.is_enabled_vkui,b=n.uiux_changes;return x=!0,E({captcha_sid:s,captcha_img:a,captcha_type:p,captcha_height:h,captcha_width:m,is_refresh_enabled:y,is_sound_captcha_available:v,captcha_track:w,is_enabled_vkui:A,uiux_changes:b}).then((function(n){var i={captcha_ts:f,captcha_attempt:g},r=Object.assign({},t,n,i);return N.delete(l),U(e,r,o).then(u.resolve).catch(u.reject).finally((function(){var e;x&&(x=!1,null===(e=_.onCaptchaSuccess)||void 0===e||e.call(_))}))})).catch((function(){N.delete(l),u.reject({type:"login_error",error:"captcha"})}))}var T=n.data.expires||1/0;_.disableSaveToken||O.setItemToStorage(c,JSON.stringify(i(i({},n.data),{expires:T}))),O.removeItemFromStorage(l),B.set(l,!0),N.delete(l),u.resolve(n.data)}),(function(e){L.delete(l),N.delete(l),u.reject({type:"network_error",error:e})}))})),u.get()}function F(e,t){if(e){var o=k;t&&(o=Object.assign({},k,t));var n="".concat(o.appId,":").concat(e,":login:auth");O.removeItemFromStorage(n)}else Object.keys(localStorage).forEach((function(e){M.test(e)&&O.removeItemFromStorage(e)}))}var W,K,V=function(){function e(e,t){this.config=i(i({},e),t)}return e.prototype.makeNativeError=function(e){var t=new Error("Api request failed.");return Object.entries(e).forEach((function(e){var o=e[0],n=e[1];t[o]=n})),t},e.prototype.applyInterceptors=function(e,t){var o=Promise.resolve(t);return e&&e.forEach((function(e){o=o.then((function(t){return e(t)}))})),o},e.prototype.rejectWithGeneralError=function(e,t){return this.applyInterceptors(this.config.errorInterceptors,t).then((function(t){e.reject(t)}))},e.prototype.rejectWithApiError=function(e,t){var o=this;return this.applyInterceptors(this.config.errorInterceptors,t).then((function(t){e.reject(o.makeNativeError(t))}))},e.prototype.getConfig=function(){return this.config},e.prototype.updateConfig=function(e){this.config=i(i({},this.config),e)},e}(),H=function(){function e(e,t,o,n,i){void 0===i&&(i={});var r=this;this.method=e,this.methodParams=t,this.fetchOptions=i,this.overrideApiConfig=n,this.apiConfig=Object.assign({},o,n),this.grouping=this.apiConfig.grouping,this.queryParams=l(this.apiConfig);var s=u(this.apiConfig);this.bodyParams=Object.assign({},t,s),this.promise=new Promise((function(e,t){r.resolve=e,r.reject=t}))}return e.prototype.setAccessToken=function(e){this.bodyParams.access_token=e},e.prototype.setGrouping=function(e){this.grouping=e},e.prototype.setParams=function(e){this.methodParams=e},e.prototype.canGroupInExecute=function(){return!this.method.includes("execute")&&!!this.apiConfig.accessToken&&!this.methodParams.v&&!1!==this.grouping&&void 0===this.fetchOptions.method&&void 0===this.fetchOptions.headers&&void 0===this.fetchOptions.signal},e.prototype.toString=function(){var e=this,t={};return Object.keys(this.methodParams).forEach((function(o){var n=e.methodParams[o];null!=n&&(t[o]="object"==typeof n?String(n):n)})),"API.".concat(this.method,"(").concat(JSON.stringify(t),")")},e}();!function(e){e.INPUT="input",e.ALERT="alert",e.FULLSCREEN="fullscreen"}(W||(W={})),function(e){e.OK="ok",e.CAPTCHA_ERROR="captcha error",e.API_ERROR="api error",e.UNKNOWN="unknown"}(K||(K={}));var j={domain:"api.vk.com",urlConstructor:function(e,t,o){var n="https://".concat(e,"/method/").concat(t);return o?"".concat(n,"?").concat(s(o)):n},maxRetries:10,grouping:!0};!function(e){function t(t){var o=e.call(this,j,t||{})||this;return o.queue=[],o.requestRetries=new f,o.loginRetries=new f,o.activeCaptchaRequest=null,o.timeoutId=null,o}(function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)})(t,e),t.prototype.processSingleItemQueue=function(){var e=this.queue.shift();this.makeRequest(e),e.setGrouping(!1)},t.prototype.getTasksToExecute=function(){for(var e=[],t=[],o=[],n=0;n<this.queue.length;n+=1)if(this.queue[n].canGroupInExecute()){var i=this.queue.splice(n,1)[0];if(n-=1,e.push(i),0!==this.queue.length&&(t.push("'".concat(i.method,"': fork(").concat(i,")")),o.push("wait(forks['".concat(i.method,"'])"))),e.length>=25)break}return{tasks:e,forks:t,results:o}},t.prototype.addExecuteTaskResponseHandler=function(e,t){var o=this;e.promise.then((function(e){var o=0;e.response.forEach((function(n,i){!1===n?(t[i].reject(e.execute_errors[o]),o+=1):t[i].resolve(n)}))}),(function(e){t.forEach((function(t){o.rejectWithGeneralError(t,e)}))}))},t.prototype.startProcessingQueue=function(e,t){var o=this;if(void 0===t&&(t={}),1===this.queue.length)return this.processSingleItemQueue();var n=this.getTasksToExecute(),i=n.tasks,r=n.forks,s=n.results,a=i[i.length-1],_="\n      var forks = { ".concat(r.join(",")," };\n\n      return [").concat(s.join(","),",").concat(a,"];\n    "),c=new H("execute",{code:_},this.config,e,t);c.setGrouping(!0),this.makeRequest(c),this.addExecuteTaskResponseHandler(c,i),this.queue.length>0&&window.setTimeout((function(){return o.startProcessingQueue(e,t)}),1e3)},t.prototype.getResponseType=function(e,t){var o=e.error;return void 0!==e.response?K.OK:o?t&&14===(null==o?void 0:o.error_code)?K.CAPTCHA_ERROR:K.API_ERROR:K.UNKNOWN},t.prototype.getDomain=function(e){return localStorage.getItem(t.FORCED_HOST_STORAGE_KEY)||e.apiConfig.domain},t.prototype.handleOkayResponse=function(e,t,o,n){var i,r,s;return this.loginRetries.delete(o),this.requestRetries.delete(o),this.activeCaptchaRequest&&this.activeCaptchaRequest.sid===n&&(null===(i=this.activeCaptchaRequest.task)||void 0===i||i.resolve(void 0),this.activeCaptchaRequest=null,null===(s=(r=t.apiConfig).onCaptchaSuccess)||void 0===s||s.call(r)),e.execute_errors?t.resolve({response:e.response||[],execute_errors:e.execute_errors}):t.grouping?t.resolve({response:e.response}):t.resolve(e.response)},t.prototype.handleUnknownResponse=function(e){return this.rejectWithApiError(e,{error_code:0,error_msg:"Unknown",error_text:"Unknown"})},t.prototype.handleCaptchaError=function(e,t,o,n){var i=this;if(o){var s=e.captcha_sid,a=e.captcha_img,_=e.captcha_height,c=e.captcha_width,l=e.captcha_ts,u=e.captcha_attempt,d=e.is_sound_captcha_available,p=e.is_refresh_enabled,h=e.captcha_track,m=e.is_enabled_vkui,E=e.uiux_changes;if(this.activeCaptchaRequest){if(this.activeCaptchaRequest.sid!==n)return this.activeCaptchaRequest.task.get().then((function(){return i.makeRequest(t)}));var f=new r;f.get().then(this.activeCaptchaRequest.task.resolve).catch((function(e){if(i.activeCaptchaRequest)return i.rejectWithGeneralError(i.activeCaptchaRequest.task,e)})),this.activeCaptchaRequest={sid:s,task:f}}else this.activeCaptchaRequest={sid:s,task:new r};return o({captcha_sid:s,captcha_img:a,captcha_height:_,captcha_width:c,is_refresh_enabled:p,is_sound_captcha_available:d,captcha_track:h,is_enabled_vkui:m,uiux_changes:E}).then((function(e){var o={captcha_ts:l,captcha_attempt:u},n=Object.assign({},t.methodParams,e,o);return t.setParams(n),i.makeRequest(t)})).catch((function(e){return i.activeCaptchaRequest=null,i.rejectWithGeneralError(t,e)}))}},t.prototype.handleApiError=function(e,t,o,n,i,r){var s,a,_,c,l=this;if(this.activeCaptchaRequest&&this.activeCaptchaRequest.sid===r&&(null===(s=this.activeCaptchaRequest.task)||void 0===s||s.resolve(void 0),this.activeCaptchaRequest=null,null===(_=(a=t.apiConfig).onCaptchaSuccess)||void 0===_||_.call(a)),0===t.apiConfig.maxRetries)return this.rejectWithApiError(t,e);if(o.isExceeded()||n.isExceeded())return this.loginRetries.delete(i),this.requestRetries.delete(i),this.rejectWithApiError(t,{error_code:0,error_msg:"Maximum of api retries exceeded",error_text:e.error_text});if(p(e.error_code))return this.handleFoodControlError(t,n,i);this.requestRetries.delete(i);var u=!(null===(c=t.overrideApiConfig)||void 0===c?void 0:c.accessToken)&&(5===e.error_code||28===e.error_code);return t.apiConfig.onTokenExpired&&u?t.apiConfig.onTokenExpired().then((function(e){return o.increment(),l.updateConfig({accessToken:e}),t.setAccessToken(e),l.makeRequest(t)})):(this.loginRetries.delete(i),this.rejectWithApiError(t,e))},t.prototype.processResponse=function(e,t,o,n,i,r){var s=this;return this.applyInterceptors(this.config.responseInterceptors,e).then((function(e){switch(s.getResponseType(e,!!t.apiConfig.onCaptcha)){case K.OK:return s.handleOkayResponse(e,t,i,r);case K.API_ERROR:return s.handleApiError(e.error,t,o,n,i,r);case K.CAPTCHA_ERROR:return s.handleCaptchaError(e.error,t,t.apiConfig.onCaptcha,r);case K.UNKNOWN:default:return s.handleUnknownResponse(t)}}))},t.prototype.makeRequest=function(e){var t=this,o=e.methodParams.captcha_sid;if(this.activeCaptchaRequest&&this.activeCaptchaRequest.sid!==o)this.rejectWithApiError(e,{error_code:0,error_msg:"Ddos limit exceeded",error_text:"Ddos limit exceeded"});else{var n=this.getDomain(e),i=this.config.urlConstructor(n,e.method,e.queryParams),r=Object.assign({},e.methodParams,e.bodyParams),s=d(i,e.methodParams),_=this.loginRetries.get(s)||this.loginRetries.create(s,e.apiConfig.maxRetries),c=this.requestRetries.get(s)||this.requestRetries.create(s,e.apiConfig.maxRetries);g(_.get()||c.get()).then((function(){return a(i,r,e.fetchOptions)})).then((function(n){return t.processResponse(n,e,_,c,s,o)})).catch((function(o){return t.rejectWithGeneralError(e,o)}))}},t.prototype.createRequestTak=function(e,t,o,n){var i=this;void 0===o&&(o={}),void 0===n&&(n={});var r=new H(e,t,this.config,o,n);return r.canGroupInExecute()?(this.queue.push(r),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((function(){i.startProcessingQueue(o,n)}),0)):(r.setGrouping(!1),this.makeRequest(r)),r.promise},t.prototype.handleFoodControlError=function(e,t,o){return t.increment(),this.loginRetries.delete(o),this.makeRequest(e)},t.prototype.request=function(e,t,o,n){var i=this;void 0===o&&(o={}),void 0===n&&(n={});var r={method:e,methodParams:t,overrideApiConfig:o,fetchOptions:n};return this.applyInterceptors(this.config.requestInterceptors,r).then((function(){return i.createRequestTak(e,t,o,n)}))},t.FORCED_HOST_STORAGE_KEY="@vk-ecosystem/api:api_host"}(V);Promise.prototype.finally||(Promise.prototype.finally=function(e){if("function"!=typeof e)return this.then(e,e);var t=this.constructor||Promise;return this.then((function(o){return t.resolve(e()).then((function(){return o}))}),(function(o){return t.resolve(e()).then((function(){throw o}))}))})},426622:(e,t,o)=>{"use strict";o.d(t,{IconIllustrationSoundWaveLeft36h:()=>n});var n=(0,o(844990).makeIcon)("IconIllustrationSoundWaveLeft36h","illustration_sound_wave_left_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_left_36h"><path d="M59.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M42.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0zM23.693 5.25a1.25 1.25 0 0 0-2.5 0v25.788a1.25 1.25 0 1 0 2.5 0zm-8.595 6.446a1.25 1.25 0 0 0-2.5 0V24.59a1.25 1.25 0 0 0 2.5 0zm15.942-1.25c.69 0 1.25.56 1.25 1.25V24.59a1.25 1.25 0 0 1-2.5 0V11.696c0-.69.56-1.25 1.25-1.25M6.5 14.275a1.25 1.25 0 0 0-2.5 0v7.737a1.25 1.25 0 0 0 2.5 0z" /></symbol>',72,36,!1,void 0)},155581:(e,t,o)=>{"use strict";o.d(t,{IconIllustrationSoundWaveRight36h:()=>n});var n=(0,o(844990).makeIcon)("IconIllustrationSoundWaveRight36h","illustration_sound_wave_right_36h","0 0 72 36",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 72 36" id="illustration_sound_wave_right_36h"><path d="M12.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zM4.96 10.446c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0zM48.307 5.25a1.25 1.25 0 0 1 2.5 0v25.788a1.25 1.25 0 1 1-2.5 0zm8.595 6.446a1.25 1.25 0 0 1 2.5 0V24.59a1.25 1.25 0 0 1-2.5 0zm-15.942-1.25c-.69 0-1.25.56-1.25 1.25V24.59a1.25 1.25 0 0 0 2.5 0V11.696c0-.69-.56-1.25-1.25-1.25m24.54 3.829a1.25 1.25 0 0 1 2.5 0v7.737a1.25 1.25 0 0 1-2.5 0z" /></symbol>',72,36,!1,void 0)},926505:(e,t,o)=>{"use strict";o.r(t),o.d(t,{Embedded:()=>n});var n=function(){function e(e){var t=this;this.receiver=!1,this._requestId=1,this._requests={},this._onMessage=function(e){if(e.origin===t.origin&&e.data&&e.data.embeddedName===t.name){t.target=e.source;var o=e.data,n=o.response;if(n){var i=t._requests[n];i&&i(o.data),t._requests[n]=null}else o.request&&o.action&&Promise.resolve(t.onMessage(o.action,o.data)).then((function(e){t._sendResponse(o.request,o.action,e)}))}},this.name=e.name,this.target=e.target,this.origin=e.origin||"https://"+e.host,this.receiver=e.receiver||!1,this.onMessage=e.onMessage,window.addEventListener("message",this._onMessage,!1)}return e.prototype._sendResponse=function(e,t,o){this.target&&this.target.postMessage({embeddedName:this.name,action:t,response:e,data:o},this.origin)},e.prototype.sendMessage=function(e,t){var o=this;if(void 0===t&&(t={}),!this.target)return Promise.reject();var n=this._requestId,i=new Promise((function(e){o._requestId++,o._requests[n]=e}));return this.target.postMessage({embeddedName:this.name,action:e,data:t,request:n},this.origin),i},e.prototype.destroy=function(){window.removeEventListener("message",this._onMessage,!1),this.target=void 0},e}()},156720:(e,t,o)=>{"use strict";o(296540)},511413:(e,t,o)=>{"use strict";o.d(t,{makeIcon:()=>u});var n=o(171893),i=o(855456),r=o(918542),s=o(296540),a=o(846339),_=o(568329),c=o(622765),l=function(e){var t=e.width,o=void 0===t?0:t,a=e.height,_=void 0===a?0:a,c=e.viewBox,l=e.id,u=e.className,d=void 0===u?"":u,p=e.fill,h=e.getRootRef,m=e.style,E=void 0===m?{}:m,f=e.title,g=e.children,y=(0,r._)(e,["width","height","viewBox","id","className","fill","getRootRef","style","title","children"]),v=s.Children.toArray(g)[0],w=s.isValidElement(v)&&"function"==typeof v.type&&"mountIcon"in v.type,A=Math.max(o,_),b=(0,n._)({width:o,height:_},E);return s.createElement("svg",(0,i._)((0,n._)({"aria-hidden":"true",display:"block"},y),{className:["vkuiIcon","vkuiIcon--".concat(A),"vkuiIcon--w-".concat(o),"vkuiIcon--h-".concat(_),"vkuiIcon--".concat(l),d].join(" ").trim(),viewBox:c,width:o,height:_,style:b,ref:h}),f&&s.createElement("title",null,f),w&&g,s.createElement("use",{xlinkHref:"#".concat(l),style:{fill:"currentColor",color:p}},!w&&g))};function u(e,t,o,r,u,d,p,h){var m=!1;function E(){m||((0,_.addSpriteSymbol)(new a.BrowserSymbol({content:r})),m=!0)}var f=(0,c.warnOnce)(e),g=function(e){if((0,_.useIsomorphicLayoutEffect)(E,[]),p){var r=h?". Замените на ".concat(h):"";f("Иконка устарела"+r)}return s.createElement(l,(0,i._)((0,n._)({},e),{viewBox:o,id:t,width:void 0===e.width||isNaN(e.width)?u:+e.width,height:void 0===e.height||isNaN(e.height)?d:+e.height}))};return g.mountIcon=E,g.displayName=e,g}},775746:(e,t,o)=>{"use strict";o.d(t,{BrowserSprite:()=>_});var n=o(730494),i=o(799407),r=o(50467),s=o(846339),a="http://www.w3.org/2000/svg",_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n._)(this,e),(0,r._)(this,"symbols",new Map),(0,r._)(this,"config",{attrs:{xmlns:a,"xmlns:xlink":"http://www.w3.org/1999/xlink",style:"position:absolute;width:0;height:0","aria-hidden":"true"}}),(0,r._)(this,"node",null),Object.assign(this.config.attrs,t.attrs)}return(0,i._)(e,[{key:"push",value:function(e){var t=this.symbols,o=t.has(e.id);return t.set(e.id,e),!o}},{key:"add",value:function(e){var t=this.push(e);return this.node&&t&&e.mount(this.node),t}},{key:"attach",value:function(e){var t=this;this.node||(this.node=e,this.symbols.forEach((function(t){t.mount(e)})),e.querySelectorAll("symbol").forEach((function(e){var o=s.BrowserSymbol.createFromExistingNode(e);t.add(o)})))}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.node||(this.node=this.render(),t&&e.childNodes[0]?e.insertBefore(this.node,e.firstChild):e.appendChild(this.node)),this.node}},{key:"render",value:function(){var e=document.createElementNS(a,"svg");return Object.entries(this.config.attrs).forEach((function(t){return e.setAttribute(t[0],t[1])})),this.symbols.forEach((function(t){return e.appendChild(t.node)})),e}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node)}}]),e}()},846339:(e,t,o)=>{"use strict";o.d(t,{BrowserSymbol:()=>a});var n=o(730494),i=o(799407),r=o(50467),s=o(878715),a=function(){function e(t){var o=t.content;(0,n._)(this,e),(0,r._)(this,"isMounted",!1),(0,r._)(this,"node",void 0),this.node=(0,s.parse)(o)}return(0,i._)(e,[{key:"id",get:function(){return this.node.id}},{key:"mount",value:function(e){return this.isMounted||(this.isMounted=!0,e.appendChild(this.node)),this.node}},{key:"unmount",value:function(){this.node&&this.node.parentNode&&(this.node.parentNode.removeChild(this.node),this.isMounted=!1)}}],[{key:"createFromExistingNode",value:function(t){var o=new e({content:""});return o.node=t,o}}]),e}()},844990:(e,t,o)=>{"use strict";o.d(t,{makeIcon:()=>n.makeIcon,makeRasterIcon:()=>i.makeRasterIcon});var n=o(511413),i=o(411178);o(156720),o(994026)},994026:(e,t,o)=>{"use strict";o.d(t,{appearanceTypes:()=>i,useIconAppearance:()=>s});var n=o(296540),i=["light","dark"],r=n.createContext("light"),s=(r.Provider,function(){return n.useContext(r)})},411178:(e,t,o)=>{"use strict";o.d(t,{makeRasterIcon:()=>u});var n=o(171893),i=o(918542),r=o(296540),s=o(994026),a=o(243189),_={mdpi:1,hdpi:1.5,xhdpi:1.5,xxhdpi:3,xxxhdpi:4},c=Object.keys(_),l=r.memo((function(e){var t=e.getRootRef,o=e.id,l=e.size,u=e.className,d=(0,i._)(e,["getRootRef","id","size","className"]),p=(0,s.useIconAppearance)(),h=c.reduce((function(e,t){var o=(0,a.getDensityBucketAppearanceKey)(p,t),n=d[o];delete d[o];var i=!0,r=!1,c=void 0;try{for(var l,u=s.appearanceTypes[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var h=l.value,m=(0,a.getDensityBucketAppearanceKey)(h,t);n||(n=d[m]),delete d[m]}}catch(e){r=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw c}}return n&&e.push("".concat(n," ").concat(_[t],"x")),e}),[]).join(", ");return r.createElement("img",(0,n._)({ref:t,"aria-hidden":"true",alt:"",className:["vkuiIcon","vkuiIcon--".concat(l),"vkuiIcon--w-".concat(l),"vkuiIcon--h-".concat(l),"vkuiIcon--".concat(o),"vkuiRasterIcon",u].join(" ").trim(),width:l,height:l,srcSet:h,loading:"lazy",draggable:!1},d))}));function u(e,t,o,i){var s=function(e){return r.createElement(l,(0,n._)({id:t,size:o},i,e))};return s.size=o,s.isRasterIcon=!0,s.displayName=e,s}},243189:(e,t,o)=>{"use strict";o.d(t,{getDensityBucketAppearanceKey:()=>n});var n=function(e,t){return"".concat(e).concat(t)}},568329:(e,t,o)=>{"use strict";o.d(t,{addSpriteSymbol:()=>c,useIsomorphicLayoutEffect:()=>l});var n,i=o(775746),r=o(296540),s=!("undefined"==typeof window||!window.document||!window.document.createElement);if(s){var a="__SVG_SPRITE_NODE__";n=new i.BrowserSprite({attrs:{id:a}});var _=function(){var e=document.getElementById(a);e?n.attach(e):n.mount(document.body),document.removeEventListener("DOMContentLoaded",_)};document.querySelector("body")?_():document.addEventListener("DOMContentLoaded",_)}else n=null;function c(e){n&&n.add(e)}var l=s?r.useLayoutEffect:r.useEffect},878715:(e,t,o)=>{"use strict";function n(e){var t=!!document.importNode,o=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(o,!0):o}o.d(t,{parse:()=>n})},622765:(e,t,o)=>{"use strict";function n(e){var t={};return function(o){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warn";t[o]||(console[n]("[@vkontakte/icons][".concat(e,"] ").concat(o)),t[o]=!0)}}o.d(t,{warnOnce:()=>n})},331599:(e,t,o)=>{"use strict";o.d(t,{Icon12OnlineMobile:()=>n});var n=(0,o(844990).makeIcon)("Icon12OnlineMobile","online_mobile_12","0 0 8 12",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 8 12" id="online_mobile_12"><path fill="currentColor" d="M5.99 0C7.1 0 8 .9 8 2.01v7.98C8 11.1 7.1 12 5.99 12H2.01C.9 12 0 11.1 0 9.99V2.01C0 .9.9 0 2.01 0zm.008 3H2.003a.5.5 0 0 0-.503.502v4.996c0 .277.225.502.503.502h3.995a.5.5 0 0 0 .502-.502V3.503A.5.5 0 0 0 5.997 3" /></symbol>',8,12,!1,void 0)},555738:(e,t,o)=>{"use strict";o.d(t,{Icon16Spinner:()=>n});var n=(0,o(844990).makeIcon)("Icon16Spinner","spinner_16","0 0 16 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16" id="spinner_16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.149 7.065.75.75 0 1 1-1.31.732A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 .001-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd" /></symbol>',16,16,!1,void 0)},679804:(e,t,o)=>{"use strict";o.d(t,{Icon20CalendarOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20CalendarOutline","calendar_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="calendar_outline_20"><path fill-rule="evenodd" d="M6.25 1a.75.75 0 0 1 .75.75v.257Q7.588 1.998 8.317 2h3.366q.729-.002 1.317.007V1.75a.75.75 0 0 1 1.5 0v.356c.428.064.816.172 1.18.357a4.25 4.25 0 0 1 1.857 1.858c.253.497.361 1.04.413 1.67.05.613.05 1.374.05 2.326v3.366c0 .952 0 1.713-.05 2.327-.052.63-.16 1.172-.413 1.67a4.25 4.25 0 0 1-1.857 1.857c-.498.253-1.04.361-1.67.413-.614.05-1.375.05-2.327.05H8.317c-.952 0-1.713 0-2.327-.05-.63-.052-1.172-.16-1.67-.413a4.25 4.25 0 0 1-1.857-1.857c-.253-.498-.361-1.04-.413-1.67C2 13.396 2 12.635 2 11.683V8.317c0-.952 0-1.713.05-2.327.052-.63.16-1.172.413-1.67a4.25 4.25 0 0 1 1.858-1.857A3.8 3.8 0 0 1 5.5 2.106V1.75A.75.75 0 0 1 6.25 1M5.5 3.63c-.203.044-.361.1-.498.17A2.75 2.75 0 0 0 3.8 5.002c-.128.25-.21.573-.255 1.11-.02.255-.032.543-.038.878h12.986a14 14 0 0 0-.038-.878c-.044-.537-.127-.86-.255-1.11A2.75 2.75 0 0 0 15 3.8a2 2 0 0 0-.499-.17v.12a.75.75 0 0 1-1.5 0v-.243a80 80 0 0 0-1.35-.007h-3.3c-.525 0-.968 0-1.35.007v.243a.75.75 0 0 1-1.5 0zm11 4.86h-13v3.16c0 .992 0 1.692.045 2.238.044.537.127.86.255 1.11A2.75 2.75 0 0 0 5.002 16.2c.25.128.573.21 1.11.255.546.044 1.246.045 2.238.045h3.3c.992 0 1.692 0 2.238-.045.537-.044.86-.127 1.11-.255A2.75 2.75 0 0 0 16.2 15c.128-.252.21-.574.255-1.111.044-.546.045-1.245.045-2.238z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},168799:(e,t,o)=>{"use strict";o.d(t,{Icon20Check:()=>n});var n=(0,o(844990).makeIcon)("Icon20Check","check_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="check_20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},540969:(e,t,o)=>{"use strict";o.d(t,{Icon20CheckBoxIndetermanate:()=>n});var n=(0,o(844990).makeIcon)("Icon20CheckBoxIndetermanate","check_box_indetermanate_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="check_box_indetermanate_20"><path fill="currentColor" fill-rule="evenodd" d="M2 8.4c0-2.24 0-3.36.436-4.216a4 4 0 0 1 1.748-1.748C5.04 2 6.16 2 8.4 2h3.2c2.24 0 3.36 0 4.216.436a4 4 0 0 1 1.748 1.748C18 5.04 18 6.16 18 8.4v3.2c0 2.24 0 3.36-.436 4.216a4 4 0 0 1-1.748 1.748C14.96 18 13.84 18 11.6 18H8.4c-2.24 0-3.36 0-4.216-.436a4 4 0 0 1-1.748-1.748C2 14.96 2 13.84 2 11.6zm4.4.7a.9.9 0 1 0 0 1.8h7.2a.9.9 0 1 0 0-1.8z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},64821:(e,t,o)=>{"use strict";o.d(t,{Icon20ChevronLeftOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20ChevronLeftOutline","chevron_left_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="chevron_left_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M12.526 4.217a.75.75 0 0 1 0 1.06L7.81 10l4.716 4.721a.75.75 0 1 1-1.061 1.06l-5.246-5.25a.75.75 0 0 1 0-1.061l5.246-5.252a.75.75 0 0 1 1.06-.001z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},516102:(e,t,o)=>{"use strict";o.d(t,{Icon20ChevronUp:()=>n});var n=(0,o(844990).makeIcon)("Icon20ChevronUp","chevron_up_20","0 0 20 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16" id="chevron_up_20"><path fill-rule="evenodd" d="M15.78 11.125a1 1 0 0 1-1.405.156L10 7.78l-4.375 3.5a1 1 0 0 1-1.25-1.562l5-4a1 1 0 0 1 1.25 0l5 4a1 1 0 0 1 .156 1.406Z" clip-rule="evenodd" /></symbol>',20,16,!1,void 0)},203788:(e,t,o)=>{"use strict";o.d(t,{Icon20PodcastOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20PodcastOutline","podcast_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="podcast_outline_20"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v20H0z" opacity=".4" /><path fill="currentColor" fill-rule="nonzero" d="M10 5a4 4 0 0 1 4 4v3c0 1.953-1.4 3.578-3.25 3.93v1.32a.75.75 0 1 1-1.5 0v-1.32A4 4 0 0 1 6 12V9a4 4 0 0 1 4-4m0 1.5A2.5 2.5 0 0 0 7.5 9v3a2.5 2.5 0 0 0 4.502 1.498l-.13.002H10.45a.75.75 0 1 1 0-1.5h2.05v-1.5h-2.05a.75.75 0 1 1 0-1.5h2.05A2.5 2.5 0 0 0 10 6.5M10 2a7 7 0 0 1 6.938 6.065A1.5 1.5 0 0 1 18 9.5v3a1.5 1.5 0 0 1-3 0v-3c0-.428.18-.815.468-1.088a5.5 5.5 0 0 0-5.247-4.908L10 3.5a5.5 5.5 0 0 0-5.469 4.912c.29.273.469.66.469 1.088v3a1.5 1.5 0 0 1-3 0v-3a1.5 1.5 0 0 1 1.062-1.435A7 7 0 0 1 10 2" /></g></symbol>',20,20,!1,void 0)},223173:(e,t,o)=>{"use strict";o.d(t,{Icon20ShareOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20ShareOutline","share_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="share_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M9.764 4.753a.25.25 0 0 1 .402-.198l6.742 5.247a.25.25 0 0 1 0 .395l-6.747 5.25a.25.25 0 0 1-.402-.198v-3.136a.75.75 0 0 0-.75-.75c-2.456 0-4.342.913-5.832 2.197.266-1.454.824-2.577 1.57-3.426 1.066-1.212 2.58-1.941 4.385-2.228a.75.75 0 0 0 .632-.741zm1.324-1.381c-1.15-.895-2.824-.075-2.824 1.38v1.791c-1.81.394-3.434 1.225-4.643 2.6-1.352 1.538-2.117 3.68-2.117 6.445a.75.75 0 0 0 1.329.477c1.362-1.655 3.059-2.942 5.426-3.167v2.35c0 1.456 1.674 2.277 2.823 1.382l6.747-5.25c.9-.7.9-2.061 0-2.762z" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},136017:(e,t,o)=>{"use strict";o.d(t,{Icon20ThumbsDown:()=>n});var n=(0,o(844990).makeIcon)("Icon20ThumbsDown","thumbs_down_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_20"><path fill-rule="evenodd" d="m14.725 12.63-1.944 4.52a2.232 2.232 0 0 1-4.283-.883v-2.326a.285.285 0 0 0-.285-.285H4.498c-2.105 0-3.556-2.111-2.8-4.076l2.076-5.4A3.4 3.4 0 0 1 6.947 2h4.849a3.2 3.2 0 0 1 3.2 3.2v6.114c0 .453-.092.9-.271 1.316M16.745 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},715782:(e,t,o)=>{"use strict";o.d(t,{Icon20ThumbsDownOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20ThumbsDownOutline","thumbs_down_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20" id="thumbs_down_outline_20"><path fill-rule="evenodd" d="M10.762 18.503c.898 0 1.711-.532 2.07-1.355l1.77-4.057c.058-.134.097-.224.132-.317.152-.4.24-.823.261-1.251.005-.1.005-.198.005-.345v-4.46c0-.673 0-1.223-.037-1.671-.037-.463-.118-.882-.317-1.272a3.25 3.25 0 0 0-1.42-1.42c-.391-.2-.81-.28-1.273-.318C11.506 2 10.955 2 10.282 2h-2.47c-.829 0-1.433 0-1.974.197a3.25 3.25 0 0 0-1.254.826c-.395.42-.633.975-.96 1.736l-.994 2.32c-.387.902-.698 1.626-.89 2.218-.196.6-.306 1.166-.2 1.726a3.25 3.25 0 0 0 1.378 2.09c.473.319 1.036.441 1.665.498.62.057 1.408.057 2.389.057h1.531v2.578a2.26 2.26 0 0 0 2.26 2.258Zm.695-1.955a.759.759 0 0 1-1.454-.303V13.2c0-.571-.463-1.034-1.034-1.034h-1.96c-1.027 0-1.747-.001-2.29-.05-.543-.05-.803-.141-.963-.249a1.75 1.75 0 0 1-.742-1.125c-.036-.19-.017-.465.152-.983.169-.52.452-1.18.857-2.125l.93-2.167c.399-.93.534-1.215.724-1.417a1.75 1.75 0 0 1 .675-.445c.26-.095.576-.106 1.587-.106h2.311c.713 0 1.202 0 1.581.032.37.03.57.085.713.159.33.168.598.435.765.765.074.144.13.343.16.713.03.38.031.869.031 1.581v4.411c0 .17 0 .23-.003.29-.013.27-.069.537-.165.79-.02.055-.045.11-.113.267l-1.761 4.04ZM16.75 2a.75.75 0 0 0-.75.75v8.5a.75.75 0 0 0 1.5 0v-8.5a.75.75 0 0 0-.75-.75" /></symbol>',20,20,!1,void 0)},684540:(e,t,o)=>{"use strict";o.d(t,{Icon20VinylOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon20VinylOutline","vinyl_outline_20","0 0 20 20",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" id="vinyl_outline_20"><path fill="currentColor" fill-rule="evenodd" d="M10 7.5a2.5 2.5 0 0 0-1.768.732A2.5 2.5 0 0 0 7.5 10c0 .69.28 1.315.732 1.768A2.5 2.5 0 0 0 10 12.5a2.5 2.5 0 0 0 1.768-.732A2.5 2.5 0 0 0 12.5 10a2.5 2.5 0 0 0-.732-1.768A2.5 2.5 0 0 0 10 7.5m-.707 1.793A1 1 0 0 1 10 9a1 1 0 0 1 .707.293A1 1 0 0 1 11 10a1 1 0 0 1-.293.707A1 1 0 0 1 10 11a1 1 0 0 1-.707-.293A1 1 0 0 1 9 10a1 1 0 0 1 .293-.707" clip-rule="evenodd" /><path fill="currentColor" d="M10.21 6.006a4 4 0 0 0-4.205 4.2.75.75 0 0 1-.71.787.75.75 0 0 1-.788-.71 5.5 5.5 0 0 1 5.78-5.775.75.75 0 0 1-.078 1.497m5.283 3.712a.75.75 0 0 0-1.498.077 4 4 0 0 1-4.204 4.2.75.75 0 0 0-.079 1.498 5.5 5.5 0 0 0 4.175-1.602 5.5 5.5 0 0 0 1.606-4.173" /><path fill="currentColor" fill-rule="evenodd" d="M10 1.5a8.47 8.47 0 0 0-6.01 2.49C2.45 5.528 1.5 7.653 1.5 10s.951 4.472 2.49 6.01C5.528 17.55 7.653 18.5 10 18.5s4.472-.951 6.01-2.49c1.539-1.538 2.49-3.663 2.49-6.01s-.951-4.472-2.49-6.01A8.47 8.47 0 0 0 10 1.5M5.05 5.05A6.97 6.97 0 0 1 10 3c1.933 0 3.681.782 4.95 2.05A6.97 6.97 0 0 1 17 10a6.97 6.97 0 0 1-2.05 4.95A6.97 6.97 0 0 1 10 17a6.97 6.97 0 0 1-4.95-2.05A6.97 6.97 0 0 1 3 10c0-1.933.782-3.681 2.05-4.95" clip-rule="evenodd" /></symbol>',20,20,!1,void 0)},190214:(e,t,o)=>{"use strict";o.d(t,{Icon24Chevron:()=>n});var n=(0,o(844990).makeIcon)("Icon24Chevron","chevron_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 24" id="chevron_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h16v24H0z" /><path fill="currentColor" d="M4.706 7.706a1 1 0 0 1 0-1.412l.088-.088a.997.997 0 0 1 1.414.002l5.084 5.084a1 1 0 0 1 0 1.416l-5.084 5.084a1 1 0 0 1-1.414.002l-.088-.088a.995.995 0 0 1 0-1.412L9 12z" /></g></symbol>',16,24,!1,void 0)},798180:(e,t,o)=>{"use strict";o.d(t,{Icon24ChevronCompactLeft:()=>n});var n=(0,o(844990).makeIcon)("Icon24ChevronCompactLeft","chevron_compact_left_24","0 0 16 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 24" id="chevron_compact_left_24"><path fill="currentColor" d="M11.293 7.706a1 1 0 0 0 0-1.412l-.088-.088a.997.997 0 0 0-1.414.002l-5.084 5.084a1 1 0 0 0 0 1.416l5.084 5.084c.39.391 1.026.39 1.414.002l.088-.088a.995.995 0 0 0 0-1.412L7 12z" /></symbol>',16,24,!1,void 0)},189270:(e,t,o)=>{"use strict";o.d(t,{Icon24ChevronUp:()=>n});var n=(0,o(844990).makeIcon)("Icon24ChevronUp","chevron_up_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="chevron_up_24"><path d="m12 10.302-5.36 4.466a1 1 0 1 1-1.28-1.536l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.536z" /></symbol>',24,24,!1,void 0)},75123:(e,t,o)=>{"use strict";o.d(t,{Icon24Dismiss:()=>n});var n=(0,o(844990).makeIcon)("Icon24Dismiss","dismiss_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor"><path d="M12 24c6.627 0 12-5.373 12-12S18.627 0 12 0 0 5.373 0 12s5.373 12 12 12" opacity=".12" /><path d="M16.736 7.264a.9.9 0 0 1 0 1.272L13.273 12l3.463 3.464a.9.9 0 0 1 .081 1.18l-.08.092a.9.9 0 0 1-1.273 0L12 13.273l-3.464 3.463a.9.9 0 1 1-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 0 1-.08-1.18l.08-.092a.9.9 0 0 1 1.272 0L12 10.727l3.464-3.463a.9.9 0 0 1 1.272 0" /></g></symbol>',24,24,!1,void 0)},963328:(e,t,o)=>{"use strict";o.d(t,{Icon24Headphones:()=>n});var n=(0,o(844990).makeIcon)("Icon24Headphones","headphones_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="headphones_24"><path d="M12 2.25a9 9 0 0 0-9 9V18a3 3 0 0 0 3 3h1.5A1.5 1.5 0 0 0 9 19.5v-5A1.5 1.5 0 0 0 7.5 13H5v-1.75c0-3.87 3.13-7 7-7s7 3.13 7 7V13h-2.5a1.5 1.5 0 0 0-1.5 1.5v5a1.5 1.5 0 0 0 1.5 1.5H18a3 3 0 0 0 3-3v-6.75a9 9 0 0 0-9-9" /></symbol>',24,24,!1,void 0)},573638:(e,t,o)=>{"use strict";o.d(t,{Icon24Refresh:()=>n});var n=(0,o(844990).makeIcon)("Icon24Refresh","refresh_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" id="refresh_24"><path d="M12 9.096a.4.4 0 0 0 .67.296l4.287-3.899a.667.667 0 0 0 0-.987L12.67.609a.4.4 0 0 0-.67.295V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6z" /></symbol>',24,24,!1,void 0)},724162:(e,t,o)=>{"use strict";o.d(t,{Icon24Reorder:()=>n});var n=(0,o(844990).makeIcon)("Icon24Reorder","reorder_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path fill="currentColor" fill-rule="nonzero" d="M21 18a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1m0-4a1 1 0 0 1-1 1H4a1 1 0 0 1 0-2h16a1 1 0 0 1 1 1M3 6a1 1 0 0 1 1-1h16a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1" /></g></symbol>',24,24,!1,void 0)},313644:(e,t,o)=>{"use strict";o.d(t,{Icon24ReorderIos:()=>n});var n=(0,o(844990).makeIcon)("Icon24ReorderIos","reorder_ios_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="reorder_ios_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" opacity=".1" /><path fill="currentColor" fill-rule="nonzero" d="M2.75 7h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 0 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5m0 4h18.5a.75.75 0 1 1 0 1.5H2.75a.75.75 0 1 1 0-1.5" /></g></symbol>',24,24,!1,void 0)},843752:(e,t,o)=>{"use strict";o.d(t,{Icon24Spinner:()=>n});var n=(0,o(844990).makeIcon)("Icon24Spinner","spinner_24","0 0 24 24",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="spinner_24"><path fill="currentColor" fill-rule="evenodd" d="M16.394 5.077A8.2 8.2 0 0 0 4.58 15.49a.9.9 0 0 1-1.628.767A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.394-15.123" clip-rule="evenodd" /></symbol>',24,24,!1,void 0)},520143:(e,t,o)=>{"use strict";o.d(t,{Icon28ArrowLeftOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon28ArrowLeftOutline","arrow_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="arrow_left_outline_28"><g fill="none" fill-rule="evenodd"><path d="M28 0H0v28h28z" /><path fill="currentColor" fill-rule="nonzero" d="M12.293 6.293a1 1 0 0 1 1.414 1.414L8.414 13H22a1 1 0 0 1 .993.883L23 14a1 1 0 0 1-1 1H8.414l5.293 5.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0l-7-7-.073-.082A1 1 0 0 1 5 14l.004.09L5 14.02V14a1 1 0 0 1 .125-.484 1 1 0 0 1 .071-.111 1 1 0 0 1 .097-.112l-.08.09q.037-.047.08-.09Z" /></g></symbol>',28,28,!1,void 0)},451840:(e,t,o)=>{"use strict";o.d(t,{Icon28CancelOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon28CancelOutline","cancel_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="cancel_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="M6.293 6.293a1 1 0 0 1 1.414 0L14 12.585l6.293-6.292a1 1 0 0 1 1.32-.083l.094.083a1 1 0 0 1 0 1.414L15.415 14l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.414 0L14 15.415l-6.293 6.292a1 1 0 0 1-1.32.083l-.094-.083a1 1 0 0 1 0-1.414L12.585 14 6.293 7.707a1 1 0 0 1-.083-1.32Z" /></g></symbol>',28,28,!1,void 0)},21460:(e,t,o)=>{"use strict";o.d(t,{Icon28ChevronBack:()=>n});var n=(0,o(844990).makeIcon)("Icon28ChevronBack","chevron_back_28","0 0 20 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 28" id="chevron_back_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h20v28H0z" /><path fill="currentColor" d="M4.56 12.94 13 4.5a1.414 1.414 0 0 1 2 2L7.5 14l7.5 7.5a1.414 1.414 0 0 1-2 2l-8.44-8.44a1.5 1.5 0 0 1 0-2.12" /></g></symbol>',20,28,!1,void 0)},680277:(e,t,o)=>{"use strict";o.d(t,{Icon28ChevronLeftOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon28ChevronLeftOutline","chevron_left_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 28 28" id="chevron_left_outline_28"><path fill="currentColor" d="m12.414 14 5.793-5.793a1 1 0 0 0-1.414-1.414l-6.5 6.5a1 1 0 0 0 0 1.414l6.5 6.5a1 1 0 0 0 1.414-1.414z" /></symbol>',28,28,!1,void 0)},55382:(e,t,o)=>{"use strict";o.d(t,{Icon28DoneOutline:()=>n});var n=(0,o(844990).makeIcon)("Icon28DoneOutline","done_outline_28","0 0 28 28",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="done_outline_28"><g fill="none" fill-rule="evenodd"><path d="M0 0h28v28H0z" /><path fill="currentColor" fill-rule="nonzero" d="m11 18.586-5.293-5.293a1 1 0 1 0-1.414 1.414l6 6a1 1 0 0 0 1.414 0l12-12a1 1 0 1 0-1.414-1.414z" /></g></symbol>',28,28,!1,void 0)},78326:(e,t,o)=>{"use strict";o.d(t,{Icon32Spinner:()=>n});var n=(0,o(844990).makeIcon)("Icon32Spinner","spinner_32","0 0 32 32",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path fill="currentColor" d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 16 16 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16" /></symbol>',32,32,!1,void 0)},205726:(e,t,o)=>{"use strict";o.d(t,{Icon40PlayCircle:()=>n});var n=(0,o(844990).makeIcon)("Icon40PlayCircle","play_circle_40","0 0 40 40",'<symbol xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 40 40" id="play_circle_40"><path fill-rule="evenodd" d="M40 20c0 11.046-8.954 20-20 20S0 31.046 0 20 8.954 0 20 0s20 8.954 20 20m-14.329 1.077a1.25 1.25 0 0 0 0-2.154l-8.787-5.175A1.25 1.25 0 0 0 15 14.826v10.348a1.25 1.25 0 0 0 1.884 1.078z" clip-rule="evenodd" /></symbol>',40,40,!1,void 0)},299664:(e,t,o)=>{"use strict";o.d(t,{Icon44Spinner:()=>n});var n=(0,o(844990).makeIcon)("Icon44Spinner","spinner_44","0 0 44 44",'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path fill="currentColor" d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A22 22 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22" /></symbol>',44,44,!1,void 0)},783541:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};function o(e,t,o){if(o||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function n(e,o,n){var i=function(e){var t={current:0,next:function(){return++this.current}},o={};return{add:function(n,i){var r=null!=i?i:"".concat(t.next(),"_").concat(e);return o[r]=n,r},resolve:function(e,t,n){var i=o[e];i&&(n(t)?i.resolve(t):i.reject(t),o[e]=null)}}}(n);return o((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,o=t.request_id,n=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}(t,["request_id"]);o&&i.resolve(o,n,(function(e){return!("error_type"in e)}))}})),function(o,n){return void 0===n&&(n={}),new Promise((function(r,s){var a=i.add({resolve:r,reject:s},n.request_id);e(o,t(t({},n),{request_id:a}))}))}}var i,r,s,a,_,c,l,u="undefined"!=typeof window,d=Boolean(u&&window.AndroidBridge),p=Boolean(u&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),h=Boolean(u&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),m=u&&!d&&!p,E=m&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),f=m?"message":"VKWebAppEvent",g=o(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile"],m&&!E?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppGetFriends","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),y=u?window.AndroidBridge:void 0,v=p?window.webkit.messageHandlers:void 0,w=m?parent:void 0;e.EAdsFormats=void 0,(i=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",i.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(r=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",r.OVERLAY="overlay",e.BannerAdLocation=void 0,(s=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",s.BOTTOM="bottom",e.EGrantedPermission=void 0,(a=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",a.LOCATION="location",a.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(_=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",_.UK="uk",_.UA="ua",_.EN="en",_.BE="be",_.KZ="kz",_.PT="pt",_.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(c=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",c.EDITOR="editor",c.MEMBER="member",c.MODER="moder",c.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(l=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",l.DESKTOP_WEB_MESSENGER="desktop_web_messenger",l.DESKTOP_APP_MESSENGER="desktop_app_messenger",l.MOBILE_WEB="mobile_web",l.MOBILE_ANDROID="mobile_android",l.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",l.MOBILE_IPHONE="mobile_iphone",l.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",l.MOBILE_IPAD="mobile_ipad";var A=function(e){var t=void 0,i=[],r=Math.random().toString(36).substring(2,5);function s(e){i.push(e)}function a(){return p||d}function _(){return m&&window.parent!==window}function c(){return a()||_()}function l(e){if(p||d)return o([],i,!0).map((function(t){return t.call(null,e)}));var n=null==e?void 0:e.data;if(m&&n){if(h&&"string"==typeof n)try{n=JSON.parse(n)}catch(e){}var r=n.type,s=n.data,a=n.frameId;r&&("VKWebAppSettings"!==r?o([],i,!0).map((function(e){return e({detail:{type:r,data:s}})})):t=a)}}h&&/(android)/i.test(navigator.userAgent)?document.addEventListener(f,l):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(f,l);var u=n((function(o,n){y&&y[o]?y[o](JSON.stringify(n)):v&&v[o]&&"function"==typeof v[o].postMessage?v[o].postMessage(n):h?window.ReactNativeWebView.postMessage(JSON.stringify({handler:o,params:n})):w&&"function"==typeof w.postMessage&&w.postMessage({handler:o,params:n,type:"vk-connect",webFrameId:t,connectVersion:e},"*")}),s,r);return{send:u,sendPromise:u,subscribe:s,unsubscribe:function(e){var t=i.indexOf(e);t>-1&&i.splice(t,1)},supports:function(e){return d?!(!y||"function"!=typeof y[e]):p?!(!v||!v[e]||"function"!=typeof v[e].postMessage):!!m&&g.includes(e)},isWebView:a,isIframe:_,isEmbedded:c,isStandalone:function(){return!c()}}}("2.12.2");e.applyMiddleware=function e(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o.includes(void 0)||o.includes(null)?e.apply(void 0,o.filter((function(e){return"function"==typeof e}))):function(e){if(0===o.length)return e;var n,i={subscribe:e.subscribe,send:function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return e.send.apply(e,t)}},r=o.filter((function(e){return"function"==typeof e})).map((function(e){return e(i)})).reduce((function(e,t){return function(o){return e(t(o))}}));return n=r(e.send),t(t({},e),{send:n})}},e.default=A,e.parseURLSearchParamsForGetLaunchParams=function(t){var o={};try{new URLSearchParams(t).forEach((function(t,n){switch(n){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":o[n]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":o[n]=t;break;case"odr_enabled":o.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":o[n]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":o.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":o.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":o.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return o},Object.defineProperty(e,"__esModule",{value:!0})}(t)},126645:function(e){e.exports=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)},t=1,o=7,n=96*t,i=96*t,r=25,s=function(e,t,n,i,s){if(e<o&&t<o)return!1;if(e>=n-o&&t<o)return!1;if(e<o&&t>=n-o)return!1;if(s){var a=o+2;n<=r&&a--;var _=(n-2*o-a)/2-1;return n<=r&&_++,!(e>o+_&&e<n-o-_-1&&t>o+_&&t<n-o-_-1)&&0<=e&&e<n&&0<=t&&t<n&&i[t][e]}return i[t]&&i[t][e]},a=function(e,t,o,n,i){return void 0===i&&(i=!0),{l:s(e-1,t,o,n,i),r:s(e+1,t,o,n,i),t:s(e,t-1,o,n,i),b:s(e,t+1,o,n,i),current:s(e,t,o,n,i)}},_=function(e,i){if("number"!=typeof i.qrSize)throw new Error("Size should be a number");if("string"!=typeof i.className)throw new Error("Classname should be a string");for(var _=2*t,c=12.7*t,l=12.8*t,u=14.7*t,d=14.8*t,p=15.9*t,h=28.6*t,m=30.5*t,E=84.7776815*t,f=87.3*t,g=71.4*t,y=42.9*t,v=87.2*t,w=85.2*t,A=85.3*t,b=69.5*t,T=98*t,I=100*t,P=[],C=0,S=0,O=0,M=0,D=0;D<e.size;D++){C=0;for(var L=0;L<e.size;L++){O=L+C,C+=n,M=D+S;var k=a(L,D,e.size,e.modules,i.isShowLogo),R="",N="";k.current?(N=!(N=N||k.l||k.r||k.t||k.b?"":"empty")&&k.l&&k.r||k.t&&k.b?"rect":"")||(N+=k.l?"l":k.r?"r":"",(N+=k.t?"t":k.b?"b":"")||(N="empty")):N=!(N=!(N=!(N=!N&&k.l&&k.t&&s(L-1,D-1,e.size,e.modules,i.isShowLogo)?"n_lt":"")&&k.l&&k.b&&s(L-1,D+1,e.size,e.modules,i.isShowLogo)?"n_lb":"")&&k.r&&k.t&&s(L+1,D-1,e.size,e.modules,i.isShowLogo)?"n_rt":"")&&k.r&&k.b&&s(L+1,D+1,e.size,e.modules,i.isShowLogo)?"n_rb":"",N&&(R='<use xlink:href="#'+N+"-"+i.suffix+'"/>',P.push('<g transform="translate('+O+","+M+')">'+R+"</g>"))}S+=n}var B="",x=(e.size-3*o)/2*n+n*o-10;e.size<=r&&(B="scale(0.85)",x+=50);var U=(e.size-o)*i.incTileSize;P.push('<use fill-rule="evenodd" transform="translate(0,0)" xlink:href="#point-'+i.suffix+'"/>'),P.push('<use fill-rule="evenodd" transform="translate('+U+',0)" xlink:href="#point-'+i.suffix+'"/>'),P.push('<use fill-rule="evenodd" transform="translate(0,'+U+')" xlink:href="#point-'+i.suffix+'"/>'),i.isShowLogo&&(i.logoData?P.push('\n        <image\n          preserveAspectRatio="xMidYMid slice" clip-path="url(#logo-mask-'+i.suffix+')"\n          style="width: 750px; height: 750px;" width="750" height="750"\n          transform="translate('+x+","+x+") "+B+'"\n          xlink:href="'+i.logoData+'"\n        />\n      '):P.push('\n        <use style="width: 750px; height: 750px;" width="750" height="750"\n          fill="none"\n          fill-rule="evenodd"\n          transform="translate('+x+","+x+") "+B+'" xlink:href="#vk_logo-'+i.suffix+'"\n        />\n      '));var F=99*e.size,W="",K="translate(0,0)";if(i.isShowBackground){var V=(i.qrSize-40)/i.qrSize,H=F/i.qrSize*21;W='\n      <rect\n        x="0"\n        width="'+F+'"\n        height="'+F+'"\n        rx="'+Math.ceil(F/(i.qrSize/36))+'"\n        fill="'+i.backgroundColor+'"\n      />',K="translate("+H+", "+H+") scale("+V+")"}var j="M0,0 L66,0 C"+E+",-3.44940413e-15 "+I+",15.2223185 "+I+",34 L"+I+",66 C"+I+","+E+" "+E+","+I+" 66,"+I+" L0,"+I+" L0,0 Z",G="M0,0 L"+I+",0 L"+I+",66 C"+I+","+E+" "+E+","+I+" 66,"+I+" L0,"+I+" L0,0 Z";return'\n  <svg\n    version="1.1"\n    viewBox="0 0 '+F+" "+F+'"\n    width="'+i.qrSize+'px"\n    height="'+i.qrSize+'px"\n    '+(i.className?'class="'+i.className+'"':"")+'\n    xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n  >\n    <defs>\n      <rect id="rect-'+i.suffix+'" width="100" height="100" fill="'+i.foregroundColor+'"/>\n      <path\n        id="empty-'+i.suffix+'"\n        d="M0,'+h+"v"+y+"C0,"+f+","+l+","+I+","+h+","+I+"h"+y+"c"+p+",0,"+h+"-"+l+","+h+"-"+h+"V"+h+"C"+I+","+c+","+v+",0,"+g+",0H"+h+" C"+l+",0,0,"+l+",0,"+h+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path id="b-'+i.suffix+'" d="'+j+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="r-'+i.suffix+'" d="'+j+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+j+'" fill="'+i.foregroundColor+'"/>\n      <path id="t-'+i.suffix+'" d="'+j+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="l-'+i.suffix+'" d="'+G+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="lt-'+i.suffix+'" d="'+G+'" fill="'+i.foregroundColor+'"/>\n      <path id="lb-'+i.suffix+'" d="'+G+'" transform="rotate(-90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rb-'+i.suffix+'" d="'+G+'" transform="rotate(-180 50 50)" fill="'+i.foregroundColor+'"/>\n      <path id="rt-'+i.suffix+'" d="'+G+'" transform="rotate(90 50 50)" fill="'+i.foregroundColor+'"/>\n      <path\n        id="n_lt-'+i.suffix+'"\n        d="M'+m+","+_+"V0H0v"+m+"h"+_+"C"+_+","+u+","+d+","+_+","+m+","+_+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="n_lb-'+i.suffix+'"\n        d="M'+_+","+b+"H0V"+I+"h"+m+"v-"+_+"C"+u+","+T+","+_+","+w+","+_+","+b+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="n_rt-'+i.suffix+'"\n        d="M'+T+","+m+"h"+_+"V0H"+b+"v"+_+"C"+A+","+_+","+T+","+d+","+T+","+m+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path id="n_rb-'+i.suffix+'"\n        d="M'+b+","+T+"v"+_+"H"+I+"V"+b+"h-"+_+"C"+T+","+A+","+w+","+T+","+b+","+T+'z"\n        fill="'+i.foregroundColor+'"\n      />\n      <path\n        id="point-'+i.suffix+'"\n        fill="'+i.foregroundColor+'"\n        d="M600.001786,457.329333 L600.001786,242.658167 C600.001786,147.372368 587.039517,124.122784 581.464617,118.535383 C575.877216,112.960483 552.627632,99.9982143 457.329333,99.9982143 L242.670667,99.9982143 C147.372368,99.9982143 124.122784,112.960483 118.547883,118.535383 C112.972983,124.122784 99.9982143,147.372368 99.9982143,242.658167 L99.9982143,457.329333 C99.9982143,552.627632 112.972983,575.877216 118.547883,581.464617 C124.122784,587.027017 147.372368,600.001786 242.670667,600.001786 L457.329333,600.001786 C552.627632,600.001786 575.877216,587.027017 581.464617,581.464617 C587.039517,575.877216 600.001786,552.627632 600.001786,457.329333 Z M457.329333,0 C653.338333,0 700,46.6616668 700,242.658167 C700,438.667167 700,261.332833 700,457.329333 C700,653.338333 653.338333,700 457.329333,700 C261.332833,700 438.667167,700 242.670667,700 C46.6616668,700 0,653.338333 0,457.329333 C0,261.332833 0,352.118712 0,242.658167 C0,46.6616668 46.6616668,0 242.670667,0 C438.667167,0 261.332833,0 457.329333,0 Z M395.996667,200 C480.004166,200 500,220.008332 500,303.990835 C500,387.998334 500,312.001666 500,395.996667 C500,479.991668 480.004166,500 395.996667,500 C312.001666,500 387.998334,500 304.003333,500 C220.008332,500 200,479.991668 200,395.996667 C200,312.001666 200,350.906061 200,303.990835 C200,220.008332 220.008332,200 304.003333,200 C387.998334,200 312.001666,200 395.996667,200 Z"\n      />\n      <g id="vk_logo-'+i.suffix+'">\n        <path\n          fill="'+i.logoColor+'"\n          d="M83.3334 363.333C83.3334 231.34 83.3334 165.343 124.338 124.338C165.343 83.3333 231.34              83.3333 363.333 83.3333H386.667C518.66 83.3333 584.657 83.3333 625.662 124.338C666.667 165.343              666.667 231.34 666.667 363.333V386.667C666.667 518.66 666.667 584.657 625.662 625.662C584.657              666.667 518.66 666.667 386.667 666.667H363.333C231.34 666.667 165.343 666.667 124.338 625.662C83.3334              584.657 83.3334 518.66 83.3334 386.667V363.333Z"\n        />\n        <path\n          fill="#FFF"\n          d="M394.907 508.681C263.293 508.681 183.442 417.365 180.313 265.625H246.972C249.05 377.09              299.763 424.323 338.638 434.036V265.625H402.519V361.82C440.016 357.664 479.264 313.909              492.456 265.625H555.333C545.27 325 502.543 368.754 472.353 386.803C502.566 401.395 551.177              439.593 569.926 508.681H500.815C486.222 462.498 450.476 426.728 402.542 421.872V508.681H394.907Z"\n        />\n      </g>\n      <clipPath id="logo-mask-'+i.suffix+'">\n        <rect x="0" y="0" width="750" height="750" />\n      </clipPath>\n    </defs>\n\n    '+W+'\n\n    <g transform="'+K+'">\n      '+P.join("\n")+"\n    </g>\n  </svg>"},c=function(){function e(t,o,n,i){if(this.version=t,this.errorCorrectionLevel=o,this.mask=i,this.modules=[],this.isFunction=[],t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version value out of range";if(i<-1||i>7)throw"Mask value out of range";this.size=4*t+17;for(var r=[],s=0;s<this.size;s++)r.push(!1);for(s=0;s<this.size;s++)this.modules.push(r.slice()),this.isFunction.push(r.slice());this.drawFunctionPatterns();var a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==i){var _=1e9;for(s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var c=this.getPenaltyScore();c<_&&(i=s,_=c),this.applyMask(s)}}if(i<0||i>7)throw"Assertion error";this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}return e.encodeText=function(t,o){var n=u.makeSegments(t);return e.encodeSegments(n,o)},e.encodeBinary=function(t,o){var n=u.makeBytes(t);return e.encodeSegments([n],o)},e.encodeSegments=function(t,o,n,i,r,s){if(void 0===n&&(n=1),void 0===i&&(i=40),void 0===r&&(r=-1),void 0===s&&(s=!0),!(e.MIN_VERSION<=n&&n<=i&&i<=e.MAX_VERSION)||r<-1||r>7)throw"Invalid value";var a,_;for(a=n;;a++){var c=8*e.getNumDataCodewords(a,o),l=u.getTotalBits(t,a);if(l<=c){_=l;break}if(a>=i)throw"Data too long"}for(var d=0,h=[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH];d<h.length;d++){var m=h[d];s&&_<=8*e.getNumDataCodewords(a,m)&&(o=m)}for(var E=new p,f=0,g=t;f<g.length;f++){var y=g[f];E.appendBits(y.mode.modeBits,4),E.appendBits(y.numChars,y.mode.numCharCountBits(a));for(var v=0,w=y.getData();v<w.length;v++){var A=w[v];E.array.push(A)}}if(E.array.length!=_)throw"Assertion error";var b=8*e.getNumDataCodewords(a,o);if(E.array.length>b)throw"Assertion error";if(E.appendBits(0,Math.min(4,b-E.array.length)),E.appendBits(0,(8-E.array.length%8)%8),E.array.length%8!=0)throw"Assertion error";for(var T=236;E.array.length<b;T^=253)E.appendBits(T,8);for(var I=[];8*I.length<E.array.length;)I.push(0);return E.array.forEach((function(e,t){return I[t>>>3]|=e<<7-(7&t)})),new e(a,o,I,r)},e.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},e.prototype.drawCanvas=function(e,t,o){if(e<=0||t<0)throw"Value out of range";var n=(this.size+2*t)*e;o.width=n,o.height=n;for(var i=o.getContext("2d"),r=-t;r<this.size+t;r++)for(var s=-t;s<this.size+t;s++)i.fillStyle=this.getModule(s,r)?"#000000":"#FFFFFF",i.fillRect((s+t)*e,(r+t)*e,e,e)},e.prototype.toSvgString=function(e){if(e<0)throw"Border must be non-negative";for(var t=[],o=0;o<this.size;o++)for(var n=0;n<this.size;n++)this.getModule(n,o)&&t.push("M"+(n+e)+","+(o+e)+"h1v1h-1z");return'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+(this.size+2*e)+" "+(this.size+2*e)+'" stroke="none">\n\t<rect width="100%" height="100%" fill="#FFFFFF"/>\n\t<path d="'+t.join(" ")+'" fill="#000000"/>\n</svg>\n'},e.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);var t=this.getAlignmentPatternPositions(),o=t.length;for(e=0;e<o;e++)for(var n=0;n<o;n++)0==e&&0==n||0==e&&n==o-1||e==o-1&&0==n||this.drawAlignmentPattern(t[e],t[n]);this.drawFormatBits(0),this.drawVersion()},e.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,o=t,n=0;n<10;n++)o=o<<1^1335*(o>>>9);var i=21522^(t<<10|o);if(i>>>15!=0)throw"Assertion error";for(n=0;n<=5;n++)this.setFunctionModule(8,n,l(i,n));for(this.setFunctionModule(8,7,l(i,6)),this.setFunctionModule(8,8,l(i,7)),this.setFunctionModule(7,8,l(i,8)),n=9;n<15;n++)this.setFunctionModule(14-n,8,l(i,n));for(n=0;n<8;n++)this.setFunctionModule(this.size-1-n,8,l(i,n));for(n=8;n<15;n++)this.setFunctionModule(8,this.size-15+n,l(i,n));this.setFunctionModule(8,this.size-8,!0)},e.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^7973*(e>>>11);var o=this.version<<12|e;if(o>>>18!=0)throw"Assertion error";for(t=0;t<18;t++){var n=l(o,t),i=this.size-11+t%3,r=Math.floor(t/3);this.setFunctionModule(i,r,n),this.setFunctionModule(r,i,n)}}},e.prototype.drawFinderPattern=function(e,t){for(var o=-4;o<=4;o++)for(var n=-4;n<=4;n++){var i=Math.max(Math.abs(n),Math.abs(o)),r=e+n,s=t+o;0<=r&&r<this.size&&0<=s&&s<this.size&&this.setFunctionModule(r,s,2!=i&&4!=i)}},e.prototype.drawAlignmentPattern=function(e,t){for(var o=-2;o<=2;o++)for(var n=-2;n<=2;n++)this.setFunctionModule(e+n,t+o,1!=Math.max(Math.abs(n),Math.abs(o)))},e.prototype.setFunctionModule=function(e,t,o){this.modules[t][e]=o,this.isFunction[t][e]=!0},e.prototype.addEccAndInterleave=function(t){var o=this.version,n=this.errorCorrectionLevel;if(t.length!=e.getNumDataCodewords(o,n))throw"Invalid argument";for(var i=e.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][o],r=e.ECC_CODEWORDS_PER_BLOCK[n.ordinal][o],s=Math.floor(e.getNumRawDataModules(o)/8),a=i-s%i,_=Math.floor(s/i),c=[],l=new d(r),u=0,p=0;u<i;u++){var h=t.slice(p,p+_-r+(u<a?0:1));p+=h.length;var m=l.getRemainder(h);u<a&&h.push(0),c.push(h.concat(m))}var E=[];for(u=0;u<c[0].length;u++)for(var f=0;f<c.length;f++)(u!=_-r||f>=a)&&E.push(c[f][u]);if(E.length!=s)throw"Assertion error";return E},e.prototype.drawCodewords=function(t){if(t.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw"Invalid argument";for(var o=0,n=this.size-1;n>=1;n-=2){6==n&&(n=5);for(var i=0;i<this.size;i++)for(var r=0;r<2;r++){var s=n-r,a=n+1&2?i:this.size-1-i;!this.isFunction[a][s]&&o<8*t.length&&(this.modules[a][s]=l(t[o>>>3],7-(7&o)),o++)}}if(o!=8*t.length)throw"Assertion error"},e.prototype.applyMask=function(e){if(e<0||e>7)throw"Mask value out of range";for(var t=0;t<this.size;t++)for(var o=0;o<this.size;o++){var n=void 0;switch(e){case 0:n=(o+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=o%3==0;break;case 3:n=(o+t)%3==0;break;case 4:n=(Math.floor(o/3)+Math.floor(t/2))%2==0;break;case 5:n=o*t%2+o*t%3==0;break;case 6:n=(o*t%2+o*t%3)%2==0;break;case 7:n=((o+t)%2+o*t%3)%2==0;break;default:throw"Assertion error"}!this.isFunction[t][o]&&n&&(this.modules[t][o]=!this.modules[t][o])}},e.prototype.getPenaltyScore=function(){for(var t=0,o=0;o<this.size;o++){for(var n=[0,0,0,0,0,0,0],i=!1,r=0,s=0;s<this.size;s++)this.modules[o][s]==i?5==++r?t+=e.PENALTY_N1:r>5&&t++:(e.addRunToHistory(r,n),!i&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),i=this.modules[o][s],r=1);e.addRunToHistory(r,n),i&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(s=0;s<this.size;s++){n=[0,0,0,0,0,0,0],i=!1;var a=0;for(o=0;o<this.size;o++)this.modules[o][s]==i?5==++a?t+=e.PENALTY_N1:a>5&&t++:(e.addRunToHistory(a,n),!i&&e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3),i=this.modules[o][s],a=1);e.addRunToHistory(a,n),i&&e.addRunToHistory(0,n),e.hasFinderLikePattern(n)&&(t+=e.PENALTY_N3)}for(o=0;o<this.size-1;o++)for(s=0;s<this.size-1;s++)(i=this.modules[o][s])==this.modules[o][s+1]&&i==this.modules[o+1][s]&&i==this.modules[o+1][s+1]&&(t+=e.PENALTY_N2);for(var _=0,c=0,l=this.modules;c<l.length;c++)for(var u=0,d=l[c];u<d.length;u++)(i=d[u])&&_++;var p=this.size*this.size;return t+=(Math.ceil(Math.abs(20*_-10*p)/p)-1)*e.PENALTY_N4},e.prototype.getAlignmentPatternPositions=function(){if(1==this.version)return[];for(var e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((this.size-13)/(2*e-2)),o=[6],n=this.size-7;o.length<e;n-=t)o.splice(1,0,n);return o},e.getNumRawDataModules=function(t){if(t<e.MIN_VERSION||t>e.MAX_VERSION)throw"Version number out of range";var o=(16*t+128)*t+64;if(t>=2){var n=Math.floor(t/7)+2;o-=(25*n-10)*n-55,t>=7&&(o-=36)}return o},e.getNumDataCodewords=function(t,o){return Math.floor(e.getNumRawDataModules(t)/8)-e.ECC_CODEWORDS_PER_BLOCK[o.ordinal][t]*e.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][t]},e.addRunToHistory=function(e,t){t.pop(),t.unshift(e)},e.hasFinderLikePattern=function(e){var t=e[1];return t>0&&e[2]==t&&e[4]==t&&e[5]==t&&e[3]==3*t&&Math.max(e[0],e[6])>=4*t},e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e}();function l(e,t){return!!(e>>>t&1)}var u=function(){function e(e,t,o){if(this.mode=e,this.numChars=t,this.bitData=o,t<0)throw"Invalid argument";this.bitData=o.slice()}return e.makeBytes=function(t){for(var o=new p,n=0,i=t;n<i.length;n++){var r=i[n];o.appendBits(r,8)}return new e(e.Mode.BYTE,t.length,o.array)},e.makeNumeric=function(t){if(!this.NUMERIC_REGEX.test(t))throw"String contains non-numeric characters";for(var o=new p,n=0;n<t.length;){var i=Math.min(t.length-n,3);o.appendBits(parseInt(t.substr(n,i),10),3*i+1),n+=i}return new e(e.Mode.NUMERIC,t.length,o.array)},e.makeAlphanumeric=function(t){if(!this.ALPHANUMERIC_REGEX.test(t))throw"String contains unencodable characters in alphanumeric mode";var o,n=new p;for(o=0;o+2<=t.length;o+=2){var i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o+1)),n.appendBits(i,11)}return o<t.length&&n.appendBits(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o)),6),new e(e.Mode.ALPHANUMERIC,t.length,n.array)},e.makeSegments=function(t){return""==t?[]:this.NUMERIC_REGEX.test(t)?[e.makeNumeric(t)]:this.ALPHANUMERIC_REGEX.test(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]},e.makeEci=function(t){var o=new p;if(t<0)throw"ECI assignment value out of range";if(t<128)o.appendBits(t,8);else if(t<16384)o.appendBits(2,2),o.appendBits(t,14);else{if(!(t<1e6))throw"ECI assignment value out of range";o.appendBits(6,3),o.appendBits(t,21)}return new e(e.Mode.ECI,0,o.array)},e.prototype.getData=function(){return this.bitData.slice()},e.getTotalBits=function(e,t){for(var o=0,n=0,i=e;n<i.length;n++){var r=i[n],s=r.mode.numCharCountBits(t);if(r.numChars>=1<<s)return 1/0;o+=4+s+r.bitData.length}return o},e.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],o=0;o<e.length;o++)"%"!=e.charAt(o)?t.push(e.charCodeAt(o)):(t.push(parseInt(e.substr(o+1,2),16)),o+=2);return t},e.NUMERIC_REGEX=/^[0-9]*$/,e.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,e.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e}(),d=function(){function e(t){if(this.coefficients=[],t<1||t>255)throw"Degree out of range";for(var o=this.coefficients,n=0;n<t-1;n++)o.push(0);o.push(1);var i=1;for(n=0;n<t;n++){for(var r=0;r<o.length;r++)o[r]=e.multiply(o[r],i),r+1<o.length&&(o[r]^=o[r+1]);i=e.multiply(i,2)}}return e.prototype.getRemainder=function(t){for(var o=this.coefficients.map((function(e){return 0})),n=function(t){var n=t^o.shift();o.push(0),i.coefficients.forEach((function(t,i){return o[i]^=e.multiply(t,n)}))},i=this,r=0,s=t;r<s.length;r++)n(s[r]);return o},e.multiply=function(e,t){if(e>>>8!=0||t>>>8!=0)throw"Byte out of range";for(var o=0,n=7;n>=0;n--)o=o<<1^285*(o>>>7),o^=(t>>>n&1)*e;if(o>>>8!=0)throw"Assertion error";return o},e}(),p=function(){function e(){this.array=[]}return e.prototype.appendBits=function(e,t){if(t<0||t>31||e>>>t!=0)throw"Value out of range";for(var o=t-1;o>=0;o--)this.array.push(e>>>o&1)},e}();(function(e){var t=function(){function e(e,t){this.ordinal=e,this.formatBits=t}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e}();e.Ecc=t})(c||(c={})),function(e){var t=function(){function e(e,t){this.modeBits=e,this.numBitsCharCount=t}return e.prototype.numCharCountBits=function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e}();e.Mode=t}(u||(u={}));var h=128,m="#ffffff",E="#000000",f="#07f";function g(t,o,n,r){if("string"!=typeof t)throw new TypeError("Enter text for encoding");var s=e(e(e({},"object"==typeof o&&null!==o?o:{}),"object"==typeof r&&null!==r?r:{}),{qrSize:"object"==typeof o&&null!==o&&"number"==typeof o.qrSize?o.qrSize:o,className:"object"==typeof o&&null!==o&&"string"==typeof o.className?o.className:n}),a=[c.Ecc.LOW,c.Ecc.MEDIUM,c.Ecc.QUARTILE,c.Ecc.HIGH],l={qrSize:"number"==typeof s.qrSize?s.qrSize:h,className:"string"==typeof s.className?s.className:n||"",isShowLogo:!!s.isShowLogo||!1,isShowBackground:!!s.isShowBackground||!1,foregroundColor:"string"==typeof s.foregroundColor?s.foregroundColor:E,backgroundColor:"string"==typeof s.backgroundColor?s.backgroundColor:m,logoColor:"string"==typeof s.logoColor?s.logoColor:f,suffix:s.suffix?s.suffix.toString():"0",logoData:"string"==typeof s.logoData?s.logoData:null,ecc:"number"==typeof s.ecc&&a[s.ecc]?s.ecc:3,incTileSize:"number"==typeof s.incTileSize?s.incTileSize:i},d=u.makeSegments(t),p=c.encodeSegments(d,a[l.ecc],1,40,-1,!0);return _(p,l)}return{createQR:g}}()},556117:(e,t,o)=>{"use strict";Object.defineProperty(t,"classNames",{enumerable:!0,get:function(){return i}});var n=o(548324);function i(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=[];return t.forEach((function(e){if(e)switch(void 0===e?"undefined":n._(e)){case"string":i.push(e);break;case"object":Object.keys(e).forEach((function(t){e[t]&&i.push(t)}));break;default:i.push("".concat(e))}})),i.join(" ")}},859887:(e,t)=>{"use strict";function o(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,o){var n=document.createElement("textarea"),i=document.createRange();n.value=e,n.style.position="fixed",n.contentEditable="true",document.body.appendChild(n),n.focus(),n.select(),i.selectNodeContents(n);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(i)),n.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):o(new Error("copy failed"))}catch(e){o(e)}r&&r.removeAllRanges(),document.body.removeChild(n)}))}(e)}Object.defineProperty(t,"copyTextToClipboard",{enumerable:!0,get:function(){return o}})},511284:(e,t,o)=>{"use strict";o.d(t,{chunkArray:()=>_,createArray:()=>r,omitFromArray:()=>c,shuffleArray:()=>a,uniqueArray:()=>s});var n=o(586337),i=o(407484);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Array(e).fill(null).map((function(e,o){return t+o}))}function s(e){return Array.isArray(e)&&e.length?"undefined"!=typeof Set?Array.from(new Set(e)):(0,i.uniqueArrayFallback)(e):[]}function a(e){return e.map((function(e){return[Math.random(),e]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))}function _(e,t){if(!Array.isArray(e)||!e.length)return[];if(!t)return[e];var o=e.slice(0,t),i=e.slice(t);return[o].concat((0,n._)(_(i,t)))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,o=e.indexOf(t);return o<0?e:(0,n._)(e.slice(0,o)).concat((0,n._)(e.slice(o+1)))}},822740:(e,t,o)=>{"use strict";o.d(t,{asyncImportLoader:()=>n});var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(o,i){e().then(o).catch((function(r){setTimeout((function(){0!==t?n(e,t-1).then(o,i):i(r)}),1e3)}))}))}},509366:(e,t,o)=>{"use strict";o.d(t,{classNames:()=>i});var n=o(561642);function i(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var i=[];return t.forEach((function(e){if(e)switch(void 0===e?"undefined":(0,n._)(e)){case"string":i.push(e);break;case"object":Object.keys(e).forEach((function(t){e[t]&&i.push(t)}));break;default:i.push("".concat(e))}})),i.join(" ")}},598002:(e,t,o)=>{"use strict";function n(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e).then((function(){return!0}))}(e):function(e){return new Promise((function(t,o){var n=document.createElement("textarea"),i=document.createRange();n.value=e,n.style.position="fixed",n.contentEditable="true",document.body.appendChild(n),n.focus(),n.select(),i.selectNodeContents(n);var r=window.getSelection();r&&(r.removeAllRanges(),r.addRange(i)),n.setSelectionRange(0,999999);try{document.execCommand("copy")?t(!0):o(new Error("copy failed"))}catch(e){o(e)}r&&r.removeAllRanges(),document.body.removeChild(n)}))}(e)}o.d(t,{copyTextToClipboard:()=>n})},559339:(e,t,o)=>{"use strict";function n(e){return!isNaN(parseFloat(e))&&isFinite(e)&&!Array.isArray(e)}o.d(t,{isNumeric:()=>n})},282940:(e,t,o)=>{"use strict";function n(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()\[\]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}o.d(t,{getCookie:()=>n,isCookieEnabled:()=>r});var i=null,r=function(){if(null===i)try{document.cookie="cookietest=1",i=-1!==document.cookie.indexOf("cookietest="),document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}catch(e){i=!1}return i}},36754:(e,t,o)=>{"use strict";o.d(t,{addDays:()=>c,createDateFromUnixTimestamp:()=>l,getLastDayOfMonth:()=>_,isDateToday:()=>i,isDateTomorrow:()=>s,isDateYesterday:()=>r,isSameDate:()=>a});o(18162);var n=864e5;function i(e){var t=new Date,o=t.getDate(),n=t.getMonth(),i=t.getFullYear();return e.getFullYear()===i&&e.getMonth()===n&&e.getDate()===o}function r(e){return i(new Date(e.getTime()+n))}function s(e){return i(new Date(e.getTime()-n))}function a(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function _(e,t){return 2==+t?function(e){return e%4==0&&e%100!=0||e%400==0}(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}function c(e,t){var o=new Date(e.getTime());return o.setDate(o.getDate()+t),o}function l(e){return new Date(1e3*e)}},885422:(e,t,o)=>{"use strict";o.d(t,{formatDuration:()=>i});var n=o(18162);function i(e,t){e||(e=0),e=Math.abs(e);var o=Math.floor(e/3600),i=Math.floor(e/60)%60,r=e%60;return e>=3600||t?[o,(0,n.leadingZero)(i),(0,n.leadingZero)(r)].join(":"):[i,(0,n.leadingZero)(r)].join(":")}},917476:(e,t,o)=>{"use strict";o.d(t,{isEqual:()=>i});var n=o(572313);function i(e,t){if(e===t)return!0;if(null==e||null==t||!(0,n.isObjectLike)(e)&&!(0,n.isObjectLike)(t))return e!=e&&t!=t;if((0,n.isObjectLike)(e)&&(0,n.isObjectLike)(t)){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e){if(!e.hasOwnProperty(o)||!t.hasOwnProperty(o))return!1;if(!i(e[o],t[o]))return!1}return!0}return!1}},5929:(e,t,o)=>{"use strict";o.d(t,{debounce:()=>r,noop:()=>n,once:()=>s,throttle:()=>i});var n=function(){};function i(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=Date.now()-o,r=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];var _=i+o-Date.now();clearTimeout(t),_>0?t=setTimeout((function(){i=Date.now(),e.apply(n,s)}),_):(i=Date.now(),e.apply(n,s))};return r.cancel=function(){clearTimeout(t)},r}function r(e,t){var o,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=function(){return e.apply(i,n)},s=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];n=i,clearTimeout(o),o=setTimeout(r,t)};return s.cancel=function(){clearTimeout(o)},s}function s(e){var t=!1;return function(){for(var o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}},48957:(e,t,o)=>{"use strict";o.d(t,{getOffsetRect:()=>i});var n=o(153750);function i(e){var t=(0,n._)(e,HTMLElement);if("undefined"==typeof window||!t)return{top:0,left:0,width:0,height:0};var o=e.getBoundingClientRect(),i=document.body,r=document.documentElement,s=window.pageYOffset||r.scrollTop||i.scrollTop,a=window.pageXOffset||r.scrollLeft||i.scrollLeft,_=r.clientTop||i.clientTop||0,c=r.clientLeft||i.clientLeft||0;return{top:Math.round(o.top+s-_),left:Math.round(o.left+a-c),width:e.offsetWidth,height:e.offsetHeight}}},435023:(e,t,o)=>{"use strict";o.d(t,{getPhotoSize:()=>i});var n=o(586337);function i(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Array.isArray(e)||!e.length)return null;var i=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(1===e.length)return e[0];var i=(0,n._)(e).sort((function(e,t){return e.width<t.width?-1:e.width===t.width?e.height>t.height?1:-1:1})),r=i.filter((function(e){return e.width>=t}));if(!r.length)return i[i.length-1];if(!o)return r[0];for(var s=0;s<r.length;s++){var a=r[s];if(a.height>=o)return a}var _=r.sort((function(e,t){return e.height>t.height?1:-1}));return _[_.length-1]}(e,t,o);return function(e){return{url:e.url||e.src||"",width:e.width,height:e.height}}(i)}},480405:(e,t,o)=>{"use strict";o.d(t,{buildFullNamedEntities:()=>a,fullNamedEntities:()=>r});var n={AElig:"Æ",AMP:"&",Aacute:"Á",Agrave:"À",Aring:"Å",Acirc:"Â",Atilde:"Ã",Auml:"Ä",COPY:"©",Ccedil:"Ç",ETH:"Ð",Eacute:"É",Ecirc:"Ê",Egrave:"È",Euml:"Ë",GT:">",Iacute:"Í",Icirc:"Î",Igrave:"Ì",Iuml:"Ï",LT:"<",Ntilde:"Ñ",Oacute:"Ó",Ocirc:"Ô",Ograve:"Ò",Oslash:"Ø",Otilde:"Õ",Ouml:"Ö",QUOT:'"',REG:"®",THORN:"Þ",Uacute:"Ú",Ucirc:"Û",Ugrave:"Ù",Uuml:"Ü",Yacute:"Ý",aacute:"á",acirc:"â",acute:"´",aelig:"æ",agrave:"à",amp:"&",aring:"å",atilde:"ã",auml:"ä",brvbar:"¦",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",curren:"¤",deg:"°",divide:"÷",eacute:"é",ecirc:"ê",egrave:"è",eth:"ð",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",iacute:"í",icirc:"î",iexcl:"¡",igrave:"ì",iquest:"¿",iuml:"ï",laquo:"«",lt:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",ntilde:"ñ",oacute:"ó",ocirc:"ô",ograve:"ò",ordf:"ª",ordm:"º",oslash:"ø",otilde:"õ",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',raquo:"»",reg:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",thorn:"þ",times:"×",uacute:"ú",ucirc:"û",ugrave:"ù",uml:"¨",uuml:"ü",yacute:"ý",yen:"¥",yuml:"ÿ"},i={Abreve:"Ă",Acy:"А",Afr:"𝔄",Alpha:"Α",Amacr:"Ā",And:"⩓",Aogon:"Ą",Aopf:"𝔸",ApplyFunction:"⁡",Ascr:"𝒜",Assign:"≔",Backslash:"∖",Barv:"⫧",Barwed:"⌆",Bcy:"Б",Because:"∵",Bernoullis:"ℬ",Beta:"Β",Bfr:"𝔅",Bopf:"𝔹",Breve:"˘",Bscr:"ℬ",Bumpeq:"≎",CHcy:"Ч",Cacute:"Ć",Cap:"⋒",CapitalDifferentialD:"ⅅ",Cayleys:"ℭ",Ccaron:"Č",Ccirc:"Ĉ",Cconint:"∰",Cdot:"Ċ",Cedilla:"¸",CenterDot:"·",Cfr:"ℭ",Chi:"Χ",CircleDot:"⊙",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",Colon:"∷",Colone:"⩴",Congruent:"≡",Conint:"∯",ContourIntegral:"∮",Copf:"ℂ",Coproduct:"∐",CounterClockwiseContourIntegral:"∳",Cross:"⨯",Cscr:"𝒞",Cup:"⋓",CupCap:"≍",DD:"ⅅ",DDotrahd:"⤑",DJcy:"Ђ",DScy:"Ѕ",DZcy:"Џ",Dagger:"‡",Darr:"↡",Dashv:"⫤",Dcaron:"Ď",Dcy:"Д",Del:"∇",Delta:"Δ",Dfr:"𝔇",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",Diamond:"⋄",DifferentialD:"ⅆ",Dopf:"𝔻",Dot:"¨",DotDot:"⃜",DotEqual:"≐",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",Downarrow:"⇓",Dscr:"𝒟",Dstrok:"Đ",ENG:"Ŋ",Ecaron:"Ě",Ecy:"Э",Edot:"Ė",Efr:"𝔈",Element:"∈",Emacr:"Ē",EmptySmallSquare:"◻",EmptyVerySmallSquare:"▫",Eogon:"Ę",Eopf:"𝔼",Epsilon:"Ε",Equal:"⩵",EqualTilde:"≂",Equilibrium:"⇌",Escr:"ℰ",Esim:"⩳",Eta:"Η",Exists:"∃",ExponentialE:"ⅇ",Fcy:"Ф",Ffr:"𝔉",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",Fopf:"𝔽",ForAll:"∀",Fouriertrf:"ℱ",Fscr:"ℱ",GJcy:"Ѓ",Gamma:"Γ",Gammad:"Ϝ",Gbreve:"Ğ",Gcedil:"Ģ",Gcirc:"Ĝ",Gcy:"Г",Gdot:"Ġ",Gfr:"𝔊",Gg:"⋙",Gopf:"𝔾",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",Gt:"≫",HARDcy:"Ъ",Hacek:"ˇ",Hat:"^",Hcirc:"Ĥ",Hfr:"ℌ",HilbertSpace:"ℋ",Hopf:"ℍ",HorizontalLine:"─",Hscr:"ℋ",Hstrok:"Ħ",HumpDownHump:"≎",HumpEqual:"≏",IEcy:"Е",IJlig:"Ĳ",IOcy:"Ё",Icy:"И",Idot:"İ",Ifr:"ℑ",Im:"ℑ",Imacr:"Ī",ImaginaryI:"ⅈ",Implies:"⇒",Int:"∬",Integral:"∫",Intersection:"⋂",InvisibleComma:"⁣",InvisibleTimes:"⁢",Iogon:"Į",Iopf:"𝕀",Iota:"Ι",Iscr:"ℐ",Itilde:"Ĩ",Iukcy:"І",Jcirc:"Ĵ",Jcy:"Й",Jfr:"𝔍",Jopf:"𝕁",Jscr:"𝒥",Jsercy:"Ј",Jukcy:"Є",KHcy:"Х",KJcy:"Ќ",Kappa:"Κ",Kcedil:"Ķ",Kcy:"К",Kfr:"𝔎",Kopf:"𝕂",Kscr:"𝒦",LJcy:"Љ",Lacute:"Ĺ",Lambda:"Λ",Lang:"⟪",Laplacetrf:"ℒ",Larr:"↞",Lcaron:"Ľ",Lcedil:"Ļ",Lcy:"Л",LeftAngleBracket:"⟨",LeftArrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",LeftRightArrow:"↔",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",Leftarrow:"⇐",Leftrightarrow:"⇔",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",LessLess:"⪡",LessSlantEqual:"⩽",LessTilde:"≲",Lfr:"𝔏",Ll:"⋘",Lleftarrow:"⇚",Lmidot:"Ŀ",LongLeftArrow:"⟵",LongLeftRightArrow:"⟷",LongRightArrow:"⟶",Longleftarrow:"⟸",Longleftrightarrow:"⟺",Longrightarrow:"⟹",Lopf:"𝕃",LowerLeftArrow:"↙",LowerRightArrow:"↘",Lscr:"ℒ",Lsh:"↰",Lstrok:"Ł",Lt:"≪",Map:"⤅",Mcy:"М",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",MinusPlus:"∓",Mopf:"𝕄",Mscr:"ℳ",Mu:"Μ",NJcy:"Њ",Nacute:"Ń",Ncaron:"Ň",Ncedil:"Ņ",Ncy:"Н",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",Nfr:"𝔑",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",Not:"⫬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",Nscr:"𝒩",Nu:"Ν",OElig:"Œ",Ocy:"О",Odblac:"Ő",Ofr:"𝔒",Omacr:"Ō",Omega:"Ω",Omicron:"Ο",Oopf:"𝕆",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",Or:"⩔",Oscr:"𝒪",Otimes:"⨷",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",PartialD:"∂",Pcy:"П",Pfr:"𝔓",Phi:"Φ",Pi:"Π",PlusMinus:"±",Poincareplane:"ℌ",Popf:"ℙ",Pr:"⪻",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",Prime:"″",Product:"∏",Proportion:"∷",Proportional:"∝",Pscr:"𝒫",Psi:"Ψ",Qfr:"𝔔",Qopf:"ℚ",Qscr:"𝒬",RBarr:"⤐",Racute:"Ŕ",Rang:"⟫",Rarr:"↠",Rarrtl:"⤖",Rcaron:"Ř",Rcedil:"Ŗ",Rcy:"Р",Re:"ℜ",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",Rfr:"ℜ",Rho:"Ρ",RightAngleBracket:"⟩",RightArrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",Rightarrow:"⇒",Ropf:"ℝ",RoundImplies:"⥰",Rrightarrow:"⇛",Rscr:"ℛ",Rsh:"↱",RuleDelayed:"⧴",SHCHcy:"Щ",SHcy:"Ш",SOFTcy:"Ь",Sacute:"Ś",Sc:"⪼",Scaron:"Š",Scedil:"Ş",Scirc:"Ŝ",Scy:"С",Sfr:"𝔖",ShortDownArrow:"↓",ShortLeftArrow:"←",ShortRightArrow:"→",ShortUpArrow:"↑",Sigma:"Σ",SmallCircle:"∘",Sopf:"𝕊",Sqrt:"√",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",Sscr:"𝒮",Star:"⋆",Sub:"⋐",Subset:"⋐",SubsetEqual:"⊆",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",SuchThat:"∋",Sum:"∑",Sup:"⋑",Superset:"⊃",SupersetEqual:"⊇",Supset:"⋑",TRADE:"™",TSHcy:"Ћ",TScy:"Ц",Tab:"\t",Tau:"Τ",Tcaron:"Ť",Tcedil:"Ţ",Tcy:"Т",Tfr:"𝔗",Therefore:"∴",Theta:"Θ",ThickSpace:"  ",ThinSpace:" ",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",Topf:"𝕋",TripleDot:"⃛",Tscr:"𝒯",Tstrok:"Ŧ",Uarr:"↟",Uarrocir:"⥉",Ubrcy:"Ў",Ubreve:"Ŭ",Ucy:"У",Udblac:"Ű",Ufr:"𝔘",Umacr:"Ū",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",Uopf:"𝕌",UpArrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",UpEquilibrium:"⥮",UpTee:"⊥",UpTeeArrow:"↥",Uparrow:"⇑",Updownarrow:"⇕",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",Upsilon:"Υ",Uring:"Ů",Uscr:"𝒰",Utilde:"Ũ",VDash:"⊫",Vbar:"⫫",Vcy:"В",Vdash:"⊩",Vdashl:"⫦",Vee:"⋁",Verbar:"‖",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",Vopf:"𝕍",Vscr:"𝒱",Vvdash:"⊪",Wcirc:"Ŵ",Wedge:"⋀",Wfr:"𝔚",Wopf:"𝕎",Wscr:"𝒲",Xfr:"𝔛",Xi:"Ξ",Xopf:"𝕏",Xscr:"𝒳",YAcy:"Я",YIcy:"Ї",YUcy:"Ю",Ycirc:"Ŷ",Ycy:"Ы",Yfr:"𝔜",Yopf:"𝕐",Yscr:"𝒴",Yuml:"Ÿ",ZHcy:"Ж",Zacute:"Ź",Zcaron:"Ž",Zcy:"З",Zdot:"Ż",ZeroWidthSpace:"​",Zeta:"Ζ",Zfr:"ℨ",Zopf:"ℤ",Zscr:"𝒵",abreve:"ă",ac:"∾",acE:"∾̳",acd:"∿",acy:"а",af:"⁡",afr:"𝔞",alefsym:"ℵ",aleph:"ℵ",alpha:"α",amacr:"ā",amalg:"⨿",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",aogon:"ą",aopf:"𝕒",ap:"≈",apE:"⩰",apacir:"⩯",ape:"≊",apid:"≋",apos:"'",approx:"≈",approxeq:"≊",ascr:"𝒶",ast:"*",asymp:"≈",asympeq:"≍",awconint:"∳",awint:"⨑",bNot:"⫭",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",barvee:"⊽",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",beta:"β",beth:"ℶ",between:"≬",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bnot:"⌐",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxDL:"╗",boxDR:"╔",boxDl:"╖",boxDr:"╓",boxH:"═",boxHD:"╦",boxHU:"╩",boxHd:"╤",boxHu:"╧",boxUL:"╝",boxUR:"╚",boxUl:"╜",boxUr:"╙",boxV:"║",boxVH:"╬",boxVL:"╣",boxVR:"╠",boxVh:"╫",boxVl:"╢",boxVr:"╟",boxbox:"⧉",boxdL:"╕",boxdR:"╒",boxdl:"┐",boxdr:"┌",boxh:"─",boxhD:"╥",boxhU:"╨",boxhd:"┬",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxuL:"╛",boxuR:"╘",boxul:"┘",boxur:"└",boxv:"│",boxvH:"╪",boxvL:"╡",boxvR:"╞",boxvh:"┼",boxvl:"┤",boxvr:"├",bprime:"‵",breve:"˘",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",bumpeq:"≏",cacute:"ć",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",caps:"∩︀",caret:"⁁",caron:"ˇ",ccaps:"⩍",ccaron:"č",ccirc:"ĉ",ccups:"⩌",ccupssm:"⩐",cdot:"ċ",cemptyv:"⦲",centerdot:"·",cfr:"𝔠",chcy:"ч",check:"✓",checkmark:"✓",chi:"χ",cir:"○",cirE:"⧃",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledR:"®",circledS:"Ⓢ",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",clubs:"♣",clubsuit:"♣",colon:":",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",conint:"∮",copf:"𝕔",coprod:"∐",copysr:"℗",crarr:"↵",cross:"✗",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cup:"∪",cupbrcap:"⩈",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dArr:"⇓",dHar:"⥥",dagger:"†",daleth:"ℸ",darr:"↓",dash:"‐",dashv:"⊣",dbkarow:"⤏",dblac:"˝",dcaron:"ď",dcy:"д",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",ddotseq:"⩷",delta:"δ",demptyv:"⦱",dfisht:"⥿",dfr:"𝔡",dharl:"⇃",dharr:"⇂",diam:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",digamma:"ϝ",disin:"⋲",div:"÷",divideontimes:"⋇",divonx:"⋇",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",dopf:"𝕕",dot:"˙",doteq:"≐",doteqdot:"≑",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",downarrow:"↓",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",dscr:"𝒹",dscy:"ѕ",dsol:"⧶",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",dzcy:"џ",dzigrarr:"⟿",eDDot:"⩷",eDot:"≑",easter:"⩮",ecaron:"ě",ecir:"≖",ecolon:"≕",ecy:"э",edot:"ė",ee:"ⅇ",efDot:"≒",efr:"𝔢",eg:"⪚",egs:"⪖",egsdot:"⪘",el:"⪙",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",emacr:"ē",empty:"∅",emptyset:"∅",emptyv:"∅",emsp13:" ",emsp14:" ",emsp:" ",eng:"ŋ",ensp:" ",eogon:"ę",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",equals:"=",equest:"≟",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erDot:"≓",erarr:"⥱",escr:"ℯ",esdot:"≐",esim:"≂",eta:"η",euro:"€",excl:"!",exist:"∃",expectation:"ℰ",exponentiale:"ⅇ",fallingdotseq:"≒",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",ffr:"𝔣",filig:"ﬁ",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",fopf:"𝕗",forall:"∀",fork:"⋔",forkv:"⫙",fpartint:"⨍",frac13:"⅓",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",gE:"≧",gEl:"⪌",gacute:"ǵ",gamma:"γ",gammad:"ϝ",gap:"⪆",gbreve:"ğ",gcirc:"ĝ",gcy:"г",gdot:"ġ",ge:"≥",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",gfr:"𝔤",gg:"≫",ggg:"⋙",gimel:"ℷ",gjcy:"ѓ",gl:"≷",glE:"⪒",gla:"⪥",glj:"⪤",gnE:"≩",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",gopf:"𝕘",grave:"`",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",hArr:"⇔",hairsp:" ",half:"½",hamilt:"ℋ",hardcy:"ъ",harr:"↔",harrcir:"⥈",harrw:"↭",hbar:"ℏ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",horbar:"―",hscr:"𝒽",hslash:"ℏ",hstrok:"ħ",hybull:"⁃",hyphen:"‐",ic:"⁣",icy:"и",iecy:"е",iff:"⇔",ifr:"𝔦",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",ijlig:"ĳ",imacr:"ī",image:"ℑ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",int:"∫",intcal:"⊺",integers:"ℤ",intercal:"⊺",intlarhk:"⨗",intprod:"⨼",iocy:"ё",iogon:"į",iopf:"𝕚",iota:"ι",iprod:"⨼",iscr:"𝒾",isin:"∈",isinE:"⋹",isindot:"⋵",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",itilde:"ĩ",iukcy:"і",jcirc:"ĵ",jcy:"й",jfr:"𝔧",jmath:"ȷ",jopf:"𝕛",jscr:"𝒿",jsercy:"ј",jukcy:"є",kappa:"κ",kappav:"ϰ",kcedil:"ķ",kcy:"к",kfr:"𝔨",kgreen:"ĸ",khcy:"х",kjcy:"ќ",kopf:"𝕜",kscr:"𝓀",lAarr:"⇚",lArr:"⇐",lAtail:"⤛",lBarr:"⤎",lE:"≦",lEg:"⪋",lHar:"⥢",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",lambda:"λ",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",latail:"⤙",late:"⪭",lates:"⪭︀",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",lcaron:"ľ",lcedil:"ļ",lceil:"⌈",lcub:"{",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",leftarrow:"←",leftarrowtail:"↢",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",leftthreetimes:"⋋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",lessgtr:"≶",lesssim:"≲",lfisht:"⥼",lfloor:"⌊",lfr:"𝔩",lg:"≶",lgE:"⪑",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",ljcy:"љ",ll:"≪",llarr:"⇇",llcorner:"⌞",llhard:"⥫",lltri:"◺",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnE:"≨",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",longleftrightarrow:"⟷",longmapsto:"⟼",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltrPar:"⦖",ltri:"◃",ltrie:"⊴",ltrif:"◂",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",mDDot:"∺",male:"♂",malt:"✠",maltese:"✠",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",mcy:"м",mdash:"—",measuredangle:"∡",mfr:"𝔪",mho:"℧",mid:"∣",midast:"*",midcir:"⫰",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",mopf:"𝕞",mp:"∓",mscr:"𝓂",mstpos:"∾",mu:"μ",multimap:"⊸",mumap:"⊸",nGg:"⋙̸",nGt:"≫⃒",nGtv:"≫̸",nLeftarrow:"⇍",nLeftrightarrow:"⇎",nLl:"⋘̸",nLt:"≪⃒",nLtv:"≪̸",nRightarrow:"⇏",nVDash:"⊯",nVdash:"⊮",nabla:"∇",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",ncaron:"ň",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",ncy:"н",ndash:"–",ne:"≠",neArr:"⇗",nearhk:"⤤",nearr:"↗",nearrow:"↗",nedot:"≐̸",nequiv:"≢",nesear:"⤨",nesim:"≂̸",nexist:"∄",nexists:"∄",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",ngsim:"≵",ngt:"≯",ngtr:"≯",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",njcy:"њ",nlArr:"⇍",nlE:"≦̸",nlarr:"↚",nldr:"‥",nle:"≰",nleftarrow:"↚",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nlsim:"≴",nlt:"≮",nltri:"⋪",nltrie:"⋬",nmid:"∤",nopf:"𝕟",notin:"∉",notinE:"⋹̸",notindot:"⋵̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",nu:"ν",num:"#",numero:"№",numsp:" ",nvDash:"⊭",nvHarr:"⤄",nvap:"≍⃒",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwArr:"⇖",nwarhk:"⤣",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",oS:"Ⓢ",oast:"⊛",ocir:"⊚",ocy:"о",odash:"⊝",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",oelig:"œ",ofcir:"⦿",ofr:"𝔬",ogon:"˛",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",omacr:"ō",omega:"ω",omicron:"ο",omid:"⦶",ominus:"⊖",oopf:"𝕠",opar:"⦷",operp:"⦹",oplus:"⊕",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oscr:"ℴ",osol:"⊘",otimes:"⊗",otimesas:"⨶",ovbar:"⌽",par:"∥",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",pfr:"𝔭",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",plussim:"⨦",plustwo:"⨧",pm:"±",pointint:"⨕",popf:"𝕡",pr:"≺",prE:"⪳",prap:"⪷",prcue:"≼",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",prime:"′",primes:"ℙ",prnE:"⪵",prnap:"⪹",prnsim:"⋨",prod:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",propto:"∝",prsim:"≾",prurel:"⊰",pscr:"𝓅",psi:"ψ",puncsp:" ",qfr:"𝔮",qint:"⨌",qopf:"𝕢",qprime:"⁗",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",rAarr:"⇛",rArr:"⇒",rAtail:"⤜",rBarr:"⤏",rHar:"⥤",race:"∽̱",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",rarrtl:"↣",rarrw:"↝",ratail:"⤚",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",rcaron:"ř",rcedil:"ŗ",rceil:"⌉",rcub:"}",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",rhard:"⇁",rharu:"⇀",rharul:"⥬",rho:"ρ",rhov:"ϱ",rightarrow:"→",rightarrowtail:"↣",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",rightthreetimes:"⋌",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",rsaquo:"›",rscr:"𝓇",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",ruluhar:"⥨",rx:"℞",sacute:"ś",sbquo:"‚",sc:"≻",scE:"⪴",scap:"⪸",scaron:"š",sccue:"≽",sce:"⪰",scedil:"ş",scirc:"ŝ",scnE:"⪶",scnap:"⪺",scnsim:"⋩",scpolint:"⨓",scsim:"≿",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",seArr:"⇘",searhk:"⤥",searr:"↘",searrow:"↘",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",sfr:"𝔰",sfrown:"⌢",sharp:"♯",shchcy:"щ",shcy:"ш",shortmid:"∣",shortparallel:"∥",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",square:"□",squarf:"▪",squf:"▪",srarr:"→",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",subE:"⫅",subdot:"⪽",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",sum:"∑",sung:"♪",sup:"⊃",supE:"⫆",supdot:"⪾",supdsub:"⫘",supe:"⊇",supedot:"⫄",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swArr:"⇙",swarhk:"⤦",swarr:"↙",swarrow:"↙",swnwar:"⤪",target:"⌖",tau:"τ",tbrk:"⎴",tcaron:"ť",tcedil:"ţ",tcy:"т",tdot:"⃛",telrec:"⌕",tfr:"𝔱",there4:"∴",therefore:"∴",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",thinsp:" ",thkap:"≈",thksim:"∼",tilde:"˜",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",tscr:"𝓉",tscy:"ц",tshcy:"ћ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",uArr:"⇑",uHar:"⥣",uarr:"↑",ubrcy:"ў",ubreve:"ŭ",ucy:"у",udarr:"⇅",udblac:"ű",udhar:"⥮",ufisht:"⥾",ufr:"𝔲",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",umacr:"ū",uogon:"ų",uopf:"𝕦",uparrow:"↑",updownarrow:"↕",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",upsi:"υ",upsih:"ϒ",upsilon:"υ",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",uring:"ů",urtri:"◹",uscr:"𝓊",utdot:"⋰",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",uwangle:"⦧",vArr:"⇕",vBar:"⫨",vBarv:"⫩",vDash:"⊨",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vcy:"в",vdash:"⊢",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",verbar:"|",vert:"|",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",vopf:"𝕧",vprop:"∝",vrtri:"⊳",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",vzigzag:"⦚",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",wedgeq:"≙",weierp:"℘",wfr:"𝔴",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",yacy:"я",ycirc:"ŷ",ycy:"ы",yfr:"𝔶",yicy:"ї",yopf:"𝕪",yscr:"𝓎",yucy:"ю",zacute:"ź",zcaron:"ž",zcy:"з",zdot:"ż",zeetrf:"ℨ",zeta:"ζ",zfr:"𝔷",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",zscr:"𝓏",zwj:"‍",zwnj:"‌"},r={},s=!1;function a(){s||(Object.keys(n).forEach((function(e){r[e+";"]=n[e],r[e]=n[e]})),Object.keys(i).forEach((function(e){r[e+";"]=i[e]})),s=!0)}},29017:(e,t,o)=>{"use strict";o.d(t,{decodeHTMLEntities:()=>E,decodeHTMLEntitiesDeep:()=>m,encodeHTMLEntities:()=>d,escape:()=>_,unescape:()=>c});var n=o(192396),i=o(313428),r=(o(480405),new n.Replacer({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})),s=new n.Replacer({"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'}),a={"amp;":"&","lt;":"<","gt;":">","quot;":'"',"apos;":"'"};function _(e){return r.replace(e)}function c(e){return s.replace(e)}var l=String.fromCharCode(65533),u=/(?:[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;function d(e){return null==e?"":e.replace(u,(function(e){var t=e.length>1?(0,i.getCodePointAt)(e,0):e.charCodeAt(0);return"&#"+String(t)+";"}))}var p=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g;function h(e,t){return"string"==typeof e&&e?e.replace(p,(function(e){if("#"===e[1]){if(e.length<=3)return e;var o=e.charAt(2),n="x"===o||"X"===o?parseInt(e.substr(3).toLowerCase(),16):parseInt(e.substr(2));return n>=1114111?l:n>65535?(0,i.fromCodePoint)(n):String.fromCharCode(i.numericUnicodeMap[n]||n)}return t[e.slice(1)]||e})):""}function m(e){if("string"==typeof e)return E(e);if("object"==typeof e){var t=Object.prototype.toString.apply(e);if("[object Array]"===t)return e.map((function(e){return m(e)}));if("[object Object]"===t){var o={};return Object.keys(e).forEach((function(t){o[E(t)]=m(e[t])})),o}}return e}function E(e){return h(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:a)}},8520:(e,t,o)=>{"use strict";o.d(t,{addDays:()=>u.addDays,asyncImportLoader:()=>c.asyncImportLoader,chunkArray:()=>n.chunkArray,classNames:()=>i.classNames,copyTextToClipboard:()=>r.copyTextToClipboard,createArray:()=>n.createArray,createDateFromUnixTimestamp:()=>u.createDateFromUnixTimestamp,debounce:()=>_.debounce,decodeHTMLEntities:()=>m.decodeHTMLEntities,decodeHTMLEntitiesDeep:()=>m.decodeHTMLEntitiesDeep,deleteObjectKeys:()=>f.deleteObjectKeys,encodeHTMLEntities:()=>m.encodeHTMLEntities,escape:()=>m.escape,escapeRegExp:()=>w.escapeRegExp,formatDuration:()=>d.formatDuration,formatNumber:()=>E.formatNumber,getCookie:()=>l.getCookie,getLastDayOfMonth:()=>u.getLastDayOfMonth,getOffsetRect:()=>p.getOffsetRect,getPhotoSize:()=>h.getPhotoSize,getRandomString:()=>g.getRandomString,hasReactNode:()=>y.hasReactNode,isArray:()=>v.isArray,isCookieEnabled:()=>l.isCookieEnabled,isDateToday:()=>u.isDateToday,isDateTomorrow:()=>u.isDateTomorrow,isDateYesterday:()=>u.isDateYesterday,isEqual:()=>a.isEqual,isFunction:()=>v.isFunction,isNumber:()=>v.isNumber,isNumeric:()=>s.isNumeric,isObject:()=>v.isObject,isObjectLike:()=>v.isObjectLike,isRetina:()=>A.isRetina,isSameDate:()=>u.isSameDate,isString:()=>v.isString,isUndefined:()=>v.isUndefined,leadingZero:()=>E.leadingZero,localStorage:()=>b.localStorage,noop:()=>_.noop,omitFromArray:()=>n.omitFromArray,once:()=>_.once,shuffleArray:()=>n.shuffleArray,throttle:()=>_.throttle,unescape:()=>m.unescape,uniqueArray:()=>n.uniqueArray});var n=o(511284),i=o(509366),r=o(598002),s=o(559339),a=o(917476),_=o(5929),c=o(822740),l=o(282940),u=o(36754),d=o(885422),p=o(48957),h=o(435023),m=o(29017),E=o(18162),f=o(185592),g=(o(713625),o(299565)),y=o(236901),v=o(572313),w=o(710311),A=o(290497),b=o(72833)},407484:(e,t,o)=>{"use strict";o.d(t,{uniqueArrayFallback:()=>i});var n=o(561642);function i(e){if(!Array.isArray(e)||!e.length)return[];for(var t={},o=[],i=0;i<e.length;i++){var r=e[i],s=String(r)+(void 0===r?"undefined":(0,n._)(r));t[s]||(o.push(r),t[s]=!0)}return o}},313428:(e,t,o)=>{"use strict";o.d(t,{fromCodePoint:()=>i,getCodePointAt:()=>s,numericUnicodeMap:()=>n});var n={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},i=function(){return String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)}}(),r=function(){return String.prototype.codePointAt}(),s=function(){return r?function(e,t){return e.codePointAt(t)}:function(e,t){return 1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536}}()},192396:(e,t,o)=>{"use strict";o.d(t,{Replacer:()=>a});var n=o(730494),i=o(799407),r=o(50467),s=o(710311),a=function(){function e(t){(0,n._)(this,e),(0,r._)(this,"regexp",void 0),(0,r._)(this,"map",void 0),this.map=t}return(0,i._)(e,[{key:"build",value:function(){if(!this.regexp){var e=Object.keys(this.map).map(s.escapeRegExp).sort((function(e,t){return t.length-e.length})),t="(?:".concat(e.join("|"),")");this.regexp=new RegExp(t,"g")}}},{key:"replace",value:function(e){var t=this;return e?(this.build(),e.replace(this.regexp,(function(e){return t.map[e]}))):""}}]),e}()},18162:(e,t,o)=>{"use strict";function n(e){return e>=10?String(e):"0"+String(e)}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",",n=e.toString().split("."),i=[],r=n[0].length-3;r>-3;r-=3)i.unshift(n[0].slice(r>0?r:0,r+3));return n[0]=i.join(t),n.join(o)}o.d(t,{formatNumber:()=>i,leadingZero:()=>n})},185592:(e,t,o)=>{"use strict";o.d(t,{deleteObjectKeys:()=>i});var n=o(171893);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=(0,n._)({},e);return t.forEach((function(e){return delete o[e]})),o}},713625:(e,t,o)=>{"use strict";o(171893)},299565:(e,t,o)=>{"use strict";function n(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=[],n=0;n<e;n++)o.push(t.charAt(Math.floor(62*Math.random())));return o.join("")}o.d(t,{getRandomString:()=>n})},236901:(e,t,o)=>{"use strict";function n(e){return void 0!==e&&!1!==e&&null!==e&&""!==e}o.d(t,{hasReactNode:()=>n})},710311:(e,t,o)=>{"use strict";function n(e){return e?e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"):""}o.d(t,{escapeRegExp:()=>n})},290497:(e,t,o)=>{"use strict";function n(){return window.devicePixelRatio>=2}o.d(t,{isRetina:()=>n})},72833:(e,t,o)=>{"use strict";o.d(t,{localStorage:()=>d});var n,i=o(730494),r=o(799407),s=o(50467),a=o(153750),_=function(){function e(){var t=this;(0,i._)(this,e),(0,s._)(this,"data",{}),(0,s._)(this,"getItem",(function(e){return t.data.hasOwnProperty(e)?t.data[e]:null})),(0,s._)(this,"keys",(function(){return Object.keys(t.data)}))}return(0,r._)(e,[{key:"setItem",value:function(e,t){this.data[e]=String(t)}},{key:"removeItem",value:function(e){delete this.data[e]}},{key:"clear",value:function(){this.data={}}},{key:"length",get:function(){return Object.keys(this.data).length}},{key:"key",value:function(e){return Object.keys(this.data)[e]}}]),e}(),c="vk-ls-dummy",l="test";function u(){if(n)return n;try{if(window.localStorage.setItem(c,l),l!==window.localStorage.getItem(c))throw new Error("localStorage is broken");window.localStorage.removeItem(c),n=window.localStorage}catch(e){n=new _}return n}var d={setItem:function(e,t){return u().setItem(e,t)},getItem:function(e){return u().getItem(e)},removeItem:function(e){return u().removeItem(e)},clear:function(){return u().clear()},length:function(){return u().length},key:function(e){return u().key(e)},keys:function(){var e=u();return(0,a._)(e,_)?e.keys():Object.keys(e)},getPrefixedKeys:function(e){return d.keys().filter((function(t){return t.startsWith(e)}))}}},572313:(e,t,o)=>{"use strict";function n(e){return"object"==typeof e&&null!==e}function i(e){return Array.isArray(e)}function r(e){return"[object Object]"===Object.prototype.toString.call(e)}function s(e){return void 0===e}function a(e){return"function"==typeof e}function _(e){return"string"==typeof e}function c(e){return"number"==typeof e}o.d(t,{isArray:()=>i,isFunction:()=>a,isNumber:()=>c,isObject:()=>r,isObjectLike:()=>n,isString:()=>_,isUndefined:()=>s})},627338:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={root:"SpecialProjectHeader-module__root--QbEJE",singleImage:"SpecialProjectHeader-module__singleImage--I5Wcs"}},29700:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={root:"renderAvatarToString-module__root--RBv3N"}},194620:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={background:"InfoBanner-module__background--OpAlW"}},464927:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={mourning:"LeftMenu-module__mourning--YG7ZJ"}},864883:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M10.48 1.07c.55.05 1.03.14 1.47.37a3.74 3.74 0 0 1 1.64 1.63c.23.44.32.92.37 1.47.04.53.04 1.18.04 2v5.48c0 .5 0 .92-.03 1.25-.03.33-.1.72-.35 1.03a1.8 1.8 0 0 1-1.35.7c-.4.01-.76-.15-1.04-.32-.3-.17-.64-.41-1.04-.7l-1.7-1.2a7.21 7.21 0 0 0-.43-.3.25.25 0 0 0-.12 0l-.08.05c-.08.04-.18.12-.35.24l-1.7 1.2c-.4.3-.75.54-1.04.71-.28.17-.64.33-1.04.32a1.8 1.8 0 0 1-1.35-.7c-.25-.32-.32-.7-.35-1.03C2 12.94 2 12.52 2 12.02V6.53c0-.7 0-1.3.03-1.79a9.01 9.01 0 0 1 .01-.2c.05-.55.14-1.03.37-1.47a3.75 3.75 0 0 1 1.64-1.63c.44-.23.92-.32 1.47-.37.23-.02.48-.03.76-.03 1.4-.03 2.82-.08 4.2.03Z"/></svg>',name:"bookmark_16"}}o.d(t,{getIcon16Bookmark:()=>n})},253589:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M6.72 1h2.56c.67 0 1.23 0 1.67.04.47.03.88.12 1.28.31a3.25 3.25 0 0 1 1.42 1.42c.2.4.28.81.31 1.28.04.44.04 1 .04 1.67v6.05c0 .56 0 1.02-.03 1.4-.04.36-.11.76-.37 1.1a1.9 1.9 0 0 1-1.45.73c-.42.01-.8-.17-1.11-.36-.32-.2-.7-.47-1.14-.8L8.5 12.8a7.25 7.25 0 0 0-.44-.3.25.25 0 0 0-.12 0s-.03 0-.08.04c-.08.05-.19.12-.37.26L6.1 13.84c-.45.33-.82.6-1.14.8-.31.19-.69.37-1.1.36a1.9 1.9 0 0 1-1.46-.73 2.06 2.06 0 0 1-.37-1.1C2 12.78 2 12.32 2 11.76V5.72c0-.67 0-1.23.04-1.67.03-.47.12-.88.31-1.28a3.25 3.25 0 0 1 1.42-1.42c.4-.2.81-.28 1.28-.31C5.49 1 6.05 1 6.72 1Zm1.22 11.5Zm.12 0Zm-2.9-9.97c-.36.03-.56.09-.7.16a1.75 1.75 0 0 0-.77.77c-.07.14-.13.34-.16.7-.03.39-.03.88-.03 1.59v5.98c0 .6 0 1 .03 1.3.02.24.05.31.06.32a.4.4 0 0 0 .3.15s.08-.02.3-.14l1.05-.75L6.6 11.6l.07-.05c.27-.2.56-.41.89-.5a1.75 1.75 0 0 1 .88 0c.33.09.62.3.89.5l.07.05 1.36 1c.49.37.8.6 1.06.76.2.12.29.14.3.14a.4.4 0 0 0 .3-.15s.03-.08.05-.32c.03-.3.03-.7.03-1.3V5.75c0-.71 0-1.2-.03-1.58a1.88 1.88 0 0 0-.16-.71 1.75 1.75 0 0 0-.77-.77 1.88 1.88 0 0 0-.7-.16c-.39-.03-.88-.03-1.59-.03h-2.5c-.71 0-1.2 0-1.58.03Z" clip-rule="evenodd"/></svg>',name:"bookmark_outline_16"}}o.d(t,{getIcon16BookmarkOutline:()=>n})},460241:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.74 3.26a.9.9 0 0 1 0 1.28L9.27 8l3.47 3.46a.9.9 0 0 1 .08 1.18l-.08.1a.9.9 0 0 1-1.28 0L8 9.27l-3.46 3.47a.9.9 0 0 1-1.28-1.28L6.73 8 3.26 4.54a.9.9 0 0 1-.08-1.18l.08-.1a.9.9 0 0 1 1.28 0L8 6.73l3.46-3.47a.9.9 0 0 1 1.28 0Z"/></svg>',name:"cancel_16"}}o.d(t,{getIcon16Cancel:()=>n})},781596:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" fill="none" viewBox="0 0 12 16"><path fill="currentColor" d="M7.23 8 3.86 4.64a.9.9 0 0 1 1.28-1.28l4 4a.9.9 0 0 1 0 1.28l-4 4a.9.9 0 0 1-1.28-1.28L7.23 8Z"/></svg>',name:"chevron_16"}}o.d(t,{getIcon16Chevron:()=>n})},33068:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M5.63 13.23c.74.23 1.55.36 2.38.36 3.77 0 6.99-2.62 6.99-6.04 0-3.43-3.22-6.05-6.99-6.05S1.02 4.12 1.02 7.55c0 1.13.36 2.18.98 3.08a7.35 7.35 0 0 1-.78 2.32 57.53 57.53 0 0 0-.14.33.87.87 0 0 0 .83 1.22c1.56-.06 2.84-.45 3.72-1.27Zm-.38-1.7.83.27c.6.19 1.25.3 1.93.3 3.18 0 5.49-2.18 5.49-4.55S11.2 3 8.01 3C4.83 3 2.52 5.17 2.52 7.55c0 .8.26 1.56.72 2.23l.3.43-.04.52a6.09 6.09 0 0 1-.44 1.77 13.08 13.08 0 0 1-.16.39 3.35 3.35 0 0 0 1.7-.76l.65-.6Z" clip-rule="evenodd"/></svg>',name:"message_outline_16"}}o.d(t,{getIcon16MessageOutline:()=>n})},626490:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 3.25a4.75 4.75 0 0 0-4.15 7.07.75.75 0 1 1-1.3.73A6.25 6.25 0 1 1 8 14.25a.75.75 0 0 1 0-1.5 4.75 4.75 0 1 0 0-9.5Z" clip-rule="evenodd"/></svg>',name:"spinner_16"}}o.d(t,{getIcon16Spinner:()=>n})},722371:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a.75.75 0 0 1 .75.75v5.5h5.5a.75.75 0 0 1 0 1.5h-5.5v5.5a.75.75 0 0 1-1.5 0v-5.5h-5.5a.75.75 0 0 1 0-1.5h5.5v-5.5A.75.75 0 0 1 10 3Z" clip-rule="evenodd"/></svg>',name:"add_20"}}o.d(t,{getIcon20Add:()=>n})},787576:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M4.72 4.72c.3-.3.77-.3 1.06 0L10 8.94l4.22-4.22a.75.75 0 1 1 1.06 1.06L11.06 10l4.22 4.22a.75.75 0 1 1-1.06 1.06L10 11.06l-4.22 4.22a.75.75 0 0 1-1.06-1.06L8.94 10 4.72 5.78a.75.75 0 0 1 0-1.06z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"cancel_20"}}o.d(t,{getIcon20Cancel:()=>n})},44500:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M17.53 5.22a.75.75 0 0 1 0 1.06l-9.5 9.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.97 3.97 8.97-8.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"/></svg>',name:"check_20"}}o.d(t,{getIcon20Check:()=>n})},146194:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 20 20"><path fill="currentColor" fill-rule="evenodd" d="m12.75 4.04-.8 3.3 1.91.35c.96.17 1.82.62 2.07 1.53.26.92-.25 1.84-.82 2.52l-5.08 5.75c-.33.35-.66.64-.99.81-.3.16-.8.33-1.27.05-.46-.26-.58-.76-.6-1.1-.03-.38.03-.82.15-1.3l.84-3.35-1.81-.32c-.92-.16-1.84-.59-2.2-1.45-.39-.92 0-1.9.8-2.76l1.41-1.5c.84-.91 2.07-2.26 3.68-4.05.31-.35.64-.64.96-.82.31-.16.8-.32 1.26-.07.47.25.6.74.64 1.1.03.38-.02.83-.15 1.31Zm-1.37-.75a3.95 3.95 0 0 0-.22.22A330.83 330.83 0 0 1 6.05 9.1c-.63.69-.57 1.05-.52 1.15.16.38.73.5 1.08.56l2.33.41c.56.1.95.67.8 1.24l-.96 3.86a4.71 4.71 0 0 0-.08.4 4.42 4.42 0 0 0 .23-.24l5.04-5.7c.53-.65.55-1.02.52-1.15-.02-.07-.15-.32-.88-.45l-2.45-.44c-.56-.1-.94-.68-.8-1.24l.94-3.81a4.29 4.29 0 0 0 .08-.4Z" clip-rule="evenodd"/></svg>',name:"flash_outline_20"}}o.d(t,{getIcon20FlashOutline:()=>n})},947209:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h12.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75z"/><path clip-rule="evenodd" d="M19.28 12.22c.3.3.3.77 0 1.06l-4.5 4.5c-.29.29-.76.29-1.05 0l-2.5-2.5a.75.75 0 0 1 1.05-1.06l1.97 1.97 3.97-3.97c.3-.3.77-.3 1.06 0z" fill-rule="evenodd"/></g></svg>',name:"list_add_outline_20"}}o.d(t,{getIcon20ListAddOutline:()=>n})},26152:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><clipPath id="list_play_outline_20__a"><path d="M0 0h20v20H0z"/></clipPath><g clip-path="url(#list_play_outline_20__a)" fill="currentColor"><path d="M19.68 11.43c.43.25.43.89 0 1.14l-4.73 2.84c-.42.25-.95-.06-.95-.57V9.16c0-.5.53-.82.95-.57zM2 4.75c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 4.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 2 9.75zm0 5c0-.41.34-.75.75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5a.75.75 0 0 1-.75-.75z"/></g></svg>',name:"list_play_outline_20"}}o.d(t,{getIcon20ListPlayOutline:()=>n})},488439:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="20" viewBox="0 0 20 20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M15 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm-5 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3z" fill="currentColor"/></svg>',name:"more_20"}}o.d(t,{getIcon20More:()=>n})},594289:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M12 8.13a7.85 7.85 0 0 1-1.5 2.37A7.83 7.83 0 0 1 8.13 12c.83.37 1.72.86 2.37 1.51a7.83 7.83 0 0 1 1.5 2.37c.37-.84.86-1.72 1.51-2.37a7.83 7.83 0 0 1 2.37-1.5 7.85 7.85 0 0 1-2.37-1.51 7.83 7.83 0 0 1-1.5-2.37Zm-.78-2.18c-.42 1.32-1.02 2.72-1.78 3.49-.77.77-2.17 1.36-3.49 1.78a21.07 21.07 0 0 1-1.16.34c-.38.1-.38.79 0 .9a27.15 27.15 0 0 1 .91.25l.25.08c1.32.42 2.72 1.01 3.49 1.78.76.77 1.36 2.17 1.78 3.49a20.84 20.84 0 0 1 .27.9l.07.26c.1.38.79.38.9 0a27.49 27.49 0 0 1 .25-.91l.08-.25c.42-1.32 1.01-2.72 1.78-3.49s2.17-1.36 3.49-1.78a20.84 20.84 0 0 1 .9-.27l.26-.07c.38-.1.38-.8 0-.9a27.49 27.49 0 0 1-.91-.25 20.84 20.84 0 0 1-.25-.08c-1.32-.42-2.72-1.01-3.49-1.78s-1.36-2.17-1.78-3.49a21.13 21.13 0 0 1-.34-1.16c-.1-.38-.8-.38-.9 0a27.15 27.15 0 0 1-.25.91 21.13 21.13 0 0 1-.08.25ZM4.36.76a.39.39 0 0 0-.73 0L3.24 2A1.93 1.93 0 0 1 2 3.22l-1.24.41a.39.39 0 0 0 0 .74l1.24.4A1.93 1.93 0 0 1 3.22 6l.41 1.24a.39.39 0 0 0 .74 0L4.77 6A1.93 1.93 0 0 1 6 4.78l1.24-.42a.39.39 0 0 0 0-.73L6 3.24A1.93 1.93 0 0 1 4.78 2L4.36.76Z"/></svg>',name:"stars_20"}}o.d(t,{getIcon20Stars:()=>n})},84367:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M2.75 4a.75.75 0 0 0 0 1.5H6v9.75a.75.75 0 0 0 1.5 0V5.5h3.25a.75.75 0 0 0 0-1.5h-8Z"/><path d="M10.75 7.5a.75.75 0 0 0 0 1.5h2.5v6.25a.75.75 0 0 0 1.5 0V9h2.5a.75.75 0 0 0 0-1.5h-6.5Z"/></svg>',name:"text_tt_outline_20"}}o.d(t,{getIcon20TextTtOutline:()=>n})},365045:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M13.08 2.65A2.21 2.21 0 0 1 14.64 2c.57 0 1.14.22 1.57.65l1.14 1.14a2.21 2.21 0 0 1 0 3.13l-.94.94-9.17 9.18A3.3 3.3 0 0 1 4.9 18H3a1 1 0 0 1-1-1v-1.9a3.29 3.29 0 0 1 .96-2.33l8.13-8.13 1.99-2zm2.28 4.13.93-.92a.71.71 0 0 0 0-1.02l-1.14-1.13a.71.71 0 0 0-.5-.21.71.71 0 0 0-.51.2l-.93.93 2.15 2.15zm-3.22-1.07-8.11 8.12a1.79 1.79 0 0 0-.53 1.26v1.11a.3.3 0 0 0 .3.3h1.11c.47 0 .93-.19 1.27-.53l8.1-8.11-2.15-2.15z" fill="currentColor"/></svg>',name:"write_outline_20"}}o.d(t,{getIcon20WriteOutline:()=>n})},28998:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.58.06.7.05 1.32.17 1.88.46a4.79 4.79 0 0 1 2.1 2.1c.28.56.4 1.17.46 1.88.06.68.06 1.53.06 2.58v7.62c0 .77 0 1.41-.05 1.91-.04.5-.14 1.03-.48 1.46a2.46 2.46 0 0 1-1.9.93c-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.48-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.58.05-.7.18-1.32.46-1.88a4.79 4.79 0 0 1 2.1-2.1c.56-.28 1.17-.4 1.88-.46C9.18 3 10.03 3 11.08 3Z" clip-rule="evenodd"/></svg>',name:"bookmark_24"}}o.d(t,{getIcon24Bookmark:()=>n})},710870:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M11.08 3h1.84c1.05 0 1.9 0 2.59.06.7.05 1.31.17 1.88.46.9.46 1.63 1.2 2.09 2.1.29.56.4 1.17.46 1.87.06.69.06 1.54.06 2.6v7.6c0 .78 0 1.42-.05 1.92-.04.5-.14 1.03-.48 1.46-.46.58-1.15.92-1.9.93-.54 0-1.02-.24-1.44-.5-.42-.27-.93-.66-1.55-1.13l-1.61-1.24c-.61-.47-.72-.53-.8-.55a.66.66 0 0 0-.34 0c-.08.02-.19.08-.8.55l-1.61 1.24c-.62.47-1.13.86-1.55 1.13-.42.26-.9.5-1.45.5a2.46 2.46 0 0 1-1.9-.93 2.68 2.68 0 0 1-.47-1.46C4 19.11 4 18.47 4 17.7v-7.62c0-1.05 0-1.9.06-2.59.05-.7.17-1.31.46-1.88.46-.9 1.2-1.63 2.1-2.09.56-.29 1.17-.4 1.87-.46C9.18 3 10.03 3 11.1 3zM8.64 4.85c-.6.05-.94.14-1.2.28-.57.28-1.03.74-1.31 1.3-.14.27-.23.62-.28 1.21-.05.6-.05 1.38-.05 2.48v7.53c0 .83 0 1.4.04 1.8.04.41.1.5.1.5.12.16.3.25.5.25 0 0 .12 0 .47-.22.34-.22.79-.56 1.45-1.07l1.58-1.2.1-.09c.44-.33.85-.65 1.32-.78.42-.1.86-.1 1.28 0 .47.13.88.45 1.32.78l.1.08 1.58 1.21c.66.5 1.1.85 1.45 1.07.35.22.46.22.46.22.2 0 .39-.1.5-.25 0 0 .07-.09.11-.5.04-.4.04-.97.04-1.8v-7.53c0-1.1 0-1.88-.05-2.48-.05-.6-.14-.94-.28-1.2a2.99 2.99 0 0 0-1.3-1.31 3.17 3.17 0 0 0-1.21-.28 33.8 33.8 0 0 0-2.48-.05h-1.76c-1.1 0-1.88 0-2.48.05z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"bookmark_outline_24"}}o.d(t,{getIcon24BookmarkOutline:()=>n})},275563:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="browser_back_24__Master" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="browser_back_24__browser_back_24"><path id="browser_back_24__body" d="M0 0h24v24H0z"/><path d="m8.66 12 7.12 7.12a1.1 1.1 0 1 1-1.56 1.56l-7.9-7.9a1.1 1.1 0 0 1 0-1.56l7.9-7.9a1.1 1.1 0 0 1 1.56 1.56L8.66 12Z" id="browser_back_24__Path" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"browser_back_24"}}o.d(t,{getIcon24BrowserBack:()=>n})},221844:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M7.54 6.26a.9.9 0 0 0-1.28 1.28L10.73 12l-4.47 4.46a.9.9 0 0 0 1.28 1.28L12 13.27l4.46 4.47a.9.9 0 1 0 1.28-1.28L13.27 12l4.47-4.46a.9.9 0 1 0-1.28-1.28L12 10.73 7.54 6.26Z"/></svg>',name:"cancel_24"}}o.d(t,{getIcon24Cancel:()=>n})},30295:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 0a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 1.5a10.5 10.5 0 1 0 0 21 10.5 10.5 0 0 0 0-21Z" fill="currentColor"/></svg>',name:"check_circle_off_24"}}o.d(t,{getIcon24CheckCircleOff:()=>n})},94785:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 24a12 12 0 1 0 0-24 12 12 0 0 0 0 24Zm6.2-14.8a1 1 0 0 0-1.4-1.4L10 14.58l-2.8-2.8a1 1 0 0 0-1.4 1.42l3.5 3.5a1 1 0 0 0 1.4 0l7.5-7.5Z" fill="currentColor"/></svg>',name:"check_circle_on_24"}}o.d(t,{getIcon24CheckCircleOn:()=>n})},10196:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M14.96 9.26a.9.9 0 0 1 1.28 1.28l-4.6 4.6a.9.9 0 0 1-1.28 0l-2.6-2.6a.9.9 0 0 1 1.28-1.28L11 13.23l3.96-3.97Z"/><path fill-rule="evenodd" d="M12 2.1a9.9 9.9 0 1 1 0 19.8 9.9 9.9 0 0 1 0-19.8Zm0 1.8A8.1 8.1 0 0 0 3.9 12a8.1 8.1 0 0 0 8.1 8.1 8.1 8.1 0 0 0 8.1-8.1A8.1 8.1 0 0 0 12 3.9Z" clip-rule="evenodd"/></svg>',name:"check_circle_outline_24"}}o.d(t,{getIcon24CheckCircleOutline:()=>n})},970263:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 13.7 6.64 9.23a1 1 0 0 0-1.28 1.54l6 5a1 1 0 0 0 1.28 0l6-5a1 1 0 1 0-1.28-1.54L12 13.7Z"/></svg>',name:"chevron_down_24"}}o.d(t,{getIcon24ChevronDown:()=>n})},448114:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="m12 10.3-5.36 4.47a1 1 0 1 1-1.28-1.54l6-5a1 1 0 0 1 1.28 0l6 5a1 1 0 1 1-1.28 1.54L12 10.3Z"/></svg>',name:"chevron_up_24"}}o.d(t,{getIcon24ChevronUp:()=>n})},983002:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12.4 8a.9.9 0 1 0-1.8 0v4.5a.9.9 0 0 0 .58.84l4 1.5a.9.9 0 0 0 .64-1.68l-3.42-1.28V8Z"/><path fill-rule="evenodd" d="M12 2.1a9.9 9.9 0 1 0 0 19.8 9.9 9.9 0 0 0 0-19.8ZM3.9 12a8.1 8.1 0 1 1 16.2 0 8.1 8.1 0 0 1-16.2 0Z" clip-rule="evenodd"/></svg>',name:"clock_outline_24"}}o.d(t,{getIcon24ClockOutline:()=>n})},49442:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M4.93 4.93A9.97 9.97 0 0 1 12 2a9.97 9.97 0 0 1 7.07 2.93A9.97 9.97 0 0 1 22 12a9.97 9.97 0 0 1-2.93 7.07A9.97 9.97 0 0 1 12 22a9.97 9.97 0 0 1-7.07-2.93A9.97 9.97 0 0 1 2 12a9.97 9.97 0 0 1 2.93-7.07ZM12 3.8a8.17 8.17 0 0 0-5.8 2.4A8.17 8.17 0 0 0 3.8 12a8.17 8.17 0 0 0 2.4 5.8 8.17 8.17 0 0 0 5.8 2.4 8.17 8.17 0 0 0 5.8-2.4 8.17 8.17 0 0 0 2.4-5.8 8.17 8.17 0 0 0-2.4-5.8A8.17 8.17 0 0 0 12 3.8ZM13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-1-9a.9.9 0 0 1 .9.9v5.2a.9.9 0 0 1-1.8 0V7.9A.9.9 0 0 1 12 7Z" clip-rule="evenodd"/></svg>',name:"error_circle_outline_24"}}o.d(t,{getIcon24ErrorCircleOutline:()=>n})},563442:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="favorite_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="favorite_24__favorite_24"><path id="favorite_24__Bounds" d="M0 0h24v24H0z"/><path d="m15.34 8.48 4.43.43c1.54.15 2.02 1.65.83 2.64l-3.47 2.88 1.29 4.7c.42 1.54-.9 2.48-2.2 1.55L12 17.7l-4.21 2.98c-1.31.92-2.63 0-2.2-1.55l1.28-4.7-3.47-2.88c-1.2-1-.72-2.5.83-2.64l4.43-.43 1.95-4.5c.6-1.4 2.17-1.4 2.78 0l1.95 4.5Z" id="favorite_24__Mask" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"favorite_24"}}o.d(t,{getIcon24Favorite:()=>n})},203882:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.55 4.7a.6.6 0 0 0-1.1 0L9.83 8.6a.9.9 0 0 1-.77.55l-4.13.26a.6.6 0 0 0-.35 1.05l3.26 2.86a.9.9 0 0 1 .29.9l-.94 3.84a.6.6 0 0 0 .89.66l3.47-2a.9.9 0 0 1 .9 0l3.47 2a.6.6 0 0 0 .88-.66l-.93-3.85a.9.9 0 0 1 .29-.89l3.26-2.86a.6.6 0 0 0-.35-1.05l-4.13-.26a.9.9 0 0 1-.77-.56l-1.62-3.9ZM9.78 4a2.4 2.4 0 0 1 4.44 0l1.4 3.39 3.56.23a2.4 2.4 0 0 1 1.43 4.2l-2.86 2.5.8 3.32a2.4 2.4 0 0 1-3.53 2.64L12 18.54l-3.02 1.74a2.4 2.4 0 0 1-3.54-2.64l.8-3.32-2.85-2.5a2.4 2.4 0 0 1 1.43-4.2l3.56-.23L9.78 4Z" clip-rule="evenodd"/></svg>',name:"favorite_outline_24"}}o.d(t,{getIcon24FavoriteOutline:()=>n})},638338:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M6 6.6c0-.56 0-.84.1-1.05a1 1 0 0 1 .45-.44C6.76 5 7.04 5 7.6 5h.8c.56 0 .84 0 1.05.1a1 1 0 0 1 .44.45c.11.21.11.49.11 1.05v10.8c0 .56 0 .84-.1 1.05a1 1 0 0 1-.45.44c-.21.11-.49.11-1.05.11h-.8c-.56 0-.84 0-1.05-.1a1 1 0 0 1-.44-.45C6 18.24 6 17.96 6 17.4V6.6Zm8 0c0-.56 0-.84.1-1.05a1 1 0 0 1 .45-.44C14.76 5 15.04 5 15.6 5h.8c.56 0 .84 0 1.05.1a1 1 0 0 1 .44.45c.11.21.11.49.11 1.05v10.8c0 .56 0 .84-.1 1.05a1 1 0 0 1-.45.44c-.21.11-.49.11-1.05.11h-.8c-.56 0-.84 0-1.05-.1a1 1 0 0 1-.44-.45c-.11-.21-.11-.49-.11-1.05V6.6Z"/></svg>',name:"pause_24"}}o.d(t,{getIcon24Pause:()=>n})},988668:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M18.5 11.13a1 1 0 0 1 0 1.74l-9 5.2A1 1 0 0 1 8 17.2V6.8a1 1 0 0 1 1.5-.86l9 5.2Z"/></svg>',name:"play_24"}}o.d(t,{getIcon24Play:()=>n})},833791:(e,t,o)=>{"use strict";function n(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 9.1a.4.4 0 0 0 .67.3l4.29-3.9a.67.67 0 0 0 0-1L12.67.6a.4.4 0 0 0-.67.3V4a8 8 0 1 0 8 8 1 1 0 1 0-2 0 6 6 0 1 1-6-6v3.1Z"/></svg>',name:"refresh_24"}}o.d(t,{getIcon24Refresh:()=>n})},37055:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="song_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="song_24__song_24"><path id="song_24__Bounds" d="M0 0h24v24H0z"/><path d="M13 11.48v5.65c0 4.52-.87 5.39-4.37 5.85C6.96 23.19 5 22.44 5 19.8c0-1.28.8-2.5 2.46-2.81 1.27-.25-.09.02 2.78-.52.7-.13.77-.37.77-.9V3.97c0-1.24.67-1.69 2.66-2.09l4.68-.87c.37-.07.65.07.65.49v4.05c0 .42-.17.6-.59.68l-4.86.86c-.38.1-.55.36-.55.74v3.64Z" id="song_24__Mask" fill="currentColor"/></g></g></svg>',name:"song_24"}}o.d(t,{getIcon24Song:()=>n})},52661:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M16.4 5.08A8.2 8.2 0 0 0 4.57 15.49a.9.9 0 0 1-1.63.77A10 10 0 1 1 12 22a.9.9 0 0 1 0-1.8 8.2 8.2 0 0 0 4.4-15.12z" fill="currentColor" fill-rule="evenodd"/></svg>',name:"spinner_24"}}o.d(t,{getIcon24Spinner:()=>n})},282792:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path clip-rule="evenodd" d="M9.49 4.55a2.9 2.9 0 0 1 5.02 0l6.93 12a2.9 2.9 0 0 1-2.51 4.35H5.07a2.9 2.9 0 0 1-2.51-4.35zm3.46.9a1.1 1.1 0 0 0-1.9 0l-6.93 12c-.42.73.1 1.65.95 1.65h13.86c.85 0 1.37-.92.95-1.65z" fill-rule="evenodd"/><path clip-rule="evenodd" d="M12 8c.5 0 .9.37.9.84v4.82c0 .47-.4.84-.9.84s-.9-.37-.9-.84V8.84c0-.47.4-.84.9-.84z" fill-rule="evenodd"/><path d="M13 16.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/></g></svg>',name:"warning_triangle_outline_24"}}o.d(t,{getIcon24WarningTriangleOutline:()=>n})},710736:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="check_circle_outline_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="check_circle_outline_28__check_circle_outline_28" fill-rule="nonzero"><path d="M0 0h28v28H0z"/><path d="M14 2a12 12 0 1 1 0 24 12 12 0 0 1 0-24Zm0 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm4.29 6.29a1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42l-7 7a1 1 0 0 1-1.42 0l-3.5-3.5a1 1 0 0 1 1.42-1.42L12 16.6Z" id="check_circle_outline_28__Icon-Color" fill="currentColor"/></g></g></svg>',name:"check_circle_outline_28"}}o.d(t,{getIcon28CheckCircleOutline:()=>n})},881320:(e,t,o)=>{"use strict";function n(){return{icon:'<svg fill="none" height="28" viewBox="0 0 28 28" width="28" xmlns="http://www.w3.org/2000/svg"><g fill="currentColor"><path d="M21.46 7.16a1 1 0 0 1 1.38.3A1 1 0 0 1 23 8v12.35a1 1 0 1 0 2 0V8a3 3 0 0 0-4.61-2.53L16.42 8h-3.77a1 1 0 1 0 0 2H15v2.34a1 1 0 1 0 2 0V10z"/><path clip-rule="evenodd" d="M16.75 17.34a1.01 1.01 0 0 0-.09-.1L4.71 5.3A1 1 0 0 0 3.3 6.7L5.48 8.9c-.18.12-.34.25-.5.37a5.52 5.52 0 0 0-.37 8.12 5.49 5.49 0 0 0 2.98 1.53l.45 2.6a3 3 0 1 0 5.91-1.04L13.7 19h1.9l6.7 6.71a1 1 0 0 0 1.42-1.41zm-9.82-7a7.37 7.37 0 0 0-.9.68 3.49 3.49 0 0 0 0 4.95c.63.64 1.5 1.03 2.47 1.03h5.08zM10 21.17 9.63 19h2.03l.32 1.82a1 1 0 0 1-.8 1.16 1 1 0 0 1-1.17-.8z" fill-rule="evenodd"/></g></svg>',name:"loudspeaker_slash_outline_28"}}o.d(t,{getIcon28LoudspeakerSlashOutline:()=>n})},344588:(e,t,o)=>{"use strict";function n(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M28 52a24 24 0 1 0 0-48 24 24 0 0 0 0 48z" fill="#FC3"/><path fill-rule="evenodd" clip-rule="evenodd" d="M31.86 40.86a1.29 1.29 0 0 1 0 2.57h-7.72a1.29 1.29 0 0 1 0-2.57h7.72zm-1.29-12c.86-.86 1.72 1.71 6 1.71 3.43 0 6.43-1.71 6.86-.86.43.86-2.57 4.29-6.86 4.29-5.14 0-6.86-4.29-6-5.14zm-5.14 0c.86.85-.86 5.14-6 5.14-4.29 0-7.29-3.43-6.86-4.29.43-.85 3.43.86 6.86.86 4.28 0 5.14-2.57 6-1.71zm9.43-10.29c.85-.86 2.57 2.14 6 3.43s4.28 1.29 4.28 2.57c0 .86-.85 1.72-5.14 0-4.29-1.71-6-5.14-5.14-6zm-13.72 0c.86.86-.85 4.29-5.14 6-4.29 1.72-5.14.86-5.14 0 0-1.28.85-1.28 4.28-2.57 3.43-1.29 5.15-4.29 6-3.43z" fill="#805446"/></svg>',name:"pensive_face_56"}}o.d(t,{getIcon56PensiveFace:()=>n})},620407:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerHTML5:()=>a});var n=o(714209),i=o(493810),r=o(109465),s=o(778419);class a{destroy(){}getPlayedTime(){const e=this._currentAudioEl.played;let t=0;for(let o=0;o<e.length;o++)t+=e.end(o)-e.start(o);return t}getCurrentTime(){return this._currentAudioEl.currentTime}clearAudioNode(){this._currentAudioEl=this._createAudioNode(r.SILENCE)}isCurrent(e){return e===this._currentAudioEl}_createAudioNode(e){const t=new s.AudioHlsNode({onBufferUpdate:()=>{this.isCurrent(t)&&this.opts.onBufferUpdate(this.getCurrentBuffered())},onProgressUpdate:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onProgressUpdate(this.getCurrentProgress(),this.getPlayedTime(),this.getCurrentTime())},onEnd:()=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onEnd()},onSeeked:()=>{this.isCurrent(t)&&this.opts.onSeeked()},onSeek:()=>{this.isCurrent(t)&&this.opts.onSeek()},onFail:e=>{this._prefetchAudioEl===t?this._prefetchAudioEl=this._createAudioNode():this.isCurrent(t)&&t.src!==r.SILENCE&&(this._hlsError=e,this.opts.onFail&&this.opts.onFail())},onDurationChange:()=>{this.isCurrent(t)&&this._seekOnReady&&t.duration>0&&(this.seek(this._seekOnReady),this._seekOnReady=!1)},onCanPlay:()=>{this.isCurrent(t)&&this.opts.onCanPlay&&this.opts.onCanPlay()},onPause:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPause(...e)},onPlay:(...e)=>{this.isCurrent(t)&&t.src!==r.SILENCE&&this.opts.onPlay(...e)},volume:this.hasOwnProperty("_volume")?this._volume:this.opts.defaultVolume},e);return t}onReady(e){e()}prefetch(e){const t=(0,i.audioUnmaskSource)(e);this._prefetchAudioEl&&this._prefetchAudioEl.url===t||(this._prefetchAudioEl=this._createAudioNode(t))}seek(e){const t=this._currentAudioEl;t.duration>0&&t.src&&t.src!==r.SILENCE?t.currentTime=t.duration*e:this._seekOnReady=e}setVolume(e){void 0===e&&(e=this._currentAudioEl.volume),this._currentAudioEl.volume=e,this._prefetchAudioEl&&(this._prefetchAudioEl.volume=e),this._volume=e}setPlaybackRate(e){this._currentAudioEl.playbackRate=e}getCurrentProgress(){return this._currentAudioEl.currentProgress}getCurrentBuffered(){return this._currentAudioEl&&this._currentAudioEl.currentBuffered}getDuration(){return this._currentAudioEl&&this._currentAudioEl.duration}isFullyLoaded(){return this._currentAudioEl.isFullyLoaded}setUrl(e,t=(()=>{})){let o;if(!e)return t&&t(!1);const n=(0,i.audioUnmaskSource)(e);let s=this._currentAudioEl;if(this._currentAudioEl.src&&this._currentAudioEl.src!==r.SILENCE&&(this._seekOnReady=!1),this._currentAudioEl.src===n)return this.opts.onCanPlay&&this.opts.onCanPlay(),void(t&&t(!0));if(this._prefetchAudioEl){if(this._prefetchAudioEl.src===n)return this._currentAudioEl.pause(),this._currentAudioEl.setUrl(r.SILENCE),this._prefetchAudioEl.readyState>=3&&setTimeout((()=>this.opts.onCanPlay&&this.opts.onCanPlay())),this._currentAudioEl=this._prefetchAudioEl,this._prefetchAudioEl=null,void(t&&t(!0));n!==r.SILENCE&&this._prefetchAudioEl.setUrl(r.SILENCE)}s.src!==n&&(o=s.setUrl(n).then((()=>this._stopFrequencyAnalise()))),o?o.then((()=>t(!0))).catch((()=>t(!1))):t(!0)}play(){this._stopFrequencyAnalise();const e=this._currentAudioEl;if(e.src){const t=e.play();return this._startFrequencyAnalise(),t}return Promise.resolve()}preparePlay(){if(n.browser.safari)return this._currentAudioEl.setUrl(r.SILENCE).then((()=>this._currentAudioEl.play()))}_startFrequencyAnalise(){function e(e,t,o,n){return(o-t)*e/n+t}function t(e,t){return Math.random()*(t-e)+e}this._stopFrequencyAnalise();let o=999,n=null,i=null;this._freqUpdateInterval=setInterval((()=>{let r;this._currentAudioEl.paused?r=[0,0,0,0]:(o++,o>3&&(o=0,n=i,i=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)],n||(n=[t(.7,1),t(.55,.8),t(.3,.55),t(.03,.45)])),r=[e(o,n[0],i[0],3),e(o,n[1],i[1],3),e(o,n[2],i[2],3),e(o,n[3],i[3],3)]),this.opts.onFrequency&&this.opts.onFrequency(r)}),50)}_stopFrequencyAnalise(){clearInterval(this._freqUpdateInterval),this.opts.onFrequency&&this.opts.onFrequency([0,0,0,0])}pause(){this._currentAudioEl.pause(),this._stopFrequencyAnalise()}stop(){this._currentAudioEl.pause(),this.seek(0),this._stopFrequencyAnalise()}_setFadeVolumeInterval(e){if(e){if(!this._fadeVolumeWorker&&window.Worker&&window.Blob){const e=new Blob(["\n          var interval;\n          onmessage = function(e) {\n            clearInterval(interval);\n            if (e.data == 'start') {\n              interval = setInterval(function() { postMessage({}); }, 20);\n            }\n          }\n        "]);try{this._fadeVolumeWorker=new Worker(window.URL.createObjectURL(e))}catch(e){this._fadeVolumeWorker=!1}}this._fadeVolumeWorker?(this._fadeVolumeWorker.onmessage=e,this._fadeVolumeWorker.postMessage("start")):this._fadeVolumeInterval=setInterval(e,60)}else this._fadeVolumeWorker&&(this._fadeVolumeWorker.terminate(),this._fadeVolumeWorker=null),this._fadeVolumeInterval&&clearInterval(this._fadeVolumeInterval)}fadeVolume(e,t,o){e=Math.max(0,Math.min(1,e));const n=this._currentAudioEl;let i=0;if(t){const o=e-n.volume;i=o/(t/20||1)}else i=e<n.volume?-.06:.001;if(Math.abs(e-n.volume)<=.001)return this._setFadeVolumeInterval(),o&&o();let r=n.volume;this._setFadeVolumeInterval((()=>{!t&&i>0&&(i*=1.35),r+=i;let n=!1;if(n=i<0?r<=e:r>=e,n)return this.setVolume(e),this._setFadeVolumeInterval(),o&&o();this.setVolume(r)}))}getErrorData(){const e=this._currentAudioEl.error||{};return{is_hls:this._currentAudioEl.hls?1:0,url:this._currentAudioEl.src,error_code:e.code,error_message:e.message,hls_error:this._hlsError?JSON.stringify(this._hlsError):null}}constructor(e){this.type="html5",this.opts=e||{},this._audioNodes=[],this._currentAudioEl=this._createAudioNode(),this._prefetchAudioEl=this._createAudioNode()}}},603354:(e,t,o)=>{"use strict";o.d(t,{AudioAds:()=>u});var n=o(7144),i=o(381263),r=o(714209),s=o(514640),a=o(944762),_=o(490712),c=o(866953),l=o(981188);class u{get isActive(){return!!this._isActive}set isActive(e){this._isActive=e,this.player.notify(s.events.PLAYER_IS_AD_CHANGED,e)}isPlaying(){return this.isActive}getCurrentAd(){return this._currentAd}setAdsConfig(e){this._adsConfig=e}getCurrentProgress(){return this._adsCurrentProgress}getDuration(){return this._duration}loadAdman(e){const t=t=>e&&e(t);if(this._admanLoaded)return void t();let o=0;(0,i.loadScript)(u.ADMAN_SRC,{onLoad:()=>{this._admanLoaded=!0,t()},onError:()=>{window.abp?(this._admanLoaded=!0,t()):(o+=1,3===o&&(this._admanLoaded=!0),t("script_load_fail"))}})}_fetchAd(e,t,o,i,r){this.loadAdman((a=>{if(!window.AdmanHTML)return this._sendEvent("no_adman",t,u.AD_TYPE,a),i&&i();this._adman=new AdmanHTML;const _=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig,c={_SITEID:276,ver:251116,vk_id:vk.id,puid1:554,duration:e.duration,content_id:d(e.ownerId,e.id),vk_catid:u.CAT_IDS[t]||u.CAT_IDS.other,sign:_?.sign||""};Object.assign(c,e.ads||{}),nav.objLoc&&nav.objLoc.preview&&(c.preview=(0,n.intval)(nav.objLoc.preview)),cur.adsPreview&&(c.preview=1,c.vk_id=398724832),this._adman.setDebug(!!c.preview),this._adman.onError((()=>i&&i())),this._adman.onReady((()=>{if(!this._adman)return;const e=this._adman.getBannersForSection(u.AD_TYPE);if(e&&e.length){const[n]=e;"statistics"===n.type?(this._play(!0,t),i&&i()):(this._sendEvent("received",t),o?(this._sendEvent("rejected",t,u.AD_TYPE,r),this.deinit(),i&&i()):(this._sendEvent("ready",t),this.player.notify(s.events.AD_READY),this._play(!1,t,i,n)))}else o||this._sendEvent("not_received",t),i&&i()})),this._adman.init({slot:3514,wrapper:document.createElement("div"),params:c,browser:{adBlock:!!window.abp,mobile:!1}}),this._sendEvent("requested",t)}))}_sendEvent(e,t,o,i){const r=o?"/"+o:"",s=i?"/"+i:"";this._adEvents.push(e+"/"+t+r+s),clearTimeout(this._adEventDelay),this._adEventDelay=setTimeout((()=>{ajax.post(this.adsStatUrl,{act:"ad_event",events:this._adEvents.join(","),v:this.playerVersion,abp:(0,n.intval)(window.abp)},{onFail:()=>!0}),this._adEvents=[]}),500)}_play(e,t,o,i){this._adman.onCompleted((()=>{this.deinit(!0),e?this._sendEvent("statistics",t):(this.player.notify(s.events.PROGRESS,0),this.player.notify(s.events.AD_COMPLETED),this.isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._sendEvent("completed",t),this.isMvk||(window.document.title=(0,n.replaceEntities)(this._adsPrevTitle)),o&&o())})),this._adman.onStarted((()=>{e||(this.player.setIsPlaying(!0),this.player.notify(s.events.PLAY),this.player.notify(s.events.PROGRESS,0),this.player.notify(s.events.AD_STARTED,(0,l.makeAudioAdFromAdman)(i)),this.updateVolume(),this._sendEvent("started",t),window.statlogsValueEvent&&(0,_.statlogsValueEvent)("audio_web_ad_link","show"))})),this._adman.onPaused((()=>{this.player.setIsPlaying(!1),this.player.notify(s.events.PAUSE)})),this._adman.onPlayed((()=>{this.player.setIsPlaying(!0),this.player.notify(s.events.PLAY)}));const r=[.25,.5,.75];if(this._adman.onTimeRemained((e=>{this._duration=isNaN(e.duration)?0:e.duration,this._adsCurrentProgress=(isNaN(e.percent)?0:e.percent)/100,this.player.notify(s.events.PROGRESS,this._adsCurrentProgress,this._duration),(0,n.each)(r,((e,o)=>{if(this._adsCurrentProgress>=o)return r.shift(),this._sendEvent("progress_"+(0,n.intval)(100*o),t),!1}))})),this._adman.start(u.AD_TYPE),e)return o&&o();this._currentAd=(0,l.makeAudioAdFromAdman)(i),this.isActive=!0,this._adsPrevTitle=document.title,this.isMvk||(window.document.title=getLang("global_audio_ad"))}updateVolume(){this._adman&&this._adman.setVolume(.7*this.player.getVolume())}deinit(e){this._adman=null,!e&&this.player.notify(s.events.AD_DEINITED)}pause(){this._adman&&(this.player.setIsPlaying(!1),this._adman.pause())}stop(){this._adman&&(this.player.setIsPlaying(!1),this._adman.stop())}resume(){this._adman&&(this.player.setIsPlaying(!0),this._adman.resume(),this.player.notify(s.events.PLAY))}checkPlay(e,t){const o=this.player._getPlayingContextSection(),{type:n,reason:i}=this._isAllowed(e),r=()=>t&&t();switch(n){case u.ALLOW_ALLOWED:this._fetchAd(e,o,!1,r);break;case u.ALLOW_DISABLED:r();break;case u.ALLOW_REJECT:this._fetchAd(e,o,!0,!1,i),r()}}hasAdsSupport(){const e=(0,n.intval)(r.browser.version.split(".")[0]);return!(r.browser.ios||r.browser.safari&&this.isMvk||r.browser.chrome&&e<50)}_isAllowed(e){if(vk.widget||(0,a.isPodcast)(e)||(0,c.isExternalStream)(e))return{type:u.ALLOW_DISABLED};const t=this._adsConfig||vk.audioAdsConfig||window.audioAdsConfig;if(t){if(!t.enabled||!this.hasAdsSupport())return{type:u.ALLOW_DISABLED};if(cur.adsPreview)return{type:u.ALLOW_ALLOWED};if(t.day_limit_reached)return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_LIMIT};return"im"!==this.player._getPlayingContextSection()?{type:u.ALLOW_ALLOWED}:{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_SECTION}}return{type:u.ALLOW_REJECT,reason:u.REJECT_REASON_UNKNOWN}}startPlay(e,t){this.checkPlay(e,t)}constructor(e,t,o){this._isActive=!1,this._currentAd=null,this._adsCurrentProgress=0,this._adman=null,this._admanLoaded=!1,this._adEvents=[],this.player=e||{},this.playerVersion=t||null,this._startAdsTO=null,this._adsConfig=null,this._duration=0,this.isMvk=Boolean(o),this.adsStatUrl=this.isMvk?"audio":"al_audio.php"}}function d(e,t){const o=e.toString(16);let n=t.toString(16);for(;n.length<8;)n="0"+n;return o+n}u.ADMAN_SRC="//ad.mail.ru/static/admanhtml/rbadman-html5.min.js",u.CAT_IDS={my:101,my_playlists:101,audio_feed:109,recent:113,user_wall:104,group_wall:104,user_list:102,group_list:103,user_playlists:102,group_playlists:103,feed:105,search:110,global_search:110,replies:104,im:106,group_status:104,user_status:104,recs:107,recs_audio:107,recs_album:107,other:114},u.AD_TYPE="preroll",u.ALLOW_DISABLED=1,u.ALLOW_ALLOWED=2,u.ALLOW_REJECT=3,u.REJECT_REASON_UNKNOWN="unknown",u.REJECT_REASON_LIMIT="track_limit_exceeded",u.REJECT_REASON_SECTION="section_not_allowed"},109465:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_VOLUME:()=>i,SILENCE:()=>n});const n="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",i=.4761515102104643},493810:(e,t,o)=>{"use strict";o.d(t,{audioUnmaskSource:()=>s});var n=o(7144);const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMN0PQRSTUVWXYZO123456789+/=",r={v:function(e){return e.split("").reverse().join("")},r:function(e,t){let o;e=e.split("");const n=i+i;let r=e.length;for(;r--;)o=n.indexOf(e[r]),~o&&(e[r]=n.substr(o-t,1));return e.join("")},s:function(e,t){let o=e.length;if(o){const n=function(e,t){const o=e.length,n=[];if(o){let e=o;for(t=Math.abs(t);e--;)t=(o*(e+1)^t+e)%o,n[e]=t}return n}(e,t);let i=0;for(e=e.split("");++i<o;)e[i]=e.splice(n[o-1-i],1,e[i])[0];e=e.join("")}return e},i:function(e,t){return r.s(e,t^vk.id)},x:function(e,t){const o=[];return t=t.charCodeAt(0),(0,n.each)(e.split(""),(function(e,n){o.push(String.fromCharCode(n.charCodeAt(0)^t))})),o.join("")}};function s(e){if((!window.wbopen||!~(window.open+"").indexOf("wbopen"))&&~e.indexOf("audio_api_unavailable")){let t,o,n=e.split("?extra=")[1].split("#"),i=""===n[1]?"":a(n[1]);if(n=a(n[0]),"string"!=typeof i||!n)return e;i=i?i.split(String.fromCharCode(9)):[];let s=i.length;for(;s--;){if(o=i[s].split(String.fromCharCode(11)),t=o.splice(0,1,n)[0],!r[t])return e;n=r[t].apply(null,o)}if(n&&"http"===n.substr(0,4))return n}return e}function a(e){if(!e||e.length%4==1)return!1;let t,o,n=0,r=0,s="";for(;o=e.charAt(r++);)o=i.indexOf(o),~o&&(t=n%4?64*t+o:o,n++%4)&&(s+=String.fromCharCode(255&t>>(-2*n&6)));return s}},567005:(e,t,o)=>{"use strict";function n(e,t){let o="";return e.forEach((function(n,i){let r="/audio?performer=1&q="+encodeURIComponent(n.name),s=window.getWebHost?window.getWebHost():"";n.id&&(r=`/artist/${n.id}`),o+=t?`<a class="artist_link" href="${s}${r}">${n.name}</a>`:n.name,i<e.length-1&&(o+=", ")})),o}o.d(t,{getAudioArtistsString:()=>n})},694581:(e,t,o)=>{"use strict";o.d(t,{getAudioPerformers:()=>s});var n=o(944762),i=o(567005),r=o(59052);function s(e,t=!0){let o="";const s=!(0,n.isPodcast)(e)&&t;if(Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS])&&(o=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS],s)),Array.isArray(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS])&&(o+=" feat. ",o+=(0,i.getAudioArtistsString)(e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS],s)),!o){let t=e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]?e[r.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(/<\/?em>/g,""):"";if(s){o=`<a class="artist_link" data-performer="${t}" href="${"/audio?performer=1&q="+encodeURIComponent(t)}">${t}</a>`}else o=t}return o}},944762:(e,t,o)=>{"use strict";o.d(t,{isPodcast:()=>r});var n=o(59052),i=o(7144);function r(e){if(!e)return!1;let t=(0,i.isObject)(e)?e.extra:e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA];return(0,i.isObject)(t)||(t=JSON.parse(t||"{}")),!!t.podcast}},591060:(e,t,o)=>{"use strict";o.d(t,{serializeAudio:()=>i});var n=o(59052);function i(e){if(!e)return null;if(Array.isArray(e))return e;const t=[e.addHash,e.editHash,e.actionHash,e.deleteHash,e.replaceHash,e.urlHash,e.restoreHash].join("/"),o=[e.coverUrl_l,e.coverUrl_p].join(","),i=[];return i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]=e.id,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]=e.owner_id,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_URL]=e.url,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e.title,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e.performer,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_DURATION]=e.duration,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_ID]=e.albumId,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_AUTHOR_LINK]=e.authorLink,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_LYRICS]=e.lyrics,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]=e.flags,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]=e.context,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA]=e.extra,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_HASHES]=t,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_COVER_URL]=o,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ADS]=e.ads,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_SUBTITLE]=e.subTitle,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_MAIN_ARTISTS]=e.mainArtists,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FEAT_ARTISTS]=e.featArtists,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM]=e.album,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=e.trackCode,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_RESTRICTION]=e.restrictionStatus,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ALBUM_PART]=e.albumPart,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=e.accessKey,i[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CHART_INFO_INDEX]=e.chartInfo,i}},836901:(e,t,o)=>{"use strict";function n(e,t){if(!window.Worker||!window.Blob)return setTimeout(e,t);{const o=new Blob([`\n      var timeout;\n      onmessage = function(e) {\n        clearTimeout(timeout);\n        if (e.data == 'start') {\n          timeout = setTimeout(function() { postMessage({}); }, ${t});\n        }\n      }\n    `]);try{const t=new Worker(window.URL.createObjectURL(o));return t.onmessage=function(){t.terminate(),e()},t.postMessage("start"),t}catch(o){return setTimeout(e,t)}}}o.d(t,{setWorkerTimeout:()=>n})},72882:(e,t,o)=>{"use strict";function n(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}o.d(t,{wrapAudioPlay:()=>n})},313353:(e,t,o)=>{"use strict";o.d(t,{gemiusTrackPage:()=>i});var n=o(476726);function i(){if((0,n.partConfigEnabled)("geminus_counter")){const e="pzBAVLtpzyiyDVIwmwjmX5a2zSVdA6eUI7mpf0ufDFf.57";if(window.pp_gemius_identifier)window.pp_gemius_hit(e);else{window.pp_gemius_identifier=e;const t=function(e){window[e]=window[e]||function(){let t=window[e+"_pdata"]=window[e+"_pdata"]||[];t[t.length]=arguments}};t("gemius_hit"),t("gemius_event"),t("pp_gemius_hit"),t("pp_gemius_event"),function(e,t){try{const o=e.createElement(t),n=e.getElementsByTagName(t)[0],i="http"+("https:"==location.protocol?"s":"");let r="vkgalv";if(window.vk&&window.vk.countryISO)switch(window.vk.countryISO){case"BY":r="vkgaby";break;case"MD":r="vkgamd";break;case"EE":r="vkgaee"}o.setAttribute("async","async"),o.setAttribute("defer","defer"),o.src=i+"://"+r+".hit.gemius.pl/xgemius.js",n.parentNode.insertBefore(o,n)}catch(e){}}(document,"script")}}}},730443:(e,t,o)=>{"use strict";o.d(t,{mediascopeTrackPage:()=>s});var n=o(7144),i=o(490712),r=o(476726);function s(e,t){const o=location.protocol,s=`^https?:\\/\\/(?:(?:www|m)\\.)?(?:\\w+\\.)*${(0,n.escapeRE)("vk.com")}`,a=window._tns&&(window._tns.tnsPixelSocdem||"83"),_=t.replace(/\*/g,"%2a").split("#")[0],c=window._tns&&window._tns.tnsPixelType;if((0,n.vkImage)().src=`${o}//www.tns-counter.ru/V13a**clid:${a}*${_}*vk_com/ru/UTF-8/tmsec=vksite_total/${Math.round(1e9*Math.random())}`,(0,r.partConfigEnabled)("tns_track_sections")){const t="content",o="messenger",n="photo",r="music",a="podcasts",_="video",c="clips",l="services",u="taxi",d="eda",p="worki",h="ecomm",m="games",E="docs",f="other",g="feed",y="friends",v="groups",w="idpublicclub",A="longread",b="bookmarks",T="stickers",I="likes",P="messenger",C="photo",S="music",O="podcasts",M="video",D="clips",L="services",k="taxi",R="eda",N="worki",B="ecomm",x="gamesapp",U="gamesapppage",F="docs",W="docdoc",K="other",V=[...[[/w=story-?\d+_\d+/,t,"story"],[/z=video-?\d+_\d+/,_,"videoview"],[/z=(photo(_tag)?-?\d+_\d+|albums?-?\d+)/,n,"photoview"],[/z=audio_playlist-?\d+_\d+/,r,"playlistview"],[/z=podcast-?\d+_\d+/,r,"podcastview"],[/z=clip-?\d+_\d+/,c,"clipsview"],[/w=app\d+/,m,"gamesappview"],[/w=product-?\d+_\d+/,h,"product"]].map((([e,t,o])=>[new RegExp(s+"\\b.*?\\b"+e.source),t,o])),...[[/feed\?section=likes(\/|\&|$)/,t,I],[/feed(\/|\?|$)/,t,g],[/friends(\/|\?|$)/,t,y],[/groups(\/|\?|$)/,t,v],[/(id|public|club)\d+(\/|\?|$)/,t,w],[/@[\w-\.]+(\/|\?|$)/,t,A],[/bookmarks(\/|\?|$)/,t,b],[/stickers(\/|\?|$)/,t,T],[/im(\/|\?|$)/,o,P],[/(photos|tag\d+|(albums|photos)-?\d+|(album|photo)-?\d+_\d+)(\/|\?|$)/,n,C],[/(audio(s-?\d+)?|music)(\/|\?|$)/,r,S],[/podcasts(-?\d+)(\/|\?|$)/,a,O],[/(videos-?\d+|video(-?\d+_\d+)?)(\/|\?|$)/,_,M],[/(clips(-?\d+)?|clip-?\d+_\d+)(\/|\?|$)/,c,D],[/services(\/|\?|$)/,l,L],[/taxi(\/|\?|$)/,u,k],[/eda(\/|\?|$)/,d,R],[/worki(\/|\?|$)/,p,N],[/market(-?\d+)?(\/|\?|$)/,h,B],[/apps(\/|\?|$)/,m,x],[/app\d+(_-?\d+)(\/|\?|$)/,m,U],[/docs(\/|\?|$)/,E,F],[/doc-?\d+_\d+(\/|\?|$)/,E,W]].map((([e,t,o])=>[new RegExp(s+"\\/"+e.source),t,o]))],H=window.cur&&window.cur.module||"other";let j=f,G=K;V.some((t=>{if(t[0].test(e))return j=t[1],G=t[2],!0})),(0,i.statlogsValueEvent)("counters_check_tns",j,G,H)}"unauth"===c?(0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184674/"+Math.round(1e9*Math.random()):"has_rough"===c?(0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184675/"+Math.round(1e9*Math.random()):"not_has_rough"===c&&((0,n.vkImage)().src=o+"//www.tns-counter.ru/V13a****vk_ad/ru/UTF-8/tmsec=vkad_cid1015708-posid1184677/"+Math.round(1e9*Math.random())),(0,r.partConfigEnabled)("tns_track_hosts")&&((0,n.vkImage)().src=`https://${function(){if(window.cur&&window.cur.module&&(0,n.isString)(window.cur.module)){const e=window.cur.module.trim().toLowerCase().replace(/[^a-z0-9_-]/g,"");if(e)return e}return"unknown"}()}.tns.vk-portal.net?v=${Math.round(1e9*Math.random())}`)}},346156:(e,t,o)=>{"use strict";o.d(t,{counterId:()=>n,getCustomCounterIdTmrUtils:()=>a,tmrFinishTimespent:()=>p,tmrPushRawEvent:()=>s,tmrSendTimespentEvent:()=>u,tmrStartTimespent:()=>d,tmrTrackCustomGoal:()=>l,tmrTrackMiniAppClose:()=>E,tmrTrackMiniAppCustom:()=>f,tmrTrackMiniAppEvent:()=>h,tmrTrackMiniAppOpen:()=>m,tmrTrackPage:()=>c,tmrUpdateUserId:()=>_});const n="2579437",i={MINI_APP_EVENT:"miniAppEvent"};function r(){return window.vk&&window.vk.id?window.vk.id:0}function s(e){window.vk&&window.vk.zero||window.__dev||(window._tmr=window._tmr||[],window._tmr.push(e))}function a(e){const t=t=>{const o=r();r&&s({id:e,type:i.MINI_APP_EVENT,params:{...t,platformUserId:String(o)}})},o="open",n="close",a="custom";return{tmrUpdateUserId:()=>{s({type:"setUserID",userid:r()})},tmrTrackPage:(t,o)=>{s({id:e,url:t,referrer:o,type:"pageView",start:(new Date).getTime(),pid:r(),userid:r(),timespent:!0})},tmrTrackCustomGoal:(t,o={})=>{s({id:e,type:"reachGoal",goal:t,userid:r(),params:o})},tmrSendTimespentEvent:t=>{s({id:e,type:"incrementEventTimespent",activity:t,userid:r()})},tmrStartTimespent:(t,o=!1)=>{s({id:e,type:"startTimespent",activity:t,userid:r(),canUseInBackground:o})},tmrFinishTimespent:(t,o=!1)=>{s({id:e,type:"stopTimespent",activity:t,userid:r(),canUseInBackground:o})},tmrTrackMiniAppEvent:t,tmrTrackMiniAppOpen:(e,n)=>{t({eventType:o,miniAppId:e,queryParams:n})},tmrTrackMiniAppClose:e=>{t({eventType:n,miniAppId:e})},tmrTrackMiniAppCustom:(e,o)=>{t({eventType:a,miniAppId:e,...o})}}}const{tmrUpdateUserId:_,tmrTrackPage:c,tmrTrackCustomGoal:l,tmrSendTimespentEvent:u,tmrStartTimespent:d,tmrFinishTimespent:p,tmrTrackMiniAppEvent:h,tmrTrackMiniAppOpen:m,tmrTrackMiniAppClose:E,tmrTrackMiniAppCustom:f}=a(n)},577271:(e,t,o)=>{"use strict";o.d(t,{updateCounters:()=>a});var n=o(313353),i=o(730443),r=o(141229),s=o(490712);function a(e,t){if(window.__dev||window.vk&&(window.vk.zero||window.vk.__dev))return;t=t||document.referrer||"";[[/(hash|dl)=\w+/g,"$1="],[/(\/(?:write|mail|im|al_im.php))(?:\?[a-z0-9&=_-]*)?$/,"$1"],[/(\/write)\d*(?:\?[a-zA-Z0-9&=_-]*)?$/,"$1"]].forEach((([o,n])=>{e=e.replace(o,n),t=t.replace(o,n)})),(0,r.tmrTrackPage)(e,t);const o=[/\/login\?.*$/];o.some((t=>t.test(e)))||o.some((e=>e.test(t)))||((0,i.mediascopeTrackPage)(e,t),(0,n.gemiusTrackPage)(),(0,s.statlogsValueEvent)("counters_check",1))}},628411:(e,t,o)=>{"use strict";o.d(t,{EMOJI_HINTS:()=>a,EMOJI_PREFIXED_REPLACES:()=>r,EMOJI_REPLACES:()=>s,emojiRegex:()=>n,skinToneModifierRegex:()=>i});const n=()=>/\u{1F3F4}(?:\u{E0067}\u{E0062}(?:\u{E0065}\u{E006E}\u{E0067}|\u{E0077}\u{E006C}\u{E0073}|\u{E0073}\u{E0063}\u{E0074})\u{E007F}|\u{200D}\u{2620}\u{FE0F}?)|\u{1F469}\u{200D}\u{1F469}\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F468}(?:\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D})?\u{1F468}|[\u{1F468}\u{1F469}]\u{200D}(?:\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}])|\u{1F466}\u{200D}\u{1F466}|\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}(?:\u{2764}\u{FE0F}?\u{200D}(?:\u{1F48B}\u{200D}[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}])|\u{1F469}\u{200D}\u{1F466}\u{200D}\u{1F466}|(?:\u{1F441}\u{FE0F}?\u{200D}\u{1F5E8}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{1F468}(?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2695}\u{2696}\u{2708}]|\u{200D}[\u{2695}\u{2696}\u{2708}])|(?:[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}]\u{FE0F}?|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}])\u{200D}[\u{2640}\u{2642}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}](?:[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{2640}\u{2642}]|\u{200D}[\u{2640}\u{2642}])|\u{1F469}\u{200D}[\u{2695}\u{2696}\u{2708}])\u{FE0F}?|\u{1F469}\u{200D}\u{1F467}\u{200D}[\u{1F466}\u{1F467}]|\u{1F469}\u{200D}\u{1F469}\u{200D}[\u{1F466}\u{1F467}]|\u{1F468}(?:\u{200D}(?:[\u{1F468}\u{1F469}]\u{200D}[\u{1F466}\u{1F467}]|[\u{1F466}\u{1F467}])|[\u{1F3FB}-\u{1F3FF}])|\u{1F3F3}\u{FE0F}?\u{200D}\u{1F308}|\u{1F469}\u{200D}\u{1F467}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]\u{200D}[\u{1F33E}\u{1F373}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9B0}-\u{1F9B3}]|\u{1F469}\u{200D}\u{1F466}|\u{1F1F6}\u{1F1E6}|\u{1F1FD}\u{1F1F0}|\u{1F1F4}\u{1F1F2}|\u{1F469}[\u{1F3FB}-\u{1F3FF}]|\u{1F1ED}[\u{1F1F0}\u{1F1F2}\u{1F1F3}\u{1F1F7}\u{1F1F9}\u{1F1FA}]|\u{1F1EC}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EE}\u{1F1F1}-\u{1F1F3}\u{1F1F5}-\u{1F1FA}\u{1F1FC}\u{1F1FE}]|\u{1F1EA}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1ED}\u{1F1F7}-\u{1F1FA}]|\u{1F1E8}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1EE}\u{1F1F0}-\u{1F1F5}\u{1F1F7}\u{1F1FA}-\u{1F1FF}]|\u{1F1F2}[\u{1F1E6}\u{1F1E8}-\u{1F1ED}\u{1F1F0}-\u{1F1FF}]|\u{1F1F3}[\u{1F1E6}\u{1F1E8}\u{1F1EA}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F4}\u{1F1F5}\u{1F1F7}\u{1F1FA}\u{1F1FF}]|\u{1F1FC}[\u{1F1EB}\u{1F1F8}]|\u{1F1FA}[\u{1F1E6}\u{1F1EC}\u{1F1F2}\u{1F1F3}\u{1F1F8}\u{1F1FE}\u{1F1FF}]|\u{1F1F0}[\u{1F1EA}\u{1F1EC}-\u{1F1EE}\u{1F1F2}\u{1F1F3}\u{1F1F5}\u{1F1F7}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1EF}[\u{1F1EA}\u{1F1F2}\u{1F1F4}\u{1F1F5}]|\u{1F1F8}[\u{1F1E6}-\u{1F1EA}\u{1F1EC}-\u{1F1F4}\u{1F1F7}-\u{1F1F9}\u{1F1FB}\u{1F1FD}-\u{1F1FF}]|\u{1F1EE}[\u{1F1E8}-\u{1F1EA}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}]|\u{1F1FF}[\u{1F1E6}\u{1F1F2}\u{1F1FC}]|\u{1F1EB}[\u{1F1EE}-\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1F7}]|\u{1F1F5}[\u{1F1E6}\u{1F1EA}-\u{1F1ED}\u{1F1F0}-\u{1F1F3}\u{1F1F7}-\u{1F1F9}\u{1F1FC}\u{1F1FE}]|\u{1F1E9}[\u{1F1EA}\u{1F1EC}\u{1F1EF}\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1FF}]|\u{1F1F9}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1ED}\u{1F1EF}-\u{1F1F4}\u{1F1F7}\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FF}]|\u{1F1E7}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EF}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|[#\*0-9]\u{FE0F}?\u{20E3}|\u{1F1F1}[\u{1F1E6}-\u{1F1E8}\u{1F1EE}\u{1F1F0}\u{1F1F7}-\u{1F1FB}\u{1F1FE}]|\u{1F1E6}[\u{1F1E8}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F2}\u{1F1F4}\u{1F1F6}-\u{1F1FA}\u{1F1FC}\u{1F1FD}\u{1F1FF}]|\u{1F1F7}[\u{1F1EA}\u{1F1F4}\u{1F1F8}\u{1F1FA}\u{1F1FC}]|\u{1F1FB}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1EE}\u{1F1F3}\u{1F1FA}]|\u{1F1FE}[\u{1F1EA}\u{1F1F9}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u{26F9}\u{1F3CB}\u{1F3CC}\u{1F575}][\u{1F3FB}-\u{1F3FF}]|[\u{261D}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F470}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F4AA}\u{1F574}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91D}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F936}\u{1F9B5}\u{1F9B6}\u{1F9D1}-\u{1F9D5}][\u{1F3FB}-\u{1F3FF}]|[\u{231A}\u{231B}\u{23E9}-\u{23EC}\u{23F0}\u{23F3}\u{25FD}\u{25FE}\u{2614}\u{2615}\u{2648}-\u{2653}\u{267F}\u{2693}\u{26A1}\u{26AA}\u{26AB}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26CE}\u{26D4}\u{26EA}\u{26F2}\u{26F3}\u{26F5}\u{26FA}\u{26FD}\u{2705}\u{270A}\u{270B}\u{2728}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2795}-\u{2797}\u{27B0}\u{27BF}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{1F004}\u{1F0CF}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F236}\u{1F238}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F320}\u{1F32D}-\u{1F335}\u{1F337}-\u{1F37C}\u{1F37E}-\u{1F393}\u{1F3A0}-\u{1F3CA}\u{1F3CF}-\u{1F3D3}\u{1F3E0}-\u{1F3F0}\u{1F3F4}\u{1F3F8}-\u{1F43E}\u{1F440}\u{1F442}-\u{1F4FC}\u{1F4FF}-\u{1F53D}\u{1F54B}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F57A}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5FB}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CC}\u{1F6D0}-\u{1F6D2}\u{1F6EB}\u{1F6EC}\u{1F6F4}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]|[\xA9\xAE\u{203C}\u{2049}\u{2122}\u{2139}\u{2194}-\u{2199}\u{21A9}\u{21AA}\u{231A}\u{231B}\u{2328}\u{23CF}\u{23E9}-\u{23F3}\u{23F8}-\u{23FA}\u{24C2}\u{25AA}\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2600}-\u{2604}\u{260E}\u{2611}\u{2614}\u{2615}\u{2618}\u{261D}\u{2620}\u{2622}\u{2623}\u{2626}\u{262A}\u{262E}\u{262F}\u{2638}-\u{263A}\u{2648}-\u{2653}\u{265F}\u{2660}\u{2663}\u{2665}\u{2666}\u{2668}\u{267B}\u{267E}\u{267F}\u{2692}-\u{2697}\u{2699}\u{269B}\u{269C}\u{26A0}\u{26A1}\u{26AA}\u{26AB}\u{26B0}\u{26B1}\u{26BD}\u{26BE}\u{26C4}\u{26C5}\u{26C8}\u{26CE}\u{26CF}\u{26D1}\u{26D3}\u{26D4}\u{26E9}\u{26EA}\u{26F0}-\u{26F5}\u{26F7}-\u{26FA}\u{26FD}\u{2702}\u{2705}\u{2708}-\u{270D}\u{270F}\u{2712}\u{2714}\u{2716}\u{271D}\u{2721}\u{2728}\u{2733}\u{2734}\u{2744}\u{2747}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2763}\u{2764}\u{2795}-\u{2797}\u{27A1}\u{27B0}\u{27BF}\u{2934}\u{2935}\u{2B05}-\u{2B07}\u{2B1B}\u{2B1C}\u{2B50}\u{2B55}\u{3030}\u{303D}\u{3297}\u{3299}\u{1F004}\u{1F0CF}\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F1E6}-\u{1F1FF}\u{1F201}\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}\u{1F570}\u{1F573}-\u{1F57A}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}\u{1F596}\u{1F5A4}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D2}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6EB}\u{1F6EC}\u{1F6F0}\u{1F6F3}-\u{1F6F9}\u{1F910}-\u{1F93A}\u{1F93C}-\u{1F93E}\u{1F940}-\u{1F945}\u{1F947}-\u{1F970}\u{1F973}-\u{1F976}\u{1F97A}\u{1F97C}-\u{1F9A2}\u{1F9B0}-\u{1F9B9}\u{1F9C0}-\u{1F9C2}\u{1F9D0}-\u{1F9FF}]\u{FE0F}?|[\u{261D}\u{26F9}\u{270A}-\u{270D}\u{1F385}\u{1F3C2}-\u{1F3C4}\u{1F3C7}\u{1F3CA}-\u{1F3CC}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}-\u{1F469}\u{1F46E}\u{1F470}-\u{1F478}\u{1F47C}\u{1F481}-\u{1F483}\u{1F485}-\u{1F487}\u{1F4AA}\u{1F574}\u{1F575}\u{1F57A}\u{1F590}\u{1F595}\u{1F596}\u{1F645}-\u{1F647}\u{1F64B}-\u{1F64F}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F6C0}\u{1F6CC}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F926}\u{1F930}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B5}\u{1F9B6}\u{1F9B8}\u{1F9B9}\u{1F9D1}-\u{1F9DD}]/gu,i=/\uFE0F?\uD83C[\uDFFB-\uDFFF]/,r={e29da4:/(\s|^)([0OО]:\))([\s\.,]|$)/g,f09f9887:/(\s|^)(;-\)+)([\s\.,]|$)/g,f09f9889:/(\s|^)([XХxх]-?D)([\s\.,]|$)/g,f09f9886:/(\s|^)(B-\))([\s\.,]|$)/g,f09f988e:/(\s|^)(3-\))([\s\.,]|$)/g,f09f988c:/(\s|^)(&gt;\()([\s\.,]|$)/g,f09f98a0:/(\s|^)(;[oоOО])([\s\.,]|$)/g,f09f98b0:/(\s|^)(8\|)([\s\.,]|$)/g,f09f98b3:/(\s|^)(8-?[oоOО])([\s\.,]|$)/g,f09f98b2:/(\s|^)(8-\))([\s\.,]|$)/g,f09f988d:/(\s|^)(:[XХ])([\s\.,]|$)/g,f09f98b7:/(\s|^)(:[oоOО])([\s\.,]|$)/g,f09f98a8:/(\s|^)(&lt;3)([\s\.,]|$)/g},s={f09f988a:/(:-\))([\s\.,]|$)/g,f09f9883:/(:-D)([\s\.,]|$)/g,f09f989c:/(;-[PР])([\s\.,]|$)/g,f09f988b:/(:-[pр])([\s\.,]|$)/g,f09f9892:/(:-\()([\s\.,]|$)/g,e298ba:/(:-?\])([\s\.,]|$)/g,f09f988f:/(;-\])([\s\.,]|$)/g,f09f9894:/(3-?\()([\s\.,]|$)/g,f09f98a2:/(:&#039;\()([\s\.,]|$)/g,f09f98ad:/(:_\()([\s\.,]|$)/g,f09f98a9:/(:\(\()([\s\.,]|$)/g,f09f9890:/(:\|)([\s\.,]|$)/g,f09f98a1:/(&gt;\(\()([\s\.,]|$)/g,f09f989a:/(:-\*)([\s\.,]|$)/g,f09f9888:/(\}:\))([\s\.,]|$)/g,f09f918d:/(:like:)([\s\.,]|$)/g,f09f918e:/(:dislike:)([\s\.,]|$)/g,e2989d:/(:up:)([\s\.,]|$)/g,e29c8c:/(:v:)([\s\.,]|$)/g,f09f918c:/(:ok:|:ок:)([\s\.,]|$)/g},a={e29da4:[0,"<3"],f09f988a:[1,":-)"],f09f9883:[2,":-D"],f09f9889:[3,";-)"],f09f9886:[4,"xD"],f09f989c:[5,";-P"],f09f988b:[6,":-p"],f09f988d:[7,"8-)"],f09f988e:[8,"B-)"],f09f9892:[9,":-("],f09f988f:[10,";-]"],f09f9894:[11,"3("],f09f98a2:[12,":'("],f09f98ad:[13,":_("],f09f98a9:[14,":(("],f09f98a8:[15,":o"],f09f9890:[16,":|"],f09f988c:[17,"3-)"],f09f98a0:[18,">("],f09f98a1:[19,">(("],f09f9887:[20,"O:)"],f09f98b0:[21,";o"],f09f98b3:[22,"8|"],f09f98b2:[23,"8o"],f09f98b7:[24,":X"],f09f989a:[25,":-*"],f09f9888:[26,"}:)"],f09f918d:[27,":like:"],f09f918e:[28,":dislike:"],e2989d:[29,":up:"],e29c8c:[30,":v:"],f09f918c:[31,":ok:"]}},503803:(e,t,o)=>{"use strict";o.d(t,{emojiReplace:()=>c,emojiToHTML:()=>a,getEmojiHTML:()=>_});var n=o(714209),i=o(628411),r=o(857243),s=o(8520);function a(e,t){if(n.browser.ipad||n.browser.iphone)return e;e=(e+"").replace(/&nbsp;/g," ").replace(/<br>/g,"\n");for(let t=0;t<2;t++)Object.keys(i.EMOJI_PREFIXED_REPLACES).forEach((t=>{e.replace(i.EMOJI_PREFIXED_REPLACES[t],((e,o,n,i)=>(o||"")+_(t)+(i||"")))}));return Object.keys(i.EMOJI_REPLACES).forEach((t=>{e=e.replace(i.EMOJI_REPLACES[t],((e,o,n)=>_(t)+(n||"")))})),e=e.replace(/\n/g,"<br>"),t&&(e=e.replace(/\uFE0F/g,"").replace((0,i.emojiRegex)(),c)),e}function _(e,t,o,i){if(!o&&t)return t;if(i){return`<i class="emoji @${e}" emoji="${e}"${t?` title="${t}"`:""}></i>`}return`<img class="emoji" src="/emoji/e/${e}${window.devicePixelRatio>=2?"_2x":""}.png"${t?` alt="${t}"`:""}${n.browser.msie&&Number(n.browser.version)>8?' contenteditable="false"':""}>`}function c(e){return _((0,r.emojiSymbolToByteHex)(e),(0,s.encodeHTMLEntities)((0,s.escape)(e)),!0)}},857243:(e,t,o)=>{"use strict";o.d(t,{emojiByteHexToSymbol:()=>r,emojiRemoveSkinToneModifiers:()=>s,emojiSymbolToByteHex:()=>i});var n=o(628411);function i(e){return encodeURIComponent(e.replace(/\uFE0F/giu,"")).replace(/%/gi,"").toLowerCase()}function r(e){const t=e.length%2==1,o=t?e.slice(0,1):"",n=t?e.slice(1):e;let i="";try{i=decodeURIComponent("%"+(r=n,r.split("").reduce(((e,t,o)=>e+t+((o+1)%2==0?" ":"")),"").trim().split(/\s+/)).join("%"))}catch(e){}var r;return o+i}function s(e){return e.replace((0,n.emojiRegex)(),a)}function a(e){return e.replace(n.skinToneModifierRegex,"")}},201193:(e,t,o)=>{"use strict";o.d(t,{MASS_MENTION_ALIASES:()=>i,MASS_MENTION_REGEXP:()=>r,PINNED_CONVERSATION_BIT_MASK:()=>n,VK_OFFICIAL_PEER_ID:()=>s});const n=112,i={all:["all","everyone","все"],online:["online","here","здесь","тут"]},r=new RegExp(['(?!,|;|:|\\.|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)',"(",[].concat(i.all).concat(i.online).map((e=>`@${e}|\\*${e}`)).join("|"),")",'(?=$|,|;|:|\\.(?![a-z0-9_-])|\\s|<br ?/?>|"|\\(|\\)|\\[|\\]|!|\\?)'].join(""),"gi"),s=-22822305},408063:(e,t,o)=>{"use strict";o.d(t,{wrapAway:()=>s,wrapAwayIfExternal:()=>r});var n=o(705744);const i=new RegExp(`^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${n.VK_SITE_REGEX_SOURCE_UNSAFE}(\\/.*)?`);function r(e,t=!1){return function(e){const t=decodeURIComponent(e);return/^\/[^/]/.test(t)||i.test(t)}(e)?e:s(e,t)}function s(e,t){return"/away.php?to="+encodeURIComponent(decodeURIComponent(e))+(t?"&utf=1":"")}},714209:(e,t,o)=>{"use strict";o.d(t,{browser:()=>_,browserFeatures:()=>u,getBrowserKeyMatch:()=>c,initBrowserUtils:()=>p,mobPlatforms:()=>l,redirectToMVK:()=>d});var n=o(515029),i=o(772546),r=o(387674),s=o(705744);const a=navigator.userAgent.toLowerCase(),_={version:(a.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],opera:/opera/i.test(a)||/opr/i.test(a),vivaldi:/vivaldi/i.test(a),amigo:/amigo.*mrchrome soc/i.test(a),msie:/msie/i.test(a)&&!/opera/i.test(a)||/trident\//i.test(a)||/edge/i.test(a),msie6:/msie 6/i.test(a)&&!/opera/i.test(a),msie7:/msie 7/i.test(a)&&!/opera/i.test(a),msie8:/msie 8/i.test(a)&&!/opera/i.test(a),msie9:/msie 9/i.test(a)&&!/opera/i.test(a),msie_edge:/edge/i.test(a)&&!/opera/i.test(a),mozilla:/firefox/i.test(a),yabrowser:/yabrowser/i.test(a),whale:/whale/i.test(a),chrome:/chrome/i.test(a)&&!/edge/i.test(a),safari:!/chrome/i.test(a)&&/webkit|safari|khtml/i.test(a),iphone:/iphone/i.test(a),ipod:/ipod/i.test(a),iphone4:/iphone.*OS 4/i.test(a),ipod4:/ipod.*OS 4/i.test(a),ipad:/ipad/i.test(a),ios:/.+(ipod|ipad|iphone.*os)/i.test(a),android:/android/i.test(a),bada:/bada/i.test(a),mobile:/iphone|ipod|ipad|opera mini|opera mobi|iemobile|android/i.test(a),msie_mobile:/iemobile/i.test(a),safari_mobile:/iphone|ipod|ipad/i.test(a),opera_mobile:/opera mini|opera mobi/i.test(a),opera_mini:/opera mini/i.test(a),mac:/mac/i.test(a),windows7:/windows nt 6.1/i.test(a),windowsVista:/windows nt 6.0/i.test(a),windowsXp:/windows nt (5.2|5.1)/i.test(a),search_bot:/(yandex|google|stackrambler|aport|slurp|msnbot|bingbot|twitterbot|ia_archiver|facebookexternalhit)/i.test(a),smart_tv:/smart-tv|smarttv/i.test(a)};function c(){return Object.keys(_).find((e=>!0===_[e]))||null}const l={1:1,2:1,3:1,4:1,5:1,8:1},u=(window,{wheelEvent:"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":_.mozilla?"MozMousePixelScroll":"DOMMouseScroll",hasBoundingClientRect:"getBoundingClientRect"in document.createElement("div"),cmaEnabled:navigator.credentials&&navigator.credentials.preventSilentAccess&&window.vk&&vk.cma});function d(){const[e,t]=location.href.split("?"),o=new URLSearchParams(t),n={};for(let e of o)n[e[0]]=e[1];if(n){if("1"===n.m)return;if(n.force_redirect_to_mvk){delete n.force_redirect_to_mvk;const t=(0,r.toQueryString)(n);return void(window.location=e.replace(s.VK_ORIGIN_REGEX_STRICT,"https://m."+(0,s.getHostName)())+(t?"?"+t:""))}}if(s.VK_URL_REGEX.test(e)&&!new RegExp("^"+s.VK_HOST_REGEX_UNSAFE.source+"\\/@").test(e)){const t=Object.assign(n,{force_redirect_to_mvk:1}),o=e+"?"+(0,r.toQueryString)(t);window.location=o}}function p(){(0,n.isIPadOS)(_)&&!(0,i.getCookie)("remixforce_full")&&d(),window._ua||(window._ua=navigator.userAgent.toLowerCase()),window.locDomain||(window.locDomain=location.host.toString().match(/[a-zA-Z]+\.[a-zA-Z]+\.?$/)[0]),window.locHost=location.host,window.locProtocol=location.protocol,window.locHash=location.hash.replace("#/","").replace("#!","")}},7144:(e,t,o)=>{"use strict";o.d(t,{clean:()=>S,each:()=>I,escapeAttr:()=>E,escapeRE:()=>n.escapeRegExp,floatval:()=>b,htsc:()=>m,intval:()=>A,irand:()=>y,isArray:()=>c,isElement:()=>C,isEmpty:()=>u,isFunction:()=>a,isNumeric:()=>d,isObject:()=>l,isRetina:()=>n.isRetina,isString:()=>_,isUndefined:()=>s,locBase:()=>i,positive:()=>T,rand:()=>r,replaceEntities:()=>f,srand:()=>g,stripHTML:()=>h,trim:()=>p,unclean:()=>O,vkImage:()=>P,vkNow:()=>w,winToUtf:()=>v});var n=o(8520);const i=()=>location.toString().replace(/#.+$/,""),r=(e,t)=>Math.random()*(t-e+1)+e,s=e=>void 0===e,a=e=>e&&"[object Function]"===Object.prototype.toString.call(e),_=e=>"string"==typeof e,c=e=>"[object Array]"===Object.prototype.toString.call(e),l=e=>"[object Object]"===Object.prototype.toString.call(e),u=e=>{if(!l(e))return!1;for(let t in e)if(e.hasOwnProperty(t))return!1;return!0},d=e=>!isNaN(parseFloat(e))&&isFinite(e)&&!Array.isArray(e),p=e=>(e||"").replace(/^\s+|\s+$/g,""),h=e=>e?e.replace(/<(?:.|\n|\r|\u2028|\u2029)*?>/g,""):"",m=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;").replace(/%/g,"&#37;"),E=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\'/g,"&#39;"),f=e=>{const t=document.createElement("textarea");return t.innerHTML=(e||"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),t.value},g=()=>Math.random().toString(36).substr(2),y=(e,t)=>Math.floor(r(e,t));function v(e=""){return String(e).replace(/&#(\d\d+);/g,((e,t)=>(t=parseInt(t))>=32?String.fromCharCode(t):e)).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}const w=()=>+new Date;function A(e){return!0===e?1:parseInt(e)||0}function b(e){return!0===e?1:parseFloat(e)||0}function T(e){return(e=A(e))<0?0:e}function I(e,t){if(!e)return e;if(l(e)||void 0===e.length){for(let o in e)if(e.hasOwnProperty(o)&&!1===t.call(e[o],o,e[o]))break}else for(let o=0,n=e.length;o<n;o++){const n=e[o];if(!1===t.call(n,o,n))break}return e}const P=()=>window.Image?new Image:document.createElement("img"),C=e=>"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName;function S(e=""){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}function O(e){return e?f(e.replace(/\t/g,"\n")):e}},318288:(e,t,o)=>{"use strict";o.d(t,{error:()=>a,log:()=>s});var n=o(476726);const i="js_console_logs";function r(){return window.console&&(0,n.partConfigEnabled)(i)}function s(...e){r()&&window.console.log&&window.console.log(...e)}function a(...e){r()&&(window.console.error?window.console.error(...e):s(...e))}},387674:(e,t,o)=>{"use strict";o.r(t),o.d(t,{fromQueryString:()=>c,toQueryString:()=>_});let n={};const i=e=>"function"==typeof e,r=e=>Array.isArray(e),s=function(e){if(n[e])return e;try{return encodeURIComponent(e)}catch(e){return""}},a=function(e){try{return decodeURIComponent(e)}catch(t){return n[e]=1,e}};function _(e,t){const o=[];for(const t in e)if(e.hasOwnProperty(t)&&null!=e[t]&&!i(e[t]))if(r(e[t]))for(let n=0,r=0,a=e[t].length;n<a;++n)null==e[t][n]||i(e[t][n])||(o.push(s(t)+"["+r+"]="+s(e[t][n])),++r);else o.push(s(t)+"="+s(e[t]));return t||o.sort(),o.join("&")}function c(e){if(!e)return{};const t={};e=e.split("&");for(let o=0;o<e.length;o++){const n=e[o].split("=");if(n[0]){const e=a(n[1]+"");if("[]"===n[0].substr(n.length-2)){const o=a(n[0].substr(0,n.length-2));t[o]||(t[o]=[]),t[o].push(e)}else t[a(n[0])]=e}}return t}},772546:(e,t,o)=>{"use strict";o.d(t,{getCookie:()=>a,initCookies:()=>l,setCookie:()=>c});var n=o(476726),i=o(490712),r=o(568352),s=o(714209);function a(e){return function(){window._cookies={};const e=document.cookie.split(";"),t=/^[\s]*([^\s]+?)$/i;for(let o=0,n=e.length;o<n;o++){const n=e[o].split("=");2===n.length&&(_cookies[n[0].match(t)[1]]=unescape(n[1].match(t)?n[1].match(t)[1]:""))}}(),"https:"!==location.protocol&&"localhost"!==location.hostname&&(0,i.statlogsValueEvent)("read_unsecure_cookie",e,location.href),_cookies[e]}function _(e,t){const o=(0,n.getCookieGroups)(),i=function(){const e=a("remixcpl");if(!e)return[];const t=e.split(",");return t.forEach(((e,o)=>{t[o]=parseInt(e)})),t}();let s=e,_=null;if(!(0,n.partConfigEnabled)("need_check_allowed_cookie"))return!0;if(!isNaN(parseInt(t))&&parseInt(t)<0)return!0;"remix"===s.substr(0,5)&&(s=s.substr(5)),o.hasOwnProperty(e)?_=parseInt(o[e]):o.hasOwnProperty(s)?_=parseInt(o[s]):"q_"===s.substr(0,2)&&o.hasOwnProperty("q_")&&(_=parseInt(o.q_)),(null===_||isNaN(_))&&(0,r.logError)(`Undefined cookie group for cookie ${e} (${s})`);return 1===_||!(isNaN(_)||!i.includes(_))}function c(e,t,o,i,r="None",a=window.locDomain,c={}){if(!_(e,o))return!1;const l=e+"="+escape(t),u=c.withoutSubdomains?".":"",d="; path=/"+(a?"; domain="+u+a:""),p="https:"===location.protocol;let h=!!i;(0,n.partConfigEnabled)("cookie_secure_default_true")&&(h=!1!==i);const m=p&&h?"; secure":"",E=h&&s.browser.chrome&&parseInt(s.browser.version)>=71&&(0,n.partConfigEnabled)("cookie_class_samesite")?`; SameSite=${r}`:"";let f="";if(o){const e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),f="; expires="+e.toGMTString()}return document.cookie=l+f+d+E+m,!0}function l(){window._cookies={}}},568146:(e,t,o)=>{"use strict";o.d(t,{crc32:()=>i});let n=new Uint32Array(256);for(let e=256;e--;){let t=e;for(let e=8;e--;)t=1&t?3988292384^t>>>1:t>>>1;n[e]=t}function i(e){let t=-1;for(let o=0,i=e.length;o<i;o++)t=t>>>8^n[255&t^e[o]];return~t>>>0}},248782:(e,t,o)=>{"use strict";function n(e,t,o){let n;return function(){const i=arguments,r=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e.apply(this,i)}),t),r&&e.apply(this,i)}}o.d(t,{debounce:()=>n})},515029:(e,t,o)=>{"use strict";function n(e=window.browser){return!(!e.mac||e.iphone||e.ipad||e.ipod||!(navigator.maxTouchPoints>1))}o.d(t,{isAutoSchemesSupported:()=>a,isCSSVariablesSupported:()=>s,isDarkTheme:()=>i,isIPadOS:()=>n,isIntersectionObserverSupported:()=>c,isLightTheme:()=>r,isResizeObserverSupported:()=>l,isWebAssemblySupported:()=>u,isWebpSupported:()=>_});const i=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches),r=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches),s=()=>Boolean(window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")),a=()=>Boolean(window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches),_=e=>{const t=new Image;t.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",t.onload=()=>{const o=t.width>0&&t.height>0;e(o)},t.onerror=()=>{e(!1)}},c=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,l=()=>"ResizeObserver"in window;const u=()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}},678751:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(402210),i=o.n(n);window.EventEmitter=i();const r=i()},530960:(e,t,o)=>{"use strict";o.d(t,{decodeHTMLEntitiesDEPRECATED:()=>r,prepareToWriting:()=>s});var n=o(8520),i=o(503803);function r(e){return(0,n.decodeHTMLEntities)(e)}function s(e){let t=(0,n.decodeHTMLEntities)(e);return t=t.replace(/\n\r/gi,"\n"),t=(0,n.escape)(t),t=(0,i.emojiToHTML)(t,!0),t}},293819:(e,t,o)=>{"use strict";o.d(t,{getReactRootEl:()=>s,getReactRootElId:()=>r,registerReactApplication:()=>a});var n=o(568352),i=o(476726);function r(e){return"react_root"+(e||"")}function s(e){const t="#"+r(e),o=document.querySelector(t);return(0,i.partConfigEnabled)("log_empty_react_root_dom_element")&&!o&&(0,n.logError)(new Error("Can't find React root element"),{breadcrumb:{data:{message:"Try to get React root element",element:t}}}),o}function a(e,t){window.applicationInitFunctions[e]=t;window.reactInitQueue[e]&&window.reactInitQueue[e].length&&(window.reactInitQueue[e].forEach((t=>{window.initReactApplication(e,t)})),window.reactInitQueue[e]=[])}window.applicationInitFunctions||(window.applicationInitFunctions={}),window.reactInitQueue||(window.reactInitQueue={}),window.initReactApplication=function(e,t){window.applicationInitFunctions[e]?window.applicationInitFunctions[e](t):(window.reactInitQueue[e]||(window.reactInitQueue[e]=[]),window.reactInitQueue[e].push(t))}},5829:(e,t,o)=>{"use strict";o.d(t,{memoizeFirstTruthy:()=>n});const n=e=>((e,t)=>{let o,n=!1;return(...i)=>(!0===n||(o=e(...i),n=t(o)),o)})(e,(e=>!!e))},723919:(e,t,o)=>{"use strict";function n(){return navigator.connection||navigator.mozConnection||navigator.webkitConnection}function i(){const e=n();return e&&e.type||"unknown"}function r(){const e=n();return e&&e.effectiveType||"unknown"}o.d(t,{default:()=>s});const s={getConnection:n,getConnectionType:i,getConnectionEffectiveType:r,getConnectionTypeID:function(){return{unknown:0,bluetooth:1,cellular:2,ethernet:3,none:4,wifi:5,wimax:6,other:7}[i()]||0},getConnectionEffectiveTypeID:function(){return{unknown:0,"slow-2g":1,"2g":2,"3g":3,"4g":4}[r()]||0}}},803898:(e,t,o)=>{"use strict";function n(e,t){return new Promise((o=>{setTimeout(o.bind(null,t),1e3*e)}))}function i(e,t,o=null){let i=0;return function r(...s){return Promise.resolve().then((()=>e(...s))).catch((e=>{if(i++,i<=t){const e="function"==typeof o?o(i):0;return 0===e?r(...s):n(e).then((()=>r(...s)))}throw e}))}}function r(e,t,o){let n,i;return function(...r){return new Promise(((e,s)=>{const a=o&&!n;clearTimeout(n),i&&i.reject("debounce"),n=setTimeout((function(){n=null,i=null,o||e(r)}),t),a?e(r):o&&s("debounce"),i={resolve:e,reject:s}})).then((t=>e(...t)))}}function s(e,t){let o,n,i;return function(...r){return new Promise(((e,s)=>{const a=Date.now(),_=()=>{e(r),o=a};!o||o+t<a?_():(i&&(i.reject(),clearTimeout(n)),i={resolve:e,reject:s},n=setTimeout(_,t-(a-o)))})).then((t=>e(...t)))}}function a(e,t){let o;const n=new Promise((n=>{o=n,setTimeout(n.bind(null,t),1e3*e)}));return{pause:()=>n,abort(){o(t)}}}o.d(t,{abortablePause:()=>a,debouncedPromise:()=>r,pause:()=>n,retryFn:()=>i,throttledPromise:()=>s})},490712:(e,t,o)=>{"use strict";o.d(t,{statlogsValueEvent:()=>E});var n=o(772546),i=o(705744),r=o(250682),s=o(144770),a=o(476726),_=o(239170),c=o(906868);let l,u,d,p;(0,i.isMvk)()?(l="lock_m_stats_cookie_lock",u="remixmstsl",d="lock_m_stats_cookie_locked_stats",p="remixmsts"):(l="lockkk_stats_cookie_lock",p="remixsts",u="remixstsl",d="lock_stats_cookie_locked_stats");const h=[],m={get stats(){return(r.ls.checkVersion()?JSON.parse(r.ls.get(d)):this._stats)||[]},push(e){const t=this.stats;t.push(e),r.ls.checkVersion()?r.ls.set(d,JSON.stringify(t)):this._stats=t},clear(){r.ls.checkVersion()?r.ls.remove(d):delete this._stats}};function E(e,t,...o){if(void 0===e||void 0===t)return;if(h.forEach((n=>n(e,t,...o))),(0,a.partConfigEnabled)("local_storage_statlogs_value_event")&&![_.ADBLOCK_CONFIG_KEY,c.WASM_SUPPORT_CONFIG_KEY].includes(e))return void(0,s.saveStatlogEvents)({name:e,value:t,keys:o});const i=[Math.round(Date.now()/1e3),e,t].concat(o);g((()=>{if((0,a.partConfigEnabled)("mvk_stats_cookie_soft_clean_up")){if("1"===(0,n.getCookie)(u))return void m.push(i);(0,n.setCookie)(u,"1")}f(i)}))}function f(e){let t;try{t=JSON.parse((0,n.getCookie)(p)),t=t.data}catch(e){t=[]}if(t=[...t,...m.stats],e&&t.push(e),0===t.length)return;const o=1000000001*Math.random();(0,n.setCookie)(p,JSON.stringify({data:t.slice(-100),uniqueId:o}),.01),m.clear()}function g(e,t){if(r.ls.checkVersion()){if(!0!==r.ls.get(l)){r.ls.set(l,!0);try{e()}catch(e){}return void r.ls.set(l,!1)}t||setTimeout((()=>g(e,!0)),100)}else e()}(0,a.partConfigEnabled)("mvk_stats_cookie_soft_clean_up")&&(window.addEventListener("beforeunload",(()=>{f(null)})),window.ajax&&window.ajax.onResponse((()=>{f(null)})))},287841:(e,t,o)=>{"use strict";function n(e,t){let o,n,i=!1;return function r(){if(i)return o=arguments,void(n=this);e.apply(this,arguments),i=!0,setTimeout((function(){i=!1,o&&(r.apply(n,o),o=n=null)}),t)}}o.d(t,{throttle:()=>n})},753677:(e,t,o)=>{"use strict";function n(e){const t="string"==typeof e?e.match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/):null;return t?(3600*t[1]||0)+(60*t[2]||0)+(+t[3]||0):0}function i(e){let t="";return e>=3600&&(t+=Math.floor(e/3600)+"h",e%=3600),e>=60&&(t+=Math.floor(e/60)+"m",e%=60),e>0&&(t+=Math.floor(e)+"s"),t}o.d(t,{fromString:()=>n,toString:()=>i})},269315:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_MEDIA_SESSION:()=>s,HAS_MEDIA_SESSION:()=>r,clear:()=>a,updateMediaSessionMetadata:()=>_});var n=o(109465);let i;const r=window&&window.navigator&&"mediaSession"in window.navigator&&"MediaMetadata"in window,s=r?navigator.mediaSession:null;async function a(){if(r){i=i||document.createElement("audio"),i.src=n.SILENCE;try{await i.play()}catch(e){}}}function _(e,t=s){if(!t||!r)return;(location.hostname+e.album).length>30&&(e.album=e.album.substring(0,30-location.hostname.length)+"…");const o=t.metadata;o?(o.title=e.title,o.artist=e.artist,o.album=e.album,o.artwork=e.artwork):t.metadata=new MediaMetadata(e)}},476726:(e,t,o)=>{"use strict";o.d(t,{GROUP_B1:()=>s,GROUP_B2:()=>a,GROUP_C1:()=>_,GROUP_C2:()=>c,calculateTimeOffsets:()=>p,getConfigValue:()=>u,getCookieGroups:()=>d,getTestGroup:()=>l,partConfigEnabled:()=>r,randEnabled:()=>i});var n=o(772546);function i(e){return Math.random()<e}function r(e){const{pe:t={}}=window.vk||{};return!!t[e]}const s=3,a=4,_=5,c=6;function l(e){const{ex:t={}}=window.vk||{};return t[e]||null}function u(e){const{cfg:t={}}=window.vk||{};return t[e]}function d(){const{acl:e={}}=window.vk||{};return e}function p(){const e=window.vk.ts;if(e&&!window.browser.opera_mobile){const t=new Date;let o=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())/1e3-e;o-=10800,o/=60,o=o.toFixed(0),o*=60,o<-55800?o+=86400:o>37800&&(o-=86400);let i=0,r=Math.abs(o);[-12,-11,-10,-9.5,-9,-8,-7,-6,-5,-4.5,-4,-3.5,-3,-2,-1,0,1,2,3,3.5,4,4.5,5,5.5,5.75,6,6.5,7,8,8.75,9,9.5,10,10.5,11,12,12.75,13,14].forEach((e=>{const t=Math.round(3600*(e-3)),n=Math.abs(o-t);n<r&&(r=n,i=t)}));const s=(0,n.getCookie)("remixdt");return void 0!==s&&function(e){if(!0===e)return 1;return parseInt(e)||0}(s)===i||(0,n.setCookie)("remixdt",i,365),i}return 0}},772994:(e,t,o)=>{"use strict";o.d(t,{ajax:()=>p,confirm:()=>c,hideBox:()=>u,lockBoxButton:()=>l,openAppInLayer:()=>h,showErrorBox:()=>d});o(8520);var n=o(20025),i=(o(7144),o(850101)),r=o(610989),s=o(879007),a=o(317412),_=o(788407);function c(e,t){return new Promise(((o,i)=>{const s={title:e,onHide:i};return new n.MessageBox(s).content(t).setButtons(r.getLang("global_yes"),o,r.getLang("global_cancel"),i).show()}))}function l(){const e=(0,i.curBox)();if(e){const t=e.btns.ok[0];t&&window.lockButton(t)}}function u(){const e=(0,i.curBox)();e&&e.hide()}function d(e){u(),(0,n.showFastBox)(r.getLang("global_error"),e)}function p(e,t){return new Promise(((o,n)=>{window.ajax.post(e,t,{onDone:(...e)=>{o(...e)},onFail:(...e)=>(n(...e),!0)})}))}function h(e,t,o,n){let i;cur.openerAppsQueue=cur.openerAppsQueue||[],cur.openerAppsQueue.push(cur.app);const r=e=>{if(e.keyCode!==a.KEY.ESC)return;t&&t(cur.aid),WkView.hide(!0);const o=i?i-window.history.length-1:-1;window.history.go(o),document.removeEventListener("keydown",r)};n=n||{},(0,_.showWiki)({w:e},null,null,(0,s.extend)(n,{queue:1,onHide:()=>{if(cur.openerAppsQueue.length>0){const e=cur.openerAppsQueue.pop();cur.app=e,cur.aid=e.options.aid}t&&t(cur.aid),document.removeEventListener("keydown",r)},noClickHide:o,onLoaded:()=>{t&&(i=window.history.length,document.removeEventListener("keydown",WkView.onKeyDown),document.addEventListener("keydown",r))}}))}},459841:(e,t,o)=>{"use strict";o.d(t,{default:()=>d});var n=o(879007),i=o(688701),r=o(452314),s=o(317412);const a="idle",_="pend_rows",c="pend_prefetch",l="done_prefetch",u="done";class d{getListEl(){return this._containerEl}setListEl(e,t){let o;this._containerEl=(0,r.ge)(e),this._scrollNode=t||d.closestOverflowParent(this._containerEl),o=this._scrollNode===window?0:(0,r.getXY)(this._scrollNode)[1],this._contentYOffset=(0,r.getXY)(this._containerEl)[1]-o}options(e){(0,n.extend)(this._opts,e)}_countRows(e){const t=this;let o=0;return(0,n.each)(e,(function(e,i){"string"==typeof i&&(i=(0,r.se)(i)),t._rowClasses?(0,n.each)(t._rowClasses,(function(e,t){if((0,r.hasClass)(i,t))return o++,!1})):o++})),o}_drawRows(e){const t=this;this._opts.drawRows?this._opts.drawRows(t._containerEl,e):(0,n.each)(e,(function(e,o){"string"==typeof o&&(o=(0,r.se)((0,n.trim)(o))),o&&t._containerEl.appendChild(o)})),this.toggleProgress(this._state!==u),!this._forceDrawCalled&&this._opts.onRendered&&this._opts.onRendered(this._offset)}toggleProgress(e){e?!this._isProgressShown&&this._opts.showProgress&&this._opts.showProgress():this._isProgressShown&&this._opts.hideProgress&&this._opts.hideProgress(),this._isProgressShown=e}drawMore(){(0,n.inArray)(this._state,[a,l])?(this._forceDrawCalled=!0,this._drawRows(this._prefetched),this._setState(c),this._prefetched=[],this._requestRows(),this._forceDrawCalled=!1):this._state===u&&this._opts.onNoMore&&this._opts.onNoMore(this._containerEl.childElementCount)}destroy(){this._ev_scroll&&((0,s.removeEvent)(this._scrollNode,"scroll",this._ev_scroll),this._ev_scroll=!1),this._ev_window_resize&&(0,s.removeEvent)(window,"resize",this._ev_window_resize),this._setState(u),this.toggleProgress(!1)}getOffset(){return this._offset}_requestRows(){if(!this.isDone()&&this._state!==l){function e(){this._opts.onNeedRows(this._onRowsProvided.bind(this),this._offset,this._page++,this._state===c,this)}this._initialRender=!1,e.apply(this)}}_onRowsProvided(e,t){if(this.isDone())return;if(!1===e)return this._requestRows();e=e||[];let o=!1;this._needUseExternalOffset?(this._offset=t??0,o=Boolean(t)):(this._offset+=void 0===t?this._countRows(e):t,o=Boolean(e.length));const n=this._containerEl.childElementCount;switch(this._state){case c:0!==e.length&&(this._prefetched=this._prefetched.concat(e)),o?(this._setState(a),this._opts.onHasMore&&this._opts.onHasMore()):(this._setState(l),this._opts.onNoMore&&this._opts.onNoMore(n),0===this._prefetched.length&&this._setState(u)),(o||0!==this._prefetched.length)&&this._onScroll();break;case _:this._drawRows(e),o?(this._setState(c),this._requestRows()):(this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(n)),this.toggleProgress(!1);break;case a:this._prefetched=this._prefetched.concat(e)}}_setState(e){this._state=e}isDone(){return this._state===u}static closestOverflowParent(e){let t,o=e;for(;o&&o.tagName&&(t=(0,r.getStyle)(o,"overflow"),"visible"===t||"page_wrap"===o.id);)o=(0,r.domPN)(o);return o!==window.document&&o!==document.body&&o||(o=window),o}_onScroll(){if(this._forceDrawCalled)return;if(this._state===_)return;const e=this._scrollNode;let t,o,n;e===window?(n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),t=(0,i.scrollGetY)()):(n=(0,r.getSize)(e)[1],t=this._scroll?this._scroll.data.scrollTop:e.scrollTop),n<10||(o=this._containerEl.scrollHeight,o-n-t+this._contentYOffset<10&&(this._state===_||!this._prefetched.length&&this._state===c?(this.toggleProgress(!0),this._setState(_)):this._state===c||this._state===a?(this._drawRows(this._prefetched),this._prefetched=[],this._setState(c),this._requestRows()):this._state===l&&(this._drawRows(this._prefetched),this._prefetched=[],this._setState(u),this._opts.onNoMore&&this._opts.onNoMore(),this.destroy())))}constructor(e,t){if(this.constructor!==d)throw new Error("AutoList: AutoList was called without 'new' operator");if(d._counter=d._counter||0,this._id=d._counter++,this.setListEl(e,t.scrollNode),this._opts=(0,n.extend)({threshold:0,renderImmediate:!1,fetchImmediate:!0},t),!this._containerEl)throw new Error("AutoList: container not found");this._rowClasses=!!this._opts.rowClass&&this._opts.rowClass.split(" "),delete this._opts.rowClass,this._initialRender=this._opts.renderImmediate,this._needUseExternalOffset=this._opts.needUseExternalOffset??!1,this._isProgressShown=!1,this._prefetched=[],this._needUseExternalOffset?this._offset=this._opts.offset??0:this._initialRender?this._offset=0:this._opts.offset?this._offset=this._opts.offset:this._opts.rowClasses?this._offset=this._countRows(this._containerEl.children):this._offset=this._containerEl.children.length,this._page=this._offset>0?1:0,(0,s.addEvent)(this._scrollNode,"scroll",this._ev_scroll=this._onScroll.bind(this)),(0,s.addEvent)(window,"resize",this._ev_window_resize=this._onScroll.bind(this)),this._setState(this._opts.renderImmediate?_:c),this._opts.fetchImmediate?this._requestRows():(this._setState(a),this._onScroll())}}},966823:(e,t,o)=>{"use strict";o.d(t,{initSw:()=>s,onSwReady:()=>i});const n=(0,o(942451).makeSharedState)("sw-loading-state",(()=>({isReady:!1,onReadyCallbacks:[]})),{version:1}),i=e=>{n().isReady?e():n().onReadyCallbacks.push(e)},r=()=>{n().isReady=!0;for(let e of n().onReadyCallbacks)e();n().onReadyCallbacks=[]};async function s(){if(!window.vk.disableSW)try{const[{SWClient:e},{default:t}]=await Promise.all([o.e(8716).then(o.bind(o,742942)),o.e(41837).then(o.bind(o,142074))]);window.sw=new e,await window.sw.register(),window.pushNotifier=new t(window.sw,e),window.sw.storePushHash(),r()}catch(e){console.log(e)}}},368759:(e,t,o)=>{"use strict";o.d(t,{PIN_HIDDEN_ID_OP:()=>_,RECENT_SEARCH_OP:()=>a,imDbGet:()=>l,mount:()=>p});var n=o(248782),i=o(7144),r=o(490712),s=o(879007);const a="recent_search",_="pin_hide";function c(e){return"im_store_"+e}function l(e){return ls.get(c(e))||{}}function u(e,t,o){if(ls.checkVersion()){const n=JSON.stringify(t);(0,i.rand)(0,1e5)<=1&&(0,r.statlogsValueEvent)("im_local_store_size",n.length),o(c(e),n)}}function d(e,t,o){o.key===c(e)&&(t.db=JSON.parse(o.newValue),t.checkTime=Date.now())}function p(e){const t=(0,n.debounce)(((e,t)=>{localStorage.setItem(e,t)}),300);ls.checkVersion()&&function(e,t){const o=["fwd","draft","bind_attach"],n=l(e);let i=!1;for(let e=o.length;e--;)o[e]in n&&(delete n[o[e]],i=!0);i&&u(e,n,t)}(e,t);const o={db:l(e),checkTime:Date.now()},i=d.bind(null,e,o);return window.addEventListener("storage",i,!1),{select:(t,n)=>(Date.now()-o.checkTime>1e3&&(o.db=l(e)),function(e,t,o){return t===a?e[t]||[]:t===_?e[t]&&e[t][o]:e[t]?(0,s.extend)(!0,{},e[t][o]):null}(o.db,t,n)),selectByKey:t=>(Date.now()-o.checkTime>1e3&&(o.db=l(e)),o.db[t]),update(n,i){const r=function(e,t,o){switch(e[t]||(e[t]={}),t){case a:const n=o;n&&n.length>0?e[t]=n:delete e[t];break;case _:const[i,r]=o;r?e[t][i]=+r:delete e[t][i]}return e}(o.db,n,i);return o.db=r,o.checkTime=Date.now(),u(e,r,t)},updateByKey:(n,i)=>(o.db[n]=i,o.checkTime=Date.now(),u(e,o.db,t)),unmount(){window.removeEventListener("storage",i,!1)}}}},946076:(e,t,o)=>{"use strict";o.r(t),o.d(t,{UIGallery:()=>d,UI_GALLERY_CLASSNAME:()=>c.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>c.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>c.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>u});var n=o(942451),i=o(7144),r=o(663878),s=o(317412),a=o(879007),_=o(452314),c=o(374036);const l=(0,n.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function u(e){const t=(0,_.domData)((0,_.ge)(e),"gallery-id");return t&&l().galleries[t]}class d{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,s.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,s.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,s.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,s.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,s.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,s.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,s.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,s.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,s.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(e){let t;if("wheel"==e.type)if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){if(!this._opts.scrollY)return;t=-e.deltaY}else{if(!this._opts.scrollX)return;t=-e.deltaX}else if(void 0!==e.wheelDeltaY){if(!this._opts.scrollY)return;t=e.wheelDeltaY}else if(void 0!==e.wheelDelta)t=e.wheelDelta;else{if(!e.detail||1!==e.axis)return;t=-e.detail}t=this._scroll.rtlSame?-t:t,Math.abs(t)>=120&&(t=74*Math.max(-1,Math.min(1,t))),this._innerCont.scrollLeft-=t,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,s.cancelEvent)(e)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const e=this._width-2*this._arrowWidth,t=this._itemFullWidth>e;return{isItemBiggerThanWidth:t,scrollDistance:t?this._itemFullWidth:e}}_legacySlide(e,t,o){const{scrollDistance:n,isItemBiggerThanWidth:i}=this._getScrollParams();let a=this._innerCont.scrollLeft+(this._scroll.rtlSame?-e:e)*n;const c=this._innerCont.scrollWidth-this._width;this._scroll.negative?(a=Math.min(a,0),a=Math.abs(a)):a=Math.max(0,a),a=Math.min(c,a);const l=this._scroll.negative||this._scroll.rtlSame?-e:e;if(l>0&&a<c){a=Math.floor(a/this._itemFullWidth)*this._itemFullWidth}else if(l<0&&a>0){a=(i?Math.ceil(a/this._itemFullWidth):Math.floor(a/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(a=(this._visible.left+e)*this._itemFullWidth),0===a||a===c){const t=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),a&&(a+=e*(this._innerCont.scrollWidth-t))}this._scroll.negative&&(a=-a),(0,r.animate)(this._innerCont,{scrollLeft:a},{duration:Math.abs(this._innerCont.scrollLeft-a)+50,transition:r.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(a),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(e,{eventName:o?.eventName}),t&&(0,s.cancelEvent)(t)}_updateShift(e){let t=this._shift+e;const o=this._inner.scrollWidth-this._inner.clientWidth;t>o&&(t=o),t<0&&(t=0),this._shift=t}_slide(e,t,o){const{scrollDistance:n}=this._getScrollParams();this._updateShift(e*n),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(e,{eventName:o?.eventName}),t&&(0,s.cancelEvent)(t)}_checkItemsAfterScroll(e,t){if(this._scroll.negative&&(e=Math.abs(e)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const o=this._itemWidth/3,n=(this._scroll.backward?this._inner.scrollWidth-this._width-e:e)-this._scrollOffset,i=e&&Math.floor(n/this._itemFullWidth),r=i*this._itemFullWidth+2*o;let s;s=this._scroll.backward?e+this._width<this._inner.scrollWidth-r:e>r;const c=Math.min(this._items.length-1,Math.floor((n+this._width)/this._itemFullWidth)),l=c*this._itemFullWidth+2*o;let u;if(u=this._scroll.backward?e>this._inner.scrollWidth-l:e+this._width<l,this._opts.onViewItem){const e=s?Math.min(this._items.length-1,i+1):i,o=u?Math.max(0,c-1):c;if(t||e!==this._visible.left||o!==this._visible.right){for(let n=e;n<=o;n++)(this._visible.left<0||t&&!(0,a.inArray)(this._items[n],this._visible.items)||n<this._visible.left||n>this._visible.right)&&this._opts.onViewItem(this._items[n],n);this._visible.left=e,this._visible.right=o,this._visible.items=this._items.slice(e,o+1)}}this._opts.markOutside&&(t?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((e=>{(0,_.removeClass)(e,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((i!==this._outside.left||!s)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(c!==this._outside.right||!u)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),s&&i!==this._outside.left&&((0,_.addClass)(this._items[i],"ui_gallery_item_outside"),this._outside.left=i),u&&c!==this._outside.right&&((0,_.addClass)(this._items[c],"ui_gallery_item_outside"),this._outside.right=c))}if(!this._opts.noArrows){const t=e>0,o=e+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?o:t),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?t:o)}(!this._scroll.backward&&this._inner.scrollWidth-e-this._width<1e3||this._scroll.backward&&e<1e3)&&this._onLoadMore()}}_onArrowMouseOver(e){this._inner.classList.add(`ui_gallery__inner_shift_${e}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(e,t){e=e||[],this.addItems(e),this._finised=!!t||!e.length,this._loadingMore=!1}addItems(e,t){if((e=e||[]).length){const o=t>=0&&t<this._items.length?this._items[t]:null;e.forEach((e=>{o?(0,_.domInsertBefore)(e,o):this._inner.appendChild(e)})),this.refresh()}}destroy(){(0,s.removeEvent)(this._innerCont),(0,s.removeEvent)(this._leftArrow),(0,s.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete l().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(e){return(0,i.isNumeric)(e)&&(e=this._items[e]),!(!e||!(0,a.inArray)(e,this._items))&&((0,_.re)(e),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(e){this._opts.isModernTransitionsEnabled?this._slide(e,void 0,{eventName:"bullet"}):this._legacySlide(e,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((e,t)=>[e,this._visible.left+t]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(e,t){if(!e)throw new Error("No element was provided for UIGallery");if(!(e=(0,_.ge)(e)).classList.contains(c.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const o=u(e);if(o)return o;this._opts=(0,a.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},t),this._id=l().incIndex,l().incIndex+=1,this._el=e,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,a.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,a.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(c.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(c.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const e={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return e;if(!cur._scrollInfo){const t=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),o=document.querySelector("#content");o?.appendChild(t);const n=t.scrollLeft;e.rtl=vk.rtl,e.backward=n>0,t.scrollLeft=1e3,e.delta=t.scrollLeft===n?-1:1,e.negative=!e.backward&&e.delta<0,e.rtlSame=e.rtl&&!e.backward&&!e.negative,(0,_.re)(t),cur._scrollInfo=e}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),l().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},984709:(e,t,o)=>{"use strict";o.d(t,{Gifts:()=>m});var n=o(248298),i=o(610989),r=o(20025),s=o(317412),a=o(879007),_=o(850101),c=o(452314),l=o(14563),u=o(953550),d=o(626490),p=o(460241),h=o(857031);const m={deleteGift:function(e,t,o,n={}){window.ajax.post("al_gifts.php",{act:"delete",mid:n.mid,gift:o,hash:n.hash},{onDone:function(e){const o=(0,c.ge)("gift"+t);o&&((0,c.domNS)((0,c.domFC)(o))?(0,c.domNS)((0,c.domFC)(o)).innerHTML=e:(o.appendChild((0,c.ce)("div",{className:"gift_deleted",innerHTML:e})),(0,c.hide)((0,c.domFC)(o)),window.Pagination&&!(0,_.curBox)()&&window.Pagination.recache(-1)),(0,h.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&window.Profile?.updateGiftBlock())},showProgress:()=>{e.classList.add("gift_delete--loading"),e.innerHTML="",e.appendChild((0,c.ce)("div",{className:"gift_delete__spinner",innerHTML:(0,d.getIcon16Spinner)().icon}))},hideProgress:()=>{e.classList.remove("gift_delete--loading"),e.innerHTML=(0,p.getIcon16Cancel)().icon}})},restoreGift:function(e,t,o,n){n=n||{},ajax.post("al_gifts.php",{act:"restore",mid:n.mid,gift:o,hash:n.hash},{onDone:function(){const e=(0,c.ge)("gift"+t);e&&(0,c.domNS)((0,c.domFC)(e))&&((0,c.re)((0,c.domNS)((0,c.domFC)(e))),(0,c.show)((0,c.domFC)(e)),(0,h.isVKCOMProfileRedesignedEnabled)()&&"profile"===window.cur.module&&window.Profile?.updateGiftBlock())}})},markSpamGift:function(e,t,o,n){n=n||{},ajax.post("al_gifts.php",{act:"mark_spam",mid:n.mid,gift:o,hash:n.hash},{onDone:function(e){(0,c.ge)("gift_mark_spam"+t).innerHTML=e}})},initGiftsBox:function(e,t){e.setOptions({width:638,bodyStyle:"padding: 0",grey:!0,hideButtons:!0,onShow:function(){cur.gftbxWasScroll&&(boxLayerWrap.scrollTop=cur.gftbxWasScroll,cur.gftbxWasScroll=!1)}}),t.lang&&(cur.lang=(0,a.extend)(cur.lang||{},t.lang)),(0,a.extend)(cur,{gftbxOffset:t.offset,gftbxAutoload:!0,gftbxWasScroll:!1,gftbxMid:t.mid}),ajax.preload("al_gifts.php",{act:"box",mid:t.mid,offset:t.offset},t.preload),window.uiScrollBox&&window.uiScrollBox.init(e,{onShow:function(){(0,s.addEvent)(boxLayerWrap,"scroll",m.onGiftsScroll),setTimeout(cur.chooseAudioScroll,0)},onHide:function(){(0,s.removeEvent)(boxLayerWrap,"scroll",m.onGiftsScroll)}}),(0,s.addEvent)(boxLayerWrap,"scroll",m.onGiftsScroll);const o=boxLayerWrap.scrollTop;(0,c.elfocus)((0,c.geByClass1)("_scroll_node",e.bodyNode)),boxLayerWrap.scrollTop=o,onBodyResize(),m.onGiftsScroll()},moreGifts:function(){const e=(0,c.ge)("gifts_more_link");(0,n.buttonLocked)(e)||(ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{onDone:function(t,o,n){const i=(0,c.ce)("div",{innerHTML:t}),r=(0,c.ge)("gifts_rows");if(r){for(let e=(0,c.domFC)(i);e;e=(0,c.domFC)(i))r.appendChild(e);cur.gftbxOffset=o,n?m.preloadGifts():(0,c.hide)(e)}},showProgress:n.lockButton.pbind(e),hideProgress:n.unlockButton.pbind(e),cache:1}),cur.gftbxAutoload=!0)},preloadGifts:function(){ajax.post("al_gifts.php",{act:"box",mid:cur.gftbxMid,offset:cur.gftbxOffset},{cache:1})},onGiftsScroll:function(){if(!cur.gftbxAutoload)return;const e=lastWindowHeight,t=(0,c.ge)("gifts_more_link");(0,c.isVisible)(t)&&e>(0,c.getXY)(t,!0)[1]&&t.click()},showGiftBox:function(e,t,o){return window.Profile?window.Profile.showGiftBox(e,t,o):(cur.gftbxWasScroll=boxLayerWrap.scrollTop,boxLayerWrap.scrollTop=0,cur.viewAsBox?cur.viewAsBox():!(0,r.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e==vk.id?1:0,ref:o},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"],cache:1},t))},processBoxOptions(e,t){-1e3!=t&&t&&(requestAnimationFrame((()=>{(0,_.hideBoxLoader)()})),(0,a.extend)(cur,{paymentsOfferPreview:t.paymentsOfferPreview,paymentsPreload:t.paymentsPreload,paymentsAppOrder:t.paymentsAppOrder,paymentsOfferPreload:t.paymentsOfferPreload}),t.orderData&&u.AppOrderBox.initialize(t.orderData.orderId,t.orderData.appId,t.orderData.testMode,t.orderData.hash,t.orderData.votes,t.orderData.discount,t.orderData.billPeriod),(0,a.extend)(cur,{paymentsAuthPayment:t.paymentsAuthPayment,paymentsOrderNotice:t.paymentsOrderNotice,paymentsTryCompleteOrder:t.paymentsTryCompleteOrder,isPaymentsAppOrder:t.isPaymentsAppOrder,paymentsOfferApp:t.paymentsOfferApp,checkoutEnabled:t.checkoutEnabled}),t.showProgress&&l.PaymentsBox.showProgress(""),(0,a.extend)(cur,{votesAmountsData:t.votesAmountsData,paymentsPreferVotes:t.paymentsPreferVotes,votesTypeInit:t.votesTypeInit,psList:t.psList,paymentsWideBox:t.paymentsWideBox,paymentsTooltips:t.paymentsTooltips,paymentsChangeType:0===t.paymentsWideBox?i.getLang("payments_go_change_pay_type"):"",payments_get_votes:i.getLang("payments_get_votes_new"),getVotesDoneHide:!0,paymentsWaitingCache:{},isPaymentComplete:!1,isPaymentAttemted:!1,usdRate:t.usdRate,paymentsHash:t.paymentsHash,paymentComplete:l.PaymentsBox.complete,paymentCanceled:l.PaymentsBox.paymentCanceled,paymentsShowProgress:l.PaymentsBox.showProgress,statSessionId:t.statSessionId}),l.PaymentsBox.initialize(e),cur.checkoutEnabled||(l.PaymentsBox.initPhoneCountry(t.countries,t.country),l.PaymentsBox.initPhoneNumber((0,c.ge)("phone"))),(0,a.extend)(cur,{paymentsTypesSum:t.paymentsTypesSum,instantNeedCVV:t.instantNeedCVV,votesType:t.votesType,paymentsWPreload:t.paymentsWPreload,isMidas:t.isMidas,isHideButtonBackAndText:t.isHideButtonBackAndText}),t.getVotesAmountsOnDone&&l.PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsWPreload))},showGetMoneyBox(e=null){return(0,r.showBox)("al_gifts.php",{act:"get_money",...e},{onDone:this.processBoxOptions})}}},211981:(e,t,o)=>{"use strict";o.d(t,{vkIndexer:()=>i});var n=o(7144);function i(e,t,o){this.list=e,this.iterCur=0,this.iterEnd=e?e.length:0,this.index={},this.callback=o||function(){},this.prepareFunc=t||function(e){return e},setTimeout(this.indexIteration.bind(this),10)}i.prototype.delimiter=i.delimiter=new RegExp("[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\#\\+\\?\\\\]+","g"),i.prototype.trimmer=new RegExp("^[\\s\\-\\.,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\+\\?\\\\]+|[\\s\\-,\\\"\\'\\«\\(\\)\\[\\]\\{\\}\\\\]+$","g"),i.prototype.toTranslit={1072:"a",1073:"b",1074:"v",1075:"g",1076:"d",1077:"e",1078:"zh",1079:"z",1080:"i",1081:"y",1082:"k",1083:"l",1084:"m",1085:"n",1086:"o",1087:"p",1088:"r",1089:"s",1090:"t",1091:"u",1092:"f",1093:"h",1094:"ts",1095:"ch",1096:"sh",1097:"sh",1099:"y",1101:"e",1102:"yu",1103:"ya",1105:"e",1098:"",1100:""},i.prototype.toLocalCase={f:"a",",":"b","<":"b",d:"v",u:"g",l:"d",t:"e",";":"zh",":":"zh",p:"z",b:"i",q:"y",r:"k",k:"l",v:"m",y:"n",j:"o",g:"p",h:"r",c:"s",n:"t",e:"u",a:"f","[":"h","{":"kh",w:"ts",x:"ch",i:"sh",o:"sh",s:"y","'":"e",'"':"e",".":"yu",">":"yu",z:"ya","`":"e","~":"e",m:"","]":"","}":""},i.prototype.toLocalTranslit={1072:"f",1074:"d",1075:"u",1076:"l",1077:"t",1079:"p",1080:"b",1081:"q",1082:"r",1083:"k",1084:"v",1085:"y",1086:"j",1087:"g",1088:"h",1089:"c",1090:"n",1091:"e",1092:"a",1094:"w",1095:"x",1096:"i",1097:"o",1099:"s",1103:"z",1098:"m"},i.prototype.indexIteration=function(){let e=Math.min(this.iterEnd,this.iterCur+200),t=this.iterCur;for(;t<e;t++){let e=this.list[t];try{e._order=t}catch(e){}this.add(e)}this.iterCur=t,t>=this.iterEnd?this.callback(this):setTimeout(this.indexIteration.bind(this),10)},i.prototype.strToPrefixes=function(e){let t={},o=(0,n.winToUtf)(e).toLowerCase().split(this.delimiter),i=o.length;for(;i--;){let e=o[i],n="";if(e){for(let t=0;t<6;t++){let o=e.charCodeAt(t);if(o){let i=this.toTranslit[o],r=e.substr(t,1);n+=null!=i?i:r}}t[n]=1}}return t},i.prototype.strToSearchPrefixes=function(e){let t=[],o=e.toLowerCase().split(this.delimiter),n=o.length;for(;n--;){let e={},i=o[n],r="",s="",a="",_=i.length>1;if(i){for(let e=0;e<6;e++){let t=i.charCodeAt(e);if(t){let o=this.toTranslit[t],n=i.substr(e,1);if(r+=null!=o?o:n,_){let e=this.toLocalCase[n],o=this.toLocalTranslit[t];s+=null!=e?e:n,a+=null!=o?o:n}}}e[r]=1,_&&(e[s]=2,e[a]=3),t.push(e)}}return t},i.prototype.toIndexTree=function(e,t){let o=this.index;for(let t=0;t<6;t++){let n=e.substr(t,1)||-1;o=o[n]?o[n]:o[n]=5==t?[]:{}}o.push(t)},i.prototype.remove=function(e){let t=this.prepareFunc(e),o=this.strToPrefixes(t);for(let t in o)if(o.hasOwnProperty(t)){let o=this.index;for(let e=0;e<6;e++){let n=t.substr(e,1)||-1;if(!o[n])break;o=o[n]}if(o.length)for(let t in o)if(this.equals(o[t],e)){o.splice(t,1);break}}},i.prototype.equals=function(e,t){for(let o in e)if(e.hasOwnProperty(o))switch(typeof e[o]){case"object":if(!this.equals(e[o],t[o]))return!1;break;case"function":if(void 0===e[o]||e[o].toString()!=t[o].toString())return!1;break;default:if(e[o]!=t[o])return!1}for(let e in t)if(void 0===t[e])return!1;return!0},i.prototype.intersect=function(e,t){let o=[];if((0,n.isNumeric)(e[0])||(0,n.isNumeric)(t[0]))return e.filter((function(e){return-1!==t.indexOf(e)}));for(;e.length>0&&t.length>0;)e[0]._order<t[0]._order?e.shift():(e[0]._order>t[0]._order||this.equals(e[0],t[0])&&o.push(e.shift()),t.shift());return o},i.prototype.add=function(e){let t=this.prepareFunc(e),o=this.strToPrefixes(t);for(let t in o)o.hasOwnProperty(t)&&this.toIndexTree(t,e)},i.prototype.search=function(e){let t=this.index,o=this.strToSearchPrefixes(e),n=[],i=!1;for(let e in o)if(o.hasOwnProperty(e)){if(i&&!n)break;let r=this.localSearch(o[e],0,t);r.sort((function(e,t){return e._order-t._order})),n=i?this.intersect(n,r):r,i=!0}let r=n[0],s=n.length+1,a=[];for(let e=1;e<s;e++){let t=n[e];t!=r&&(a.push(r),r=t)}return a},i.prototype.localSearch=function(e,t,o){if(!o)return[];let n={};for(let o in e)if(e.hasOwnProperty(o)){const e=o.substr(t,1)||-1;n[e]||(n[e]={}),n[e][o]=1}if(6==t++||!o)return o;let i=[];for(let e in n)if(-1==e)for(let r in o)o.hasOwnProperty(r)&&i.push.apply(i,this.localSearch(n[e],t,o[r]));else{let r=this.localSearch(n[e],t,o[e]);i.push.apply(i,r)}return i}},967886:(e,t,o)=>{"use strict";o.d(t,{hasAccessibilityMode:()=>c,makeInteractiveMVKA11yProposal:()=>h,updateAriaCheckboxes:()=>u,updateAriaElements:()=>p,updateOnlineText:()=>l});var n=o(248298),i=o(879007),r=o(452314),s=o(645024),a=o(714209),_=o(490712);function c(){return!(!window.vk||!vk.a11y)}function l(){clearTimeout(cur.updateOnlineTO),cur.updateOnlineTO=setTimeout((function(){(0,i.each)((0,r.geByClass)("_online"),(function(){const e=(0,r.geByClass1)("_online_reader",this)||this,t=(0,r.hasClass)(this,"online"),o=(0,r.hasClass)(this,"mobile"),n=(0,r.geByTag)("img",e),a=function(e){const t=(0,r.domClosest)("_post",e),o=t&&(0,r.domByClass)(t,"author");return o?o.innerText||o.textContent:""};if(t){let t="";(0,i.each)(n,(function(){const e=(0,r.attr)(this,"alt")||(0,r.attr)(this,"data-alt")||a(this);e&&(t=(0,i.trim)(t+" "+e),this.setAttribute("data-alt",e),this.removeAttribute("alt"))})),t=(0,i.trim)(t+" "+(o?s.getLang("global_user_is_online_mobile"):s.getLang("global_user_is_online"))),e.setAttribute("aria-label",t)}else(0,i.each)(n,(function(){const e=(0,r.attr)(this,"data-alt")||a(this);e&&(this.setAttribute("alt",e),this.removeAttribute("data-alt"))})),e.removeAttribute("aria-label")}))}),100)}function u(){clearTimeout(cur.updateChkBoxTO),cur.updateChkBoxTO=setTimeout((function(){let e=[];(0,i.each)(["checkbox","checkbox_pic"],(function(){e=e.concat((0,r.geByClass)(this))})),(0,i.each)(e,(function(){"DIV"!==this.tagName||this.getAttribute("role")||(this.setAttribute("role","checkbox"),this.setAttribute("aria-checked",(0,n.isChecked)(this)?"true":"false"),this.setAttribute("tabindex",0))}))}),100)}function d(){clearTimeout(cur.updateRadioBtnsTO),cur.updateRadioBtnsTO=setTimeout((function(){const e=[];let t=(0,r.geByClass)("radiobtn");(0,i.each)(t,(function(){if("DIV"===this.tagName&&!this.getAttribute("role")){const t=(0,n.isChecked)(this);this.setAttribute("role","radio"),this.setAttribute("aria-checked",t?"true":"false"),this.setAttribute("tabindex",t?0:-1);const o=function(e){const t=5;let o=0,n=e;for(;o<t&&n!==document;){n=(0,r.domPN)(n);if((0,r.geByClass)("radiobtn",n).length>1)break;o++}return n}(this);~e.indexOf(o)||e.push(o)}})),(0,i.each)(e,(function(){if(!(0,r.geByClass)("on",this).length){const e=(0,r.geByClass)("radiobtn",this);e.length&&e[0].setAttribute("tabindex",0)}}))}),100)}function p(){l(),u(),d()}function h(){const e=document.getElementById("a11y_mvk_proposal");e&&e.getAttribute("aria-label")&&!e.getAttribute("role")&&(e.setAttribute("role","link"),e.style.display="block",e.classList.add("visually-hidden"),e.addEventListener("click",(e=>{(0,_.statlogsValueEvent)("accessibility","is_mvk_proposal_clicked",cur?.module),setTimeout((()=>{(0,a.redirectToMVK)()}),100)}),{passive:!0}))}},765908:(e,t,o)=>{"use strict";o.d(t,{__adsUpdate:()=>u,initAds:()=>h,updSeenAdsInfo:()=>c});var n=o(772546),i=o(879007),r=o(452314),s=o(585364),a=o(476726),_=o(528549);function c(){let e="ads_left";if((0,a.partConfigEnabled)("tgb_adblock_protection")){e=_.Locator.getInstance().lookup("#ads_left").slice(1)}if(!((0,r.getXY)(e,!0)||{})[1]||!vk.id)return;const t=(0,s.getLeftMenuHeight)(),o=Math.max(Math.floor(((window.lastWindowHeight||0)-t-42-10)/260),0),c=(0,n.getCookie)("remixseenads");window.__seenAds=(0,i.intval)(c),c&&__seenAds===o||(window.__seenAds=o,(0,n.setCookie)("remixseenads",o,30))}function l(e,t){if(window.noAdsAtAll&&!(0,a.partConfigEnabled)("tgb_adblock_protection"))return!1;let o;return l=function(){return window.AdsLight&&AdsLight.getAjaxParams.apply(AdsLight.getAjaxParams,arguments)||{al_ad:null}},window.AdsLight?o=l(e,t):(o={al_ad:null},window.stManager.add([window.jsc("web/ads_light.js")],l.pbind(e,t))),o}function u(e){if(window.noAdsAtAll&&!(0,a.partConfigEnabled)("tgb_adblock_protection"))return!1;u=function(){window.AdsLight&&AdsLight.updateBlock.apply(AdsLight.updateBlock,arguments)},window.stManager.add([window.jsc("web/ads_light.js")],u.pbind(e))}function d(e,t,o,n,i,r){if(window.noAdsAtAll&&!(0,a.partConfigEnabled)("tgb_adblock_protection"))return!1;d=function(){let e="";arguments&&arguments[0]&&(e=arguments[0]),"\x3c!--criteo"===e.slice(0,10)&&Math.random()<.05&&(window.AdsLight&&AdsLight.setNewBlock?ajax.post("/wkview.php?act=mlet&mt=750",{},{onFail:()=>!0}):ajax.post("/wkview.php?act=mlet&mt=751",{},{onFail:()=>!0})),window.AdsLight&&AdsLight.setNewBlock.apply(AdsLight.setNewBlock,arguments)},window.stManager.add([window.jsc("web/ads_light.js")],d.pbind(e,t,o,n,i,r))}function p(e){if(window.noAdsAtAll&&!(0,a.partConfigEnabled)("tgb_adblock_protection"))return!1;p=function(){window.AdsLight&&AdsLight.updateExternalStats.apply(AdsLight.updateExternalStats,arguments)},window.stManager.add([window.jsc("web/ads_light.js")],p.pbind(e))}function h(){window.__seenAds=(0,i.intval)((0,n.getCookie)("remixseenads")),window.__adsUpdate=u,window.__adsSet=d,window.__adsGetAjaxParams=l,window.__adsUpdateExternalStats=p}window.__adsLoaded=(0,i.vkNow)()},818939:(e,t,o)=>{"use strict";o.d(t,{AjaxCacheClient:()=>r});var n=o(879007),i=o(387674);class r{static getInstance(e,t){const o=r.makeCacheKey(e,t);return r._instances[o]||(r._instances[o]=new r(o)),r._instances[o]}getFromCache(e,t,{cacheLevel:o=0,forceGlobalCache:i=!1,onAnswerProcessed:r=(()=>{})}){if(o>0||i){let s=window.ajaxCache[this._cacheKey];if(s&&s._loading)return s._callbacks.push(e),!1;if(s&&!i)return e(0,s),3===o&&delete window.ajaxCache[this._cacheKey],!1;if(s=window.globalAjaxCache[this._cacheKey],s)return-1===s||(0,n.isFunction)(s)?window.globalAjaxCache[this._cacheKey]=t:t.apply(window,s),r&&r(),!1}return window.ajaxCache[this._cacheKey]={_loading:1,_callbacks:[]},!0}processExistingCache(e,t){const o=window.ajaxCache[this._cacheKey];o&&o._loading&&(setTimeout((function(){for(const n in o._callbacks)o._callbacks.hasOwnProperty(n)&&o._callbacks[n](e,t)}),0),delete window.ajaxCache[this._cacheKey])}cacheResponse(e){window.ajaxCache[this._cacheKey]=e}static ensureCachesInitialized(){window.ajaxCache||(window.ajaxCache={}),window.globalAjaxCache||(window.globalAjaxCache={})}static makeCacheKey(e,t){const o={...t};return["al","al_ad","ads_section","ads_showed","captcha_sid","captcha_key","_smt","_preload"].forEach((e=>delete o[e])),e+"#"+(0,i.toQueryString)(o)}static preload(e,t,o){r.ensureCachesInitialized(),e&&"/"!==e.substr(0,1)&&(e="/"+e),window.ajaxCache[r.makeCacheKey(e,t)]=o}static invalidate(e,t){r.ensureCachesInitialized(),void 0===e?window.ajaxCache={}:delete window.ajaxCache[r.makeCacheKey(e,t)]}static invalidateFor(e){Object.keys(window.ajaxCache).forEach((t=>{e(t)&&delete window.ajaxCache[t]}))}constructor(e){r.ensureCachesInitialized(),this._cacheKey=e}}r._instances={}},393494:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FrameTransport:()=>FrameTransport});var _shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(387674),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(879007),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(357889),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(618913),_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(452314),_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(705744),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(476726);const _queueStartMarker={type:"start"},_queueEndMarker={type:"end"};class FrameTransport{setHandlers(e=(()=>{}),t=(()=>{}),o=(()=>{})){this._onEnd=e,this._onModuleEvaluated=t,this._debug=o}setInlineHandler(e){this.execInline=e}run(e,t=(()=>{})){return this._debug("Run ",e,this.frameDataQueue),this.frameUrl=e,this.onReady=t,this.fulfilled=!1,this.queueReady=!1,this.frameDataQueue=[_queueStartMarker],clearTimeout(this.frameTimeout),this.frameTimeout=!1,this.frame&&this._cleanup(),this.frame=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{innerHTML:"<iframe></iframe>"}),utilsNode.appendChild(this.frame),this.frame.firstChild.src=this.frameUrl,this}onWindowMessage(e){const t=!("isTrusted"in e)||e.isTrusted;if(!_shared_lib_site__WEBPACK_IMPORTED_MODULE_5__.VK_ORIGIN_REGEX_STRICT.test(e.origin)||!t)return;const{data:{action:o,type:n,data:i}}=e;if("frame_transport"===n&&"use_meta"===o)this.useMeta(i)}useMeta(e){this._debug("Metainfo: ",e),this.onReady(e)}useAjaxBlock(e,t,o){this._debug("Ajax block: ",e,t,o,this.fulfilled,this.frameDataQueue),this.fulfilled||(this.frameDataQueue.push(FrameTransport._makeQueueBlock(e,t,o)),1===this.frameDataQueue.length&&this._nextQueueItem())}finalize(e,t){this._debug("Finalize: ",e),this._cleanup(),e&&this.frameDataQueue.push(FrameTransport._makeQueueBlock(!1,!1,e,t)),this.queueReady=!0,this.frameDataQueue.push(_queueEndMarker),window.cur.onFrameBlocksDone&&window.cur.onFrameBlocksDone(),this._onEnd&&this._onEnd((new Date).getTime())}_nextQueueItem(){if(this.frameTimeout&&clearTimeout(this.frameTimeout),!this.queueReady)return void(this.frameTimeout=setTimeout((()=>this._nextQueueItem()),100));if(this._debug("Next queue item: ",this.fulfilled,this.frameDataQueue),this.fulfilled||0===this.frameDataQueue.length)return void(this.frameTimeout=!1);const e=this.frameDataQueue.shift();switch(e.type){case _queueStartMarker.type:this._nextQueueItem();break;case _queueEndMarker.type:this.fulfilled=!0;break;default:this.frameTimeout=setTimeout((()=>this._onReceived(e)),0)}}_onReceived(e){const t=(t,o)=>{if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__.partConfigEnabled)("new_frame_transport_eval_sentry_log")){const e=t?.message||"Unknown error in eval";let n="<b>JavaScript error</b>"+((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_6__.partConfigEnabled)("extended_client_logging")?": "+e:"");t.stack&&__debugMode&&(n+="<br/>"+t.stack.replace(/\n/g,"<br/>")),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__.topMsg)(n,15,"#FFB4A3"),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(t,o,{message:e,breadcrumb:{data:{msg:e,module:(window.cur||{}).module,id:vk.id,host:locHost,lang:vk.lang,loc:(window.nav||{}).strLoc,realloc:location.toString()}}})}else(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_2__.topError)(t,{dt:15,type:8,url:this.frameUrl,js:o,answer:JSON.stringify(e)}),(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_3__.logEvalError)(t,o)},o=e.container&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.ge)(e.container);o&&e.html&&(o.firstChild?o.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.cf)(e.html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_4__.val)(o,e.html)),e.js&&(_runJs(e.js,t),this._onModuleEvaluated&&this._onModuleEvaluated(cur.module)),e.params&&"leftads"in e.params&&window.__adsSet&&__adsSet(e.params.leftads,e.params.ads_section||"",e.params.ads_can_show,e.params.ads_showed),this._nextQueueItem()}_cleanup(){this._debug("Cleanup: ",this.frameDataQueue),this.frame&&(this.frame.innerHTML="",utilsNode.removeChild(this.frame),this.frame=null)}abort(){clearTimeout(this.frameTimeout),this.frameTimeout=!1,this._cleanup()}static get frame(){return FrameTransport.__frame||(FrameTransport.__frame=new FrameTransport),FrameTransport.__frame}static request(e,t,o,n,i){const r=FrameTransport.frame;return r.setInlineHandler(i),r.run(FrameTransport.makeUrl(e,t,!(n&&n.noSort)),o)}static _makeQueueBlock(e,t,o,n){return{type:"block",container:e,html:t,js:o,params:n}}static makeUrl(e,t,o=!0){let n=t;return"string"==typeof t&&(n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.fromQueryString)(t)),n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)({...n,_rndVer:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.irand)(0,99999)},!o),e+"?"+n}constructor(){this.frameDataQueue=[],this.frameTimeout=null,this.frame=null,this.queueReady=!1,this.fulfilled=!1,this.execInline=()=>{},this._debug=()=>{},window.addEventListener("message",this.onWindowMessage.bind(this))}}function _runJs(js,onError){const script="(function(){"+js+";})()";if(__debugMode)eval(script);else try{eval(script)}catch(e){onError&&onError(e,script)}}},631346:(e,t,o)=>{"use strict";o.d(t,{activateMobileBox:()=>r,requestBox:()=>i,validateMobileBox:()=>s,validateOtpBox:()=>_,validatePassBox:()=>a});var n=o(20025);function i(e,t,o){return e.setOptions({onDestroy:o}),e.onDone=function(){t&&t.apply(null,arguments)},e}function r(e){return i((0,n.showBox)("activation.php",{act:"activate_mobile_box",hash:e.hash}),(function(){vk.nophone=0,e.onDone()}),e.onFail)}function s(e){return i((0,n.showBox)("activation.php",{act:"validate_box",captcha:e.acceptCaptcha?1:"",skip_push:e.skip_push?e.skip_push:"",from:e.from||"",hash:e.hash,ahash:e.ahash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function a(e){return i((0,n.showBox)("activation.php",{act:"pass_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}function _(e){return i((0,n.showBox)("activation.php",{act:"otp_validate_box",hash:e.hash},{stat:["uncommon.css"]}),e.onDone,e.onFail)}},531108:(e,t,o)=>{"use strict";o.d(t,{AjaxProtoJson:()=>i});var n=o(879007);class i{parseResponse(e){let t=this.parseStaticPayload(e);return{navVersion:(0,n.intval)(t.loaderVersion),newStatic:t.static,statsMeta:t.statsMeta,langId:(0,n.intval)(t.langPack),langVer:(0,n.intval)(t.langVersion),langKeys:t.langKeys,templates:t.templates,code:(0,n.intval)(t.payload[0]),payload:t.payload[1],debugLog:t.debugLog,env:t.env,extra:t.extra,execInline:t.execInline}}parseStaticPayload(e,t){let o=e;return e&&"string"==typeof e&&(o=JSON.parse(e)),o.payload&&o.payload[0]>0&&(o.payload[1]=o.payload[1].map((e=>"string"==typeof e?JSON.parse(e):e))),o}}},624216:(e,t,o)=>{"use strict";o.d(t,{ajax:()=>O});var n=o(387674),i=o(850101),r=o(7144),s=o(476726),a=o(879007),_=o(452314),c=o(357889),l=o(393494),u=o(818939),d=o(793401),p=o(610132),h=o(531108),m=o(568352),E=o(645024),f=o(807825),g=o(432997),y=o(80505),v=o(20025),w=o(623702);const A="global_reload_app_modal_local_storage_key",b="ajax_request";function T(e){try{return(new DOMParser).parseFromString(e,"text/html").querySelector("title")?.textContent||e}catch{return e}}class I{static post(e,t,o){I._protoAdapter=new h.AjaxProtoJson,e&&"/"!==e.substr(0,1)&&"http"!==e.substr(0,4)&&(e="/"+e);const n={...o||{},_captcha:!1,_box:!1,no_ads_params:!1},r={...t,al:n.frame?-1:1},s=(0,a.vkNow)(),c=vk.spentLastSendTS?Math.round((s-vk.spentLastSendTS)/1e3):0;if(vk.sampleUser>=0&&window.cur&&cur.module&&c>=1&&(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle&&(r._smt=window.cur.module+":"+c),vk.spentLastSendTS=s),n.progress&&(n.showProgress||(n.showProgress=function(){const e=(0,_.ge)(n.progress);(0,_.hasClass)(e,"pr")&&(0,_.setStyle)(e,"opacity",1),(0,_.show)(e)}),n.hideProgress||(n.hideProgress=function(){const e=(0,_.ge)(n.progress);(0,_.hasClass)(e,"pr")&&(0,_.setStyle)(e,"opacity",0),(0,_.hide)(e)})),n.loader){const e=(0,_.isVisible)(window.boxLayerWrap);n.showProgress=function(){(0,i.boxRefreshCoords)(window.boxLoader),(0,_.show)(window.boxLoader),e||(0,_.show)(window.boxLayerWrap)},n.hideProgress=function(){(0,_.hide)(window.boxLoader),e||(0,_.hide)(window.boxLayerWrap)}}return new I(e,r,n)._post()}_post(){if(!this._query.captcha_sid&&this._options.showProgress&&this._options.showProgress(),window.__adsGetAjaxParams&&!this._options.no_ads_params&&(this._query={...this._query,...window.__adsGetAjaxParams(this._query,this._options)}),this._options.stat&&(this._additionalStaticLoader=null,window.stManager.add(this._options.stat,(()=>{this._additionalStaticLoader&&this._additionalStaticLoader(),this._options.stat=!1}))),this._cacheClient&&!this._cacheClient.getFromCache(this.processResponse,this._options.onDone,{cacheLevel:this._options.cache,forceGlobalCache:this._options.forceGlobalCache,onAnswerProcessed:this._options.hideProgress}))return;this._options.resend=(e,t)=>new I(this._url,e,t)._post(),window.debuglogSent?(this._reqid=window.debuglogSent(this._url+(this._query?": "+(0,n.toQueryString)(this._query,this._options.noSort).replace(/&/g,"&amp;"):"")),this._options.frame&&(window._lfrid=this._reqid)):this._reqid=0;const e={};return this._options.timeout&&(e.timeout=this._options.timeout),this._options.onTimeout&&(e.ontimeout=this._options.onTimeout),this._options.frame?l.FrameTransport.request(this._url,this._query,this.onDone,this._options,this._runInlineScript.bind(this)):(0,d.plainpost)(this._url,this._query,this.onDone,this.onFail,!1,e,this._options,!1,(0,s.partConfigEnabled)("extended_ajax_logging")?e=>console.log("+ XHR Transport: "+e):null)}processResponse(e,t,o){if(this._options.cache&&this._cacheClient&&this._cacheClient.processExistingCache(e,t),this._options.stat)return this._options.stat=!1,void(this._additionalStaticLoader=this.processResponse.pbind(e,t));this._options.cache&&!this._options.forceGlobalCache&&!e&&this._cacheClient&&this._cacheClient.cacheResponse(t),this._options.hideProgress&&this._options.hideProgress(),2!==e&&(this._options._captcha&&(this._options._suggest&&(0,_.cleanElems)(this._options._suggest),this._options._captcha=S(this._options._captcha),this._options._suggest=this._options._captcha),this._options._box=S(this._options._box)),o&&this._runInlineScript(o),(0,p.getHandlerByCode)(e)(this._options,t,this._query,this._url)}onFail(e,t){if((0,y.processWaf)(t))return;this._options.hideProgress&&this._options.hideProgress(),this._options._suggest&&(0,_.cleanElems)(this._options._suggest);const o=t instanceof XMLHttpRequest?t.status:t;var i;if(this._options._box=S(this._options._captcha,this._options._box),this._options._captcha=this._options._box,this._options._suggest=this._options._captcha,"string"==typeof e&&-1!==e.indexOf("The page is temporarily unavailable")&&__dev&&(0,a.inArray)(vk.id,[100]))this._post();else if(!this._options.ignoreDefaultErrorLogger&&!0!==this._options.onFail?.(e)){const t=(JSON.stringify((0,s.partConfigEnabled)("ajax_request_parse_html_error")?(i=e,"string"==typeof i?T(i):{...i,data:T(i.data)}):e)||"No error details").substr(0,300),r=this._query.act,a=this._query&&(0,n.toQueryString)(this._query,this._options.noSort),_=this._url,c={message:"Uncaught ajax error",status:o,data:{url:_,query:a}},l=[`url: ${_}`,r&&`act: ${r}`,t&&`text: ${t}`].filter((e=>e)).join(", ");0===c.status&&(0,s.partConfigEnabled)("js_errors_no_write_uncaught_errors")||(0,m.logError)(l,{environment:"uncaughtAjaxRequestError",breadcrumb:c}),__debugMode?console.error("Uncaught Ajax request error:",t,c):console.log("Uncaught Ajax request error:",t,c)}}doReload(e){nav.reload({force:!0,from:e,url:this._url,query:this._query&&(0,n.toQueryString)(this._query)})}onDone(e,t){if((0,y.processWaf)(t||e))return Promise.reject();this._options.frame&&P("OnDone Req:",e);const o=t instanceof XMLHttpRequest?t.status:t;let n;try{n=I._protoAdapter.parseResponse(e)}catch(t){return this.onFail(e,o),Promise.reject()}const{navVersion:i,langId:s,payload:a}=n;return i?vk.version&&String(vk.version)!==String(i)?(i&&a.length>4?this.doReload(2):nav.strLoc?location.replace(r.locBase):(0,c.topError)("Server error.",{type:100}),Promise.reject()):(vk.version=!1,vk.lang!==s&&this._options.canReload?(this.doReload(3),Promise.reject()):C.call(this,n,this._options.canReload)):(this.onFail(`<pre>${e}</pre>`,{status:-1}),Promise.reject())}_runInlineScript(e){const t="__exec_container",o=document.getElementById(t);o&&document.body.removeChild(o);const n=document.createElement("script");n.id=t,n.innerHTML=e,document.body.appendChild(n)}constructor(e,t,o){this._url=e,this._options={...o},this._query=t,this._additionalStaticLoader=null,this._cacheClient=null,o.local&&(this.onDone=(0,a.vkLocal)(this.onDone),this.onFail=(0,a.vkLocal)(this.onFail),this.processResponse=(0,a.vkLocal)(this.processResponse)),this._options.cache&&(this._cacheClient=u.AjaxCacheClient.getInstance(this._url,this._query)),this.onDone=this.onDone.bind(this),this.onFail=this.onFail.bind(this),this.processResponse=this.processResponse.bind(this)}}function P(){if(!(0,s.partConfigEnabled)("extended_ajax_logging"))return;let e;try{throw new Error}catch(t){e=t.stack}let t="+ Frame transport: "+arguments[0];console.groupCollapsed(t),[].slice.call(arguments,1).forEach((e=>console.log(JSON.stringify(e)))),console.log(e),console.groupEnd()}async function C(e,t){if(!(this instanceof I))throw new TypeError("_preProcessResponse should be called with AjaxRequest instance as this");const{navVersion:o,newStatic:i,statsMeta:_,langId:l,langVer:u,langKeys:d,templates:p,code:h,payload:f,debugLog:y,env:T,extra:P,execInline:C}=e;if((0,s.partConfigEnabled)("webinf_show_force_reload_modal")&&i&&t&&_&&_.reloadVersion&&_.reloadVersion!==window.vk.statsMeta.reloadVersion)try{await new Promise(((e,t)=>{let o;try{o=JSON.parse(w.vkLocalStorage.getItem(A))||{}}catch(e){o={}}const n=18e5,i=18e4,r=o.date?Date.now()-o.date:Number.POSITIVE_INFINITY;if(!o.state||"reload"===o.state&&r>n||"hidden"===o.state&&r>i){const o=()=>{w.vkLocalStorage.setItem(A,JSON.stringify({date:Date.now(),state:"reload"})),t()},n=()=>{w.vkLocalStorage.setItem(A,JSON.stringify({date:Date.now(),state:"hidden"})),e()},i={title:E.getLang("global_reload_app_modal_title"),selfDestruct:!1,hideOnBGClick:!1,noCloseButton:!1};new v.MessageBox(i).content(E.getLang("global_reload_app_modal_content")).addButton(E.getLang("global_reload_app_modal_action"),o).show().once("afterHide",n)}else e()}))}catch(e){throw void this.doReload(5)}if(_&&(_.reloadVersion=window.vk.statsMeta.reloadVersion,window.vk.statsMeta=_),d){const{local:e,global:t}=d;(0,E.addLangKeys)(e,window.cur),(0,E.addLangKeys)(t,!0),window.cur.onAfterReset=(t,o)=>{(0,E.addLangKeys)(e,o),delete o.onAfterReset}}let S;if(T&&T.pe&&(window.vk.pe=T.pe),p&&(0,a.addTemplates)(p),await function(e,t,o,n){return new Promise((async(o,i)=>{if(!window.stVersions||(0,r.isEmpty)(window.stVersions))o();else try{await function(e){return new Promise((t=>{String(e)!==String(window.stVersions.nav)?async function(e){try{const t=await fetch("/al_loader_nav.php?act=check",{credentials:"same-origin"}),o=await t.json(),n=o?.loaderVersion;return String(e)===String(n)}catch(e){throw!1}}(e).then((o=>{if(!o)return void t();const n=function(e){const t=window.vk.navPostfix||"",o=window.navMapSection?`&section=${window.navMapSection}`:"";return`/al_loader_nav.php?act=nav${t}&l=${vk.lang}&v=${e}&f=json${o}`}(e);fetch(n,{credentials:"same-origin"}).then((e=>e.json())).then((e=>{for(const t in e)e.hasOwnProperty(t)&&(window[t]=e[t]);t()})).catch((()=>{const e=new Error("Can't load loader_nav");var o,i,r;o=n,i=e,r=e.stack,(0,m.logError)(i,{environment:b,breadcrumb:{message:String(r),category:"custom",data:{file:o}}}),(0,s.partConfigEnabled)("global_show_resource_fetch_error")&&(0,c.topMsg)(`Some problems with loading <b>${o}</b>...`,5),t()}))})):t()}))}(e),await async function(e,t,o){const n=["common.css"];if(e){const t=e.split(",");for(let e=0,o=t.length;e<o;++e)n.push(t[e])}if(stVersions.lang<o){stVersions.lang=o;for(const e in StaticFiles)StaticFiles.hasOwnProperty(e)&&/^lang\d/i.test(e)&&n.push(e)}return window.stManager.add(n)}(t,0,n),o()}catch(e){i(e)}}))}(o,i,0,u),this._options.frame)S=f;else try{S=I._protoAdapter.parseStaticPayload(f,this._reqid),y&&(O=y,M=this._reqid,window.debuglogGot&&window.debuglogGot(M,O))}catch(e){const t={message:"JSON error",data:{answer:f,url:this._url,query:this._query&&(0,n.toQueryString)(this._query)}};(0,m.logError)(e,{environment:b,breadcrumb:t}),console.error(e)}var O,M;this.processResponse(h,S,C),(0,g._handleResponseExtraPayloads)(P),window.cur&&"function"==typeof window.cur.onAfterReset&&delete window.cur.onAfterReset}function S(){for(let e=0,t=arguments.length;e<t;++e){const t=arguments[e];t&&t.isVisible()&&(t.setOptions({onHide:!1,onDestroy:!1}),t.hide())}return!1}l.FrameTransport.frame.setHandlers(void 0,(e=>{(0,f.triggerSubscribersOnModuleEvaluated)()}),P);const O={enabled:function(){try{return!!new XMLHttpRequest}catch(e){return!1}}(),plainpost:d.plainpost,post:I.post,promisifiedPost:(e,t,o)=>new Promise(((n,i)=>{I.post(e,t,{...o,onDone:(...e)=>{n(e)},onFail:e=>(i(e),!!o?.ignoreDefaultErrorLogger),onTimeout:()=>{i("timeout")}})})),framepost:l.FrameTransport.request,request:d.request,preload:u.AjaxCacheClient.preload,invalidate:u.AjaxCacheClient.invalidate,AjaxRequest:I,AjaxCancellationToken:d.AjaxCancellationToken,frame:l.FrameTransport.frame,_framenext:()=>l.FrameTransport.frame._nextQueueItem()}},610132:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{getHandlerByCode:()=>getHandlerByCode});var _shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(387674),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(610989),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(317412),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(879007),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(20025),_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(452314),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(618913),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(357889),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(850101),_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(984709),_modal_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(631346),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(476726),_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(217363),_authFailed__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(111455),_web_captcha_showCaptchaPopup__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(816475);function emailNotConfirmed(e,t){(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({width:520,title:t[0],onDestroy:e.onFail},t[1])}function showCaptcha(e,t,o){2===(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showReCaptchaBox)(t[0],t[2],e._captcha,{onSubmit:function(t){const n={...o,recaptcha:t,captcha_sid:null,captcha_key:null};e.resend(n,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}}):(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_11__.partConfigEnabled)("vkcom_audio_captcha_enabled")?(0,_web_captcha_showCaptchaPopup__WEBPACK_IMPORTED_MODULE_13__.showCaptchaPopup)({sid:t[0],isRefreshEnabled:!!t[2],isSoundCaptchaAvailable:!!t[3],isUiuxChangesEnabled:!!t[6],captcha_img:t[4],captcha_track:t[5],onSubmit:(n,i)=>{e.resend({...o,captcha_sid:t[0],captcha_key:n,is_sound_captcha:i},(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e))},onClose:()=>{e.onFail&&e.onFail()}}):e._captcha=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showCaptchaBox)(t[0],(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1]),e._captcha,{onSubmit:function(t,n){const i={...o,captcha_sid:t,captcha_key:n};e.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e))},onDestroy:function(){e.onFail&&e.onFail()}},t[2]),e._suggest=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.geByClass1)("phone_validation_link",e._captcha.bodyNode),e._suggest&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(e._suggest,"click",(function(){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({onDone:e._captcha.submit})}))}const mobileValidationRequired=e=>(t,o,n)=>{t._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateMobileBox)({acceptCaptcha:11===e,onDone:function(e,o){vk.nophone=0,e&&(t._captcha=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)());const i=e?{...n,captcha_sid:e,captcha_key:o}:n;t.resend(i,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(t))},onFail:t.onFail,hash:o[0],ahash:o[1]})};function passwordValidationRequired(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validatePassBox)({onDone:()=>e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function makeRedirect(e,t){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[1])?nav.go(t[0],!1,{nocur:"2"===t[1],noback:!0===t[1],showProgress:e.showProgress,hideProgress:e.hideProgress}):(hab.stop(),location.href=t[0])}function reload(e,t,o,n){nav.reload({force:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(t[0]),from:1,url:n,query:o&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(o)})}function mobileActivationRequired(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.activateMobileBox)({onDone:e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function showMessage(e,t){e.onFail&&e.onFail(),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topMsg)(t[0],10)}function showError(e,t,o,n){e.onFail&&e.onFail(t[0])||(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_7__.topError)(t[0]+(t[2]?" #"+t[2]:""),{dt:t[1]?0:10,type:4,url:n,query:o&&(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(o)})}function otpBox(e,t,o){e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.validateOtpBox)({onDone:()=>e.resend(o,(0,_utils_resetOptionsCache__WEBPACK_IMPORTED_MODULE_14__.resetOptionsCache)(e)),onFail:e.onFail,hash:t[0]})}function votesPayment(e,t,o){if(window.cur.paymentSuccess=!1,(e.fromBox||e.forceDone)&&(e.onDone&&e.onDone.apply(window,t),e.fromBox))return;e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.trim)(t[0])},t[1]),t[3]?.countries&&!cur.votesBoxOptions&&(cur.votesBoxOptions=t[3]),cur.votesBoxOptions&&(_web_gifts_gifts__WEBPACK_IMPORTED_MODULE_9__.Gifts.processBoxOptions(e._box,cur.votesBoxOptions),cur.votesBoxOptions=null);const n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.clone)(e),{showProgress:e._box.showProgress,hideProgress:e._box.hideProgress});e.cache&&(n.cache=-1),e._box=(0,_modal_box__WEBPACK_IMPORTED_MODULE_10__.requestBox)(e._box,(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_5__.isVisible)(e._box.progress)||(t||(t={_votes_ok:1}),e.resend((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.extend)(o,t),n))}),e.onFail),e._box.evalBox(t[2])}function zeroZone(e,t,o){e._box=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_4__.showFastBox)({title:t[0]||_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang("global_charged_zone_title"),onHide:e.onFail},t[1],_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang("global_charged_zone_continue"),(function(){e.resend({...o,charged_confirm:t[3]},e)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_1__.getLang("global_cancel"))}function evalCode(options,answer){const evalString=`(function(){${answer[0]};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(e,evalString)}}const defaultHandler=e=>(t,o)=>{if(-1===e||-2===e||-3===e){const t=o.pop(),n=o.pop(),i=o.pop();let r;-3===e&&(r=o.pop()),window.__adsSet&&__adsSet(i,null,n,t,null,r)}t.onDone&&t.onDone.apply(window,o)};function getHandlerByCode(e){switch(e){case 1:return emailNotConfirmed;case 2:return showCaptcha;case 3:return _authFailed__WEBPACK_IMPORTED_MODULE_12__.authFailed;case 4:return makeRedirect;case 5:return reload;case 6:return mobileActivationRequired;case 7:return showMessage;case 8:return showError;case 9:return votesPayment;case 10:return zeroZone;case 11:case 12:return mobileValidationRequired(e);case 13:return evalCode;case 14:return otpBox;case 15:return passwordValidationRequired;default:return defaultHandler(e)}}},793401:(e,t,o)=>{"use strict";o.d(t,{AjaxCancellationToken:()=>_,plainpost:()=>c,request:()=>l});var n=o(387674),i=o(568146),r=o(879007),s=o(476726),a=o(80505);class _{_setCancelCb(e){this._cancel=e}cancel(){this._cancel&&this._cancel()}}function c(e,t,o,i,r,a,_,c=!1,u=null){if(t.act&&(0,s.partConfigEnabled)("force_act_in_get_params")){let o={},i=e,r="";e.includes("?")&&([i,r]=e.split("?"),o=(0,n.fromQueryString)(r)),o.act=t.act,e=`${i}?${(0,n.toQueryString)(o,!0)}`}let d=l(e,t,{xhrOptions:a,sortQueryStringParams:_&&!_.noSort,headers:_&&_.headers,noExtraHeaders:c,urlOnly:r,cancellationToken:_&&_.cancellationToken,logger:u}),p=d._getXhr();return d.then((e=>o&&o(e.data,p.status))).catch((e=>i&&i(e,p.status))),p}function l(e,t,{xhrOptions:o,headers:s=null,urlOnly:_=!1,sortQueryStringParams:c=!0,noExtraHeaders:l=!1,cancellationToken:u=null,logger:d=null}){let p;d&&(p=(0,i.crc32)(e+JSON.stringify(t)),d(`Initialized request #${p} with URL ${e} and query ${JSON.stringify(t)}`));const h=new XMLHttpRequest;u&&u._setCancelCb((()=>{d&&d(`Aborting request #${p}`),h.abort()}));let m=new Promise((function(i,u){const m="string"!=typeof t?(0,n.toQueryString)(t,!c):t;h.onreadystatechange=function(){if((0,a.processWaf)(h))h.abort();else if(h.readyState===XMLHttpRequest.DONE)if(d&&d(`Request readyState -> DONE with status ${h.status} #${p}`),h.status>=200&&h.status<300)try{i({data:h.responseText,code:h.status}),d&&d(`Success handler finished for request #${p}`)}catch(e){d&&d(`Success handler failed for request #${p}`),u({data:h.responseText,code:-1}),d&&d(`Failure handler finished for request #${p} [1]`)}else u({data:h.responseText,url:e,act:t.act,code:h.status}),d&&d(`Failure handler finished for request #${p} [2]`)};try{d&&d(`Starting request #${p}`),h.open("POST",e,!0)}catch(e){d&&d(`Request #${p} failed`),u({data:e,code:-1}),d&&d(`Failure handler finished for request #${p} [3]`)}s&&Object.keys(s).forEach((e=>{h.setRequestHeader(e,s[e])})),o&&(0,r.each)(o,(function(e,t){h[e]=t})),_||(h.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l||h.setRequestHeader("X-Requested-With","XMLHttpRequest")),d&&d(`Sending data for request #${p}`),h.send(m)}));return m._getXhr=()=>h,m}},850101:(e,t,o)=>{"use strict";o.d(t,{boxRefreshCoords:()=>d,curBox:()=>_,getAndCleanBoxQueueData:()=>g,getBoxLayerWrap:()=>P,getBoxQueue:()=>u,hideBoxLoader:()=>S,hideLastBoxForCaching:()=>w,initBoxQueue:()=>l,isBoxLoadingCancelled:()=>O,refreshBoxLoaderCoords:()=>c,requireDoneBox:()=>m,restoreBoxQueue:()=>y,showBoxLoader:()=>C,showDoneBox:()=>p,showDoneBoxAsync:()=>h,showDoneBoxFull:()=>E,showLastBoxForCaching:()=>A});var n=o(317412),i=o(879007),r=o(452314),s=o(714209),a=o(359045);function _(){const e=window._message_boxes[window.boxQueue.curBox];return e&&e.isVisible()?e:null}function c(){const e=document.querySelector("#box_loader");e&&d(e)}function l(){window.boxQueue=a.boxQueue,window.__bq=a.boxQueue,window.curBox=_,window.boxQueue.hideLastCheck=window.boxQueue.hideLast.pbind(!0),window._message_box_guid=0,window._message_boxes=[]}function u(){return window.boxQueue}function d(e){const t=window.innerHeight||document.documentElement.clientHeight||boxLayerBG.offsetHeight,o=s.browser.mobile?(0,i.intval)(window.pageYOffset):0,n=(0,r.getSize)(e);e.style.marginTop=Math.max(10,o+(t-n[1])/3)+"px"}function p(e,t={},o={}){window.Notifier?f(e,t,o):window.stManager.add([window.jsc("web/notifier.js"),"notifier.css"],(()=>{f(e,t,o)}))}function h(e,t={},o={}){return m().then((()=>f(e,t,o)))}function m(){return new Promise((e=>{window.Notifier?e():window.stManager.add([window.jsc("web/notifier.js"),"notifier.css"],(()=>{e()}))}))}function E(e,t={},o={}){p(e,t,{...o,type:"done_box_full"})}function f(e,t,o){window.curNotifier&&window.curNotifier.version||window.Notifier.init({version:-1,instance_id:-1});const n=void 0!==t.onHide?t.onHide:t.callback,i=void 0!==t.timeout?t.timeout:void 0!==t.out?t.out:null,r=null!==t.id&&void 0!==t.id?t.id:++window.curNotifier.showDoneBoxLastId,s={version:window.curNotifier.version,type:"done_box",text:e,onclick:t.onClick,top_count:-1,id:r,timeout:i,onHide:n,preventHideByClick:!0,link:t.link,...o};return t.tooltipHandler&&(s.tooltipHandler=t.tooltipHandler),Notifier.pushEvent(s),s}function g(){const e={boxes:window._message_boxes,boxQueueIds:window.boxQueue._boxes,curBoxId:window.boxQueue.curBox};return window.boxQueue._boxes=[],window._message_boxes=[],window.boxQueue.curBox=0,e}function y(e){window._message_boxes=e.boxes,window.boxQueue._boxes=e.boxQueueIds,window.boxQueue.curBox=e.curBoxId}function v(){if(!window._message_boxes?.length)return null;const e=window._message_boxes.filter(Boolean);return e.length?e[e.length-1]:null}function w(){const e=v();e&&(e._hide(!1,!0,!0),e.forceHide=!0)}function A(){const e=v();e&&(e.forceHide=!1,e._show(!0,!1,!0))}function b(){return window.boxLoaderState||(window.boxLoaderState={id:0,isShown:!1,onHide:null}),window.boxLoaderState}function T(e){window.boxLoaderState={...b(),...e}}function I(){return document.querySelector("#box_loader")}function P(){return document.querySelector("#box_layer_wrap")}function C(e=!0){const t=b();t.isShown&&t.onHide?.();const o=I();d(o),(0,r.show)(o);const i=P(),s=()=>{S()};i.addEventListener("click",s,e);const a=e=>{e.keyCode==n.KEY.ESC&&S()};document.addEventListener("keypress",a,e);const _=t.id+1;return T({id:_,onHide(){i.removeEventListener("click",s,e),document.removeEventListener("keypress",a,e)},isShown:!0}),(0,r.show)(i),_}function S(){(0,r.hide)(I()),_()||(0,r.hide)(P()),b().onHide?.(),T({isShown:!1,onHide:null})}function O(e){const t=b();return!t.isShown||t.id!==e}},723561:(e,t,o)=>{"use strict";o.d(t,{cancelStackFilter:()=>r,cancelStackPop:()=>a,cancelStackPush:()=>s,getCancelStack:()=>i});var n=o(621684);function i(){return window.cancelStack||[]}function r(e,t){const o=i();return t&&(0,n.topHeaderClearClose)(),window.cancelStack=o.filter((t=>t.name!==e)),window.cancelStack}function s(e,t,o){return o&&(0,n.topHeaderClose)((function(o){t(o),r(e)})),window.cancelStack=r(e).concat([{func:t,name:e,dclick:o}]),window.cancelStack}function a(e){const t=i();(0,n.topHeaderClearClose)(),t.length>0&&t.pop().func(e);const o=t[t.length-1];return o&&o.dclick&&(0,n.topHeaderClose)((function(){o.func(e),r(o.name)})),window.cancelStack=t,window.cancelStack}},448904:(e,t,o)=>{"use strict";o.d(t,{clipboardProcessPaste:()=>u,copyToClipboard:()=>a._copyWithFakeElement,getFiles:()=>_});var n=o(590335),i=o(879007),r=o(317412),s=o(452314),a=o(106149);function _(e){let t=function(e){return e&&e.clipboardData?e.clipboardData:e&&e.originalEvent&&e.originalEvent.clipboardData?e.originalEvent.clipboardData:window.clipboardData}(e);if(!t)return[];let o=t.items;if(!o)return[];let n=[];for(let e=0;e<o.length;e++)0==o[e].type.indexOf("image")&&n.push(o[e].getAsFile());return n}let c=!1,l=null;function u(e){return new Promise(((t,o)=>{if(c)return(0,r.cancelEvent)(e),o();let[a,_,u,d,p]=(0,n.rangeGet)();if(a){if("paste"===e.type){let o=e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData;if(o&&o.types&&o.getData){(0,r.cancelEvent)(e),c=!0;let s=o.getData("text/html")||(0,i.clean)(o.getData("text/plain"))||"";return t([s,e=>{(0,n.rangeInsert)(a,e),c=!1}])}let l=(0,s.cf)(),h=e.target||window.event.srcElement;for(;h.firstChild;)l.appendChild(h.firstChild);return new Promise((e=>setTimeout((()=>{let t=h.innerHTML||"";h.innerHTML="",h.appendChild(l),e([t,e=>{a=(0,n.rangeCreate)(_,u,d,p),(0,n.rangeInsert)(a,e),c=!1}])}),0)))}if("beforepaste"===e.type)return c=!0,function(){if(!l){let e=(0,s.ge)("utils");l=(0,s.ce)("div",{},{width:"10px",height:"10px",overflow:"hidden"}),(0,s.attr)(l,"contenteditable","true"),e.appendChild(l)}}(),l.focus(),void(l.onpaste=()=>{setTimeout((()=>{let e=l.innerHTML||"";l.innerHTML="",delete l.onpaste,t([e,e=>{a=(0,n.rangeCreate)(_,u,d,p),(0,n.rangeInsert)(a,e),c=!1}])}),0)})}return o()}))}},307188:(e,t,o)=>{"use strict";o.d(t,{formatTime:()=>a,getFormattedDiffTimeText:()=>u,getLastDay:()=>l,getServerTime:()=>_,isLeapYear:()=>c,isSameDate:()=>r,leadingZero:()=>s});var n=o(645024),i=o(879007);function r(e,t){const o=new Date(e),n=new Date(t);return o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate()}function s(e){return e>=10?e:"0"+e}function a(e,t){let o;e=Math.max(e,0);const n=Math.floor(e%60);o=n<10?"0"+n:n;const i=(e=Math.floor(e/60))%60;return o=i+":"+o,((e=Math.floor(e/60))>0||t)&&(i<10&&(o="0"+o),o=e+":"+o),o}function _(){return vk.ts+Math.floor(((new Date).getTime()-vk.started)/1e3)}function c(e){return(e=parseInt(e))%4==0&&e%100!=0||e%400==0}function l(e,t){return 2==+t?c(e)?29:28:t>0&&(t<8&&t%2==0||t>7&&t%2==1)?30:31}function u(e,t="",o=!1){let r="";return r=e<5?n.getLang("global_just_now"):e<60?o?n.getLang("global_just_now"):(0,n.langWordNumeric)(e,n.getLang("global_word_secs_ago","raw"),n.getLang("global_secs_ago","raw")):e<3600?o?(0,n.langNumeric)((0,i.intval)(e/60),n.getLang("wall_post_mins_ago","raw")):(0,n.langWordNumeric)((0,i.intval)(e/60),n.getLang("global_word_mins_ago","raw"),n.getLang("global_mins_ago","raw")):e<14400?o?(0,n.langNumeric)((0,i.intval)(e/3600),n.getLang("wall_post_hours_ago","raw")):(0,n.langWordNumeric)((0,i.intval)(e/3600),n.getLang("global_word_hours_ago","raw"),n.getLang("global_hours_ago","raw")):t,r}},618913:(e,t,o)=>{"use strict";o.d(t,{debugLog:()=>c,debugLogDev:()=>l,initDebugTools:()=>a,logEvalError:()=>_});var n=o(714209),i=o(476726),r=o(568352);function s(){if((0,i.partConfigEnabled)("log_fetch_requests")){const e=(e,t)=>{try{if(~e.indexOf("/al_audio")||~e.indexOf("/like.php"))throw new Error(t)}catch(e){(0,r.debugBufferLog)(e)}};!function(e){const t=window.XMLHttpRequest;window.XMLHttpRequest=function(){const o=new t,n=o.open,r=o.send;let s,a;return o.open=function(){return[a,s]=arguments,n.apply(o,arguments)},o.send=function(){const t=arguments[0];return a=(a||"").toUpperCase(),("POST"===a||"GET"===a&&(0,i.partConfigEnabled)("log_fetch_requests_get"))&&e(s,[a,s,t].join(":")),r.apply(o,arguments)},o},["DONE","HEADERS_RECEIVED","LOADING","OPENED","UNSENT"].forEach((e=>{Object.defineProperty(window.XMLHttpRequest,e,{enumerable:!1,configurable:!1,writable:!1,value:t[e]})}))}(e),window.fetch&&function(e){const t=window.fetch;window.fetch=function(){const o=new Array(arguments.length);for(let e=0;e<o.length;++e)o[e]=arguments[e];const n=o[0];let i,r="GET";"string"==typeof n?i=n:"Request"in window&&n instanceof window.Request?(i=n.url,n.method&&(r=n.method)):i=""+n,o[1]&&o[1].method&&(r=o[1].method);const s={method:r,url:i,status_code:null};return e(i,i),t.apply(this,o).then((function(e){return s.status_code=e.status,e})).catch((function(e){throw e}))}}(e)}}function a(){window._logTimer=(new Date).getTime(),s()}function _(e,t,o){if(t&&t.length>2e3){const e=t.indexOf("; window.TimeSpent && TimeSpent.setTimers && TimeSpent.setTimers(");~e&&(t=t.slice(0,e)),t=`${t.slice(0,1e3)}...${t.slice(-1e3)}`}e.message+=`: ${t}`,(0,r.logError)(e,o)}function c(e){try{window.debuglogClient&&window.debuglogClient(e);const t="["+((new Date).getTime()-window._logTimer)/1e3+"] ";if(window.console&&console.log){const e=Array.prototype.slice.call(arguments);e.unshift(t),n.browser.msie||n.browser.mobile?console.log(e.join(" ")):console.log.apply(console,e)}}catch(e){}}function l(...e){0}},452314:(e,t,o)=>{"use strict";o.d(t,{$:()=>_,$$:()=>c,addClass:()=>ce,addClassDelayed:()=>le,attr:()=>ye,ce:()=>b,cf:()=>T,cleanElems:()=>Ae,clientHeight:()=>Z,createElement:()=>Le,data:()=>ge,domByClass:()=>F,domCA:()=>V,domChildIndex:()=>K,domChildren:()=>B,domClosest:()=>v,domClosestByTag:()=>w,domClosestOverflowHidden:()=>z,domClosestPositioned:()=>Y,domClosestSibling:()=>H,domData:()=>W,domFC:()=>O,domInsertAfter:()=>U,domInsertBefore:()=>x,domLC:()=>M,domNS:()=>C,domPN:()=>D,domPS:()=>S,domQuery:()=>g,domQuery1:()=>y,domReplaceEl:()=>N,elfocus:()=>Pe,emptyNode:()=>u,ge:()=>d,geByClass:()=>m,geByClass1:()=>E,geById:()=>a,geByTag:()=>p,geByTag1:()=>h,getClientRectOffsetY:()=>ee,getH:()=>ae,getScroll:()=>$,getSize:()=>re,getStyle:()=>Ee,getW:()=>se,getXY:()=>ie,getXYRect:()=>ne,getZoom:()=>Te,gpeByClass:()=>f,gpeByTag:()=>A,hasClass:()=>_e,hide:()=>Q,initDomScripts:()=>De,isAncestor:()=>q,isHover:()=>G,isVisible:()=>J,lockDocumentTitle:()=>Me,matchesSelector:()=>j,re:()=>I,removeAttr:()=>ve,removeClass:()=>ue,removeClassDelayed:()=>de,removeData:()=>we,replaceClass:()=>me,rs:()=>R,se:()=>L,sech:()=>k,setDocumentTitle:()=>Oe,setInnerText:()=>l,setStyle:()=>fe,setTitle:()=>be,show:()=>X,toggle:()=>te,toggleClass:()=>pe,toggleClassDelayed:()=>he,traverseParent:()=>Ce,val:()=>Ie});var n=o(879007),i=o(317412),r=o(714209),s=o(618913);function a(e){return document.getElementById(e)}function _(e,t){return(t||document).querySelector(e)}function c(e,t){return(t||document).querySelectorAll(e)}function l(e,t){e&&(e.innerText=t)}function u(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}const d=e=>"string"==typeof e||"number"==typeof e?document.getElementById(e):e;function p(e,t){return(t=d(t)||document).getElementsByTagName(e)}function h(e,t){return(t=d(t)||document).querySelector&&t.querySelector(e)||p(e,t)[0]}function m(e,t,o){return t=d(t)||document,o=o||"*",e=("."+e).replace(/\s+/gm,"."),Array.prototype.slice.call(t.querySelectorAll(o+e))}function E(e,t,o){return o=o||"*",(t=d(t)||document).querySelector&&t.querySelector(o+("."+e).replace(/\s+/gm,"."))||m(e,t,o)[0]}function f(e,t,o){if(!(t=d(t)))return null;for(;o!==t&&(t=t.parentNode);)if(_e(t,e))return t;return null}function g(e,t){return(t||document).querySelectorAll(e)}function y(e,t){return(t||document).querySelector(e)}function v(e,t){return _e(t,e)?t:f(e,t)}function w(e,t){return e=e.toUpperCase(),t.nodeType===Node.ELEMENT_NODE&&t.tagName.toUpperCase()===e?t:A(e,t)}function A(e,t){if(!(t=d(t)))return null;for(e=e.toUpperCase();t=t.parentNode;)if(t.tagName&&t.tagName.toUpperCase()===e)return t;return null}function b(e,t=null,o=null){const i=document.createElement(e);return t&&(0,n.extend)(i,t),o&&fe(i,o),i}const T=function(e){const t=e.createDocumentFragment(),o=e.createElement("div"),n=e.createRange&&e.createRange();return t.appendChild(o),n&&n.selectNodeContents(o),n&&n.createContextualFragment?t=>t?n.createContextualFragment(t):e.createDocumentFragment():t=>{if(!t)return e.createDocumentFragment();o.innerHTML=t;const n=e.createDocumentFragment();for(;o.firstChild;)n.appendChild(o.firstChild);return n}}(document);function I(e){return(e=d(e))&&e.parentNode&&e.parentNode.removeChild(e),e}function P(e,t){for(t=t?"previousSibling":"nextSibling";e&&!e.tagName;)e=e[t];return e}const C=e=>P((e||{}).nextSibling),S=e=>P((e||{}).previousSibling,1),O=e=>P((e||{}).firstChild),M=e=>P((e||{}).lastChild,1),D=e=>(e||{}).parentNode,L=e=>O(b("div",{innerHTML:e})),k=e=>B(b("div",{innerHTML:e}));function R(e,t){return(0,n.each)(t,(function(t,o){e=e.replace(new RegExp("%"+t+"%","g"),(void 0===o?"":o).toString().replace(/\$/g,"&#036;"))})),e}function N(e,t){return(0,n.isString)(t)&&(t=L(t)),D(e).replaceChild(t,e),t}function B(e){const t=[],o=e.childNodes;for(let e=0;e<o.length;e++)o[e].tagName&&t.push(o[e]);return t}function x(e,t){const o=D(t);return o&&o.insertBefore(e,t)}function U(e,t){const o=D(t);return o&&o.insertBefore(e,C(t))}function F(e,t){return e?E(t,e):e}function W(e,t,o){return e?void 0!==o?(null===o?e.removeAttribute("data-"+t):e.setAttribute("data-"+t,o),o):e.getAttribute("data-"+t):null}function K(e){let t=0;for(;null!=(e=S(e));)t++;return t}function V(e,t){do{e=D(e)}while(e&&!j(e,t));return e}function H(e,t,o){let n=null;for(;null===n&&e;)(e=-1===o?S(e):C(e))&&j(e,t)&&(n=e);return n}function j(e,t){if(!(e=d(e))||e===document)return!1;const o=e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let o=t.length;for(;--o>=0&&t.item(o)!==this;);return o>-1};return o.call(e,t)}function G(e){return j(e,":hover")}function q(e,t){let o=d(e);if(t=d(t),!e||!t)return!1;for(;o=o.parentNode;)if(o===t)return!0;return!1}function $(){const e=r.browser.msie6?d("PageContainer"):document.body,t=document.documentElement;return[e.scrollLeft||t.scrollLeft||window.pageXOffset||0,e.scrollTop||t.scrollTop||window.pageYOffset||0,t.clientWidth||e.clientWidth||0,t.clientHeight||e.clientHeight||0]}function Y(e,t){let o=(t=t||{}).fromEl||D(e);const i=t.positions||["relative","absolute","fixed"];for(;o&&o!==document.body;){const e=Ee(o,"position");if((0,n.inArray)(e,i)&&(!t.noOverflow||"hidden"!==Ee(o,"overflow")))break;o=D(o)}return o}function z(e,t){let o,n,i,s=e=d(e),a=!1;for(;s&&s.tagName&&s!==document.body;){if(o=Ee(s,"position"),n=Ee(s,"overflow"),i=Ee(s,"transform"),t&&r.browser.mozilla){if("page_wrap"!=s.id&&s!==e&&"visible"!==n&&("static"===o?!a||"relative"===a:"fixed"!==a))break}else if(s!==e&&"visible"!==n&&("static"===o?!a||"relative"===a:"fixed"!==a))break;"none"!==i?a=void 0:"static"!==o&&"fixed"!==a&&(a=o),s=D(s)}return s}function X(e){const t=arguments.length;if(t>1){for(let e=0;e<t;e++)X(arguments[e]);return}if(!(e=d(e))||!e.style)return;const o=e.olddisplay,n=e.tagName.toLowerCase();let i="block";e.style.display=o||"","none"===Ee(e,"display")&&(i=_e(e,"inline")||_e(e,"_inline")?"inline":_e(e,"_inline_block")?"inline-block":_e(e,"_flex")?"flex":"tr"!==n||r.browser.msie?"table"!==n||r.browser.msie?"block":"table":"table-row",e.style.display=e.olddisplay=i)}function Q(e){const t=arguments.length;if(t>1){for(let e=0;e<t;e++)Q(arguments[e]);return}if(!(e=d(e))||!e.style)return;const o=Ee(e,"display");e.olddisplay="none"!==o?o:"",e.style.display="none"}function J(e){return!(!(e=d(e))||!e.style)&&"none"!==Ee(e,"display")}function Z(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function ee(e,t,o){o=o||0;const i=ie(e=d(e))[1],r=re(e)[1],s=window,a=document.documentElement,_=Math.max((0,n.intval)(s.innerHeight),(0,n.intval)(a.clientHeight)),c=d("page_header_cont"),l=a.scrollTop||document.body.scrollTop||window.scrollY||0,u=vk.staticheader?Math.max(0,re(c)[1]-l):re(c)[1];if(t){if(i+r<l+u+o)return i+r-l-u-o;if(i>l+_-o)return i-l-_+o}else{if(i<l+u+o)return i-l-u-o;if(i+r>l+_-o)return i+r-l-_+o}return 0}function te(e,t){return void 0===t&&(t=!J(e)),t?X(e):Q(e),t}function oe(e){return void 0!==e.getBoundingClientRect}function ne(e,t){let o;if(t&&"inline"===Ee(e,"display")){const t=e.getClientRects();o=t&&t[0]||e.getBoundingClientRect()}else o=e.getBoundingClientRect();return o}function ie(e,t){if(!(e=d(e)))return[0,0];const o=e.ownerDocument;let n={top:0,left:0};if(!o)return[0,0];const i=o.documentElement;oe(e)&&(n=ne(e,!0));const r=o===o.window?o:9===o.nodeType&&(o.defaultView||o.parentWindow);return[n.left+(t?0:r.pageXOffset||i.scrollLeft)-(i.clientLeft||0),n.top+(t?0:r.pageYOffset||i.scrollTop)-(i.clientTop||0)]}function re(e,t,o){e=d(e);const i=document.documentElement;let r,s=[0,0];if(t&&"border-box"===Ee(e,"boxSizing")&&(t=!1),e===document)s=[Math.max(i.clientWidth,document.body.scrollWidth,i.scrollWidth,document.body.offsetWidth,i.offsetWidth),Math.max(i.clientHeight,document.body.scrollHeight,i.scrollHeight,document.body.offsetHeight,i.offsetHeight)];else if(e){function a(){s=oe(e)&&(r=ne(e,o))&&void 0!==r.width?[r.width,r.height]:[e.offsetWidth,e.offsetHeight],t&&(0,n.each)(s,(function(t,o){const i=t?["Top","Bottom"]:["Left","Right"];(0,n.each)(i,(function(){s[t]-=parseFloat(Ee(e,"padding"+this))||0,s[t]-=parseFloat(Ee(e,"border"+this+"Width"))||0}))}))}if(J(e))a();else{const _={position:"absolute",visibility:"hidden",display:"block"},c={};let l=!1;e.style.cssText.indexOf("!important")>-1&&(l=e.style.cssText),(0,n.each)(_,(function(t,o){c[t]=e.style[t],e.style[t]=o})),a(),(0,n.each)(_,(function(t,o){e.style[t]=c[t]})),l&&(e.style.cssText=l)}}return s}function se(e){return re(e)[0]}function ae(e){return re(e)[1]}function _e(e,t){const o=d(e);return o&&o.classList&&o.classList.contains(t)}function ce(e,t){const o=d(e);if(o&&o.classList)if(t.includes(" ")){` ${o.className} `.includes(` ${t} `)||(o.className=(o.className?`${o.className} `:"")+t)}else t.length&&!o.classList.contains(t)&&o.classList.add(t)}const le=(e,t,o)=>{o=(0,n.positive)(o),setTimeout(ce.pbind(e,t),o)};function ue(e,t){const o=d(e);t.length&&o&&o.classList&&o.classList.contains(t)&&o.classList.remove(t)}const de=(e,t,o)=>{o=(0,n.positive)(o),setTimeout(ue.pbind(e,t),o)};function pe(e,t,o){const n=d(e);if(!t.length||!n||!n.classList)return!1;if(void 0===o)return n.classList.toggle(t);const i=n.classList.contains(t);return o&&!i?n.classList.add(t):!o&&i&&n.classList.remove(t),o}function he(e,t,o,i){return i=(0,n.positive)(i),void 0===o&&(o=!_e(e,t)),(o?le:de)(e,t,i),o}function me(e,t,o){ue(e,t),ce(e,o)}function Ee(e,t,o){if(e=d(e),(0,n.isArray)(t)){const o={};return(0,n.each)(t,((t,n)=>o[n]=Ee(e,n))),o}if(!e)return"";if(void 0===o&&(o=!0),!o&&"opacity"===t&&r.browser.msie){const t=e.style.filter;return t?t.indexOf("opacity=")>=0?parseFloat(t.match(/opacity=([^)]*)/)[1])/100+"":"1":""}if(!o&&e.style&&(e.style[t]||"height"===t))return e.style[t];let i;const s=document.defaultView||window;if(s.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1").toLowerCase();const o=s.getComputedStyle(e,null);o&&(i=o.getPropertyValue(t))}else if(e.currentStyle){if("opacity"===t&&r.browser.msie){const t=e.currentStyle.filter;return t&&t.indexOf("opacity=")>=0?parseFloat(t.match(/opacity=([^)]*)/)[1])/100+"":"1"}const o=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()}));i=e.currentStyle[t]||e.currentStyle[o],"auto"===i&&(i=0),i=(i+"").split(" "),(0,n.each)(i,(function(t,o){if(!/^\d+(px)?$/i.test(o)&&/^\d/.test(o)){const n=e.style,r=n.left,s=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,n.left=o||0,i[t]=n.pixelLeft+"px",n.left=r,e.runtimeStyle.left=s}})),i=i.join(" ")}if(o&&("width"===t||"height"===t)){const o=re(e,!0)[{width:0,height:1}[t]];i=((0,n.intval)(i)?Math.max((0,n.floatval)(i),o):o)+"px"}return i}function fe(e,t,o){if(e=d(e))if((0,n.isObject)(t))(0,n.each)(t,((t,o)=>fe(e,t,o)));else if("opacity"===t)r.browser.msie&&((o+"").length?e.style.filter=1!==o?"alpha(opacity="+100*o+")":"":e.style.cssText=e.style.cssText.replace(/filter\s*:[^;]*/gi,""),e.style.zoom=1),e.style.opacity!==o&&(e.style.opacity=o);else try{const n="number"==typeof o;n&&/height|width/i.test(t)&&(o=Math.abs(o)),o=n&&!/z-?index|font-?weight|opacity|zoom|line-?height/i.test(t)?o+"px":o,e.style[t]!==o&&(e.style[t]=o)}catch(e){(0,s.debugLog)("setStyle error: ",[t,o],e)}}function ge(e,t,o){if(!e)return!1;let n=e[vkExpand];return n||(n=e[vkExpand]=++vkUUID),void 0!==o&&(vkCache[n]||(vkCache[n]={},window.__debugMode&&(vkCache[n].__elem=e)),vkCache[n][t]=o),t?vkCache[n]&&vkCache[n][t]:n}function ye(e,t,o){return e=d(e),void 0===o?e.getAttribute(t):(e.setAttribute(t,o),o)}function ve(e){for(let t=0,o=arguments.length;t<o;++t){const o=arguments[t];if(void 0!==e[o])try{delete e[o]}catch(t){try{e.removeAttribute(o)}catch(e){}}}}function we(e,t){const o=!!e&&e[vkExpand];if(o)if(t){if(vkCache[o]){delete vkCache[o][t],t="";let n=0;for(const e in vkCache[o])if("__elem"!==e){n++;break}n||we(e)}}else(0,i.removeEvent)(e),ve(e,vkExpand),delete vkCache[o]}function Ae(){const e=arguments;for(let t=0;t<e.length;++t){const o=d(e[t]);o&&(we(o),ve(o,"btnevents"))}}function be(e,t,o){if((e=d(e))&&!e.titleSet){if(t||(t=e),t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)e.setAttribute("title",o||e.innerText||e.textContent);else{const t=h("b",e);t&&(t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)?e.setAttribute("title",o||e.innerText||e.textContent):e.removeAttribute("title")}e.titleSet=1}}function Te(){const e=d("zoom_test_1")||document.body.appendChild(b("div",{id:"zoom_test_1"},{left:"10%",position:"absolute",visibility:"hidden"}));return(d("zoom_test_2")||document.body.appendChild(b("div",{id:"zoom_test_2"},{left:e.offsetLeft+"px",position:"absolute",visibility:"hidden"}))).offsetLeft/e.offsetLeft}function Ie(e,t=void 0,o=void 0){if(e=d(e))return void 0!==t&&(e.setValue?(e.setValue(t),!o&&e.phonblur&&e.phonblur()):"INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value=t:void 0!==e.emojiId&&window.Emoji?Emoji.val(e,t):e.innerHTML=t,!o&&(0,i.triggerEvent)(e,"valueChanged")),e.getValue?e.getValue():("INPUT"===e.tagName||"TEXTAREA"===e.tagName?e.value:e.innerHTML)||""}function Pe(e,t,o){e=d(e);try{if(e.focus(),void 0!==t&&!1!==t||(t=e.value.length),void 0!==o&&!1!==o||(o=t),e.setSelectionRange)e.setSelectionRange(t,o);else if(window.getSelection&&document.createRange){let t=document.createRange();t.selectNodeContents(e),t.collapse(!1);let o=window.getSelection();o.removeAllRanges(),o.addRange(t)}}catch(e){}}function Ce(e,t,o){for(e=d(e),o=o||999;e&&!t(e);){if(0===--o)return!1;try{if((e=D(e))===document)return!1}catch(t){e=!1}}return e}window.cssTransformProp=function(){const e=document.createElement("div");if(null==e.style.transform){const t=["Webkit","Moz","ms"];for(const o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"}();let Se=!1;function Oe(e){if(!Se)return window.document.title=(0,n.replaceEntities)(e)}function Me(e){Se=e,e&&window.cur&&window.cur.destroy.push((()=>{Me(!1)}))}function De(){window.vkExpand=window.vkExpand||"VK"+(0,n.vkNow)(),window.vkUUID=window.vkUUID||0,window.vkCache=window.vkCache||{}}const Le=b},317412:(e,t,o)=>{"use strict";o.d(t,{KEY:()=>s,KEY_NAME:()=>a,addEvent:()=>_,cancelEvent:()=>u,checkEvent:()=>m,checkKeyboardEvent:()=>E,checkOver:()=>f,normEvent:()=>h,removeEvent:()=>c,stopEvent:()=>d,triggerEvent:()=>l});var n=o(452314),i=o(879007),r=o(714209);const s={LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:8,TAB:9,RETURN:13,ENTER:13,ESC:27,PAGEUP:33,PAGEDOWN:34,SPACE:32,CTRL:17,ALT:18,SHIFT:16,META_LEFT:91,META_RIGHT:93},a={Enter:"Enter"};function _(e,t,o,r,s,a){if(!(e=(0,n.ge)(e))||3==e.nodeType||8==e.nodeType)return;const _=s?function(){const e=function(e){const t=e.data;e.data=s;const n=o.apply(this,[e]);return e.data=t,n};return e.handler=o,e}():o;e.setInterval&&e!==window&&(e=window);const c=(0,n.data)(e,"events")||(0,n.data)(e,"events",{}),l=(0,n.data)(e,"handle")||(0,n.data)(e,"handle",function(e){return function(){p.apply(e,arguments)}}(e));(0,i.each)(t.split(/\s+/),(function(t,o){c[o]||(c[o]=[],!r&&e.addEventListener?e.addEventListener(o,l,a):!r&&e.attachEvent&&e.attachEvent("on"+o,l)),c[o].push(_)}))}function c(e,t,o,r){if(void 0===r&&(r=!1),!(e=(0,n.ge)(e)))return;const s=(0,n.data)(e,"events");if(s)if("string"==typeof t)(0,i.each)(t.split(/\s+/),(function(t,a){if(!(0,i.isArray)(s[a]))return;let _=s[a].length;if((0,i.isFunction)(o)){for(let e=_-1;e>=0;e--)if(s[a][e]&&(s[a][e]===o||s[a][e].handler===o)){s[a].splice(e,1),_--;break}}else{for(let e=0;e<_;e++)delete s[a][e];_=0}_||(e.removeEventListener?e.removeEventListener(a,(0,n.data)(e,"handle"),r):e.detachEvent&&e.detachEvent("on"+a,(0,n.data)(e,"handle")),delete s[a])})),(0,i.isEmpty)(s)&&((0,n.removeData)(e,"events"),(0,n.removeData)(e,"handle"));else for(const t in s)s.hasOwnProperty(t)&&c(e,t)}function l(e,t,o,r){e=(0,n.ge)(e);const s=(0,n.data)(e,"handle");if(s){const n=()=>s.call(e,(0,i.extend)(o||{},{type:t,target:e}));r?n():setTimeout(n,0)}}function u(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.cancelBubble=!0,e.returnValue=!1,!1}function d(e){if(!(e=e||window.event))return!1;for(;e.originalEvent;)e=e.originalEvent;return e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}function p(e){e=h(e);const t=Array.from(arguments);t[0]=e;const o=(0,n.data)(this,"events");if(!o||"string"!=typeof e.type||!o[e.type]||!o[e.type].length)return;const i=(o[e.type]||[]).slice();for(const o in i){if(!i.hasOwnProperty(o))continue;if("mouseover"===e.type||"mouseout"===e.type){let t=e.relatedElement;for(;t&&t!==this;)t=t.parentNode;if(t===this)continue}const n=i[o].apply(this,t);if(!1!==n&&-1!==n||u(e),-1===n)return!1}}function h(e){const t=e=e||window.event;if((e=(0,i.clone)(t)).originalEvent=t,e.target||(e.target=e.srcElement||document),3==e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target),null==e.pageX&&null!=e.clientX){const t=document.documentElement,o=document.body;e.pageX=e.clientX+(t&&t.scrollLeft||o&&o.scrollLeft||0)-(t.clientLeft||0),e.pageY=e.clientY+(t&&t.scrollTop||o&&o.scrollTop||0)-(t.clientTop||0)}return!e.which&&(e.charCode||0===e.charCode?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),!e.metaKey&&e.ctrlKey?e.metaKey=e.ctrlKey:!e.ctrlKey&&e.metaKey&&r.browser.mac&&(e.ctrlKey=e.metaKey),!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}function m(e){const t=e||window.event;return t&&("click"===t.type||"mousedown"===t.type||"mouseup"===t.type)&&(t.which>1||t.button>1||t.ctrlKey||t.shiftKey||r.browser.mac&&t.metaKey)||!1}function E(e){if(!(e=h(e))||!e.target)return!1;if(!e.screenX)return!0;const t=(0,n.getSize)(e.target),o=(0,n.getXY)(e.target),i=e.pageX-o[0],r=e.pageY-o[1];return i<-1||i>t[0]+1||r<-1||r>t[1]+1||Math.abs(e.pageX-o[0]-t[0]/2)<1&&Math.abs(e.pageY-o[1]-t[1]/2)<1}function f(e,t){if(!e)return!0;e=e.originalEvent||e,t=t||e.target;let o=e.fromElement||e.relatedTarget;if(!o||o===t||o===t.parentNode)return!0;for(;o!==t&&o.parentNode&&o.parentNode!==document.body;)o=o.parentNode;return o!==t}},96526:(e,t,o)=>{"use strict";o.r(t),o.d(t,{ElementTooltip:()=>l,default:()=>u});var n=o(452314),i=o(879007),r=o(317412),s=o(688701),a=o(134020),_=o(857125),c=o(695290);class l{_initEvents(e){this._opts.autoShow&&(this._el_me_event=this._onMouseEnter.bind(this),(0,r.addEvent)(e,"mouseenter",this._el_me_event),this._opts.showOnKeyboard&&(this._el_kd_event=t=>{t.target!==e||t.keyCode!==r.KEY.ENTER&&t.keyCode!==r.KEY.SPACE||this.toggle()}),(0,r.addEvent)(e,"keydown",this._el_kd_event)),(this._opts.autoShow||this._opts.autoHide)&&(this._el_ml_event=this._onMouseLeave.bind(this),(0,r.addEvent)(e,"mouseleave",this._el_ml_event)),this._opts.autoShow||this._opts.customShow||(this._el_c_event=()=>{this._isShown&&this._opts.noHideOnClick||this.toggle(!this._isShown)},(0,r.addEvent)(e,"click",this._el_c_event))}_onMouseEnter(e){clearTimeout(this._hto),this._hto=!1,!this._isShown&&this._opts.autoShow&&(clearTimeout(this._reTimeout),this._reTimeout=!1,clearTimeout(this._sto),this._sto=setTimeout(this.show.bind(this),this._opts.delay))}_onMouseLeave(e){this._clearTimeouts(),this._hto=setTimeout(this._hide.bind(this),200)}_onMouseWindowClick(e){if(this._opts.noAutoHideOnWindowClick)return;let t=e.target;for(;t&&t!==this._ttel&&t!==document.body&&t!==this._el;)t=(0,n.domPN)(t);return(0,n.hasClass)(e.target,"_ap_layer__close")||t&&t!==document.body?void 0:(0,i.isFunction)(this._opts.onWindowClick)?(this._opts.onWindowClick(),(0,r.cancelEvent)(e)):(this.hide(!0),(0,r.cancelEvent)(e))}destroy(){let e;this._el_me_event&&(0,r.removeEvent)(this._el,"mouseenter",this._el_me_event),this._el_ml_event&&(0,r.removeEvent)(this._el,"mouseleave",this._el_ml_event),this._el_c_event&&(0,r.removeEvent)(this._el,"click",this._el_c_event),this._el_kd_event&&(0,r.removeEvent)(this._el,"keydown",this._el_kd_event),this._clearTimeouts(),(0,n.removeData)(this._el,"ett"),(0,n.re)(this._ttel),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ttel&&(e=(0,n.geByClass1)("_eltt_content",this._ttel)),this._opts.onDestroy&&this._opts.onDestroy(e)}hide(e,t){this._hide(e,t)}_onTooltipMouseEnter(e){this._clearTimeouts()}_onTooltipMouseLeave(e){this._onMouseLeave()}build(){if(!this._ttel){const e=this._opts.withCloseButton?"eltt_with_close_button":"";this._ttel=(0,n.se)(`\n        <div class="eltt ${this._opts.cls||""} ${e}" id="${this._opts.id}">\n          <div class="eltt_arrow_back _eltt_arrow_back">\n            <div class="eltt_arrow"></div>\n          </div>\n          <div class="eltt_content _eltt_content"></div>\n        </div>`),this._ttArrowEl=(0,n.geByClass1)("_eltt_arrow_back",this._ttel);const t=(0,n.geByClass1)("_eltt_content",this._ttel);if(this._opts.content&&((0,i.isString)(this._opts.content)?t.innerHTML=this._opts.content:t.appendChild(this._opts.content)),this._opts.withCloseButton){const e='\n          <div class="eltt_close_button"></div>\n        ';this._ttel.insertAdjacentHTML("beforeend",e),this._closeButton=this._ttel.lastElementChild;const t=e=>{e.stopPropagation(),this.hide(null,!0),this._opts.onCloseButtonClick&&this._opts.onCloseButtonClick()};this._closeButton.addEventListener("click",t),cur.destroy.push((()=>this._closeButton.removeEventListener("click",t)))}this._appendToEl&&this._appendToEl.appendChild(this._ttel),this._opts.onClick&&(this._ttel.addEventListener("click",this._opts.onClick),window.cur.destroy.push((()=>this._ttel.removeEventListener("click",this._opts.onClick))))}}show(){if(this._isShown)return void this.updatePosition();if(this._tooltipStats.handleShow(),this._opts.skipShow)return;if(this._clearTimeouts(),this._ttel||(this.build(),(this._opts.autoShow||this._opts.autoHide)&&(this._ev_ttenter=this._onTooltipMouseEnter.bind(this),this._ev_ttleave=this._onTooltipMouseLeave.bind(this),(0,r.addEvent)(this._ttel,"mouseenter",this._ev_ttenter),(0,r.addEvent)(this._ttel,"mouseleave",this._ev_ttleave))),this._opts.width){const e=(0,i.isFunction)(this._opts.width)?this._opts.width.call(this):this._opts.width;(0,n.setStyle)(this._ttel,"width",e)}(0,n.show)(this._ttel);const e=(0,n.geByClass1)("_eltt_content",this._ttel);this._opts.onFirstTimeShow&&!this._firstTimeShown&&this._opts.onFirstTimeShow.call(this,e,this._ttel),this._opts.onShow&&this._opts.onShow(e,!this._firstTimeShown),this._firstTimeShown=!0,this.updatePosition(),this._isShown=!0,this._el.setAttribute("aria-expanded","true"),this._visTO=setTimeout(n.addClass.pbind(this._ttel,"eltt_vis"),10),this._opts.elClassWhenShown&&(0,n.addClass)(this._el,this._opts.elClassWhenShown),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick),this._ev_wclick=this._onMouseWindowClick.bind(this),(0,r.addEvent)(document,"mousedown",this._ev_wclick)}static getType(e){switch(e){case"top":case"bottom":return l.TYPE_VERTICAL;case"right":case"left":return l.TYPE_HORIZONTAL}}getOptions(){return this._opts}updatePosition(){let e=this._opts.forceSide,t=!!this._opts.getTargetBoundingBox&&this._opts.getTargetBoundingBox(this);if(!t){const e=(0,n.getXY)(this._el),o=(0,n.getSize)(this._el);t={left:e[0],top:e[1],width:o[0],height:o[1]}}const o=this._opts.getWrapEl?this._opts.getWrapEl(this):(0,n.gpeByClass)("audio_layer_container",this._ttel),r=o||(0,n.domClosestOverflowHidden)(this._ttel),_=r!==document.body?(0,n.getXY)(r):[(0,s.scrollGetX)(),(0,s.scrollGetY)()+(0,a.getPageHeaderHeight)()],c=r!==document.body?(0,n.getSize)(r):[window.innerWidth,window.innerHeight],u=(0,n.getSize)(this._ttel),d=this._arrowSize,p=this._opts.noBorder?0:1,h=(0,i.isFunction)(this._opts.offset)?this._opts.offset():this._opts.offset;let m;const E=(e,o)=>{const i={},r=[vk.rtl?"marginRight":"marginLeft","marginTop"].indexOf(e);let s;s=this._opts.align===(vk.rtl?l.ALIGN_LEFT:l.ALIGN_RIGHT)?u[r]-Math.max(p+d+(o||0),Math.min(u[r],t[r?"height":"width"])/2):this._opts.align===(vk.rtl?l.ALIGN_RIGHT:l.ALIGN_LEFT)?Math.max(p+d+(o||0),Math.min(u[r],t[r?"height":"width"])/2):u[r]/2,i[e]=Math.floor(s)-p-d-(o||0),this._opts.onSetArrowPosition(i),(0,n.setStyle)(this._ttArrowEl,i)};if(this._opts.setPos)m=this._opts.setPos(this)||{},l.getType(e)===l.TYPE_VERTICAL?void 0!==m.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginLeft:m.arrowPosition}):vk.rtl?E("marginRight"):E("marginLeft"):void 0!==m.arrowPosition?(0,n.setStyle)(this._ttArrowEl,{marginTop:m.arrowPosition}):E("marginTop");else{if(!e&&this._prevSide&&this._opts.preventSideChange)e=this._prevSide;else if(!e)if(this._opts.type===l.TYPE_VERTICAL){const o=document.body.classList.contains("body_im")?this._opts.bottomGap||60:this._opts.bottomGap||0,n=t.top-_[1]>u[1]+d-h[1],i=(0,s.scrollGetY)()+c[1]-(t.top+t.height+d)-o>u[1];e="top"===this._opts.defaultSide?n?"top":"bottom":i?"bottom":"top"}else e=t.left-_[0]<u[0]?"right":"left";let o,i,r,a,p,m,f=(0,n.getXY)(this._appendToEl),g=[t.left-f[0],t.top-f[1]],y=h[0]+g[0];this._opts.centerShift?(y+=this._opts.centerShift||0,o=this._opts.centerShift):this._opts.rightShift&&(o=-(u[0]/2-this._opts.rightShift),y+=o),this._prevSide=e;let v=20;const w=!this._opts.autoAdjustToViewport;switch(this._opts.align===(vk.rtl?l.ALIGN_LEFT:l.ALIGN_RIGHT)?(i=t.width-u[0],r=t.height-u[1]):this._opts.align===(vk.rtl?l.ALIGN_RIGHT:l.ALIGN_LEFT)?(i=0,r=0):(i=-u[0]/2+t.width/2,r=t.height/2-u[1]/2),e){case"bottom":p=i+y,m=t.height+d-h[1]+g[1],o||w||(a=i+t.left+h[0]+u[0]+v-(_[0]+c[0]),a<0&&(a=0),p-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m});break;case"top":p=i+y,o||w||(a=i+t.left+h[0]+u[0]+v-(_[0]+c[0]),a<0&&(a=0),p-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p}),m=-(0,n.getSize)(this._ttel)[1]-d+h[1]+g[1],(0,n.setStyle)(this._ttel,{top:m});break;case"right":p=t.width+d+y,m=r+h[1]+g[1],o||w||(a=r+t.top+h[1]-(_[1]+v),a>0&&(a=0),m-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m});break;case"left":p=-u[0]-d+y,m=r+h[1]+g[1],o||w||(a=r+t.top+h[1]-(_[1]+v),a>0&&(a=0),m-=a,o=-a),(0,n.setStyle)(this._ttel,{left:p,top:m})}this._opts.type===l.TYPE_VERTICAL?vk.rtl?E("marginRight",o):E("marginLeft",o):E("marginTop",o)}(0,i.each)(["top","bottom","left","right"],function(t,o){e!==o&&(0,n.removeClass)(this._ttel,"eltt_"+o)}.bind(this)),(0,n.addClass)(this._ttel,"eltt_"+e),(0,n.setStyle)(this._ttel,m)}_hide(e,t){if(this.tempPreventHide)return;let o;if(e&&(o=c.ETooltipEventTypes.TOOLTIP_HIDE_BY_CLICK),t&&(o=c.ETooltipEventTypes.TOOLTIP_HIDE_BY_CROSS),this._tooltipStats.handleHide(o),this._isShown=!1,this._clearTimeouts(),this._reTimeout=setTimeout(function(){(0,n.hide)(this._ttel),this._el.setAttribute("aria-expanded","false"),this._opts.elClassWhenShown&&(0,n.removeClass)(this._el,this._opts.elClassWhenShown),this._opts.onHide&&this._opts.onHide(this._ttel,!!e,!!t)}.bind(this),l.FADE_SPEED),this._opts.onBeforeHide)try{this._opts.onBeforeHide(this._ttel,!!e,!!t)}catch(e){}(0,n.removeClass)(this._ttel,"eltt_vis"),this._ev_wclick&&(0,r.removeEvent)(document,"mousedown",this._ev_wclick)}isShown(){return this._isShown}toggle(){this.isShown()?this.hide():this.show()}_clearTimeouts(){this._visTO&&clearTimeout(this._visTO),this._visTO=!1,this._sto&&clearTimeout(this._sto),this._sto=!1,this._hto&&clearTimeout(this._hto),this._hto=!1,this._reTimeout&&clearTimeout(this._reTimeout),this._reTimeout=!1}getContent(){return(0,n.geByClass1)("_eltt_content",this._ttel)}constructor(e,t){if(this.constructor!==l)throw new Error("ElementTooltip was called without 'new' operator");if(!(e=(0,n.ge)(e))||!e.nodeType)throw new Error("First argument not a DOM element");if((0,n.data)(e,"ett"))return(0,n.data)(e,"ett");if(this._tooltipStats=new _.TooltipsStat(t.helpHintId||"unknown",t.skipShow||!1),this._opts=(0,i.extend)({delay:100,offset:[0,0],type:l.TYPE_VERTICAL,id:"",cls:"",width:null,appendToParent:!1,autoAdjustToViewport:!0,autoShow:!0,autoHide:!1,noHideOnClick:!1,arrowSize:"normal",customShow:!1,align:l.ALIGN_CENTER,withCloseButton:!1,skipShow:!1,onSetArrowPosition:()=>{}},t),this._opts.customShow&&(this._opts.autoShow=!1),this._opts.defaultSide||(this._opts.defaultSide=this._opts.type===l.TYPE_VERTICAL?"top":"left"),this._opts.cls+=" eltt_arrow_size_"+this._opts.arrowSize,this._opts.cls+=" eltt_align_"+this._opts.align,this._opts.noBorder&&(this._opts.cls+=" eltt_noborder"),this._opts.setPos&&!this._opts.forceSide)throw new Error("forceSide parameter should be set if you use setPos");if(this._appendToEl=this._opts.appendTo?this._opts.appendTo:this._opts.appendToParent?(0,n.domClosestPositioned)(e,{noOverflow:!0}):e,this._arrowSize={mini:l.ARROW_SIZE_MINI,normal:l.ARROW_SIZE_NORMAL,big:l.ARROW_SIZE_BIG}[this._opts.arrowSize],this._opts.forceSide){const e=l.getType(this._opts.forceSide);if(void 0===e)throw new Error("ElementTooltip: invalid 'forceSide' option provided: ",this._opts.forceSide);0,this._opts.type=e}this._opts.type===l.TYPE_HORIZONTAL&&void 0===t?.autoAdjustToViewport&&(this._opts.autoAdjustToViewport=!1),this._el=e,(0,n.data)(this._el,"ett",this),this._initEvents(e),this._clearTimeouts(),this._isShown=!1,this._el.setAttribute("aria-expanded","false")}}l.TYPE_VERTICAL=0,l.TYPE_HORIZONTAL=1,l.FADE_SPEED=100,l.ARROW_SIZE_MINI=9,l.ARROW_SIZE_NORMAL=8,l.ARROW_SIZE_BIG=16,l.ALIGN_LEFT="left",l.ALIGN_CENTER="center",l.ALIGN_RIGHT="right";const u=l},839094:(e,t,o)=>{"use strict";o.d(t,{initFavIcon:()=>r,setFavIcon:()=>i});var n=o(452314);function i(e,t){if(!window.icoNode)return;if(e=e+"?"+((stVersions||{}).favicon||""),icoNode.getAttribute("href")===e&&!t)return;const o=(0,n.ce)("link",{rel:"shortcut icon",type:"image/gif",href:e});headNode.replaceChild(o,icoNode),icoNode=o}function r(){window._iconAdd=window.devicePixelRatio>=2?"_2x":""}},402366:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{giftsBox:()=>giftsBox,imageStatusPopup:()=>imageStatusPopup,mobilePromo:()=>mobilePromo,moneyTransferBox:()=>moneyTransferBox,reportAd:()=>reportAd,showAudioClaimWarning:()=>showAudioClaimWarning,showPollBox:()=>showPollBox,showSettingsAddressBox:()=>showSettingsAddressBox,showWriteMessageBox:()=>showWriteMessageBox,sureDeleteAll:()=>sureDeleteAll});var _message_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20025),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(671300),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(879007),_ui__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(248298),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(452314),_dom_events__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(317412),_lang__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(645024),_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(618913),_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(850101),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(144770),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(359136),_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3677),_icons_desktop__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(221844),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(258643);function showSettingsAddressBox(){(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_settings.php",{act:"address_box"},{stat:[window.jsc("web/settings.js"),"settings.css"],params:{bodyStyle:"padding: 0;",hideButtons:!0},onDone(e,{hash:t}){(0,_web_settings_addressBox__WEBPACK_IMPORTED_MODULE_11__.initSettingsAddressBox)(e,t)}})}function showWriteMessageBox(e,t,o={}){cur.onFriendMessage&&cur.onFriendMessage(),window.stManager.add([window.jsc("web/page.js"),window.jsc("web/wide_dd.js")]);const n=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_im.php",{act:"a_write_box",to:t,...o.params},{stat:[window.jsc("web/writebox.js"),"writebox.css","wide_dd.css","page.css","post.css",window.jsc("web/emoji.js"),"notifier.css"],cache:1},e);return n&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.WriteBox&&WriteBox.extractEmoji(),!n}function giftsBox(e,t,o){return cur.viewAsBox?cur.viewAsBox():!(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_gifts.php",{act:"box",tab:o||"received",mid:e},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)}function moneyTransferBox(e,t,o,n,i,r,s){if(cur.viewAsBox)return cur.viewAsBox();if(i){if(!s){let r,s;return 2===i?(r=_lang__WEBPACK_IMPORTED_MODULE_6__.curLang("mail_money_transfer_cancel_confirm")||_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("mail_money_transfer_cancel_confirm"),s=_lang__WEBPACK_IMPORTED_MODULE_6__.curLang("mail_money_transfer_cancel_btn")||_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("mail_money_transfer_cancel_btn")):(r=_lang__WEBPACK_IMPORTED_MODULE_6__.curLang("mail_money_transfer_decline_confirm")||_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("news_fb_money_transfer_decline_confirm"),s=_lang__WEBPACK_IMPORTED_MODULE_6__.curLang("mail_money_transfer_decline_btn")||_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("news_fb_money_transfer_decline_btn")),void(cur.confirmBox=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_action_confirmation"),r,s,moneyTransferBox.pbind(e,t,o,n,i,!1,1),_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_cancel")))}const r=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)((0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n),"wall_postlink_preview_btn")||(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(n,"money_transfer__decline_button"),a=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass1)("flat_button",(0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n)),_=()=>{r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n.firstChild,"round_spinner"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(n.firstChild,"button")):(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(n)},c=()=>{r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.addClass)(n.firstChild,"button"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.removeClass)(n.firstChild,"round_spinner")):(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(n)};return 2!==s&&((0,_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(a,!0),_(n),cur.confirmBox&&cur.confirmBox.hide()),void ajax.post("al_payments.php?act=a_cancel_money_transfer",{tx_id:e,hash:t,from:r?"snippet":""},{onDone:function(s,_,c){0!==s?(r?((0,_dom__WEBPACK_IMPORTED_MODULE_4__.re)(n),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hasClass)(a,"secondary")||(0,_dom__WEBPACK_IMPORTED_MODULE_4__.domReplaceEl)(a,c)):(0,_dom__WEBPACK_IMPORTED_MODULE_4__.re)((0,_dom__WEBPACK_IMPORTED_MODULE_4__.domPN)(n)),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)(_),window.TopNotifier.invalidate()):setTimeout((()=>moneyTransferBox(e,t,o,n,i,!1,2)),2e3)},onFail:function(e){return(0,_ui__WEBPACK_IMPORTED_MODULE_3__.disableButton)(a,!1),c(n),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_error"),e).hide,2e3),!0}})}return cur.acceptMoneyBtn=n,r?!_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_10__.MoneyTransfer.showMoneyTransferBox({request_id:e,request:r,hash:t},{stat:["payments.css",window.jsc("web/payments_legacy.js")]},(e=>((0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_error"),e).hide,2e3),!0))):!(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_payments.php",{act:"accept_money_transfer_box",tx_id:e,hash:t},{stat:["payments.css",window.jsc("web/payments_legacy.js")],onFail:e=>((0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)()&&(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)().hide(),setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_error"),e).hide,2e3),!0),onDone(e,t){_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_10__.MoneyTransfer.initHandlers(),window.cur=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(window.cur,{paymentsOptions:t,paymentsPopupWrite(e){e.document.innerHTML!=cur._popup_text&&(e.document.write(window.cur._popup_text),e.document.close(),e.blur(),e.focus(),window.cur._popup_callback&&window.cur._popup_callback())}}),e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){window.cur.moneyTranferCheckInt&&clearInterval(window.cur.moneyTranferCheckInt),window.removeEventListener("message",_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_10__.MoneyTransfer.frameMessage,!1)}}),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_10__.MoneyTransfer.initAccept(t.chkData,t.frame)}},o)}function reportAd(e,t){{let o="",n=null;const i=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("/reports.php",{act:"report_ad_box",ad_data:t},{onDone:function(){const e=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.geByClass)("radiobtn","ad_report");window.radioBtns.ad_report={val:0,els:e};const t=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_csrf");o=t?t.value:o,n=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.ge)("ad_comment")},params:{width:370,onClean:()=>{delete window.radioBtns.ad_report}},stat:["reports.css"]});i.removeButtons(),i.addButton(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("box_send"),(r=>{ajax.post("reports.php",{act:"a_report_ad",ad_id:e,reason:window.radioBtns.ad_report.val,comment:n?n.value:"",ad_data:t,hash:o},{onDone:()=>{i.hide(),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.showDoneBox)(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("reports_thanks_for_report"))},showProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(r),hideProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(r)})})),i.addButton(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_cancel"),!1,"no")}}const mobilePromo=()=>(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_login.php",{act:"mobile",box:1});function showAudioClaimWarning(e,t,o){const{id:n,ownerId:i,title:r}=e,s=t.id,{reason:a,original:_}=t,c={width:470};let l,u;if(e.restrictionStatus)return _web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.showAudioRestriction(e);"geo"===a?(l=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claimed_geo"),u=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_warning_title")):"site_rules_violation"===a?(l=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_site_rules_violation_warning"),u=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_site_rules_violation_header")):"replace"===a?(l=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claimed_replacement_available"),u=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_warning_title")):"subscription"===a?(c.hideButtons=!0,c.bodyStyle="padding: 0; border-radius: 4px;",c.width=450,u=!1,l=`\n      <div class="audio_claim_popup">\n        <div class="audio_claim_popup__title">${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_audio_only_with_subscription_title")}</div>\n        <div class="audio_claim_popup__text">${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_audio_only_with_subscription_text")}</div>\n        <div class="audio_claim_popup__close" onclick="curBox().hide()">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_13__.getIcon24Cancel)().icon}</div>\n        ${_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_12__.FlatButton.render({appearance:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_12__.FlatButtonAppearance.PRIMARY,size:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_12__.FlatButtonSize.M,round:!0,restAttrs:{onclick:"AudioPlayer.showSubscriptionPopup()"},children:_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_audio_only_with_subscription_btn")}).outerHTML}\n      </div>`):(l=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_warning"),u=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_warning_title")),c.title=u,l=l.replace(/\{audio\}/g,`<b>${r}</b>`),l=l.replace(/\{objection_link\}/g,`<a href="/help?act=cc_objection&claim=${s}&content=audio${i}_${n}">${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_objection")}</a>`),l=l.replace(/\{delete_link\}/g,`<a onclick="deleteAudioOnClaim(${i}, ${n}); return false;">${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_delete")}</a>`);const d=[c,l];let p=null;if(o&&_){const e=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.drawAudio(_,"no_extra");d[1]=l.replace(/\{original\}/g,_[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_PERFORMER]+" - "+_[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_1__.AudioUtils.AUDIO_ITEM_INDEX_TITLE])+"<br/><br/>"+e,d.push(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_replace_with_original"),(function(){(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(p.btns.ok[0]),o((()=>p.hide()))})),c.textControls=`<a onclick="deleteAudioOnClaim(${i}, ${n}); return false;">${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("audio_claim_delete_capital")}</a>`}cur.claimWarning=p=_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox.apply(null,d)}function sureDeleteAll(title,text,where,objectId,toId,fromId,hash,event){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.checkEvent)(event))return;const box=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showFastBox)({title},text,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_delete"),(function(btn){ajax.post("/delete_all.php",{act:where,object_id:objectId,to_id:toId,from_id:fromId,hash,loc:nav.objLoc[0]},{onDone:function(res){if(__debugMode)eval(res);else try{eval(res)}catch(e){(0,_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(e,res)}box.hide()},showProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.lockButton)(btn),hideProgress:()=>(0,_ui__WEBPACK_IMPORTED_MODULE_3__.unlockButton)(btn)})}),_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_cancel"));return!1}function imageStatusPopup(e,t){Object.assign(t,{act:"image_status"});const o=(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("special_event.php",t,{containerClass:"ImageStatusPopup__container",params:{hideButtons:!0,needShadow:!1},onFail:function(){return window.cur.imageStatusBox&&window.cur.imageStatusBox.hide(),!0},onDone:function(e,t){const{status_id:o}=t;o&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_9__.saveStatlogEvents)({name:"image_status",value:o,keys:["show_popup"]})}},e);o&&((0,_dom_events__WEBPACK_IMPORTED_MODULE_5__.cancelEvent)(e),window.cur.imageStatusBox=o)}function showPollBox(e,{ref:t,className:o}={}){(0,_message_box__WEBPACK_IMPORTED_MODULE_0__.showBox)("al_voting.php",{act:"get_layout",voting_id:e,for_box:!0,ref:t},{containerClass:o,params:{hideButtons:!0,width:510}})}},788407:(e,t,o)=>{"use strict";o.d(t,{AudioMessagePlayer:()=>de,articlePrepare:()=>L.articlePrepare,bookmark:()=>z,bookmarkArticle:()=>Q,bookmarkEvent:()=>re,bookmarkLink:()=>Z,bookmarkNarrative:()=>ie,bookmarkPodcast:()=>ee,bookmarkPost:()=>X,bookmarkYoulaProduct:()=>se,deleteAudioOnClaim:()=>le,getAudioPlayer:()=>_e,getAudioPlayerUI:()=>ce,getIconBookmarked:()=>te,initTopAudioPlayer:()=>ue,initTopNotifier:()=>k,isArticleLayerOpen:()=>he,isPhotoeditor3Available:()=>R,mentionClick:()=>pe,openArticleEditor:()=>Y,podcastStartFrom:()=>$,sendBookmarkLink:()=>J,sendImageStatusStat:()=>Ee,setIconBookmarked:()=>oe,setNewIconBookmarked:()=>ne,shareAudioPlaylist:()=>ae,showAlbum:()=>U,showAlbums:()=>x,showApp:()=>G,showAttachProductBox:()=>V,showDonutSubscribePopup:()=>me,showManyPhoto:()=>B,showNftInfo:()=>H,showPhoto:()=>N,showPhotoTags:()=>F,showPodcast:()=>q,showVideoTags:()=>W,showWiki:()=>j,videoCallback:()=>K});var n=o(736852),i=o(671300),r=o(7144),s=o(452314),a=o(879007),_=o(850101),c=o(317412),l=o(20025),u=o(714209),d=o(248298),p=o(645024),h=o(387674),m=o(257375),E=o(144770),f=o(507035),g=o(253693),y=o(714707),v=o(203882),w=o(563442),A=o(864883),b=o(28998),T=o(253589),I=o(710870),P=o(727412),C=o(13709),S=o(681589),O=o(476726),M=o(181347),D=o(804794),L=o(768772);function k(){const e=[window.jsc("web/notifier.js"),"notifier.css"];return{preload:function(){window.stManager.add(e,(()=>window.TopNotifier.preload()))},show:function(t){if(!0!==(0,c.checkEvent)(t))return window.stManager.add(e,(()=>window.TopNotifier.show(t))),(0,c.cancelEvent)(t)},showTooltip:function(t){window.stManager.add(e,(()=>window.TopNotifier.showTooltip(t)))},invalidate:()=>{},setCount:()=>{},createNewEventsBox:()=>{}}}function R(){return!u.browser.msie||parseInt(u.browser.version)>10}function N(e,t,o={},n){if(o&&o.additional&&o.additional.open_pe&&o.temp&&(0,m.isImgBlurred)(o.temp)){const i=function(){N(e,t,o,n)};return void Page.showUnblurBox(o.temp.restrictionTitle,o.temp.restrictionText,o.temp.photoRaw,o.temp.unblurHash,i)}if(o&&o.additional&&o.additional.open_pe&&o.temp&&o.temp.restrictionGeo&&delete o.additional.open_pe,cur.viewAsBox)return cur.viewAsBox();if((0,c.checkEvent)(n)||cur._editMode&&cur._editMode(n))return;if((0,g.isUnauthorizedMediaLayerBoxAvailable)()&&!o.forceUnauth)return g.Unauthorized.showMoreBox(null,0,g.UnauthorizedSourceType.PHOTO,(()=>{o.preventPhotoShowingInLayer||N(e,t,{...o,forceUnauth:!0},n)})),!1;const i=[window.jsc("web/photoview.js"),"photoview.css",window.jsc("web/page.js"),"page.css"];if(o.img&&(o.showProgress=function(){(0,d.showProgress)(o.img)},o.hideProgress=function(){(0,d.hideProgress)(o.img)}),!e)return!1;let r=1;if((o?.additional?.open_pe||o?.noCache)&&(r=0),window.Photoview&&!1===Photoview.showPhoto(e,t,o)&&r)return!1;let s=!0;if(cur.pvOptions||(cur.pvOptions={}),cur.pvOptions.isLightMode=o.isLightMode,o.temp&&!(cur.pvNoTemp||{})[e]&&window.stManager.add(i,(function(){(0,a.extend)(cur,{pvCancelLoad:function(){s=!1},pvData:cur.pvData||{},pvOptions:cur.pvOptions||{}}),cur.pvData.temp=[o.temp],cur.pvOptions.temp_final=o.temp_final,cur.pvOptions.temp_summary=o.temp_summary,cur.pvOptions.queue=o.queue,o.onBeforeLayersPreparing&&(cur.pvOptions.onBeforeLayersPreparing=o.onBeforeLayersPreparing),Photoview.show("temp",0)})),(0,a.extend)(o,{onDone:function(n){Photoview.list(e,t,n),o.blog_text&&arguments[3]&&arguments[3][0]&&(arguments[3][0].album=o.blog_text),Photoview.loaded.apply(window,arguments),s&&("deleted"===n?Photoview.showDeleted.apply(window,arguments):Photoview.showPhoto(e,t,o,!0))},onHide:o.onHide,onChange:o.onChange,onFail:e=>((0,_.showDoneBox)(e),!0),stat:i,cache:r}),o.temp_final)return!1;let l="";nav.objLoc.dmcah&&(l=nav.objLoc.dmcah);const u=(0,S.getTrackCodeFromPost)(n?.target);return ajax.post("al_photos.php",(0,a.extend)({act:"show",gid:cur.gid,photo:e,list:t,dmcah:l,module:cur.module||"",list_info:o.list_info||null,track_code:u},o.additional),o),!1}function B(e,t,o,n){Page.showManyPhoto(e,t,o,n)}function x(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,c.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbums(e,t)})),!1)}function U(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,c.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showAlbum(e,t)})),!1)}function F(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,c.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showTagged(e,t)})),!1)}function W(e,t,o){return cur.viewAsBox?cur.viewAsBox():(0,c.checkEvent)(o)?void 0:(window.stManager.add([window.jsc("web/video.js"),"video.css",window.jsc("web/photoview.js"),"photoview.css"],(function(){Photoview.showVideoTags(e,t)})),!1)}function K(e){const t=e.shift();if(window.Videoview&&Videoview.playerCallback[t])return Videoview.playerCallback[t].apply(Videoview,e);throw Error("Unregistered player callback: "+t)}function V(e,t){return(0,_.curBox)()||(0,l.showBox)("al_market.php",{act:"show_attach_product_box"},{onDone:function(e,o){window.MarketProductBox.init(e,o,t??null)}}),(0,c.cancelEvent)(e)}function H(e,t){return(0,_.curBox)()||(0,l.showBox)("al_nft.php",{act:"token_details_modal",tokenId:t},{params:{hideButtons:!0,noCloseButton:!0,titleTransparent:!0,bodyStyle:"padding: 16px 24px"}}),(0,c.cancelEvent)(e)}function j(e,t,o,n={}){if((0,c.checkEvent)(o))return!0;if(0!==cur.gid&&(e.gid=cur.gid),e.location_owner_id=cur.oid,window.wkcur&&wkcur.shown&&wkcur.wkRaw===e.w&&e.w&&!e.reply)return WkView.restoreLayer(n),(0,c.cancelEvent)(o);(window.wkcur&&wkcur.hideTitle||e.hide_title)&&(n.hide_title=e.hide_title=1);const i=n.stat||[window.jsc("web/wkview.js"),"wkview.css","wk.css",window.jsc("web/wk.js")];t&&i.push(window.jsc("web/wk_editor.js"),"wk_editor.css");const r={stat:i,loader:!n.noloader,onDone:function(t,i,r,s){window.Feed?.viewStats?.onWkLayer(e.postId),e.w&&"string"==typeof e.w&&e.w.startsWith("wall")&&(0,O.partConfigEnabled)("feed_content_events_open_post_event_web")&&M.feedOpenItemCollector.logEvent({source:n.clickSource??"news_item_click"},{track_code:n.trackCode},(0,S.resolveRefFromCur)()),WkView.show(t,i,(0,a.extend)(r,n),s,o)},onFail:function(e){return(0,a.isFunction)(n.onFail)?n.onFail(e):e?WkView.showError(e):void 0}};if(nav.objLoc.claim&&(e.claim=nav.objLoc.claim),nav.objLoc.tariff_act&&(e.tariff_act=nav.objLoc.tariff_act),nav.objLoc._post&&(e._post=nav.objLoc._post),nav.objLoc._post&&(e._post=nav.objLoc._post),e.w&&"/query"===e.w.substr(-6)){const t=(0,a.clone)(nav.objLoc);delete t[0],delete t.w,e.query=JSON.stringify(t)}let s,_;n.preload&&(0,a.extend)(r,n.preload),n.ads_params&&(s=n.ads_params,_=nav.getPostParams(o&&o.target),_.post_click_url&&(s._post_click_url=_.post_click_url));let l="";"feed"===cur.module&&window.feed?l=window.feed.getModuleRef():"public"===cur.module?l="club":"profile"===cur.module&&(l="profile"),n.customRef&&(l=n.customRef);let u="";const d=(0,a.clone)(nav.objLoc);return d.dmcah&&(u=d.dmcah),(0,O.partConfigEnabled)("feed_post_menu_stats")&&"post_menu"===n?.clickSection&&n?.trackCode&&D.FeedPostMenuStats.postStat(n.trackCode,(0,S.resolveRefFromCur)()),ajax.post("wkview.php",(0,a.extend)({act:"show",loc:nav.objLoc[0].includes("market/category")||nav.objLoc[0].includes("market/section")||nav.objLoc[0].includes("market/compilation")?"market":nav.objLoc[0],is_znav:n.isZnav,dmcah:u,ref:l,track_code:n.trackCode},e,s,cur.getWkviewOpts&&cur.getWkviewOpts()),r),(0,c.cancelEvent)(o)}function G(e,t,o,n,i,r){r||(r={});let s=!1,_=(0,a.extend)({w:"app"+t},r);if(o=(0,a.intval)(o),n&&((0,a.isObject)(n)?_=(0,a.extend)(_,n):_.ref=n),r.layer&&(s=!0),(cur.apps&&cur.apps[t]||!o)&&!s){delete _.w;const o="app"+t+(i?"_"+i:""),n=nav.objLoc&&!nav.objLoc[1]&&nav.objLoc[0]===o;return nav.go("/"+o+nav.toStr(_),e,{nocur:n})}i&&(_.mid=i);const c={stat:[window.jsc("web/wkview.js"),"wkview.css",window.jsc("web/apps.js"),"apps.css"]};r.queue&&(c.queue=1);const l=cur.module;if(c.onHide=()=>{cur.module=l,r.onHide&&r.onHide()},r.urlHash&&(_.url_hash=r.urlHash),_["#"]){const e=_["#"];delete _["#"],c.onLoaded=()=>{nav.setLoc((0,a.extend)(nav.objLoc,{"#":e}))}}return j(_,!1,e,c)}function q(e,t,o,n,i){if(!vk.widget)return(0,s.show)(boxLoader),(0,s.show)(boxLayerWrap),(0,_.boxRefreshCoords)(boxLoader),window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.show(e,t,null,n,i)})),o&&(0,c.cancelEvent)(o)}function $(e,t,o,n){return window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.goToTime(e,t,o,n)})),o&&(0,c.cancelEvent)(o)}function Y(e,t,o,n={},i={}){if(cur.articleEditorLayer)return void cur.articleEditorLayer.openById(e,t);window.initialFCCollapse="article";const r=[window.jsc("web/article_editor_layer.js"),"article.css","article_editor.css"];window.stManager.add(r,(()=>{}));const s=Object.assign({act:"open_editor",article_owner_id:e,article_id:t,from_post_convert:o?1:0,post_data_medias:o?o.medias.join(","):""},n);ajax.post("al_articles.php",s,{loader:!0,onFail:function(e){return"app"===i.from?i.errorHandler&&i.errorHandler("ServerError: Can't open article editor."):(0,l.showFastBox)(p.getLang("global_error"),e),window.SAKIntegration&&window.SAKIntegration.isIntegrated&&window.SAKIntegration.sendMessage("error",{error:e}),!0},onDone:function(e,t,n,s,_){window.WkView&&WkView.hide(),window.boxQueue&&boxQueue.hideAll(),o&&(_.postData=o),(0,a.extend)(window.cur.lang,_.lang),_.articleOwnerId?window.stManager.add(r,(function(){if(layers.fullhide=function(){cur.articleEditorLayer&&cur.articleEditorLayer.hide()},window.AuthorPage&&window.AuthorPage.isOpen()&&(cur.needAuthorPageHardBack=!0),cur.articleEditorLayer=new window.ArticleEditorLayer(e,t,n,_,s,(()=>delete cur.articleEditorLayer)),"app"===i.from){const e=e=>t=>{t.type=e,"publish"!==e&&"close"!==e||cur.articleEditorLayer&&cur.articleEditorLayer.hide(),i.eventHandler&&i.eventHandler(t)};cur.articleVkAppEditor={onSaveDraft:e("draft"),onPublish:e("publish"),onClose:e("close")}}})):nav.change({z:!1})}})}function z(e,t,o,n,i=!1,c="",u="",d="",h=1,m){ajax.post("al_bookmarks.php",{act:"bookmark",owner_id:e,object_id:t,type:o,state:i?1:0,hash:n,item_access_hash:c,ref:u||cur.module,track_code:d,show_snack:h,source:m},{onDone:(n,i,c,u)=>{if(n&&!vk.widget){const d=function(n){const _=(0,s.geByClass1)("bookmarks_tag_set",n);if(_&&!(0,r.isEmpty)(i)){const n=[];(0,a.each)(i,((e,t)=>{n.push(t)})),n.sort(((e,t)=>e.order-t.order));let r='<div class="bookmarks_tags_list">';for(let e=0;e<n.length;e++){const t=n[e];r+=`<div class="bookmarks_tags_list_item" data-id="${t.id}">${t.name}</div>`}r+="</div>",r=(0,s.se)(r),r.addEventListener("click",(o=>{const n=(0,s.domClosest)("bookmarks_tags_list_item",o.target);if(n){const o=(0,s.domData)(n,"id"),i=(0,s.toggleClass)(n,"bookmarks_tags_list_item--selected");ajax.post("al_bookmarks.php",{act:"set_tag",item_type:c,item_oid:e,item_id:t,hash:u,tag_id:o,is_tagged:(0,a.intval)(!i),is_from_snackbar:!0},{onFail:e=>((0,l.showFastBox)(p.getLang("global_error"),e),!0)})}})),cur.setBookmarksTagTooltip&&cur.setBookmarksTagTooltip.destroy(),window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{}));let d=new ElementTooltip(_,{content:r,appendToParent:!0,cls:"bookmarks_tag_set_tt",autoShow:!0,offset:"video"===o?[-95,-10]:[0,-36],onFirstTimeShow:e=>{window.stManager.add(["ui_common.css",window.jsc("web/ui_common.js")],(()=>{cur.setBookmarksTagTooltipScrolls||(cur.setBookmarksTagTooltipScrolls=[]),cur.setBookmarksTagTooltipScrolls.push(new uiScroll((0,s.domFC)(e),{theme:"dark"}))}))},onShow:function(){Notifier.freezeEvents(),curNotifier.tooltipShown=!0},onHide:function(){curNotifier.tooltipShown=!1,curNotifier.unfreezeAfterTooltipHide&&Notifier.unfreezeEvents()}});cur.destroy.push((()=>{cur.setBookmarksTagTooltipScrolls&&(cur.setBookmarksTagTooltipScrolls.forEach((function(e){e.destroy()})),delete cur.setBookmarksTagTooltipScrolls),d.destroy()}))}};(0,_.showDoneBox)(n,{tooltipHandler:d,link:"/bookmarks"})}}})}function X(e,t,o,n,i,r,_="",c=""){if((0,a.isObject)(window.cur)&&(0,a.isFunction)(window.cur.viewAsBox))return window.cur.viewAsBox();const l=te(e);e.innerHTML=l?(0,s.domData)(e,"add"):(0,s.domData)(e,"remove"),(0,s.domData)(e,"state",l?0:1),z(t,o,n,i,l,r,_,c)}function Q(e,t,o,n,i,r,s,a=!1){return t&&(s=te(t),a?ne(t,s,24):oe(t,s)),z(o,n,i,r,s),document.querySelectorAll(`._article_${o}_${n}`).forEach((e=>{const t=e.querySelector("._bookmark_btn");a?ne(t,s,24):oe(t,s)})),(0,c.cancelEvent)(e)}function J(e,t,o,n,i,r){ajax.post("al_bookmarks.php",{act:"bookmark_link",state:e?1:0,hash:t,url:o,img:n,title:i,ref:cur.module,track_code:r},{onDone:e=>{e&&!vk.widget&&(0,_.showDoneBox)(e)}})}function Z(e,t,o){const n=te(t);return oe(t,n),J(n,o,(0,s.domData)(t,"link-url"),(0,s.domData)(t,"link-img"),(0,s.domData)(t,"link-title"),(0,s.domData)(t,"track-code")),(0,c.cancelEvent)(e)}function ee(e,t,o,n,i){return window.stManager.add([window.jsc("web/podcast.js")],(function(){Podcast.toggleFave(e,t,o,i)})),n&&(0,c.cancelEvent)(n)}function te(e){return parseInt(e.dataset.state)}function oe(e,t){e.dataset.state=String(t?0:1),e.innerHTML=t?(0,v.getIcon24FavoriteOutline)().icon:(0,w.getIcon24Favorite)().icon}function ne(e,t,o=16){e.dataset.state=String(t?0:1);const n={16:(0,A.getIcon16Bookmark)().icon,24:(0,b.getIcon24Bookmark)().icon}[o],i={16:(0,T.getIcon16BookmarkOutline)().icon,24:(0,I.getIcon24BookmarkOutline)().icon}[o];e.innerHTML=t?i:n}function ie(e,t,o,n,i,r){const s=te(t);return oe(t,s),z(o,n,i,r,s),s||(0,y.sendNarrativeAnalytic)(y.NarrativeAnalyticEventType.addToBookmarks,{ownerId:o,id:n},window.cur.module),(0,c.cancelEvent)(e)}function re(e,t,o,n){const i=te(t);return oe(t,i),ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:o,hash:n},{onDone:(e,t)=>{i||vk.widget||(0,_.showDoneBox)(t)}}),(0,c.cancelEvent)(e)}function se(e,t,o,n,i,r,s="",a=""){const _=te(t);return ne(t,_),z(o,n,i,r,_,s,"",a),(0,c.cancelEvent)(e)}function ae(e,t,o,n){return(0,l.showBox)("like.php",{act:"publish_box",object:"audio_playlist"+t+"_"+o,list:n},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")],params:{shareButtonElement:e.target}}),(0,c.cancelEvent)(e)}function _e(){return!window.ap&&window.AudioPlayer&&(window.ap=new window.AudioPlayer,window.dispatchEvent(new CustomEvent(C.AUDIO_PLAYER_INITED_EVENT))),window.ap||null}function ce(){return window.audioPlayerUI=window.audioPlayerUI||new window.AudioPlayerUI({audioPlayer:_e()}),window.audioPlayerUI}function le(e,t){const o=e+"_"+t,n=(0,s.geByClass1)("_audio_row_"+o);i.AudioUtils.deleteAudio(n,i.AudioUtils.getAudioFromEl(n,!0)),cur.claimWarning&&cur.claimWarning.hide()}function ue(){window.TopAudioPlayer.init()}const de={loaded:!1,events:{on(e,t){(0,P.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.events.on(e,t)}))}},togglePlay:function(e){(0,P.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.togglePlay(e)}))},toggleTranscript:function(e){(0,P.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.toggleTranscript(e)}))},detachPlayer:function(e){(0,P.voiceMessagePlayerLoader)().then((()=>{window.AudioMessagePlayer.detachPlayer(e)}))}};function pe(e,t,o={}){e&&e.tt&&e.tt.hide&&e.tt.hide({fasthide:1});let i=e,r=!1;if(he()&&ArticleLayer.isStandalone()&&(r=!0),i.tagName&&"a"===i.tagName.toLowerCase()&&!i.getAttribute("target")&&!nav.baseBlank){const e=i.getAttribute("hrefparams");let t;e&&(o.params=(0,a.extend)(o.params||{},(0,h.fromQueryString)(e))),i=i.href||"",i=(0,n.stripVKSiteURLOrigin)(i),i.match(/#$/)||!(t=i.match(/^\/(.*?)(\?|#|$)/))?r=!0:(t=t[1],(t.indexOf(".php")>0||t.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images|utils|\.js|js\/|\.css|css\/)/))&&(r=!0))}if(r){if(!!!(o&&o.params&&o.params._post&&o.params._post_click_type))return!0;e.setAttribute("data-change-location-with-post-away",1),i=e}return nav.go(i,t,o)}function he(){return window.ArticleLayer&&window.ArticleLayer.isShown()}function me(e,t,o,n,i,r={},s=""){if(!o&&!s)return;const _=`donut_payment${o}`,u=n,d=(0,l.showBox)("al_donut.php",{act:"subscribe_popup",ownerId:o,ownerDomain:s,source:n,hash:i,type:r.type,...r.params},{stat:["donut_subscribe_popup.css",window.jsc("web/donut_subscribe_popup.js")],params:{width:450,hideButtons:!0,containerClass:"DonutSubscribePopup",onDestroy:()=>{if(window.DonutSubscribePopup&&window.DonutSubscribePopup.onDestroy(),!r.fromSnippet){(0,c.removeEvent)(window,"popstate",p);const{w:e,source:t}=nav.objLoc;e===_&&u===t&&(delete nav.objLoc.w,delete nav.objLoc.source,nav.setLoc(nav.objLoc))}}},onDone:(e,t)=>{if(window.DonutSubscribePopup.init({ownerId:o||t.owner_id,source:n,type:r.type,onSuccessPayment:r.onSuccessPayment},e,t),!r.fromSnippet&&"subscribe"===r.type){(0,c.addEvent)(window,"popstate",p);const e=(0,a.extend)(nav.objLoc,{w:_,source:n});nav.setLoc(e)}},onFail:e=>{if(e&&"string"==typeof e)return"group_doesnt_exists"===e&&r.onFailCallback&&"function"==typeof r.onFailCallback?(r.onFailCallback(),d.hide(),!0):(d.hide(),(0,f.showErrorBox)(e),!0)}},t);function p(){d.hide()}(0,c.cancelEvent)(t)}function Ee(e){e&&(0,E.saveStatlogEvents)({name:"image_status",value:e,keys:["popup_action"]})}},847759:(e,t,o)=>{"use strict";o.d(t,{audioShowActionTooltip:()=>d,bookmarkTooltip:()=>h,mentionOver:()=>p,mobileOnlineTip:()=>l,pageVerifiedTip:()=>u});var n=o(810903),i=o(671300),r=o(879007),s=o(452314),a=o(476726),_=o(857031),c=o(132873);function l(e,t){const o=t.asrtl?0:t.right?289:35,i=t.asrtl?" mobile_tt_asrtl":t.right?" mobile_tt_right":"";return(0,n.showTooltip)(e,{url:"al_login.php",params:{act:"mobile_tt",mid:t.mid,was:t.was},slide:15,ajxdt:200,showdt:200,hidedt:200,forcetoup:t.forcetoup,toup:!1,dir:"auto",asrtl:t.asrtl,appendParentCls:t.appendParentCls,shift:[o,8,7],className:"mobile_tt"+i})}function u(e,t){return(0,n.showTooltip)(e,{url:"/al_page.php",params:{act:"verified_tt",type:t.type,oid:t.oid,force_new_tab:t.forceNewTab?1:0,with_action:t.withAction},slide:15,ajxdt:200,showdt:200,hidedt:200,dir:"auto",shift:t.shift&&t.shift.length?t.shift:[95,5,7],className:"verified_tt",forcetodown:t.forceToDown,appendEl:t.appendEl})}function d(e,t,o){if(cur._addRestoreInProgress)return;const a=(0,s.gpeByClass)("_audio_row",e),_=i.AudioUtils.getAudioFromEl(a,!0);if(!_)return;const l=(0,s.domData)(e,"action"),u=i.AudioUtils.getRowActionName(l,_,a);if("snippet"===l){const t=c.AudioLongtapTooltip.ensure();if(t.isOpen)return;if(t.canShow())return void t.show(e)}const d={text:()=>u,black:1,shift:t||[7,4,0],needLeft:!0,forcetodown:o,noZIndex:!0};(0,r.each)(["_im_mess_stack","top_notify_wrap","_ape_audio_item","wk_history_audio_content"],(function(t,o){if((0,s.gpeByClass)(o,e))return d.appendParentCls=o,!1})),(0,s.gpeByClass)("_im_mess_stack",e)&&(d.shift=[7,10,0],d.noZIndex=!0);const p=e.closest(".CatalogBlock");p&&(d.appendEl=p),(0,n.showTooltip)(e,d)}function p(e,t={}){if(!(0,a.partConfigEnabled)("mail_history_mention_popover")||"im"!==window.cur.module||window.TopNotifier.shown()||window.layers.visible)(0,n.showTooltip)(e,{url:"al_wall.php",params:{act:"mention_tt",mention:e.getAttribute("mention_id"),from:"wall"},shift:t.shift||[52,7,7],hidedt:t.hidedt||500,showdt:500,needLeft:t.needLeft,slide:15,checkLeft:!0,reverseOffset:t.reverseOffset||112,dir:"auto",appendEl:t.appendEl||(0,s.domClosest)("im-page-history-w",e)||(0,s.domClosest)("rb_box_wrap",e)||(0,s.domClosest)("wk_cont",e)||(0,_.isVKCOMProfileRedesignedEnabled)()&&(0,s.domClosest)("box_layout",e)||(0,s.domClosest)("scroll_fix_wrap",e)});else{const t=e.getAttribute("mention_id").match(/^(id|club)(\d+)$/);if(!t)return;let o;switch(t[1]){case"id":o=parseInt(t[2],10);break;case"club":o=-parseInt(t[2],10)}if(!o)return;window.reforgedME&&window.reforgedME.profileInfo&&window.reforgedME.profileInfo.mountProfileInfo({peerId:o,targetElement:e})}}function h(e){let t="";(0,s.gpeByClass)("_im_mess_stack",e)?t="_im_mess_stack":(0,s.gpeByClass)("wall_text",e)&&(t="scroll_fix_wrap"),(0,n.showTooltip)(e,{className:"bookmarks_tt ",shift:[32,8],text:()=>"1"===(0,s.domData)(e,"state")?(0,s.domData)(e,"remove"):(0,s.domData)(e,"add"),black:1,appendParentCls:t})}},663878:(e,t,o)=>{"use strict";o.d(t,{Fx:()=>s,animate:()=>a,animateCount:()=>v,cubicBezier:()=>_,fadeIn:()=>m,fadeOut:()=>E,fadeTo:()=>c,fadeToggle:()=>f,genFx:()=>u,getColor:()=>y,getRGB:()=>g,slideDown:()=>d,slideToggle:()=>h,slideUp:()=>p});var n=o(879007),i=o(452314),r=o(714209);const s={Transitions:{linear:(e,t,o,n)=>o*e/n+t,sineInOut:(e,t,o,n)=>-o/2*(Math.cos(Math.PI*e/n)-1)+t,halfSine:(e,t,o,n)=>o*Math.sin(Math.PI*(e/n)/2)+t,easeOutBack:function(e,t,o,n){const i=1.70158;return o*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInCirc:(e,t,o,n)=>-o*(Math.sqrt(1-(e/=n)*e)-1)+t,easeOutCirc:(e,t,o,n)=>o*Math.sqrt(1-(e=e/n-1)*e)+t,easeInQuint:(e,t,o,n)=>o*(e/=n)*e*e*e*e+t,easeOutQuint:(e,t,o,n)=>o*((e=e/n-1)*e*e*e*e+1)+t,easeOutCubic:(e,t,o,n)=>o*((e=e/n-1)*e*e+1)+t,swiftOut:(e,t,o,n)=>o*_(.4,0,.22,1,e/n,4/n)+t},Attrs:[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity","left","top"]],Timers:[],TimerId:null};function a(e,t,o,s){if(!(e=(0,i.ge)(e)))return;const a=(0,n.isFunction)(s)?s:()=>{},_=(0,n.extend)({},"object"==typeof o?o:{duration:o,onComplete:a}),c={},u={},d=(0,i.isVisible)(e);let p;_.orig={},(t=(0,n.clone)(t)).discrete&&(_.discrete=1,delete t.discrete),r.browser.iphone&&(_.duration=0);let h=(0,i.data)(e,"tween"),m=d?"hide":"show";h&&h.isTweening&&(_.orig=(0,n.extend)(_.orig,h.options.orig),h.stop(!1),h.options.show?m="hide":h.options.hide&&(m="show"));for(const o in t)if(t.hasOwnProperty(o)){if(!h&&("show"===t[o]&&d||"hide"===t[o]&&!d))return _.onComplete.call(this,e);if("height"!==o&&"width"!==o||!e.style||(t.overflow||(void 0===_.orig.overflow&&(_.orig.overflow=(0,i.getStyle)(e,"overflow")),e.style.overflow="hidden"),(0,i.hasClass)(e,"inl_bl")||"TD"===e.tagName||(e.style.display="block")),/show|hide|toggle/.test(t[o]))if("toggle"===t[o]&&(t[o]=m),"show"===t[o]){p=0,_.show=!0,void 0===_.orig[o]&&(_.orig[o]=(0,i.getStyle)(e,o,!1)||"",(0,i.setStyle)(e,o,0));const n=e.style[o];e.style[o]=_.orig[o],t[o]=parseFloat((0,i.getStyle)(e,o,!0)),e.style[o]=n,"height"===o&&r.browser.msie&&!t.overflow&&(e.style.overflow="hidden")}else void 0===_.orig[o]&&(_.orig[o]=(0,i.getStyle)(e,o,!1)||""),_.hide=!0,t[o]=0}return _.show&&!d&&(0,i.show)(e),h=new l(e,_),(0,n.each)(t,(function(t,o){if(/backgroundColor|borderBottomColor|borderLeftColor|borderRightColor|borderTopColor|color|borderColor|outlineColor/.test(t)){if(p=y(e,"borderColor"===t?"borderTopColor":t),o=g(o),void 0===p)return}else{const n=o.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/);n&&(o=parseFloat(n[2]),n[1]&&(o=("-="==n[1]?-1:1)*o+o)),p=h.cur(t,!0),0!=p||"width"!==t&&"height"!==t||(p=1),"opacity"===t&&o>0&&!d&&((0,i.setStyle)(e,"opacity",0),p=0,(0,i.show)(e))}(p!=o||(0,n.isArray)(p)&&p.join(",")===o.join(","))&&(c[t]=p,u[t]=o)})),h.start(c,u),(0,i.data)(e,"tween",h),h}function _(e,t,o,n,i,r){const s=function(t){const n=1-t;return 3*n*n*t*e+3*n*t*t*o+t*t*t},a=function(e){const o=1-e;return 3*o*o*e*t+3*o*e*e*n+e*e*e},_=function(t){const n=1-t;return 3*(2*(t-1)*t+n*n)*e+3*(-t*t*t+2*n*t)*o},c=i;let l;{let e;for(l=c,e=0;e<8;e++){const e=s(l)-c;if(Math.abs(e)<r)return a(l);const t=_(l);if(Math.abs(t)<1e-6)break;l-=e/t}}let u=0,d=1;if(l=c,l<u)return a(u);if(l>d)return a(d);for(;u<d;){const e=s(l);if(Math.abs(e-c)<r)return a(l);c>e?u=l:d=l,l=.5*(d-u)+u}return a(l)}function c(e,t,o,n){return a(e,{opacity:o},t,n)}class l{start(e,t){this.from=e,this.to=t,this.time=(0,n.vkNow)(),this.isTweening=!0;const o=e=>this.step(e);return o.el=this.el,o()&&s.Timers.push(o)&&!s.TimerId&&(s.TimerId=setInterval((function(){const e=s.Timers;let t=e.length;for(let o=0;o<t;o++)e[o]()||(e.splice(o--,1),t--);t||(clearInterval(s.TimerId),s.TimerId=null)}),13)),this}stop(e){const t=s.Timers;for(let o=t.length-1;o>=0;o--)t[o].el===this.el&&(e&&t[o](!0),t.splice(o,1));this.isTweening=!1}step(e){const t=(0,n.vkNow)();if(!e&&t<this.time+this.options.duration){this.cTime=t-this.time,this.now={};for(const e in this.to)if((0,n.isArray)(this.to[e])){const t=[];for(let o=0;o<3;o++){if(void 0===this.from[e]||void 0===this.to[e])return!1;t.push(Math.min(parseInt(this.compute(this.from[e][o],this.to[e][o])),255))}this.now[e]=t}else this.now[e]=this.compute(this.from[e],this.to[e]),this.options.discrete&&(this.now[e]=(0,n.intval)(this.now[e]));return this.update(),!0}return setTimeout(this.options.onComplete.bind(this,this.el),10),this.now=(0,n.extend)(this.to,this.options.orig),this.update(),this.options.hide&&(0,i.hide)(this.el),this.isTweening=!1,!1}compute(e,t){const o=t-e;return this.options.transition(this.cTime,e,o,this.options.duration)}update(){this.options.onStep(this.now);for(const e in this.now)(0,n.isArray)(this.now[e])?(0,i.setStyle)(this.el,e,"rgb("+this.now[e].join(",")+")"):void 0!==this.el[e]?this.el[e]=this.now[e]:(0,i.setStyle)(this.el,e,this.now[e])}cur(e,t){return null==this.el[e]||this.el.style&&null!=this.el.style[e]?parseFloat((0,i.getStyle)(this.el,e,t))||0:this.el[e]}constructor(e,t,o){this.el=(0,i.ge)(e),this.name=o,this.options=(0,n.extend)({onStep:()=>{},onComplete:()=>{},transition:t.transition||s.Transitions.sineInOut,duration:500},t||{})}}function u(e,t){const o={};return(0,n.each)(s.Attrs.concat.apply([],s.Attrs.slice(0,t)),(function(){o[this]=e})),o}s.Base=l;const d=(e,t,o)=>a(e,u("show",1),t,o),p=(e,t,o)=>a(e,u("hide",1),t,o),h=(e,t,o)=>a(e,u("toggle",1),t,o),m=(e,t,o)=>a(e,{opacity:"show"},t,o),E=(e,t,o)=>a(e,{opacity:"hide"},t,o),f=(e,t,o)=>a(e,{opacity:"toggle"},t,o);function g(e){let t;return e&&(0,n.isArray)(e)&&3==e.length?e:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:void 0}function y(e,t){let o;do{if(o=(0,i.getStyle)(e,t),0===o.indexOf("rgba")&&(o=""),""!=o&&"transparent"!==o||"body"===e.nodeName.toLowerCase())break;t="backgroundColor",e=e.parentNode}while(e);return g(o)}function v(e,t,o={}){if(e=(0,i.ge)(e),t=o.str?(0,n.trim)(t.toString())||"":(0,n.positive)(t),!e)return;if(r.browser.mobile&&!r.browser.safari_mobile&&!r.browser.android)return void(0,i.val)(e,t||"");let _=(0,i.data)(e,"curCount");const c=(0,i.data)(e,"nextCount");if("number"==typeof c||o.str&&"string"==typeof c)return void(t!=c&&(0,i.data)(e,"nextCount",t));if("number"==typeof _||o.str&&"string"==typeof _)return void(t!==_&&(0,i.data)(e,"nextCount",t));if(_=o.str?(0,n.trim)((0,i.val)(e).toString())||"":(0,n.positive)((0,i.val)(e)),"auto"===o.str&&(o.str=!_.match(/^\d+$/)||!t.match(/^\d+$/),o.str||(_=(0,n.positive)(_),t=(0,n.positive)(t))),_===t)return;(0,i.data)(e,"curCount",t);const l=o.str?_.length===t.length?_<t:_.length<t.length:_<t,u=(l?t:_).toString();let d,p,h=(l?_:t).toString(),m=[],E=[];for(o.str||(h=new Array(u.length-h.length+1).join("0")+h),d=0,p=u.length;d<p;d++){const e=u.charAt(d);if(e!==h.charAt(d))break;m.push(e)}let f=u.substr(d),g=h.substr(d);if(o.str){for(d=f.length;d>0;d--){const e=f.charAt(d);if(e!==g.charAt(d))break;E.unshift(e)}E.length&&(f=f.substr(0,d+1),g=g.substr(0,d+1))}m=m.join("").replace(/\s$/,"&nbsp;"),E=E.join("").replace(/^\s/,"&nbsp;"),(0,n.trim)((0,i.val)(e))||o.noSpaceIfEmpty||(0,i.val)(e,"&nbsp;");const y=e.clientHeight||e.offsetHeight;(0,i.val)(e,'<div class="counter_wrap inl_bl"></div>');const w=e.firstChild;let A,b,T,I,P=!0;m.length&&w.appendChild(A=(0,i.ce)("div",{className:"counter_const inl_bl",innerHTML:m})),m.length||o.allowZero||(g=g.replace(/^0+/,"")),g&&("0"!==g||o.allowZero||m.length)||(g=o.noSpaceIfEmpty?"":"&nbsp;",P=!!m.length),w.appendChild(T=(0,i.ce)("div",{className:"counter_anim_wrap inl_bl"})),T.appendChild(I=(0,i.ce)("div",{className:"counter_anim "+(l?"counter_anim_inc":"counter_anim_dec"),innerHTML:`<div class="counter_anim_big"><span class="counter_anim_big_c">${f}</span></div>`+(P?`<div class="counter_anim_small"><span class="counter_anim_small_c">${g}</span></div>`:"")},P?{marginTop:l?-y:0}:{right:0})),o.str&&(0,i.setStyle)(I,{textAlign:"right",right:0});const C=(0,i.getSize)((0,i.geByClass1)("counter_anim_big_c",I,"span"))[0];let S=P?"&nbsp;"===g?C:(0,i.getSize)((0,i.geByClass1)("counter_anim_small_c",I,"span"))[0]:0;!g&&o.noSpaceIfEmpty&&(S=0),E.length&&w.appendChild(b=(0,i.ce)("div",{className:"counter_const inl_bl",innerHTML:E})),o.noWrapWidth||(0,i.setStyle)(w,{width:(A&&(0,i.getSize)(A)[0]||0)+(b&&(0,i.getSize)(b)[0]||0)+C+0}),void 0===r.browser.csstransitions&&(r.browser.csstransitions=r.browser.chrome&&r.browser.version>=9||r.browser.mozilla&&r.browser.version>=4||r.browser.opera&&r.browser.version>=10.5||r.browser.safari&&r.browser.version>=3.2||r.browser.safari_mobile||r.browser.android);const O=r.browser.csstransitions;(0,i.setStyle)(T,{width:l?S:C});const M=function(){(0,i.val)(e,t||(o.noSpaceIfEmpty?"":" "));const n=(0,i.data)(e,"nextCount");(0,i.data)(e,"curCount",!1),(0,i.data)(e,"nextCount",!1),("number"==typeof n||o.str&&"string"==typeof n)&&setTimeout(v.pbind(e,n,o),0),o.onDone&&o.onDone()},D=P?{marginTop:l?0:-y}:{marginRight:l?-S:0};O?((0,i.getStyle)(T,"width"),(0,i.addClass)(T,"counter_css_anim_wrap"),C!==S&&(0,i.setStyle)(T,{width:l?C:S}),P&&(0,i.setStyle)(I,D),setTimeout(M,300),o.fadeMode&&((0,i.setStyle)((0,i.geByClass1)("counter_anim_big",e),"opacity",1),(0,i.setStyle)((0,i.geByClass1)("counter_anim_small",e),"opacity",0))):(C!==S&&a(T,{width:l?C:S},{duration:100}),P?a(I,D,{duration:300,transition:s.Transitions.easeOutCirc,onComplete:M}):setTimeout(M,300))}},815559:(e,t,o)=>{"use strict";o.d(t,{handleGlobalEsc:()=>A,hideCookiesPolicy:()=>b,onCtrlEnter:()=>w,onDocumentClick:()=>y,onEnter:()=>v});var n=o(530040),i=o(736852),r=o(490712),s=o(307188),a=o(476726),_=o(452314),c=o(317412),l=o(879007),u=o(788407),d=o(655883),p=o(714209),h=o(250682),m=o(723561),E=o(387674),f=o(529397),g=o(261180);function y(e){if((0,a.partConfigEnabled)("ignore_navgo_if_prevented")&&e.defaultPrevented)return;if((0,c.checkEvent)(e))return!0;if((0,g.processAliExpressMiniAppLinkClickEvent)(e))return!1;if(h.ls.set("last_reloaded",[]),cur.onMouseClick&&cur.onMouseClick(e))return;if(!(e=window.event||e.originalEvent||e))return!0;e.target?.dataset?.donutLogEvent&&(0,f.logDonutEvent)(e.target.dataset.donutLogEvent);let t,o=8,u=e.target||e.srcElement;for(;u&&u!==document.body&&"A"!==u.tagName&&o--;)u=u.parentNode;if(!u||"A"!==u?.tagName)return!0;const d=u.onclick||u.onmousedown;if((0,a.partConfigEnabled)("react_global_nav_handling")?Boolean(u.getAttribute("onclick")||u.getAttribute("onmousedown")):!(0,n.isAllowLinkOnclickWebForLink)(u)&&d)return!0;let p=u.href;const m=u.getAttribute("target")||nav.baseBlank;if(p&&m){if((0,_.domClosest)("bookmarks_row_type_link",u)){const e=(nav.fromStr(p)||{}).to;(0,r.statlogsValueEvent)("bookmarks_product_analytics",{link_url:e,time:(0,s.getServerTime)()})}return!0}p=(0,i.stripVKSiteURLOrigin)(p);const y={};(t=p.match(/^\/(.+?)#[\!\/](.+?)$/))&&!t[1].match(/^app(\d+)/)&&(y.permanent=t[1],p="/"+t[2]);const v=!!(u.getAttribute&&u.getAttribute("data-post-click-type")&&u.getAttribute("data-post-id"));if(p.match(/#$/)&&!v)return!0;const w=(0,_.domData)(u,"post-id");let A;w&&(y.postId=w);let b=p,T=null;const I=p.match(/^\/(.*?)(\?|#|$)/);if(I)T=I[1];else{if(u.hostname)A=u.hostname,T=u.pathname+u.search;else{const e=/^([^:\/]+)?(?::(\d+))?(\/?[^#]*)(#?.*)$/i.exec(p);if(!e)return!0;A=e[1],T=e[3]||"/"}if(!A||!v)return!0;u.setAttribute("data-change-location-with-post-away",1),b=u}if("add_community_app"===T)return(0,_.attr)(u,"target","_blank"),!0;if(T.indexOf(".php")>0||T.match(/^(doc\-?\d+_\d+|graffiti\d+|reg\d+|images\/|utils\/|\.js|js\/|\.css|css\/|source\b)/)){if(!v)return!0;u.setAttribute("data-change-location-with-post-away",1),b=u}const P=u.getAttribute("hrefparams");P&&(y.params=(0,l.extend)(y.params||{},(0,E.fromQueryString)(P)));try{return nav.go(b,e,(0,l.extend)({},y,{throwErrorOnDisabledPath:!0})),(0,c.cancelEvent)(e)}catch(e){return!0}}function v(e,t){(t=t||window.event).keyCode===c.KEY.ENTER&&(e(),(0,c.cancelEvent)(t))}function w(e,t){(10===(e=e||window.event).keyCode||13===e.keyCode&&(e.ctrlKey||e.metaKey&&p.browser.mac))&&(t(),(0,c.cancelEvent)(e))}function A(e){if(window._wf=1,e.keyCode===c.KEY.ESC&&boxQueue.count()&&!cur._noEscHide)return boxQueue.hideLast(),-1;if(e.keyCode===c.KEY.ESC&&window.articleCloseImageFullSize&&window.articleCloseImageFullSize())return(0,c.cancelEvent)(e);if(e.keyCode===c.KEY.ESC&&window.isArticleLayerOpen&&window.isArticleLayerOpen())return window.ArticleLayer.close(!0),(0,c.cancelEvent)(e);if(e.keyCode===c.KEY.ESC&&window.AuthorPage&&!cur.articleEditorLayer)return window.AuthorPage.close(),(0,c.cancelEvent)(e);if(e.keyCode===c.KEY.ESC&&(0,a.partConfigEnabled)("vkm_reforged_in_vkcom")&&"im"===window.cur?.module)return void((0,m.getCancelStack)().length&&((0,m.cancelStackPop)(),(0,c.cancelEvent)(e)));if(e.keyCode===c.KEY.ESC)return(0,m.cancelStackPop)(),(0,c.cancelEvent)(e);const t=[176,177,178,179];let o=!1;window.audioPlayer&&(t.push(c.KEY.LEFT),t.push(c.KEY.RIGHT)),(0,l.each)(t,(function(t,n){if(e.keyCode===n)return o=!0,!1})),o&&(0,u.getAudioPlayer)().onMediaKeyPressedEvent(e),d.Chat.inited&&191===e.keyCode&&(e.ctrlKey||e.metaKey&&p.browser.mac)&&d.Chat.showFriends()}function b(){(0,_.re)("cookies_policy_wrap"),ajax.post("/settings",{act:"a_hide_cookies_policy"})}},691004:(e,t,o)=>{"use strict";o.d(t,{isInputActive:()=>l,placeholderInit:()=>p,placeholderSetup:()=>d,preventNonNumericalInput:()=>m});var n=o(452314),i=o(317412),r=o(663878),s=o(879007),a=o(714209),_=o(476726),c=o(171444);function l(){return document.activeElement&&((0,n.attr)(document.activeElement,"contenteditable")||"INPUT"===document.activeElement.tagName||"textarea"===document.activeElement.tagName)}function u(e,t={},o,i){const s=e.phshown,_=e.phcont,{back:c,editable:l,hideBackAfter:u,timeout:d,phColor:p="#8C8E91",activeColor:h="#C0C8D0"}=t,m=d||0===d?d:100,E=t.period||200;let f;if(f=l?(void 0!==e.textContent?e.textContent:e.innerText)||(0,n.geByTag)("img",e).length:e.value,s&&(c&&f||!c&&(o&&!o.type||f))?((0,n.hide)(_),e.phshown=!1):s||f||!c&&!i||((0,n.show)(_),e.phshown=!0,a.browser.opera&&i&&(e.setAttribute("placeholder",""),e.removeAttribute("placeholder",""))),c&&!f){if(o&&!o.type){const t=u?n.hide.pbind(_.firstChild.firstChild):null;clearTimeout(e.phanim),e.phanim=setTimeout((function(){(0,r.animate)(_.firstChild.firstChild,{color:h},E,t)}),m)}i&&(clearTimeout(e.phanim),u&&(0,n.show)(_.firstChild.firstChild),e.phanim=setTimeout((function(){(0,r.animate)(_.firstChild.firstChild,{color:p},E)}),m))}}function d(e,t){const o=(0,n.ge)(e);if(!o)return!1;if(!(o.getAttribute?o.getAttribute("contenteditable"):o.contenteditable)&&(0,_.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,s.clone)(t):{};if(o.phevents&&!r.reload)return;const c=o.getAttribute?o.getAttribute("placeholder"):o.placeholder;if(!c)return;o.removeAttribute("placeholder");let l={},d=!1;const p=["Top","Bottom","Left","Right"];if(r.pad)l=r.pad;else{if(r.fast){for(let e=0;e<4;e++)l["padding"+p[e]]=3,l["margin"+p[e]]=0,l["border"+p[e]+"Width"]=1;(0,s.extend)(l,r.styles||{})}else{const e=[];for(let t=0;t<4;t++)e.push("margin"+p[t]),e.push("padding"+p[t]),e.push("border"+p[t]+"Width");l=(0,n.getStyle)(o,e)}for(let e=0;e<4;e++){const t="margin"+p[e],o="border"+p[e]+"Width";l[t]=(0,s.intval)(l[t])+(0,s.intval)(l[o])+"px",delete l[o]}}if(r.reload){const e=o.previousSibling;e&&(0,n.hasClass)(e,"input_back_wrap")&&(0,n.re)(e)}const h=r.big?" big":"",m=(0,n.getSize)(o)[0]-20,E=o.phcont=o.parentNode.insertBefore((0,n.ce)("div",{className:"input_back_wrap no_select",innerHTML:`<div class="input_back"><div class="input_back_content${h}" style="width: ${m}px;">${c}</div></div>`}),o),f=(0,n.domFC)(E);(0,n.setStyle)(f,l);const g=u.pbind(o,r),y=a.browser.mobile?g:(e,t)=>setTimeout(g.pbind(e,t),0);a.browser.msie&&a.browser.version<8&&(0,n.setStyle)(f,{marginTop:1}),o.phonfocus=function(e){d||(o.focused=!0,cur.__focused=o,!0===e&&((0,n.setStyle)(o,{backgroundColor:"#FFF"}),(0,n.hide)(f)),y(!0,!1))},o.phonblur=function(){d||(cur.__focused=o.focused=!1,(0,n.show)(f),y(!1,!0))},o.phshown=!0,o.phanim=null,(o.value||r.editable&&((void 0!==o.textContent?o.textContent:o.innerText)||(0,n.geByTag)("img",o).length))&&(o.phshown=!1,(0,n.hide)(E)),a.browser.opera_mobile||((0,i.addEvent)(E,"focus click",(function(e){d||(r.editableFocus?(setTimeout(r.editableFocus.pbind(o),0),o.phonfocus()):(o.blur(),o.focus()))})),(0,i.addEvent)(o,"focus"+(r.editable?" click":""),o.phonfocus),(0,i.addEvent)(o,"keydown paste cut input",y)),(0,i.addEvent)(o,"blur",o.phonblur),o.check=y,o.getValue=()=>r.editable?o.innerHTML:o.value,o.setPlaceholder=e=>(0,n.geByClass1)("input_back_content",E).textContent=e,o.setDisabled=e=>d=e,o.setValue=function(e){r.editable?o.innerHTML=e:o.value=e,u(o,r)},o.phevents=!0,o.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],cur.destroy.push(function(e){for(let t=0,o=e.length;t<o;t++)(0,n.removeData)(e[t])}.pbind(cur.__phinputs))),cur.__phinputs.push(o))}function p(e,t){const o=(0,n.ge)(e);if(!o)return!1;if(!(o.getAttribute?o.getAttribute("contenteditable"):o.contenteditable)&&(0,_.partConfigEnabled)("native_placeholder_enable"))return!1;const r=t?(0,s.clone)(t):{},l=void 0===(0,n.ce)("input").placeholder||o&&o.getAttribute&&o.getAttribute("contenteditable");if(o.phevents&&!r.reload)return;const u=o.getAttribute?o.getAttribute("placeholder"):o.placeholder;if(!u)return;if(o.getValue=function(){return r.editable?o.innerHTML:o.value},o.setValue=function(e){r.editable?o.innerHTML=e:o.value=e,l&&d(o,r)},o.phonfocus=function(){},o.phonblur=function(){},!l)return;function d(e,t={}){const o=e.phshown,i=e.phcont;let r;t.editable?(r=void 0!==e.textContent?e.textContent:e.innerText,r&&a.browser.opera&&r.match(/^[ ]+$/)&&(r=""),r||(r=(0,n.geByTag)("img",e).length>0),r||(r=(0,n.geByTag)("br",e).length>1),r||(r=(0,n.geByTag)("p",e).length>1)):r=e.value,o&&r?((0,n.hide)(i),e.phshown=!1):o||r||((0,n.show)(i),e.phshown=!0)}if(o.removeAttribute("placeholder"),r.reload){const e=(0,n.domNS)(o);e&&(0,n.hasClass)(e,"placeholder")&&(0,n.re)(e)}const p=o.phcont=(0,n.domInsertAfter)((0,n.ce)("div",{className:"placeholder",innerHTML:'<div class="ph_input"><label class="ph_content" for="'+o.id+'">'+u+"</label></div>"}),o),h=d.pbind(o,r),m=a.browser.mobile?h:(e,t)=>setTimeout(h.pbind(e,t),0);o.phonfocus=function(){o.focused=!0,cur.__focused=o,m(!0,!1)},o.phonblur=function(){cur.__focused=o.focused=!1,m(!1,!0)},o.phshown=!0,(o.value||r.editable&&((void 0!==o.textContent?o.textContent:o.innerText)||(0,n.geByTag)("img",o).length))&&(o.phshown=!1,(0,n.hide)(p)),a.browser.opera_mobile||((0,i.addEvent)(p,"focus click contextmenu",(function(e){r.editableFocus?(setTimeout(r.editableFocus.pbind(o),0),"contextmenu"===e.type&&a.browser.msie&&r.editableFocus(o),o.phonfocus()):(o.blur(),o.focus())})),(0,i.addEvent)(o,"focus"+(r.editable?" click":""),o.phonfocus),(0,i.addEvent)(o,"keydown paste cut input",m)),(0,i.addEvent)(o,"blur",o.phonblur),o.check=m,o.phevents=!0,o.phonsize=function(){},r.global||r.reload||(cur.__phinputs||(cur.__phinputs=[],(0,c.pushNavDestroy)((()=>{if(cur.__phinputs)for(let e=0,t=cur.__phinputs.length;e<t;++e)(0,n.removeData)(cur.__phinputs[e])}))),cur.__phinputs.push(o))}const h=e=>{const t=void 0===e.which?e.keyCode:e.which;String.fromCharCode(t).match(/^[0-9]+$/)||(0,i.cancelEvent)(e)},m=e=>{(0,i.addEvent)(e,"keypress",h)}},645024:(e,t,o)=>{"use strict";o.d(t,{addLangKeys:()=>l,curLang:()=>w,getBigDateNew:()=>y,getDateText:()=>g,getLang:()=>n.getLang,getShortDate:()=>h,getShortDateOrTime:()=>E,getShortDateWithTime:()=>m,getSmDate:()=>v,langDate:()=>p,langLink:()=>d,langNumeric:()=>n.langNumeric,langSex:()=>n.langSex,langStr:()=>c,langTag:()=>u,langWordNumeric:()=>f,parseCyr:()=>a,parseLatKeys:()=>_,parseLatin:()=>s});var n=o(610989),i=o(879007),r=o(8520);function s(e){const t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],o=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"];let n=e;for(let e=0,i=t.length;e<i;e++)n=n.split(t[e]).join(o[e]);const i="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ";for(let e=0,t=48;e<t;e++)n=n.split(i.charAt(e)).join("абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ".charAt(e));return n===e?null:n}function a(e){const t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],o=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"],n="абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ";let i=e;for(let e=0;e<o.length;e++)i=i.split(o[e]).join(t[e]);for(let e=0;e<48;e++)i=i.split(n.charAt(e)).join("abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ".charAt(e));return i===e?null:i}function _(e){const t="qwertyuiop[]asdfghjkl;'zxcvbnm,./`";let o=e;for(let e=0;e<34;e++)o=o.split(t.charAt(e)).join("йцукенгшщзхъфывапролджэячсмитьбю.ё".charAt(e));return o==e?null:o}function c(e){const t=arguments,o=t.length;let n=e+"";for(let e=1;e<o;e+=2){const o="%"===t[e][0]?t[e]:"{"+t[e]+"}";n=n.replace(o,t[e+1])}return n}function l(e,t=!1){let o;o="object"==typeof t?t:t?window:window.cur,o.lang?(0,i.extend)(o.lang,e):o.lang=e}function u(e,t,o,n="tag"){let i=o;return i=i.replace(`{${n}}`,e),i=i.replace(`{/${n}}`,t),i}function d(e,t,o="link",n=""){return u(`<a ${!1!==e?`href="${e}"`:""} ${n}>`,"</a>",t,o)}function p(e,t,o,n,s,a){let _;if(a||(a=""),(0,i.isArray)(t)||(t=["",t,t,t,t]),"number"==typeof e||"string"==typeof e?(e>2147483646e3&&(e=0),e+=o,_=new Date(e)):_=e,s)t=t[1];else{let e="";e=(0,r.isDateToday)(_)?t[3]:(0,r.isDateYesterday)(_)?t[2]:(0,r.isDateToday)(_)?t[4]:t[1],!e&&t[1]&&(e=t[1]),t=e}const c={hours:_.getHours(),minutes:_.getMinutes(),seconds:_.getSeconds(),day:_.getDate(),month:_.getMonth()+1,year:_.getFullYear()};let l="";switch(3===vk.lang&&(l=_.getHours()>11?"pm":"am",c.hours=_.getHours()%12==0?12:_.getHours()%12),vk.lang){case 1:switch(_.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!(0,r.isDateToday)(_)||(0,r.isDateYesterday)(_)||(0,r.isDateTomorrow)(_)||(t=a+t);break;case 12:case 73:1==_.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===vk.lang&&(c.year=c.year+543),t.replace("{hour}",c.hours).replace("{num_hour}",(0,r.leadingZero)(c.hours)).replace("{minute}",(0,r.leadingZero)(c.minutes)).replace("{day}",c.day).replace("{num_day}",(0,r.leadingZero)(c.day)).replace("{month}",n[c.month]).replace("{year}",c.year).replace("{short_year}",c.year%100).replace("{second}",(0,r.leadingZero)(c.seconds)).replace("{am_pm}",l)}function h(e,t,o,i,r){e*=1e3,void 0===o&&(o=!0),void 0===i&&(i=n.getLang("months_of","raw")),t*=1e3;const s=Date.now(),a=new Date(s),_=new Date(e+t);return!r&&e>s&&e-s<864e5&&a.getDate()===_.getDate()?p(e,"{hour}:{minute} {am_pm}",t,[],!o):_.getYear()!==a.getYear()||e<s-157248e5?p(e,n.getLang("global_date","raw"),t,i,!o):p(e,n.getLang("global_short_date","raw"),t,i,!o)}function m(e,t,o,n){return(0,r.isDateToday)(new Date(1e3*e+1e3*t))?p(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!o):`${h(e,t,o,n)} ${p(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!o)}`}function E(e,t,o,n){return(0,r.isDateToday)(new Date(1e3*e+1e3*t))?p(1e3*e,"{hour}:{minute} {am_pm}",1e3*t,[],!o):h(e,t,o,n)}function f(e,t,o){return(0,i.isArray)(t)&&e<t.length?t[e]:(0,n.langNumeric)(e,o)}function g(e,t){e+=t;const o=parseInt(Date.now()/1e3)-e;let r="";if(o<60)r=n.getLang("global_just_now");else if(o<3600){r=f((0,i.intval)(o/60),n.getLang("global_word_mins_ago","raw"),n.getLang("global_mins_ago","raw"))}else if(o<14400){r=f((0,i.intval)(o/3600),n.getLang("global_word_hours_ago","raw"),n.getLang("global_hours_ago","raw"))}else r=y(e,0,!0,"_l");return r}function y(e,t,o,i){void 0===o&&(o=!0),void 0===t&&(t=0),void 0===i&&(i=""),t*=1e3;const r=new Date(1e3*e),s=new Date;return r.getFullYear()!==s.getFullYear()&&r.getTime()<s.getTime()-1728e5||Math.abs(r.getTime()-s.getTime())>157248e5?p(1e3*e,n.getLang("global_date"+i,"raw"),t,n.getLang("months_sm_of"),!o):p(1e3*e,n.getLang("global_short_date_time"+i,"raw"),t,n.getLang("months_sm_of"),!o)}function v(e,t,o){void 0===o&&(o=!0),void 0===t&&(t=0);const i=new Date,r=i.getFullYear(),s=i.getMonth(),a=new Date(1e3*e),_=a.getFullYear(),c=a.getMonth();return p(1e3*e,_<r&&(s>1||c<9||r-_>=2)?n.getLang("global_date","raw"):n.getLang("global_short_date_time","raw"),t,n.getLang("months_sm_of","raw"),!o)}function w(e){if(void 0!==window.cur&&void 0!==window.cur.lang)return window.cur.lang[e]}},134020:(e,t,o)=>{"use strict";o.d(t,{TopMenu:()=>k,autosizeSetup:()=>L,checkPageBlocks:()=>P,getPageHeaderHeight:()=>T,getProgressBarEl:()=>N,getProgressHtml:()=>R,leftBlockOut:()=>D,leftBlockOver:()=>M,onBodyResize:()=>O,onBodyScroll:()=>S,redraw:()=>C,updateNarrow:()=>I});var n=o(879007),i=o(452314),r=o(688701),s=o(240515),a=o(248298),_=o(765908),c=o(663878),l=o(317412),u=o(858367),d=o(714209),p=o(723561),h=o(788407),m=o(967886),E=o(581903),f=o(85953),g=o(984869),y=o(476726),v=o(933052),w=o(832813),A=o(331876);let b;function T(){const e=(0,i.ge)("page_header");return b=b||(e?e.offsetHeight:0),b}function I(){cur.__narrowBar=cur.__narrowBar||{},cur.__narrowBar.bar=cur.__narrowBar.bar||(0,i.ge)("narrow_column"),cur.__narrowBar.barBlock=cur.__narrowBar.bar&&(0,i.geByClass1)("page_block",cur.__narrowBar.bar),cur.__narrowBar.wideCol=cur.__narrowBar.wideCol||(0,i.ge)("wide_column"),cur.__narrowBar.isBarFixed=cur.__narrowBar.isBarFixed||"fixed"===(0,i.getStyle)(cur.__narrowBar.bar,"position"),cur.__narrowBar.pl=cur.__narrowBar.pl||(0,i.ge)("page_layout");const e=cur.__narrowBar.bar,t=cur.__narrowBar.barBlock,o=cur.__narrowBar.wideCol,s=(0,r.scrollGetY)();if(d.browser.mobile||!e||!t||!o||(0,i.isVisible)(boxLoader)||(0,i.isVisible)(boxLayerBG)||(0,i.isVisible)(layerBG))return;const a=window.lastWindowHeight||0,_=Math.min(s,document.body.clientHeight-a),c=cur.__narrowBar.pl,l=vk.staticheader?Math.max(0,T()-_):T(),u=cur.__narrowBar.isBarFixed,p=(0,n.floatval)((0,i.getStyle)(cur.__narrowBar.barBlock,"marginTop")),h=(0,i.getSize)(e)[1]-(u?p:0),m=(0,i.getSize)(o)[1],E=(0,i.getXY)(o)[1],f=h>=m-p,g=p,y=_+a-m-E-g,v=Math.max(0,y),w=E-l,A=(0,i.getXY)(e)[1]+(u?p:0),b=cur.__narrowBar.lastSt||0,I=cur.__narrowBar.lastStyles||{},P=l+g+h+p+v<=a&&!cur.narrowHide,C=cur.__narrowBarForceNotFixed;let S,O=!1;_-1<w&&!(P&&d.browser.msie&&A<l+p)||f?S={marginTop:0}:!C&&(_-1<Math.min(b,A-l-p)||P)?(S={top:l,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,i.getSize)(c)[0]))},O=!0):!C&&(_+1>Math.max(b,A+h+g-a)&&y<0&&!cur.narrowHide||cur.narrowHide&&_+1>Math.max(b,A+h-l))?(S={bottom:cur.narrowHide?a-l:g,marginLeft:Math.min(-document.body.scrollLeft,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,i.getSize)(c)[0]))},O=!0):S={marginTop:y>=0?m-h:Math.min(A-E,m-h+w)},function(e,t){const o=(0,n.clone)(e),i=(0,n.clone)(t);return(0,n.each)(o,(function(e,t){"position"!==e&&(o[e]=Math.round(t))})),(0,n.each)(i,(function(e,t){"position"!==e&&(i[e]=Math.round(t))})),JSON.stringify(o)===JSON.stringify(i)}(S,I)||((0,n.each)(I,(function(e){I[e]=null})),(0,i.setStyle)(e,(0,n.extend)(I,S)),cur.__narrowBar.lastStyles=S),O!==u&&(0,i.toggleClass)(e,"fixed",O),cur.__narrowBar.lastSt=_,cur.__narrowBar.isBarFixed=O}function P(){const e=(0,i.ge)("content");e&&((0,i.toggleClass)(e,"page_block",!(0,i.geByClass1)("page_block",e)),(0,m.updateAriaElements)())}function C(e,t){e&&"fixed"===(0,i.getStyle)(e,"position")&&(t?(0,i.removeClass)(e,t):(0,i.setStyle)(e,{position:"relative"}),e.offsetLeft,t?(0,i.addClass)(e,t):(0,i.setStyle)(e,{position:"fixed"}))}function S(){if(!window.pageNode)return;const e=Math.min(0,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,i.getSize)((0,i.ge)("page_layout"))[0]));d.browser.mobile||vk.staticheader||(0,s.updateHeaderStyles)({marginLeft:e}),(0,s.updateLeftMenu)(),I(),(0,a.updSideTopLink)()}function O(e){if(!window.pageNode)return;const{clientWidth:t,clientHeight:o}=document.documentElement,r=(0,a.sbWidth)();let c=Math.max((0,n.intval)(window.innerWidth),(0,n.intval)(t)),l=Math.max((0,n.intval)(window.innerHeight),(0,n.intval)(o)),p=!1;if(d.browser.mobile&&(c=Math.max(c,(0,n.intval)(document.body.scrollWidth)),l=Math.max(l,(0,n.intval)(document.body.scrollHeight))),window.lastWindowWidth!==c||!0===e){p=!0,window.lastInnerWidth=window.lastWindowWidth=c,layerWrap.style.width=boxLayerWrap.style.width=c+"px";const e=layer.style.width=boxLayer.style.width=c-r-2+"px";if(window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.width=c+"px",mvLayer.style.width=e),window.wkLayerWrap&&(wkLayerWrap.style.width=c+"px",wkLayer.style.width=e),document.body.offsetWidth<vk.width+r+2&&(c=vk.width+r+2),c)for(let e=pageNode.firstChild;e;e=e.nextSibling){if(!e.tagName)continue;const t=(window.lastInnerWidth=c-r-1)-1;for(let o=e.firstChild;o;o=o.nextSibling)"scroll_fix"===o.className&&(o.style.width=t+"px");document.documentElement.style.setProperty("--scroll-fixed-width",`${t}px`),vk.staticheader||(0,s.updateHeaderStyles)({width:t})}}if((window.lastWindowHeight!==l||!0===e)&&(p=!0,window.lastWindowHeight=l,layerBG.style.height=boxLayerBG.style.height=layerWrap.style.height=boxLayerWrap.style.height=l+"px",window.mvLayerWrap&&!mvcur.minimized&&(mvLayerWrap.style.height=l+"px"),window.wkLayerWrap)){const e=d.browser.mobile?window.innerHeight:l;wkLayerWrap.style.height=e+"px"}if(vk.noSideTop||(0,a.updSideTopLink)(1),p&&window.curRBox&&window.curRBox.boxes&&window.getWndInner){const e=getWndInner();(0,n.each)(curRBox.boxes,((t,o)=>o._wnd_resize(e[0],e[1])))}setTimeout(_.updSeenAdsInfo,0);const m=(0,h.getAudioPlayer)();m.audioLayer&&m.audioLayer.isShown()&&m.audioLayer.updatePosition(),cur.pvShown&&window.Photoview&&setTimeout(Photoview.updatePhotoDimensions),window.tooltips&&tooltips.rePositionAll(),cur.lSTL&&(0,i.setStyle)(cur.lSTL,{width:Math.max((0,i.getXY)(cur.lSTL.el)[0],0),height:l-1}),(0,i.ge)("dev_top_nav")&&(0,i.setStyle)((0,i.ge)("dev_top_nav","left",null));const E=(0,i.geByClass)("ui_search_fixed"),f=(0,i.ge)("narrow_column");(0,n.each)(E,(function(){C(this,"ui_search_fixed"),setTimeout(C.pbind(this,"ui_search_fixed"),0)})),f&&(C(f,"fixed"),setTimeout(C.pbind(f,"fixed"),0)),(0,s.updateLeftMenu)(),I(),(0,u.updateSTL)()}function M(e){let t=1;e.id||(e=(0,i.ge)("left_hide"+e),t=0),!t&&e.timer||(e.showing?(0,i.removeAttr)(e,"showing"):((0,c.animate)(e,{opacity:t?1:.5},200),t&&(e.showing=1))),e.timer&&(clearTimeout(e.timer),(0,i.removeAttr)(e,"timer"))}function D(e){let t=.5;e.id||(e=(0,i.ge)("left_hide"+e),t=0),e.timer=setTimeout((function(){(0,c.animate)(e,{opacity:t},200),(0,i.removeAttr)(e,"timer")}),1)}function L(e,t={}){if(!(e=(0,i.ge)(e)))return;if(e.autosize)return void e.autosize.update();t.minHeight=(0,n.intval)(t.minHeight)||(0,n.intval)((0,i.getStyle)(e,"height")),t.maxHeight=(0,n.intval)(t.maxHeight);let o=(0,i.getSize)(e)[0]||(0,n.intval)((0,i.getStyle)(e,"width")),r=(0,i.getStyle)(e,"fontSize"),s=(0,i.getStyle)(e,"lineHeight");o<1&&(o=(0,n.intval)((0,i.getStyle)(e,"width",!1))),r.indexOf("em")>0&&(r=(0,n.floatval)(r)*parseInt(window.getComputedStyle(document.body).fontSize)),r=(0,n.intval)(r);const a={width:o,height:10,fontFamily:(0,i.getStyle)(e,"fontFamily"),fontSize:r+"px",lineHeight:s,boxSizing:(0,i.getStyle)(e,"boxSizing")};(0,n.each)(["Top","Bottom","Left","Right"],(function(){a["padding"+this]=(0,i.getStyle)(e,"padding"+this)})),e.autosize={options:t,helper:(0,i.ce)("textarea",{className:"ashelper"},a),handleEvent:function(t,o){let n=o.charCode?String.fromCharCode(o.charCode):o.charCode;if(void 0===n&&(n=String.fromCharCode(o.keyCode),10===o.keyCode||13===o.keyCode?n="\n":!d.browser.msie&&o.keyCode<=40&&(n="")),!n)return t;if(!d.browser.msie)return t.substr(0,e.selectionStart)+n+t.substr(e.selectionEnd);const i=document.selection.createRange();return i.text&&(t=t.replace(i.text,"")),t+n},update:function(t){let o=e.value;!t||"blur"===t.type||"keyup"===t.type||d.browser.msie&&"keypress"!==t.type||t.ctrlKey||t.altKey||t.metaKey||(o=e.autosize.handleEvent(o,t)),o||(o=" "),e.autosize.helper.value!==o&&(e.autosize.helper.value=o);const r=e.autosize.options,a=(0,i.getSize)(e,!0)[1];let _=e.autosize.helper.scrollHeight;const c=_%s;r.exact&&c>2&&(_-=c-2),_<r.minHeight&&(_=r.minHeight);const l={overflow:"hidden"},u=(0,i.getStyle)(e,"overflow").indexOf("auto")>-1?"auto":"hidden";r.maxHeight&&_>r.maxHeight&&(_=r.maxHeight,(0,n.extend)(l,{overflow:"auto",overflowX:"hidden"})),r.addHeight&&(_+=r.addHeight),a===_&&u===l.overflow||(l.height=_,(0,i.setStyle)(e,l),(0,n.isFunction)(r.onResize)&&r.onResize(_))}},t.exact&&("normal"===s&&(s="120%"),s.indexOf("%")>0&&(s=r*(0,n.intval)(s)/100)),utilsNode.appendChild(e.autosize.helper),d.browser.opera_mobile?((0,i.setStyle)(e,{overflow:"hidden"}),e.autosize.update(),(0,l.addEvent)(e,"blur",e.autosize.update)):((0,l.addEvent)(e,"keydown keyup keypress change",e.autosize.update),setTimeout((()=>{(0,i.setStyle)(e,{overflow:"hidden",resize:"none"});const t=(0,i.val)(e);(0,i.val)(e," ",!0),(0,i.val)(e,t,!0),e.autosize.update()}),0))}const k={init:function(){if(this.inited)return!1;this.ecoPlateAnalytics=new A.EcoPlateAnalytics;const e=(0,i.ge)("top_profile_link"),t=(0,i.ge)("top_profile_menu");if(!e||!t)return!1;(0,l.addEvent)(e,"mousedown",k.clicked),this.inited=!0,(0,f.initColorSchemeDropdowns)()},clicked:function(e){return(0,l.checkEvent)(e)||"mousedown"===e.type&&(0,l.checkKeyboardEvent)(e)||k.toggle(),!1},toggle:function(e){if((0,y.partConfigEnabled)("logout_save_user_dialog")){if(document.querySelector(".SaveUserForQuickLoginBox"))return}const t=(0,i.ge)("top_profile_link"),o=(0,i.ge)("top_profile_menu"),n=(0,i.hasClass)(o,"shown");if(void 0!==e&&n===e)return;void 0===e&&(e=!n);const r=(0,i.$)("[data-warning]")?.getAttribute("data-warning"),s=(0,i.$)("[data-security-svg]");(0,i.hasClass)(o,"top_profile_menu_new")&&(e?(E.vkConnectNavigationCollector.logAccountActionsOpen(r),(0,g.logSwitcherAccounts)(),(0,y.partConfigEnabled)("vkprotect_security_recommendation")&&null!==s&&(s.remove(),(0,v.api)("account.setSecurityIndicatorShown",{}))):E.vkConnectNavigationCollector.logAccountActionsClose(r)),this.ecoPlateAnalytics&&this.ecoPlateAnalytics.logTopNavToggle(e),(0,i.toggleClass)(t,"active",e),(0,i.toggleClass)(o,"shown",e),e?((0,p.cancelStackPush)("top_menu",k.toggle.bind(this,!1),!0),cur.introExitTooltipHide&&(cur.introExitTooltipHide(),delete cur.introExitTooltipHide)):(0,p.cancelStackFilter)("top_menu",!0)},show:function(){k.hidetimer&&(clearTimeout(k.hidetimer),k.hidetimer=0),k.toggle(!0)},hide:function(){k.hidetimer||(k.hidetimer=setTimeout((function(){k.toggle(!1),k.hidetimer=0}),200))},select:function(e,t){return!!(0,l.checkEvent)(t)||((0,w.logTopNavElements)(e.href),k.toggle(!1),nav.go(e,t,{noback:!0}))}};function R(e,t){return(0,i.rs)(vk.pr_tpl,{id:e||"",cls:t||""})}function N(e){return(0,i.geByClass1)("ui_progress_bar",e)}},655883:(e,t,o)=>{"use strict";o.d(t,{Chat:()=>d,__qlClear:()=>y,cssAnim:()=>p,hideNewsAnnounce:()=>h,initLegacyBrowserDetectionInAttribute:()=>g,initPostsLegacyVars:()=>P,leftAdBlockClose:()=>m,leftBlockFriendTooltip:()=>f,leftBlockToggleFriend:()=>E,nodeUpdated:()=>I,onLoginCaptcha:()=>b,onLoginDone:()=>w,onLoginFailed:()=>A,onLoginReCaptcha:()=>T,storePasswordCredential:()=>v});var n=o(810903),i=o(248298),r=o(452314),s=o(663878),a=o(317412),_=o(879007),c=o(20025),l=o(714209),u=o(645024);const d={maxHeight:300,tabs:{},counters:{},showFriends:function(){curFastChat.clistBox.visible?curFastChat.clistBox.options.fixed?window.FastChat.clistHide():curFastChat.clistBox.show():(window.FastChat.clistShow(),d.cont.tt&&d.cont.tt.destroy&&d.cont.tt.destroy())},showTT:function(){if(!document.querySelector(".WideScreenAppPage")&&!(0,r.hasClass)(d.wrap,"chat_active")&&!(0,r.hasClass)(d.wrap,"chat_expand")){const e=l.browser.mac?"Cmd":"Ctrl";(0,n.showTooltip)(d.cont,{text:`${u.getLang("head_fr_online_tip")} (${e}+?)`,shift:[-2,4,0],showdt:0,black:1})}},init:function(){d.wrap=(0,r.ce)("div",{id:"chat_onl_wrap",className:"chat_onl_wrap",innerHTML:'\n<div class="chat_tt_wrap"></div>\n<div class="chat_onl_inner">\n  <div class="chat_cont_scrolling"><div class="chat_onl_height"></div></div>\n  <div class="chat_cont_sh_top"></div>\n  <div class="chat_cont_sh_bottom"></div>\n  <a class="chat_tab_wrap" id="chat_tab_wrap" onclick="Chat.showFriends()" onmouseover="Chat.showTT();">\n    <div class="chat_onl_cont">\n      <div class="chat_onl" id="chat_onl"></div>\n    </div>\n  </a>\n</div>'}),utilsNode.appendChild(d.wrap),d.scrollNode=(0,r.geByClass1)("chat_cont_scrolling",d.wrap),d.ttNode=(0,r.geByClass1)("chat_tt_wrap",d.wrap),d.itemsCont=d.scrollNode.firstChild,d.onl=(0,r.ge)("chat_onl"),d.cont=d.onl.parentNode.parentNode,(0,r.hide)(d.wrap),d.inited=!0,window.stManager._addCss(".layers_shown .chat_onl_wrap {margin-right: "+(0,i.sbWidth)()+"px;}")}};function p(e,t,o,n){const i=(0,_.intval)(l.browser.version);if(e&&(l.browser.chrome&&i>14||l.browser.mozilla&&i>13||l.browser.opera&&i>2)){const i="all "+o.duration+"ms "+(o.func||"ease-out");e.style.WebkitTransition=i,e.style.MozTransition=i,e.style.OTransition=i,e.style.transition=i;const s=function(){return l.browser.opera&&(0,_.intval)(l.browser.version)<=12?e.removeEventListener("oTransitionEnd",s):(0,a.removeEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",s),e.style.WebkitTransition="",e.style.MozTransition="",e.style.OTransition="",e.style.transition="",n&&n(),!1};n&&(l.browser.opera&&(0,_.intval)(l.browser.version)<=12?e.addEventListener("oTransitionEnd",s):(0,a.addEvent)(e,"webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",s)),setTimeout(r.setStyle.pbind(e,t),0)}else(0,s.animate)(e,t,(0,_.extend)(o,{onComplete:n}))}function h(e,t){const o={act:"hide_block",block:e,hash:t};ajax.post("al_index.php",o),(0,r.hide)("news_announce_"+e)}function m(e,t,o){(0,r.setStyle)("left_hide"+e,{visibility:"hidden"}),function(e,t,o){let n="";const a=(0,c.showBox)("reports.php",{act:"hide_ad_box",ad_data:o},{onDone:function(){const e=(0,r.geByClass)("radiobtn","ad_hide");window.radioBtns.ad_hide={val:0,els:e};const t=(0,r.ge)("ad_csrf");n=t?t.value:n},params:{width:370,onClean:()=>{delete window.radioBtns.ad_hide}},stat:["reports.css"]});a.removeButtons(),a.addButton(u.getLang("box_send"),(_=>{(0,i.lockButton)(_),ajax.post("reports.php",{act:"hide_ad",reason_id:window.radioBtns.ad_hide.val,ad_data:o,hash:n}),function(e,t,o){function n(t){if(!t.done)return;if("function"==typeof o&&o(),"ya_direct"===e)return(0,s.animate)(e,{opacity:0},200,(function(){(0,r.re)("ya_direct"),setTimeout((function(){AdsLight.updateBlock("force_hard",2)}),5e3)})),void(window.vk__adsLight.yaDirectAdActive=!1);const n=(0,r.ge)("ads_ad_close_info_"+e);if(!n)return!1;(0,r.setStyle)(n,{opacity:0}),n.style.setProperty("display","block","important"),setTimeout(i,0)}function i(){(0,s.animate)("ads_ad_close_info_"+e,{opacity:1},200,a)}function a(){(0,r.setStyle)("ads_ad_box2_"+e,{visibility:"hidden"})}ajax.post(t,{},{noAds:!0,onDone:n})}(e,t,(()=>{(0,i.unlockButton)(_),a.hide()}))})),a.addButton(u.getLang("global_cancel"),!1,"no")}(e,t,o)}function E(e,t,o,n,i){n&&window.stManager.add(["tooltips.css",window.jsc("web/tooltips.js")]),cur.mfid=e,ajax.post("al_friends.php",{act:n?"add":"remove",mid:e,mf_type:t,hash:o,from:"leftblock"},{onDone:function(t,o,n){if(!t)return nav.reload();const i=(0,r.ge)("left_friend_status_"+e);(0,r.cleanElems)(i.firstChild),t?((0,r.show)(i),(0,r.val)(i,t)):(0,r.hide)(i),o&&(ajax.preload("al_friends.php",{act:"friend_tt",mid:e},[o,n]),setTimeout(f,0))},showProgress:function(){const t=((0,r.ge)("left_friend_subscribed")||{}).tt;t&&(t.hide({fasthide:1}),t.destroy()),(0,r.ge)("left_friend_status_"+e).innerHTML='<img src="/images/upload'+(window.devicePixelRatio>=2?"_2x":"")+'.gif" width="32" />'},hideProgress:()=>(0,r.hide)("left_friend_status_"+e),onFail:function(e){if(e)return(0,c.showFastBox)({title:u.getLang("global_error")},e),!0}}),(0,a.cancelEvent)(i)}function f(){return(0,n.showTooltip)((0,r.ge)("left_friend_subscribed"),{url:"al_friends.php",params:{act:"friend_tt",mid:cur.mfid,from:"leftblock"},slide:15,hidedt:500,shift:[40,-1,3],className:"preq_tt",forcetodown:!0})}function g(){let e=[];(0,_.each)(l.browser,(function(t,o){o&&!(0,_.inArray)(t,["version","mac","search_bot"])&&"flash"!==t.substr(0,5)&&e.push(t)})),e=e.join(" "),document.body.setAttribute("data-useragent",e)}function y(){clearTimeout(window.__qlTimer),setTimeout((()=>clearTimeout(window.__qlTimer)),2e3)}function v(e){if(!l.browserFeatures.cmaEnabled||!window.ResizeObserver||!(0,r.val)("quick_email"))return;if(void 0===window.PasswordCredential)return;const t=new PasswordCredential({id:(0,r.ge)("quick_email").value,password:(0,r.ge)("quick_pass").value,name:e.name,iconURL:e.photo_50});navigator.credentials.store(t)}function w(e,t){y(),v(t),nav.reload({force:!0,from:6})}function A(e,t){switch(y(),e){case-1:location.href=location.href.replace(/^http:/,"https:");break;case 4:let e="/login?m=1"+(t.expire?"&s=0":"");(0,_.each)(["email","ul","pch","to"],(function(o,n){t[n]&&(e+="&"+n+"="+t[n])})),location.href=e;break;case 7:location.href="/login?m=7";break;default:location.href="/login"}}function b(e,t){y(),(0,i.unlockButton)(window.__qfBtn),window.qloginBox=(0,c.showCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e,t){!function(){const e=(0,r.ge)("quick_captcha_sid"),t=(0,r.ge)("quick_captcha_key"),o=(0,r.ge)("quick_recaptcha"),n=(0,r.ge)("quick_login_form");e||n.appendChild((0,r.ce)("input",{type:"hidden",name:"captcha_sid",id:"quick_captcha_sid",value:""})),t||n.appendChild((0,r.ce)("input",{type:"hidden",name:"captcha_key",id:"quick_captcha_key",value:""})),o||n.appendChild((0,r.ce)("input",{type:"hidden",name:"recaptcha",id:"quick_recaptcha",value:""}))}(),(0,r.ge)("quick_captcha_sid").value=e,(0,r.ge)("quick_captcha_key").value=t,(0,r.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function T(e,t){y(),(0,i.unlockButton)(window.__qfBtn),window.qloginBox=(0,c.showReCaptchaBox)(e,t,window.qloginBox,{onSubmit:function(e){(0,r.ge)("quick_recaptcha").value=e,(0,r.ge)("quick_login_form").submit()},onHide:()=>window.qloginBox=!1})}function I(e,t){(0,r.setStyle)(e,{backgroundColor:"#F5F7FA"}),(0,s.animate)(e,{backgroundColor:"#FFF"},t||6e3,(function(e){(0,r.setStyle)(e,{backgroundColor:null})}))}function P(){window._postsSeen=window._postsSeen??{},window._postsSaved=window._postsSaved??{},window._postsSaveTimer=window._postsSaveTimer??void 0,window._postsSendTimer=window._postsSendTimer??void 0,window._postsCleanTimer=window._postsCleanTimer??void 0,window._postsSeenModules=window._postsSeenModules??{},window._postsExtras=window._postsExtras??{}}},396522:(e,t,o)=>{"use strict";o.d(t,{collectMemoryStats:()=>s,statDurationsLoadImage:()=>a,statNavigationTiming:()=>_});var n=o(756758),i=o(879007);function r(e,t){let o;for(let n=0;n<t.length;n++)if(o=t[n],">"===o)o=">"+t[n-1];else{if(1e3*o>e){o="<"+o;break}o=!1}return o}function s(){let e={};const t=[15,60,300,1500,5e3,1e4,15e3,2e4,25e3,3e4],o=[300,1500,5e3,3e4,6e4,12e4,">"];let i=!1;setInterval((function(){const s=window.cur&&window.cur.module;s!==i&&(e={},i=s);const a=window.vkLastNav;if(s&&a){const i=r(Date.now()-a,t);if(i&&!e[i]){const t=r(Date.now()-window.vkTabLoaded,o);e[i]=!0;const a=performance.memory.usedJSHeapSize;(0,n.statlogsValueEvent)("js_memory_stats_modules",a,s,i,t)}}}),5e3)}function a(){if(Math.random()<.001&&window.performance&&window.performance.getEntriesByType){if(window.clientStatsInited)return!1;const e=window.performance.getEntriesByType("resource");if(!e)return!1;const t={},o={};for(let n=0;n<e.length;n++)if(e[n]&&"img"===e[n].initiatorType)if(e[n].duration<100)t["<100"]=(t["<100"]||0)+1;else if(e[n].duration<250)t["100-250"]=(t["100-250"]||0)+1;else if(e[n].duration<500)t["250-500"]=(t["250-500"]||0)+1;else if(e[n].duration<1e3)t["500-1000"]=(t["500-1000"]||0)+1;else if(e[n].duration<2e3)t["1000-2000"]=(t["1000-2000"]||0)+1;else if(e[n].duration<5e3)t["2000-5000"]=(t["2000-5000"]||0)+1;else if(t[">5000"]=(t[">5000"]||0)+1,e[n].name&&e[n].name.indexOf("pp.vk.me")>0){let t="";t=e[n].name,t=t.substr(t.indexOf("pp.vk.me")+9),t.indexOf("/")>0&&(t=t.substr(0,t.indexOf("/")),o[t]=(o[t]||0)+1)}(0,i.each)(t,((e,t)=>(0,n.statlogsValueEvent)("img_load",t,e))),(0,i.each)(o,((e,t)=>(0,n.statlogsValueEvent)("img_slow",t,e))),window.clientStatsInited=!0}}function _(){if(window.clientStatsInitedNT)return!1;if(window.performance&&performance.timing){if(Math.random()>.001&&!__dev)return!1;const e={},t=window.cur&&window.cur.module;performance.timing.redirectStart&&performance.timing.redirectEnd&&(e.redirect=performance.timing.redirectEnd-performance.timing.redirectStart),performance.timing.domainLookupStart&&performance.timing.domainLookupEnd&&(e.domainLookup=performance.timing.domainLookupEnd-performance.timing.domainLookupStart),performance.timing.connectStart&&performance.timing.connectEnd&&(e.connect=performance.timing.connectEnd-performance.timing.connectStart,performance.timing.secureConnectionStart&&(e.secureConnection=performance.timing.connectEnd-performance.timing.secureConnectionStart)),performance.timing.requestStart&&performance.timing.responseStart&&(e.request=performance.timing.responseStart-performance.timing.requestStart,performance.timing.responseEnd&&(e.response=performance.timing.responseEnd-performance.timing.responseStart)),performance.timing.unloadEventStart&&performance.timing.unloadEventEnd&&(e.unloadEvent=performance.timing.unloadEventEnd-performance.timing.unloadEventStart),performance.timing.domLoading&&performance.timing.domComplete&&(e.processing=performance.timing.domComplete-performance.timing.domLoading),performance.timing.domContentLoadedEventStart&&performance.timing.domContentLoadedEventEnd&&(e.domContentLoadedEvent=performance.timing.domContentLoadedEventEnd-performance.timing.domContentLoadedEventStart),performance.timing.loadEventStart&&performance.timing.loadEventEnd&&(e.loadEvent=performance.timing.loadEventEnd-performance.timing.loadEventStart),performance.timing.loadEventEnd&&performance.timing.responseEnd&&(e.resource=performance.timing.loadEventEnd-performance.timing.responseEnd),(0,i.each)(e,((e,o)=>(0,n.statlogsValueEvent)("navigation_timing",o,e,t))),window.clientStatsInitedNT=!0}}},174628:(e,t,o)=>{"use strict";o.d(t,{shortCurrency:()=>r});var n=o(879007),i=o(452314);function r(){const e={};(0,n.each)((0,i.geByClass)("_short_currency"),(function(){const t=(0,i.domData)(this,"short")||"";if(!t)return!0;const o=this.innerHTML,r=(0,n.winToUtf)(o).length,s=(0,i.getStyle)(this,"fontFamily")||"tahoma,arial,sans-serif";if(void 0===e[s]){let t="";for(let e=r-1;e>=0;e--)t+="&#8399;";const n=(0,i.ce)("div",{innerHTML:`<b>${o}</b><b>${t}</b>`},{fontFamily:s,fontSize:"24px"});(0,i.ge)("utils").appendChild(n),e[s]=Math.abs(n.firstChild.offsetWidth-n.lastChild.offsetWidth)>=2*r,(0,i.re)(n)}!1===e[s]&&(0,i.val)(this,t)}))}},49667:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Nav:()=>Nav,default:()=>__WEBPACK_DEFAULT_EXPORT__,getPageContentWrapperNode:()=>getPageContentWrapperNode});var _shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(975149),_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(421735),_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(736852),_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(225007),_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(885469),_web_lib_date__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(307188),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(850101),_utils_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(879007),_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7144),_ads__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(765908),_debug_tools__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(618913),_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(452314),_dom_events__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(317412),_scroll__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(688701),_ui_util__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(357889),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(387674),_nav_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(240515),_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(577271),_layout_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(134020),_video__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(744025),_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(396522),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(714209),_feature_entries__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(788407),_accessibility__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(967886),_top_search__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(621684),_stl__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(858367),_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(507035),_message_box__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(20025),_lang__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(645024),_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(465094),_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(807825),_shared_evbus__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(823875),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(476726),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(490712),_shared_im_helpers__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(699615),_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(143172),_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(513734),_shared_production_stats_click_feed_post_interaction__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(782784),_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(695290),_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(681589),_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(871033),_spa_web_infrastructure_bookmakers__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(88107),_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(773444),_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(380042),_web_feed_feed_stats__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(468189),_web_feed_feed_attributes_hider__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(996456),_web_smoke_guard_smoke_screen_locator__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(528549);const SHOW_MORE_APPS_SHOWN_CLASSNAME="LeftMenu__moreAppsContainer--shown",SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME="LeftMenu__item--showMoreAppsHidden";let updateCountersTimeout,locationChangeListeners=[];const navigationStartListeners=new Set,interseptingNavigationHandlers=new Set,PAGE_CONTENT_WRAPPER_NODE_ID="wrap3";function getPageContentWrapperNode(){return document.getElementById(PAGE_CONTENT_WRAPPER_NODE_ID)??void 0}const Nav={getData:function(e,t=null){if(e.length){for(const o in navMap){if(!navMap.hasOwnProperty(o))continue;if("<"===o[0])continue;const n=e.match(new RegExp("^"+o,"i")),i=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_check_full_loc_enabled")&&t&&t.match(new RegExp("^"+o,"i"));if(n||i){if(navMap[o][2])return null;const e=navMap[o][3],t=e?.enabled&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)(e.enabled);return{url:navMap[o][0],files:t?[]:navMap[o][1],clientOnly:Boolean(t&&e?.client_only&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)(e.client_only))}}}return e.match(/^[a-z0-9\-_]+\.php$/i)?{url:e}:{url:navMap["<other>"][0],files:navMap["<other>"][1]}}return{url:navMap["<void>"][0],files:navMap["<void>"][1]}},isClientOnly:function(){try{const e=this.objLoc?.[0],t=/^friends/,o=this.strLoc,n=o&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&o.match(t)?o:null;if(e)return this.getData(e,n)?.clientOnly||!1}catch{return!1}return!1},reload:function(e){if((0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.reloadCheckFlood)(e))return;e=e||{};const t=Nav.strLoc.replace(/^\/+/g,"");e.force?(hab.stop(),t.includes("#")&&window.location.href.replace(window.location.origin,"")==="/"+t&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("mini_apps_save_hash_on_language_change")?window.location.reload():location.href="/"+t):(TopNotifier.invalidate(),Nav.go("/"+t,void 0,(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({nocur:!0},e)))},link:function(e,t){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(t)||cur.noAjaxNav){const t=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.toMaybeVKSiteURLRelativeName)(e);window.open(t)}else Nav.go(e)},onLocationChange:function(e){return locationChangeListeners.push(e),()=>{locationChangeListeners=locationChangeListeners.filter((t=>t!==e))}},addNavigationStartListener:function(e){navigationStartListeners.add(e)},removeNavigationStartListener:function(e){navigationStartListeners.has(e)&&navigationStartListeners.delete(e)},addInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.add(e)},removeInterseptingNavigationHandler:function(e){interseptingNavigationHandlers.has(e)&&interseptingNavigationHandlers.delete(e)},go:function(loc,ev,opts={}){const debugLog=opts.debugLog||(()=>{});Nav.showLessApps();const awayLink=maybeNavigateAwayLink(loc,opts)||maybeNavigateAwayAppFormLink(loc);if(awayLink)return debugLog("awayLink",awayLink),document.location.href=awayLink,!1;if((0,_dom_events__WEBPACK_IMPORTED_MODULE_12__.checkEvent)(ev)||window.cur.noAjaxNav)return void debugLog("noAjaxNav");if(LongView.onBeforePageChange(),loc.tagName&&"a"===loc.tagName.toLowerCase()){if("_blank"===loc.target||Nav.baseBlank)return void debugLog("baseBlank");const e=loc.getAttribute("hrefparams");if(e&&(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(opts.params||{},(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(e))),loc=loc.href||"",ev&&(!loc||!(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.isVKSiteURLForNav)(loc)))return void debugLog("isVKSiteURLForNav")}let strLoc="",objLoc={},changed={};"string"==typeof loc?(loc=(0,_shared_lib_nav_url__WEBPACK_IMPORTED_MODULE_2__.toMaybeVKSiteURLRelativeName)(loc),strLoc=loc,objLoc=Nav.fromStr(loc)):(loc[0]||(loc[0]=""),strLoc=Nav.toStr(loc),objLoc=loc),opts.hard&&(debugLog("hard",strLoc),location.href=strLoc),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_navigation_listeners")&&navigationStartListeners.forEach((e=>{try{e(strLoc,objLoc)}catch(e){(0,_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}})),window.cur.isCurrentVideoLayer&&!objLoc.section&&-1!==objLoc[0].indexOf("/playlist/")&&(objLoc.section="album_"+objLoc[0].split("_")[1]);let bugtrackerReloadRequired=!1;const bugtrackerLocations=/(^bug\d+$|^bugs$|^bugs_mng$|^bugtracker_adm$)/;if(-1!==Nav.objLoc[0].search(bugtrackerLocations)&&-1===objLoc[0].search(bugtrackerLocations)||-1===Nav.objLoc[0].search(bugtrackerLocations)&&-1!==objLoc[0].search(bugtrackerLocations)){if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("webinf_force_redirect_bugs_vkcom"))return debugLog("bugtracker",strLoc),void(location.href=strLoc);bugtrackerReloadRequired=!0}(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__.statDurationsLoadImage)(),(0,_legacy_performance_stats__WEBPACK_IMPORTED_MODULE_20__.statNavigationTiming)(),0===strLoc.indexOf("market")&&window.MarketAnalyticsManager&&window.MarketAnalyticsManager.setScreen(window.cur.module);const donutLinkRegex=/^donut\/([A-Za-z0-9_\.]{2,32})/;if(!opts.skipDonutLinkCheck&&strLoc.match(donutLinkRegex)){const e="direct_link",t=strLoc.match(donutLinkRegex),o=t[1],n=()=>{debugLog("groupDoesntExists"),nav.go(strLoc,ev,{...opts,skipDonutLinkCheck:!0})};return window.DonutSubscribePopup&&window.DonutSubscribePopup.onCloseButtonClick(),debugLog("donutLink",strLoc),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.showDonutSubscribePopup)(null,null,null,e,"",{type:"subscribe",fromSnippet:!0,onFailCallback:n,params:{act:"subscribe_popup"}},o),!1}("im"===objLoc[0]&&(0,_shared_im_helpers__WEBPACK_IMPORTED_MODULE_33__.isMarusiaPeer)(objLoc.sel)||"write-194070336"===strLoc)&&(_shared_marusia_marusia_stats__WEBPACK_IMPORTED_MODULE_34__.marusiaStats.logChatOpen(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),window.ajax.post("al_marusia.php",{act:"send_event",event:"chatopen"}));const ap=(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)();if(ap&&ap.updateCurrentPlaying&&ap.updateCurrentPlaying(),!opts.nocur){changed=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(objLoc);for(const e in Nav.objLoc)Nav.objLoc.hasOwnProperty(e)&&(Nav.objLoc[e]===changed[e]?delete changed[e]:void 0===changed[e]&&(changed[e]=!1));if(!1===(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)((0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(changed),{hist:opts.hist,replace:opts.replace,back:opts.back,asBox:opts.asBox,onDone:opts.onDone},objLoc))return debugLog("zNav",strLoc),Nav.setLoc(strLoc,opts),!1;bookmarksNav(ev,strLoc);const e=window.cur._back&&window.cur._back.hasOwnProperty("onArticleNavBack")?window.cur._back.onArticleNavBack:null,t=articleNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,e,ev);if(t)return Promise.resolve(t).then((()=>{strLoc=cleanArticleUrlByObjLoc(objLoc),Nav.setLoc(strLoc,{...opts,isForce:!0}),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back})})),debugLog("handled",strLoc),!1;const o=authorPageNav(strLoc,Nav.toStr(Nav.objLoc),opts.back,opts.postId);if(o)return window.AuthorPage&&window.AuthorPage.isOpen()&&window.cur.articleEditorLayer&&window.cur.articleEditorLayer.hide(!1),window.cur._hardNav?(debugLog("hardNav",strLoc),window.location.href=strLoc,!1):(Nav.setLoc(strLoc,opts),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),debugLog("noHardNav",strLoc,Nav.objLoc.z||Nav.objLoc.w),!1)}if(!opts.nocur&&(vk.loaded||!changed[0])){const e=window.cur.nav||[];for(let t=e.length-1;t>=0;t--){const o=document.URL;if(!1===e[t]((0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(changed),Nav.objLoc,objLoc,opts)){const e=`${locProtocol}//${location.host}/${strLoc}`,n=o===e?"":o;return updateCountersTimeout&&clearTimeout(updateCountersTimeout),updateCountersTimeout=setTimeout(_shared_counters_updateCounters__WEBPACK_IMPORTED_MODULE_17__.updateCounters.pbind(e,n),10),debugLog("curnav",t,objLoc),!1}}}if(4===vk.al||!vk.loaded&&(!window.audioPlayer||!audioPlayer.player)&&changed[0])return debugLog("al4","/"+(strLoc||"").replace("%23","#")),setTimeout((function(){location.href="/"+(strLoc||"").replace("%23","#")}),0),!1;if(window.Upload&&Upload.terminateAllUploads(),(0,_top_search__WEBPACK_IMPORTED_MODULE_24__.topHeaderClose)(),opts.back){if(window.cur._back&&window.cur._back.onBack)return debugLog("_back",strLoc),window.cur._back.onBack(strLoc);for(let e=0,t=globalHistory.length;e<t;e++)if(globalHistory[e].loc===strLoc){const t=globalHistory.splice(e,1)[0],o=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),n=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("title"),i=window.cur._onback;return window.tooltips&&window.tooltips.destroyAll(),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur),window.radioBtns=t.radioBtns,window.ajaxCache=t.ajaxCache,window.PageID=t.pid,boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(),window.cur=t.cur,setTimeout((function(){if(o.innerHTML="",o.parentNode.replaceChild(t.content,o),vk.width===t.width&&vk.width_dec===t.width_dec&&vk.width_dec_footer===t.width_dec_footer||(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageView)(t),(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)(t.scrollTop,0),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.setDocumentTitle)(t.htitle),n&&(n.innerHTML=t.title,(0,_dom__WEBPACK_IMPORTED_MODULE_11__.setStyle)(n.parentNode,"display",t.hideHeader?"none":"block")),t.bodyClass!==document.body.className&&(document.body.className=t.bodyClass||"",vk.body_class=t.bodyClass||""),window.cur._back.show)for(let e=0,t=window.cur._back.show.length;e<t;e++)window.cur._back.show[e]();if(!window.cur.noquickreg&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.isFunction)(window.changeQuickRegButton)&&window.changeQuickRegButton(!1),i)for(let e=0,t=i.length;e<t;e++)i[e]();Nav.setLoc(strLoc,opts);const e=t.back||{};setTimeout((function(){_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.sendBack(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(e[0],e[1],e[2]),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:opts.hist,replace:opts.replace,back:opts.back}),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear()}),10),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying()}),10),debugLog("globalHistory",strLoc),!1}}const dest=objLoc[0];let where;delete objLoc[0];try{const e=/^friends/,t=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_router_friends_check_full_loc_enabled")&&strLoc.match(e)?strLoc:null;where=Nav.getData(dest,t)}catch(e){where=null}if(null===where){if(debugLog("noWhere"),opts.throwErrorOnDisabledPath)throw new Error("AL navigation is disabled for this path");return!0}opts.params&&opts.params._ref||(opts.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(opts.params||{},{_ref:Nav.objLoc[0]||""})),where.files&&window.stManager.add(where.files),where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({__query:dest,al_id:vk.id},objLoc,opts.params||{});const possibleLinkElement=ev?.target,postParamsEl=Nav.getLinkElementWithPostParamsOrLocation(possibleLinkElement,loc),postParams=Nav.getPostParams(postParamsEl,!!where.params._post_click_type);where.params=Nav.mergePostParamsOptions(postParams,where.params),opts.cl_id&&(where.params.fr_click=window.cur.oid+","+opts.cl_id+","+window.cur.options.fr_click),opts.permanent&&(where.params._permanent=opts.permanent);const curNavVersion=++window.NextPageID,done=function({title,html,js,params}){if(opts.isMention&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("post_click_analytics_int_ext_link_click_web")&&_shared_production_stats_click_feed_post_interaction__WEBPACK_IMPORTED_MODULE_36__.feedInteractionItemStatCollector.logEvent({track_code:opts.trackCode??void 0,ref:(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__.resolveRefFromCur)(),item:(0,_web_feed_feed_stats__WEBPACK_IMPORTED_MODULE_41__.getFeedInteractionItemType)()},_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_37__.EventItemType.INT_LINK_CLICK),curNavVersion!==window.NextPageID)return!0;try{params._id=params.id}catch(e){return(0,_ui_util__WEBPACK_IMPORTED_MODULE_14__.topError)(e,{dt:15,type:6,msg:`Error: ${e.message}, (params undefined?), title: ${title}, html: ${html}, js: ${js}`,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(where.params),answer:arguments.length})}const execTqTasks=e=>{params.exec_on_start&&(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_30__.processExecData)(JSON.stringify(params.exec_on_start),e)};window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)();const isReloadRequired=stVersions[window.jsc("web/common_web.js")]>StaticFiles[window.jsc("web/common_web.js")].v||params.force_reload||bugtrackerReloadRequired;if(isReloadRequired){if(Nav.setLoc(params.loc||Nav.strLoc,opts),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.reloadCheckFlood)({force:!0,from:4}))return;if(window.Calls?.isInActiveCall)return;return debugLog("reload",isReloadRequired),void location.reload(!0)}const newPage=void 0===where.params.al_id||where.params.al_id!=params.id||params.fullPage,tNode=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("title");let wNode=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID),_back=window.cur._back,hist=!1;if((strLoc===(window.cur._back||{}).loc||newPage||opts.back)&&(_back=!1),(opts.noback||params.level&&(!window.cur._level||params.level<=window.cur._level)&&!1!==opts.noback)&&(_back=!1,(opts.noback||window.cur._level&&params.level<window.cur._level)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)()),window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),_back){if((0,_video__WEBPACK_IMPORTED_MODULE_19__.revertLastInlineVideo)(null,!0),hist={loc:_back.loc||Nav.strLoc,cur:window.cur,radioBtns:(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(radioBtns),ajaxCache,pid:window.PageID,scrollTop:(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)(),htitle:document.title.toString(),width:vk.width,width_dec:vk.width_dec,width_dec_footer:vk.width_dec_footer,noleftmenu:vk.noleftmenu,notopmenu:vk.notopmenu,nobottommenu:vk.nobottommenu,bodyClass:vk.body_class,back:!(!_tbLink||!_tbLink.loc)&&[_tbLink.loc,(0,_dom__WEBPACK_IMPORTED_MODULE_11__.val)(_tbLink),_tbLink.fast]},tNode&&tNode.parentNode&&!(0,_dom__WEBPACK_IMPORTED_MODULE_11__.isVisible)(tNode.parentNode)&&(hist.hideHeader=!0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.globalHistoryDestroy)(hist.loc),globalHistory.length>2){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(e.cur),e.content.innerHTML=""}if(window.cur._back.hide)for(let e=0,t=window.cur._back.hide.length;e<t;e++)window.cur._back.hide[e]();_back.text&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.showBackLink)(hist.loc,_back.text,1)}else _tbLink&&(_tbLink.fast=0),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur);if(window.PageID=window.NextPageID,(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),window.ajaxCache={},boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),(0,_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__.resetWindowCur)(),window._stlWas=0,newPage){for((0,_dom__WEBPACK_IMPORTED_MODULE_11__.cleanElems)("quick_login_button","quick_expire","search_form","top_links","bottom_nav");globalHistory.length;){const e=globalHistory.shift();(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(e.cur),e.content.innerHTML=""}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("page_header_wrap")[0]||0;pageNode.innerHTML=html,execTqTasks(pageNode),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateHeaderStyles)({width:e}),window._tbLink=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("top_back_link");try{_tbLink.style.maxWidth=_tbLink.parentNode.offsetWidth-35+"px"}catch(e){}_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile||(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(!0)}else{if(_back){const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ce)("div",{id:PAGE_CONTENT_WRAPPER_NODE_ID});(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)(hist,{content:wNode.parentNode.replaceChild(e,wNode),title:tNode?tNode.innerHTML:""}),globalHistory.push(hist),wNode=e}const e=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("dev_top_nav_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("dev_top_nav_wrap")[0]||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)("page_header_wrap")&&(0,_dom__WEBPACK_IMPORTED_MODULE_11__.getSize)("page_header_wrap")[0]||0;wNode&&(wNode.innerHTML=html,execTqTasks(wNode)),e&&!vk.staticheader&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateHeaderStyles)({width:e}),tNode&&(tNode.innerHTML=title,(title?_dom__WEBPACK_IMPORTED_MODULE_11__.show:_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(tNode.parentNode)),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying()}if((0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)(),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageParams)(params),opts.preventScroll||(opts.scrollTop>0?(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToY)(opts.scrollTop,0):opts.noscroll||params.noscroll||(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(0)),Nav.curLoc=params.loc,js){const evalString=`(function(){${js};})()`;if(__debugMode)eval(evalString);else try{eval(evalString)}catch(e){(0,_debug_tools__WEBPACK_IMPORTED_MODULE_10__.logEvalError)(e,evalString)}}window.ajax._framenext(),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile&&(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(),changed.f&&(0,_utils__WEBPACK_IMPORTED_MODULE_26__.handleScroll)(changed.f),Nav.setLoc(params.loc||"",opts),opts.onDone&&opts.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.lTimeout)((function(){(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.chrome?100:50)},clientOnlyDone=function(e,t){if(curNavVersion!==window.NextPageID)return;(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.handlePageView)({width:window.vk.defaultLayout.width,width_dec:window.vk.defaultLayout.widthDec}),adjustStylesToSpa(),window.PageID=window.NextPageID,window.lastScrollTop=(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollGetY)();let o=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.ge)(PAGE_CONTENT_WRAPPER_NODE_ID);window.tooltips&&window.tooltips.destroyAll(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.geByClass)("page_actions_wrap"),((e,t)=>(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)(t))),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hide)("audio_tip_wrap"),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.processDestroy)(window.cur),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(radioBtns,(function(e,t){t.keep||delete radioBtns[e]})),boxQueue.hideAll(!1,!0),layerQueue.clear(),layers.fullhide&&layers.fullhide(!0,!0),(0,_web_lib_cur__WEBPACK_IMPORTED_MODULE_35__.resetWindowCur)(!0),window._stlWas=0,o&&(o.innerHTML=""),(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.checkPageBlocks)(),(0,_stl__WEBPACK_IMPORTED_MODULE_25__.updateSTL)(),(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.updateLeftMenu)(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_23__.updateAriaElements)(),_top_search__WEBPACK_IMPORTED_MODULE_24__.default.clear(),(0,_scroll__WEBPACK_IMPORTED_MODULE_13__.scrollToTop)(0),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.mobile&&(0,_layout_utils__WEBPACK_IMPORTED_MODULE_18__.onBodyResize)(),changed.f&&(0,_utils__WEBPACK_IMPORTED_MODULE_26__.handleScroll)(changed.f),Nav.setLoc(e,t),(Nav.objLoc.z||Nav.objLoc.w)&&(0,_nav_utils__WEBPACK_IMPORTED_MODULE_16__.zNav)({z:Nav.objLoc.z,w:Nav.objLoc.w},{hist:t.hist,replace:t.replace,back:t.back}),t.onDone&&t.onDone(),changed[0]&&(window.vkLastNav=Date.now()),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.lTimeout)((function(){(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.getAudioPlayer)().updateCurrentPlaying(),window.TopMenu.toggle(!1)}),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_21__.browser.chrome?100:50)};window.Page&&(Page.postsSave(),Page.postsSend(),Page.postsClearTimeouts()),(0,_ads__WEBPACK_IMPORTED_MODULE_9__.updSeenAdsInfo)(),(0,_ads__WEBPACK_IMPORTED_MODULE_9__.__adsUpdate)("already"),"im"!==Nav.objLoc[0]&&"im"!==changed[0]||(where.params=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)({},where.params,{_full_page:!0})),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__.subscribeOnModuleEvaluated)((()=>{where.clientOnly&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("send_navigation_stats_in_spa")||(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.sendGo(_shared_navigation_stats__WEBPACK_IMPORTED_MODULE_29__.navigationStat.getModule()),(0,_shared_counters_tmr_moduleChangeHandler__WEBPACK_IMPORTED_MODULE_0__.handleModuleChanged)(window.cur?.module||""))}),!0),Array.isArray(window.cur.beforeNavigateRequestHandlers)&&window.cur.beforeNavigateRequestHandlers.forEach((e=>{"function"==typeof e&&e()})),window.cur.beforeNavigateRequestHandlers=[],__debugMode||(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingStart)();const callDoneFunc=e=>{let t;if(__debugMode)t=done.call(null,e);else{try{t=done.call(null,e)}catch(t){(0,_ui_util__WEBPACK_IMPORTED_MODULE_14__.topError)(t,{dt:15,type:6,url:where.url,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(where.params),js:e.js,answer:Array.prototype.slice.call(arguments).join("<!>")})}(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__.subscribeOnModuleEvaluated)((()=>(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingFinish)()),!0)}return t};if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("special_groups_redirects")&&(0,_spa_web_infrastructure_bookmakers__WEBPACK_IMPORTED_MODULE_40__.processNavigation)(strLoc))return;const performRequest=(e=!1)=>{where.clientOnly?(clientOnlyDone.call(null,strLoc,opts),__debugMode||(0,_shared_metrics_moduleNavigationStats__WEBPACK_IMPORTED_MODULE_3__.handlePageLoadingFinish)(),(0,_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__.triggerSubscribersOnModuleEvaluated)()):window.ajax.post(where.url,where.params,{onDone:async function(){if(e&&"success"===(0,_web_feed_constants_feedPageLoadingState__WEBPACK_IMPORTED_MODULE_4__.getFeedPageLoadingState)().content.requestState)return;callDoneFunc({title:arguments[0],html:arguments[1],js:arguments[2],params:arguments[3]})},onFail:opts.onFail||function(e){if(e)return setTimeout((0,_message_box__WEBPACK_IMPORTED_MODULE_27__.showFastBox)({title:_lang__WEBPACK_IMPORTED_MODULE_28__.getLang("global_error")},e).hide,__debugMode?3e4:3e3),!0},frame:opts.noframe?0:1,canReload:!0,showProgress:opts.showProgress,hideProgress:opts.hideProgress,cache:opts.search?1:""})};if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_navigation_handlers")){let e;for(const t of interseptingNavigationHandlers)try{const o=t({dest,opts,where,performRequest,clientOnlyDone,debugLog,callDoneFunc});if(void 0!==o&&(e=o),e)break}catch(e){(0,_shared_lib_js_logger_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logUnknownError)(e)}if(void 0!==e)return e}return performRequest(),debugLog("nothing"),!1},getLinkElementWithPostParamsOrLocation(e,t){const o=e?.closest("a");return o&&o.getAttribute?o:t&&t.getAttribute?t:null},setLoc:function(e,t={}){const o="boolean"==typeof t?{isForce:t}:t;let n,i;if(n=i=e,"string"==typeof e?i=Nav.fromStr(e):n=Nav.toStr(e),!o.isForce&&(0,_feature_entries__WEBPACK_IMPORTED_MODULE_22__.isArticleLayerOpen)()&&!n.match(/article_edit(-?\d+_\d+)/))return;const r=Nav.strLoc;if(Nav.strLoc=n,Nav.objLoc=i,hab.setLoc(Nav.strLoc,t),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("disable_push_equal_history_location")&&r===n&&!t.replace)return;let s=t.replace?_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Replace:_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Push;t.back&&t.hist&&(s=_vkontakte_internal_router__WEBPACK_IMPORTED_MODULE_45__.Action.Pop);for(const e of locationChangeListeners)e(Nav.strLoc,s)},change:function(e,t=null,o={}){const n=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(Nav.objLoc);return(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(e,(function(e,t){!1===t?delete n[e]:n[e]=t})),Nav.go(n,t,o)},fromStr:function(e){const t=(e=e.split("#"))[0].split("?"),o={0:t[0]||""};return e[1]&&(o["#"]=e[1]),(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.extend)((0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.fromQueryString)(t[1]||""),o)},toStr:function(e){const t=(e=(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.clone)(e))["#"]||"",o=e[0]||"";delete e[0],delete e["#"];const n=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(e);return(n?o+"?"+n:o)+(t?"#"+t:"")},init:function(){window.globalHistory=[],Nav.strLoc=hab.getLoc(),Nav.objLoc=Nav.fromStr(Nav.strLoc)},getPostParams:function(e,t){const o=!(!e||!e.getAttribute),n={};if(!o)return n;const i=e.getAttribute("data-post-id");i&&(n.post_id=i);const r=e.getAttribute("data-parent-post-id");r&&(n.parent_post_id=r);const s=e.getAttribute("data-post-click-type");s&&(n.post_click_type=s);const a=e.getAttribute("mention_id");a&&(n.post_click_mention_id=a);const _=e.getAttribute("data-post-click-cc-key");_&&(n.post_click_cc_key=_);const c=[e.getAttribute("href"),e.getAttribute("data-href")];(0,_utils_common__WEBPACK_IMPORTED_MODULE_7__.each)(c,(function(e,t){if(t&&"#"!==t)return n.post_click_url=t,!1}));if(!!s||t){const t=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("post_adblock_protection_promo")?_web_smoke_guard_smoke_screen_locator__WEBPACK_IMPORTED_MODULE_43__.Locator.getInstance().lookup("._ads_block_data_w"):"._ads_block_data_w",o=e?.closest?.(t),i=o&&(0,_web_feed_feed_attributes_hider__WEBPACK_IMPORTED_MODULE_42__.getAdAttribute)(o,"ad"),r=o&&(0,_web_feed_feed_attributes_hider__WEBPACK_IMPORTED_MODULE_42__.getAdAttribute)(o,"ad-block-uid");i&&(n.ad_data=i),r&&(n.ad_block_unique_id=r)}return n},mergePostParamsOptions:function(e,t){if(t=t||{},!e)return t;function o(e,o,n){const i=n&&t[o];return!(!e||i)&&(t[o]=e,!0)}return o(e.post_id,"_post",!0),o(e.parent_post_id,"_parent_post",!0),o(e.post_click_type,"_post_click_type",!0),t._post_click_type&&(o(e.post_click_mention_id,"_post_click_mention_id",!0),o(e.post_click_cc_key,"_post_click_cc_key",!0),o(e.post_click_url,"_post_click_url",!0),o(e.ad_data,"_post_ad_data",!0)&&o(e.ad_block_unique_id,"_post_ad_block_unique_id")),t},showMoreApps(){const e=getShowMoreAppsContainer();if(!e)return;e.classList.add(SHOW_MORE_APPS_SHOWN_CLASSNAME);getShowMoreAppsButton().classList.add(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME)},showLessApps(){const e=getShowMoreAppsContainer();if(!e)return;e.classList.remove(SHOW_MORE_APPS_SHOWN_CLASSNAME);getShowMoreAppsButton().classList.remove(SHOW_MORE_APPS_BUTTON_HIDDEN_CLASSNAME)},subscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__.subscribeOnModuleEvaluated,unsubscribeOnModuleEvaluated:_web_lib_ajax_module_callback__WEBPACK_IMPORTED_MODULE_44__.unsubscribeOnModuleEvaluated};function getShowMoreAppsContainer(){return document.querySelector(".LeftMenu__moreAppsContainer")}function getShowMoreAppsButton(){return document.querySelector(".LeftMenu__item--showMoreApps")}function authorPageNav(e,t,o){if(o&&cur.backFromAuthorPage)return delete cur.backFromAuthorPage,!0;const n=e.toLowerCase(),i=window.AuthorPage&&window.AuthorPage.isOpen(),r=n.match(/^(?:%40|@)-?[.a-z0-9_]+(?:\?\w+)?([\?&]z\=[a-z0-9-_]+)*$/);if(r)return!!i||(r[1]?cur._hardNav=!0:((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_6__.boxRefreshCoords)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.show)(boxLoader),(0,_dom__WEBPACK_IMPORTED_MODULE_11__.show)(boxLayerWrap),window.stManager.add([window.jsc("web/author_page.js"),window.jsc("web/article_layer.js"),"author_page.css","ui_controls.js","ui_controls.css"],(function(){cur.prevAuthorPageUrl=t,window.AuthorPage.showLayer(n)})),!0));if(i){if(/^article_edit([0-9\-]+)_(\d+)/.test(n))return!1;if(o&&window.AuthorPage.isStandalone())return window.location.reload(!0),!0;const e=window.AuthorPage.close(!0);return void 0!==e?e:!!o}}function articleNav(e,t,o,n,i){const r=e.toLowerCase();if((0,_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__.isArticleURL)(r)){window.isArticleLayerOpen()||(cur.articlePrevLoc=t),window.WkView&&WkView.hide(!0),window.boxQueue&&boxQueue.hideAll(),window.Videoview&&window.Videoview.togglePlay(!1);const e=i?.target,n=e?(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_38__.getBaseDataFromPost)(e):void 0;return window.stManager.add([window.jsc("web/article_layer.js"),"article.css"]).then((()=>new Promise((e=>{ArticleLayer.show(r,!0,!1,{ev:i,onShowDone:()=>{cur.articleSequence=Math.max(1,(cur.articleSequence||0)+(o?-1:1)),e()},trackCode:n?.trackCode,postId:n?.postId,prepareAsync:!0})}))))}if(window.isArticleLayerOpen()){if(o&&ArticleLayer.isStandalone())return window.location.reload(!0),!0;const t=()=>{ArticleLayer.close(),delete cur.articleSequence},i=cur.articlePrevLoc;return delete cur.articlePrevLoc,i&&!_shared_utils_articleCheckURL__WEBPACK_IMPORTED_MODULE_46__.articleURLPattern.test(i)?e===i?(t(),n&&n(),!0):(layers.fullhide=function(){t()},!1):(t(),!0)}return!1}function cleanArticleUrlByObjLoc(e){return e&&e.ref&&delete e.ref,Nav.toStr(e)}function bookmarksNav(e){if(!e)return;const t=(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("bookmarks_rows",e.target),o=!!(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("bookmarks_pages",e.target);if((t||o)&&(o||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_user")||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_group")||(0,_dom__WEBPACK_IMPORTED_MODULE_11__.hasClass)(t,"bookmarks_rows_page"))){let o;if(o=t?(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("_bookmark_page_item",e.target):(0,_dom__WEBPACK_IMPORTED_MODULE_11__.domClosest)("line_cell",e.target),!o)return;(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_32__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"page",item_id:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_8__.intval)((0,_dom__WEBPACK_IMPORTED_MODULE_11__.domData)(o,"id")),time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_5__.getServerTime)()})}}function maybeNavigateAwayLink(e,t){if(e&&e.href&&e.getAttribute&&e.getAttribute("data-change-location-with-post-away")){let o=e.href;const n=Nav.getPostParams(e,!(!t.params||!t.params._post_click_type)),i=Nav.mergePostParamsOptions(n,t.params),r={};return i._post&&(r.post=i._post,i._post_ad_data&&(r.post_ad_data=i._post_ad_data),i._post_click_cc_key&&(r.cc_key=i._post_click_cc_key),o="/away.php?to="+encodeURIComponent(o)+"&"+(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_15__.toQueryString)(r)),o}return null}function maybeNavigateAwayAppFormLink(e){if(!(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("ads_app_form_link_redirect"))return null;if("string"!=typeof e)return null;return e.match(/app\d+_-?\d+\?form_id=\d+/i)?e:null}function adjustStylesToSpa(){document.body.classList.contains("video_showcase")&&document.body.classList.remove("video_showcase");const e="redesign_web_legacy_width";document.body.classList.contains(e)&&document.body.classList.remove(e),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_31__.partConfigEnabled)("web_spa_helpdesk_styles_cleanup")&&(document.body.classList.contains("body_helpdesk")&&document.body.classList.remove("body_helpdesk"),document.body.classList.contains("body_narrow_sidebar")&&document.body.classList.remove("body_narrow_sidebar"))}Nav.addInterseptingNavigationHandler(_web_feed_feedPageLoading_navigationHandler__WEBPACK_IMPORTED_MODULE_39__.feedLoadingNavigationHandler);const __WEBPACK_DEFAULT_EXPORT__=Nav},590335:(e,t,o)=>{"use strict";o.d(t,{rangeCreate:()=>a,rangeGet:()=>r,rangeInsert:()=>_});var n=o(452314),i=o(714209);function r(){let e=null,t=window.getSelection();t.getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0));let o=null,n=null,i=0,r=0,s=document.activeElement;return e&&("selectionStart"in s?(o=s,n=s,i=s.selectionStart,r=s.selectionEnd):t.rangeCount&&(o=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset)),[e,o,i,n,r]}function s(e){let t=window.getSelection();return t.removeAllRanges(),t.addRange(e),e}function a(e,t,o,n){let i=document.createRange();return i.setStart(e,t),i.setEnd(o,n),s(i)}function _(e,t){if(t=t?t+"":"",!i.browser.msie&&document.execCommand)document.execCommand("insertHTML",!1,t);else if(e){e.deleteContents();let o=(0,n.cf)(t),i=o.lastChild;e.insertNode(o),i&&((e=e.cloneRange()).setStartAfter(i),e.collapse(!0),s(e))}return e}},688701:(e,t,o)=>{"use strict";o.d(t,{disableBodyScroll:()=>l,enableBodyScroll:()=>u,scrollGetX:()=>_,scrollGetY:()=>c,scrollToTop:()=>a,scrollToY:()=>s});var n=o(248298),i=o(663878),r=o(452314);function s(e,t,o,a,l){null==t&&(t=400);if("ontouchstart"in document.documentElement&&(t=0),a||(e=Math.max(0,e-(vk.staticheader?0:(0,r.getSize)("page_header_cont")[1]))),(0,r.data)(document.body,"tween")&&(0,r.data)(document.body,"tween").stop(!1),(0,r.data)(htmlNode,"tween")&&(0,r.data)(htmlNode,"tween").stop(!1),window.scrollAnimation=!1,t){const r=function(){window.scrollAnimation=!1,2===o&&("profile"!=cur.module&&"public"!=cur.module&&"group"!=cur.module&&"groups"!=cur.module&&"event"!=cur.module||!window.Wall||Wall.scrollCheck(!1,void 0,!0),(0,n.updSideTopLink)()),"function"==typeof l&&l()};window.scrollAnimation=!0,(0,i.animate)(htmlNode,{scrollTop:e},{duration:t,transition:i.Fx.Transitions.sineInOut,onComplete:r}),(0,i.animate)(document.body,{scrollTop:e},{duration:t,transition:i.Fx.Transitions.sineInOut,onComplete:r})}else{if(o&&2!==o){"profile"!=cur.module&&"public"!=cur.module&&"group"!=cur.module&&"event"!=cur.module||!window.Wall||Wall.scrollCheck(!1,e,!0);const t=c()-e;return Math.abs(t)>6&&s(e+(t>0?6:-6),0,2,!0),(0,n.updSideTopLink)(),clearTimeout(window.scrlToTO),void(window.scrlToTO=setTimeout(s.pbind(e,100,2,!0,l),0))}window.scroll(_(),e),"function"==typeof l&&l(),o||(0,n.updSideTopLink)()}}function a(e){return s(0,e)}function _(){return window.pageXOffset||scrollNode.scrollLeft||document.documentElement.scrollLeft}function c(){return window.pageYOffset||scrollNode.scrollTop||document.documentElement.scrollTop}function l(){document.body.style.overflow="hidden"}function u(){document.body.style.overflow="auto"}},756758:(e,t,o)=>{"use strict";o.d(t,{blockNameEmpty:()=>be,blockNameOwn:()=>Te,blockNameSearch:()=>Ie,blockNameSearchGeoGroups:()=>Ce,blockNameSearchGroups:()=>Pe,clickTypeAddFriendOut:()=>ye,clickTypeJoinGroupOut:()=>fe,clickTypeLeaveGroupOut:()=>ge,clickTypeRemoveFriendOut:()=>ve,generateQID:()=>dt,logLeftMenuClicks:()=>lt,outOfSerpGroup:()=>we,outOfSerpProfile:()=>Ae,removeOutOfSerpClickLogging:()=>st,removeSearchPositionTracker:()=>ct,saveSearchAttemptStats:()=>ut,serviceApps:()=>S,serviceAppsList:()=>C,serviceAppsManage:()=>O,serviceAudio:()=>B,serviceBookmarksGroups:()=>I,serviceBookmarksUsers:()=>P,serviceDocs:()=>R,serviceEvents:()=>m,serviceFriends:()=>E,serviceFriendsFind:()=>g,serviceGamesCatalog:()=>H,serviceGroups:()=>d,serviceGroupsCatalog:()=>p,serviceManage:()=>x,serviceMarketV2:()=>W,serviceMessages:()=>N,serviceNews:()=>b,servicePhotos:()=>k,serviceSearchAudio:()=>T,serviceSearchClips:()=>D,serviceSearchCommunities:()=>h,serviceSearchPeople:()=>f,serviceSearchStatuses:()=>A,serviceSearchVideo:()=>M,serviceTopSearch:()=>L,serviceUserFriends:()=>V,serviceVideo:()=>U,serviceWall:()=>w,serviceWallGroups:()=>v,serviceWallUsers:()=>y,statlogsValueEvent:()=>a.statlogsValueEvent,tryLogOutOfSerpClick:()=>rt});var n=o(7144),i=o(317412),r=o(879007),s=o(452314),a=o(490712),_=o(623702),c=o(258643),l=o(476726);const u={},d="groups",p="groups_catalog",h="search_communities",m="events",E="friends",f="search_people",g="friends_find",y="wall_users",v="wall_groups",w="wall",A="search_statuses",b="news",T="search_audio",I="bookmarks_groups",P="bookmarks_users",C="apps_list",S="apps",O="apps_manage",M="search_video",D="search_clips",L="top_search",k="photos",R="docs",N="messages",B="audio",x="manage",U="video",F="market",W="market_v2",K="market_groups",V="profile_user_friends",H="games_catalog",j="",G="tap",q="join_group",$="leave_group",Y="fave",z="unfave",X="write_msg",Q="add_friend",J="remove_friend",Z="restore_friend",ee="show_photo",te="add",oe="remove",ne="play",ie="open_artist",re="open_author_group",se="open_author_user",ae="open_author",_e="show_similar",ce="search_by_tag",le="edit",ue="like",de="open_comments",pe="share",he="expand",me="mark_as_spam",Ee="stats",fe="join_group_out",ge="leave_group_out",ye="add_friend_out",ve="remove_friend_out",we="group",Ae="profile",be="",Te="own",Ie="search",Pe="search_groups",Ce="search_communities_geo",Se="own_playlists",Oe="global_clips",Me="own_audios",De="search_artists",Le="search_playlists",ke="search_global_playlists",Re="search_audios",Ne="own_conversations",Be="own_messages",xe="own_albums",Ue="own_videos",Fe="video_playlists",We="search_videos",Ke="serps",Ve="SERPS_LOGS_DATA_LOCK",He=180,je=100,Ge="",qe="user",$e="group",Ye="app",ze="event",Xe="public",Qe="grid",Je="list";function Ze(e,t,o,i="",r=void 0,a=void 0){let _=0,c="",l=0,u=1,d=0,p=0;return e&&((0,n.isArray)(o)||(o=[o]),o.some((o=>{const n=e.classList.contains(o)?e:(0,s.gpeByClass)(o,e);let h=0;if(n){let o;if(o=i?document.querySelectorAll(i):n.parentNode.children,o){if(_=[...o].indexOf(n)+1,_&&r)for(const e in r)if(r.hasOwnProperty(e)){const t=document.querySelectorAll(r[e]);if(t){const o=[...t].indexOf(n)+1;if(o){l=o,c=e;break}}u++,h++}if(a)for(const t of a){const o=(0,s.gpeByClass)(t,e);o&&(u=o.getAttribute("data-block-num"))}return[d,p]=t(n,h),!0}}}))),[_,d,p,c,l,u]}function et(e,t,o,n,i,r,a){if(!u[e])return;const _=a.target;if(_&&_.classList)switch(e){case d:return void function(e,t,o,n,i,r){if(!t)return;const a=r.classList,_=r.outerHTML,l=r.tagName;let[,u,d,p,h]=Ze(r,(e=>{let t=e.getAttribute("id")||e.getAttribute("data-id");return t=t?t.replace("gl_groups","").replace("gl_admin",""):0,[0,"-"+t]}),["_gl_row","search_row"],"#groups_list_tab_groups ._gl_row, #groups_list_search_wrap ._gl_row, #results .search_row, #groups_list_search_wrap .search_row",{[Te]:"#groups_list_tab_groups ._gl_row",[Ie]:"#groups_list_search_wrap ._gl_row, #groups_list_search_wrap .search_row"});if(!h)return;p===Te&&(n=0,i="");let m=j;if(a.contains("group_row_title")||a.contains("group_row_img")||a.contains("highlight")||a.contains("search_item_img")||"A"===l&&-1!==_.indexOf("return nav.go")){let e=(0,s.gpeByClass)("group_list_row",r)||(0,s.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=G}(c.FlatButton.isFlatButton(r)&&c.FlatButton.getAppearance(r)!==c.FlatButtonAppearance.SECONDARY||a.contains("search_sub_button"))&&(m=q);(c.FlatButton.isFlatButton(r)&&c.FlatButton.getAppearance(r)===c.FlatButtonAppearance.SECONDARY||a.contains("search_unsub_button"))&&(m=$);if(p===Te&&-1!==_.indexOf("GroupsList.subscribe")){if(a.contains("ui_actions_menu"))return;m=q,!cur.scrollList.deleted[-d]&&(m=$)}if(p===Te&&-1!==_.indexOf("GroupsList.toggleFave")){if(a.contains("ui_actions_menu"))return;m=Y,"1"===r.getAttribute("data-value")&&(m=z)}if(m===j)return;it(),m===G&&nt(we,e,p,h,o,t,d,u,n,i);at(e,p,h,m,o,t,d,u,n,i,Ge)}(e,t,o,n,i,_);case h:return(0,l.partConfigEnabled)("search_communities_web_blocks_enabled")?void function(e,t,o,n,i,r,a){const _=a.classList,c=a.tagName,l=a.outerHTML,u=Boolean(a?.closest(".block_geo_groups"))||Boolean(a?.closest(".search_communities_block.section_page"))?Ce:Pe,d=a?.closest(".search_row")?.dataset?.id||0,p=(()=>{const e=document.querySelector("#results .block_user_groups"),t=document.querySelector("#results .block_other_groups"),o=document.querySelector("#results .block_geo_groups"),n=document.querySelector("#results .search_communities_block.section_page");if(o&&a?.closest(".block_geo_groups")){const e=[...o.querySelectorAll(".search_row")].findIndex((e=>+e?.dataset?.id==+d));if(-1!==e)return e+1}return[...e?.querySelectorAll(".search_row")||[],...t?.querySelectorAll(".search_row")||[],...n?.querySelectorAll(".search_row")||[]].findIndex((e=>+e?.dataset?.id==+d))+1})(),h=document.querySelector("#results .block_geo_groups")?u===Ce?1:2:1;if(!p)return;let m=j;if(_.contains("search_item_img")||_.contains("highlight")||"A"===c&&-1!==l.indexOf("return nav.go")){let e=(0,s.gpeByClass)("groups_row",a);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=G}_.contains("search_sub_button")&&(m=q);_.contains("search_unsub_button")&&(m=$);if(m===j)return;it(),m===G&&nt(we,e,u,p,o,t,d,0,n,i,r,h);at(e,u,p,m,o,t,d,0,n,i,Ge,"",r,h)}(e,t,o,n,i,r,_):void function(e,t,o,n,i,r,a){if(!t)return;const _=a.classList,c=a.outerHTML,l=a.tagName;let[u,d,p]=Ze(a,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row");const h=a?.closest(".search_communities_block.section_page")?Ce:be;if(!u)return;let m=j;if(_.contains("search_item_img")||_.contains("highlight")||"A"===l&&-1!==c.indexOf("return nav.go")){let e=(0,s.gpeByClass)("groups_row",a);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),m=G}_.contains("search_sub_button")&&(m=q);_.contains("search_unsub_button")&&(m=$);if(m===j)return;it(),m===G&&nt(we,e,h,u,o,t,p,d,n,i);at(e,h,u,m,o,t,p,d,n,i,Ge,"",r)}(e,t,o,n,i,r,_);case p:return void function(e,t,o,n,i,r){if(!t)return;const a=r.classList,_=r.outerHTML,c=r.tagName;let[l,u,d]=Ze(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#results .search_row"),p=j;if(a.contains("search_item_img")||a.contains("highlight")||"A"===c&&-1!==_.indexOf("return nav.go")){let e=(0,s.gpeByClass)("groups_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}a.contains("search_sub_button")&&(p=q);a.contains("search_unsub_button")&&(p=$);if(p===j)return;it(),p===G&&nt(we,e,be,l,o,t,d,u,n,i);at(e,be,l,p,o,t,d,u,n,i,Ge)}(e,t,o,n,i,_);case m:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML,c=r.parentElement?r.parentElement.classList:null;let[l,u,d]=Ze(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,"-"+t]}),"search_row","#groups_list_in_tab_search_all .search_row");if(!l)return;let p=j;if(a.contains("search_item_img")||-1!==_.indexOf("return nav.go")&&c&&c.contains("title")){let e=(0,s.gpeByClass)("search_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}a.contains("search_sub_button")&&(p=q);a.contains("search_unsub_button")&&(p=$);if(p===j)return;it(),p===G&&nt(we,e,be,l,o,t,d,u,n,i);at(e,be,l,p,o,t,d,u,n,i,Ge)}(e,t,o,n,i,_);case E:case V:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML,c=r.tagName;let[,l,u,d,p]=Ze(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("friends_user_row",""):0,[0,t]}),"friends_user_row","#list_content .friends_user_row, #friends_search_cont .friends_user_row",{[Te]:"#list_content .friends_user_row",[Ie]:"#friends_search_cont .friends_user_row"});if(!p)return;let h=j;d===Te&&-1!==_.indexOf("showWriteMessageBox")&&(h=X);d===Te&&-1!==_.indexOf("deleteFriend")&&(h=J);d===Te&&a.contains("friends_restore_link")&&(h=Z);a.contains("ui_zoom_icon")&&(h=ee);d===Ie&&r.id&&-1!==r.id.indexOf("friends_subsc")&&(h=Q);d===Ie&&r.id&&-1!==r.id.indexOf("friends_unsubsc")&&(h=J);if(a.contains("friends_photo_img")||d===Te&&"A"===c&&-1!==_.indexOf("return nav.go")||d===Ie&&"A"===c&&0===a.length){let e=(0,s.gpeByClass)("friends_user_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),h=G}if(h===j)return;it(),h===G&&nt(Ae,e,d,p,o,t,u,l,n,i);at(e,d,p,h,o,t,u,l,n,i,Ge)}(e,t,o,n,i,_);case g:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML,c=r.parentElement?r.parentElement.classList:null;if(!t)return;let[l,u,d]=Ze(r,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!l)return;let p=j;if(a.contains("search_item_img")||-1!==_.indexOf("return nav.go")&&c&&c.contains("name")){let e=(0,s.gpeByClass)("people_row",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),p=G}a.contains("search_sub_button")&&(p=Q);a.contains("search_unsub_button")&&(p=J);if(p===j)return;it(),p===G&&nt(Ae,e,be,l,o,t,d,u,n,i);at(e,be,l,p,o,t,d,u,n,i,Ge)}(e,t,o,n,i,_);case f:return void function(e,t,o,n,i,r,a){const _=a.classList,c=a.outerHTML,l=a.parentElement?a.parentElement.classList:null;if(!t)return;let[u,d,p]=Ze(a,(e=>[0,e.getAttribute("data-id")||0]),"search_row","#results .search_row");if(!u)return;let h=j;if(_.contains("search_item_img")||_.contains("AvatarRich")||(-1!==c.indexOf("return nav.go")||-1!==c.indexOf("searcher.openProfileNps"))&&l&&(l.contains("name")||l.contains("img"))){let e=(0,s.gpeByClass)("people_row",a);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),h=G}_.contains("search_sub_button")&&(h=Q);_.contains("search_unsub_button")&&(h=J);if(h===j)return;it(),h===G&&nt(Ae,e,be,u,o,t,p,d,n,i);at(e,be,u,h,o,t,p,d,n,i,Ge,"",r)}(e,t,o,n,i,r,_);case I:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML;let[c,l,u]=Ze(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!c)return;let d=j;if(a.contains("group_link")||a.contains("bookmark_page_item__image")){let e=(0,s.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),d=G}(a.contains("ui_zoom")||a.contains("ui_zoom_icon"))&&(d=ee);-1!==_.indexOf("Bookmarks.removeBookmark")&&(d=z);if(d===j)return;it(),d===G&&nt(we,e,be,c,o,t,u,l,n,i);at(e,be,c,d,o,t,u,l,n,i,Ge)}(e,t,o,n,i,_);case P:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML,[c,l,u]=Ze(r,(e=>{let t=e.getAttribute("data-id");return t||(t=0),[0,t]}),"_bookmark_page_item");if(!c)return;let d=j;if(a.contains("mem_link")||a.contains("bookmark_page_item__image")){let e=(0,s.gpeByClass)("_bookmark_page_item",r);if(!e)return;if(e.hasAttribute("data-clicked"))return;e.setAttribute("data-clicked",!0),d=G}(a.contains("ui_zoom")||a.contains("ui_zoom_icon"))&&(d=ee);-1!==_.indexOf("Bookmarks.removeBookmark")&&(d=z);if(d===j)return;it(),d===G&&nt(Ae,e,be,c,o,t,u,l,n,i);at(e,be,c,d,o,t,u,l,n,i,Ge)}(e,t,o,n,i,_);case T:!function(e,t,o,n,i,r){const a=r.classList,_=r.tagName;let c=(0,s.gpeByClass)("ap_layer_wrap",r);if(c)return;let l=(0,s.gpeByClass)("search_results",r);if(!l)return;let[u,d,p]=Ze(r,(e=>{let t=e.getAttribute("data-full-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_audio_row");if(!u)return;let h=j;(a.contains("audio_row__cover_icon")||a.contains("audio_row__performer_title")||a.contains("audio_row__title")||a.contains("audio_row__title_inner")||a.contains("audio_row__title_inner_subtitle")||a.contains("audio_row__inner")||a.contains("audio_player__place")||a.contains("audio_row__action_next")||a.contains("audio_row__performers"))&&(h=ne);a.contains("audio_row__action_add")&&(h=te);"A"===_&&(h=ie);if(h===j)return;at(e,be,u,h,o,t,p,d,n,i,Ge)}(e,t,o,n,i,_);break;case M:return void function(e,t,o,n,i,r,s){const a=s.classList;let[_,c,l]=Ze(s,(e=>{let t=e.getAttribute("data-id");return t&&t.indexOf("_")?t.split("_"):[0,0]}),"_video_item","#results ._video_item");if(!_)return;let u=j;(a.contains("video_thumb_play")||a.contains("video_item_controls")||a.contains("video_thumb_label_item")||a.contains("video_thumb_label")||a.contains("video_item_title")||a.contains("mv_subtitle"))&&(u=ne);(a.contains("icon_add")||a.contains("video_thumb_action_add")||a.contains("VideoCard__action--add"))&&(u=te);a.contains("icon_added")&&(u=oe);a.contains("group_link")&&(u=re);a.contains("al_need_login")&&(u=ie);a.contains("mem_link")&&(u=se);if(u===j)return;at(e,be,_,u,o,t,l,c,n,i,Ge,"",r)}(e,t,o,n,i,r,_);case D:return void function(e,t,o,n,i,r,s){const a=s.classList;let[_,c,l]=Ze(s,(e=>{let t=e.parentNode.getAttribute("href");return t=t.replace("/clip",""),t&&t.indexOf("_")?t.split("_"):[0,0]}),"ShortVideoGridItem__thumb",".ShortVideoGridItem__thumb");if(!_)return;let u=j;a.contains("ShortVideoGridItem__thumb")&&(u=ne);if(u===j)return;at(e,be,_,u,o,t,l,c,n,i,Ge,"",r)}(e,t,o,n,i,r,_);case B:return void function(e,t,o,n,i,r){const s=r.classList,a=r.tagName,_=r.parentElement?r.parentElement.classList:null,[,c,l,u,d]=Ze(r,((e,t)=>{let o="";switch(t){case 1:case 4:case 2:o=e.getAttribute("data-full-id");break;case 0:case 3:case 6:o=e.getAttribute("data-raw-id")}return o&&o.indexOf("_")?o.split("_"):o?[o,0]:[0,0]}),["_audio_pl_item","audio_block_small_item","_audio_row","_video_item"],"\n        ._audio_section__search ._audio_pl_item,\n        ._audio_section__search ._audio_row,\n        ._audio_section__search .audio_block_small_item,\n        ._audio_section__search .video_item,\n        ._audio_search_blocks ._audio_row,\n        ._audio_search_blocks ._video_item,\n        ._audio_search_blocks ._audio_pl_item,\n        ._audio_search_blocks .audio_block_small_item\n      ",{[Le]:".CatalogBlock__search_global_albums ._audio_pl_item",[Me]:".CatalogBlock__search_owned_audios ._audio_row",[Re]:".CatalogBlock__search_global_audios ._audio_row",[De]:".CatalogBlock__search_global_artists .audio_block_small_item",[Oe]:".CatalogBlock__search_global_clips .video_item",[Se]:'._audio_page_block__playlists_items[data-audio-context="search_owned_playlist"] ._audio_pl_item',[ke]:".CatalogBlock__search_global_playlists ._audio_pl_item"});if(!d)return;let p=j;s.contains("audio_row__action_more")||_&&_.contains("audio_row__actions")||(p=ne);s.contains("audio_row__action_next")&&(p=ne);u===Me&&s.contains("audio_row__action_recoms")&&(p=_e);u===Me&&s.contains("audio_row__action_delete")&&(p=oe);u===Me&&s.contains("audio_row__action_add")&&(p=te);u===Re&&s.contains("audio_row__action_add")&&(p=te);u===Oe&&s.contains("icon_add")&&(p=te);u===Oe&&s.contains("icon_added")&&(p=oe);u===De&&"A"===a&&(p=ie);if(p===j)return;at(e,u,d,p,o,t,l,c,n,i,Ge)}(e,t,o,n,i,_);case L:return void function(e,t,o,n,i,r){const a=r.classList;let _=r;a.contains("ts_contact")||(_=(0,s.gpeByClass)("ts_contact",r,"div#ts_cont_wrap"));let[c,l,u]=Ze(_,(()=>[0,(_.id||"").replace("ts_contact","")]),"ts_contact","#ts_cont_wrap .ts_contact");if(!c)return;let d=G,p=Ge;switch(_.getAttribute("hinttype")){case"h_friends":p=qe,a.contains("ts_contact_status")&&(d=X);break;case"h_mutual_friends":case"s_people":case"h_mail_peers":p=qe;break;case"h_vk_apps":case"h_apps":p=Ye;break;case"h_events":p=ze;break;case"h_publics":p=Xe;break;case"h_visited":case"s_groups":p=$e}at(e,be,c,d,o,t,u,l,n,i,p)}(e,t,o,n,i,_);case U:return void function(e,t,o,n,i,r,s){const a=s.classList;let[,_,c,l,u]=Ze(s,((e,t)=>{let o="";switch(t){case 1:case 3:o=e.getAttribute("data-id");break;case 2:o=e.getAttribute("data-name")}return o&&o.indexOf("_")?o.split("_"):[0,0]}),["video_playlist_item","_video_item","ui_gallery_item"],"\n        #video_layout_search .video_playlist_item,\n        #video_layout_search ._video_item,\n        #video_subtab_pane_search_promo_albums .ui_gallery_item\n      ",{[xe]:"#video_subtab_pane_search_albums .video_playlist_item",[Ue]:"#video_subtab_pane_search_videos ._video_item",[Fe]:"#video_subtab_pane_search_promo_albums .ui_gallery_item",[We]:"#video_subtab_pane_search_global_videos ._video_item"});if(!u)return;let d=j;(a.contains("icon_add")||a.contains("video_thumb_action_add")||a.contains("VideoCard__action--add"))&&(d=te);a.contains("icon_added")&&(d=oe);l===Ue&&a.contains("video_restore_act")&&(d=te);l===Ue&&a.contains("video_thumb_action_delete")&&(d=oe);(a.contains("video_item_title")||a.contains("video_item_controls")||a.contains("video_thumb_label_item")||a.contains("video_thumb_play"))&&(d=ne);a.contains("group_link")&&(d=re);a.contains("al_need_login")&&(d=ie);a.contains("mem_link")&&(d=se);d===j&&l===Fe&&(a.contains("VideoCard__controlsOverlay")||a.contains("VideoCard__title")||a.contains("VideoCard__icon")||a.contains("VideoCard__controlsOverlayText"))&&(d=G);if(d===j)return;at(e,l,u,d,o,t,c,_,n,i,Ge,"",r)}(e,t,o,n,i,r,_);case F:case K:return void function(e,t,o,n,i,r){const a=r.classList;let _=Qe;const c=(0,s.gpeByClass)("market_row_line",r,".marketplace_content_search");c&&(_=Je);const l=_===Qe?"_market_row":"market_row_line";let[u,d,p]=Ze(r,(e=>[0,e.getAttribute("data-id")||0]),l,"#marketplace_content ."+l);if(!u)return;let h=j;switch(_){case Je:(a.contains("market_row_img")||a.contains("link"))&&(h=G),a.contains("market_favourite")&&!a.contains("selected")&&(h=Y),a.contains("market_favourite")&&a.contains("selected")&&(h=z),a.contains("mem_link")&&(h=se),a.contains("group_link")&&(h=re);break;case Qe:h=G,(a.contains("icon")||a.contains("fav"))&&(h=Y)}if(h===j)return;at(e,be,u,h,o,t,p,d,n,i,Ge)}(e,t,o,n,i,_);case W:return void function(e,t,o,n,i,r){const s=r.classList,a="ClassifiedsCatalogProduct__serpItem",[_,c,l]=Ze(r,(e=>[+e.getAttribute("data-owner-id"),+e.getAttribute("data-id")]),a);if(!_)return;let u=j;s.contains("ClassifiedsCatalogProduct__serpTap")&&(u=G);s.contains("MarketplaceCatalogProductFavouriteButton--favorite")&&(u=Y);s.contains("MarketplaceCatalogProductFavouriteButton--notFavorite")&&(u=z);s.contains("ClassifiedsCatalogProduct__serpOwnerGroup")&&(u=re);s.contains("ClassifiedsCatalogProduct__serpOwnerUser")&&(u=se);if(u===j)return;at(e,be,_,u,o,t,l,c,n,i,Ge)}(e,t,o,n,i,_);case N:return void function(e,t,o,n,i,r){let[,s,a,_,c]=Ze(r,(e=>{let t=e.getAttribute("data-peer");return t||(t=0),[0,t]}),"_im_dialog","._im_page_dcontent ._im_dialog",{[Ne]:"._im_page_dcontent ._im_dialog:not(._im_search)",[Be]:"._im_page_dcontent ._im_dialog._im_search"});if(!c)return;at(e,_,c,G,o,t,a,s,n,i,Ge)}(e,t,o,n,i,_);case R:return void function(e,t,o,n,i,r){const s=r.classList,a=r.outerHTML;let[,_,c,l,u]=Ze(r,(e=>{let t=e.getAttribute("id");return t&&(t=t.replace("docs_file_","")),t&&t.indexOf("_")?t.split("_"):[0,0]}),"_docs_item","#docs_list ._docs_item, #docs_search_list ._docs_item",{[Te]:"#docs_list ._docs_item",[Ie]:"#docs_search_list ._docs_item"});if(!u)return;let d=j;l===Ie&&s.contains("docs_add_row")&&(d=te);l===Te&&s.contains("docs_delete_row")&&(d=oe);l===Te&&-1!==a.indexOf("Docs.restoreItem")&&(d=te);l===Te&&s.contains("docs_edit_row")&&(d=le);(s.contains("highlight")||s.contains("docs_item_thumb_img")||s.contains("docs_item_icon")||s.contains("docs_item_name"))&&(d=G);-1!==a.indexOf("Docs.tagSearch")&&(d=ce);if(d===j)return;at(e,l,u,d,o,t,c,_,n,i,Ge)}(e,t,o,n,i,_);case C:case S:return void function(e,t,o,n,i,r){const[s,a,_]=Ze(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_cat_row");if(!s)return;let c=G;if(c===j)return;at(e,be,s,c,o,t,_,a,n,i,Ge)}(e,t,o,n,i,_);case H:return void function(e,t,o,n,i,r){const s=r.classList,[a,_,c]=Ze(r,(e=>[0,e.getAttribute("data-app-id")||0]),"GameCatalogSearchCard");if(!a)return;let l=j;(s.contains("GameCatalogSearchCard__screenshotImg")||s.contains("GameCatalogSearchCard__run")||s.contains("GameCatalogSearchCard__avatar")||s.contains("GameCatalogSearchCard__name"))&&(l=ne);if(l===j)return;at(e,be,a,l,o,t,c,_,n,i,Ge)}(e,t,o,n,i,_);case k:return void function(e,t,o,n,i,r){const[s,a,_]=Ze(r,(()=>{let e=r.getAttribute("href")||"";e=e.replace("/photo","");let t=e.split("_");return 2!==t.length?[0,0]:[t[0],t[1]]}),"page_post_thumb_wrap","._feed_rows .page_post_thumb_wrap");if(!s)return;at(e,be,s,G,o,t,_,a,n,i,Ge)}(e,t,o,n,i,_);case y:case v:case w:case A:case b:return void function(e,t,o,n,i,r){const a=r.classList,_=r.outerHTML,c=(0,s.gpeByClass)("replies",r,".post");if(c)return;let l="feed_row",u="";e!==A&&e!==y&&e!==v||(l="post");e!==y&&e!==v||(u="#page_search_posts .post");const[d,p,h]=Ze(r,(e=>{let t;if(e.classList.contains("post"))t=e;else{const o=e.getElementsByClassName("post");if(0===o.length)return[0,0];t=o[0]}if(!t)return[0,0];const o=(t.getAttribute("data-post-id")||"").split("_");return 2===o.length?o:[0,0]}),l,u);if(!d)return;let m=j;const E=(0,s.gpeByClass)("wall_text",r,".post");(E||a.contains("wall_text"))&&(m=G);(a.contains("author")||a.contains("post_img")||a.contains("copy_author")||a.contains("copy_post_img")||a.contains("_copy_post_img")||a.contains("PostHeader__avatar"))&&(m=ae);const f=(0,s.gpeByClass)("PostHeaderSubtitle__link",r,"_post");(a.contains("rel_date")||a.contains("published_by_date")||f)&&(m=G);const g=(0,s.gpeByClass)("like",r,".post"),w=(0,s.gpeByClass)("PostBottomActionContainer",r,"_post");(g||a.contains("like")||w)&&(m=ue);const b=(0,s.gpeByClass)("comment",r,".post");(b||a.contains("comment"))&&(m=de);const T=(0,s.gpeByClass)("share",r,".post");(T||a.contains("share"))&&(m=pe);a.contains("ui_actions_menu_item")&&-1!==_.indexOf("bookmarkPost")&&(m=Y);a.contains("ui_actions_menu_item")&&-1!==_.indexOf("wall.markAsSpam")&&(m=me);const I=(0,s.gpeByClass)("PostTextMore",r,"_post");I&&(m=he);if(m===j)return;at(e,be,d,m,o,t,h,p,n,i,Ge)}(e,t,o,n,i,_);case x:case O:return void function(e,t,o,n,i,r){const s=r.classList,a=r.tagName,[_,c,l]=Ze(r,(e=>{let t=e.getAttribute("id");return t=t?t.replace("app",""):0,[0,t]}),"_apps_settings_row");if(!_)return;let u=j;s.contains("apps_settings_stats")&&(u=Ee);"A"!==a&&"img"!==a||(u=G);if(u===j)return;at(e,be,_,u,o,t,l,c,n,i,Ge)}(e,t,o,n,i,_)}}function tt(){const e=window.vk.id;let t={[e]:{}};const o=_.vkLocalStorage.getItem(Ke);if(!o)return t;try{t=JSON.parse(o)}catch(e){t={}}return t&&e&&(t={...t,[e]:{...t[e]}}),t}function ot(e){if("locked"===_.vkLocalStorage.getItem(Ve))setTimeout((()=>ot(e)),100);else{_.vkLocalStorage.setItem(Ve,"locked");try{e()}catch(e){}_.vkLocalStorage.setItem(Ve,"free")}}function nt(e,t,o,n,i,r,s,a,c,l,u=!1,d=0){ot((()=>{const p=window.vk.id;let h=Math.round(+new Date/1e3),m=tt();m[p][e]=m[p][e]||{};const E=Object.keys(m[p][e]);if(E.length>=je){let t=E[0],o=m[p][e][t][0];E.forEach((n=>{let i=m[p][e][n][0];i<o&&(o=i,t=n)})),delete m[p][e][t]}m[p][e][s]=[h,t,o,n,i,r,a,c,l,u,d],_.vkLocalStorage.setItem(Ke,JSON.stringify(m))}))}function it(){ot((()=>{let e=tt();if(!e)return;const t=Math.round(+new Date/1e3);Object.keys(e).forEach((o=>{Object.keys(e[o]).forEach((n=>{let i=e[o][n];Object.keys(i).forEach((e=>{let o=i[e][0];t-o>He&&delete i[e]})),e[o][n]=i,0===Object.keys(i).length&&delete e[o][n]}))})),_.vkLocalStorage.setItem(Ke,JSON.stringify(e))}))}function rt(e,t,o){const n=window.vk.id;let i=tt();i[n][e]=i[n][e]||{};const r=i[n][e][t];if(!r)return;Math.round(+new Date/1e3)-r[0]>He?st(!0,e,t):at(r[1],r[2],r[3],o,r[4],r[5],t,r[6],r[7],r[8],Ge,"",r[9],r[10])}function st(e,t,o){e&&ot((()=>{const e=window.vk.id;let n=tt();n[e][t]=n[e][t]||{},n[e][t][o]&&(delete n[e][t][o],_.vkLocalStorage.setItem(Ke,JSON.stringify(n)))}))}function at(e,t,o,n,i,r,s,_,c,l,u,d="",p=!1,h=0){if(!o)return;const m=-(new Date).getTimezoneOffset();(0,a.statlogsValueEvent)("search_position",e,u,n,t,o,p,_,s,r,m,i,c,l,d,h)}function _t(){for(let e in u)u.hasOwnProperty(e)&&ct(e)}function ct(e){if(u[e]){const t=u[e];(0,i.removeEvent)(window,"click",t),delete u[e]}}function lt(e,t){const o=t||e.target.getAttribute("data-stats-key");o&&o.length>0&&(0,a.statlogsValueEvent)("submenu_clicks",0,o)}function ut(e,t,o,n,r="0",s=0,_="0",c="",l=be,d="",p=!1,h=0,m=null,E=0,f=!1){o=o?1:0,r=r&&"0"!==r?r:dt(),f||function(e,t,o,n,i,r,s,_,c="",l=!1,u=0,d=0,p=0){const h=-(new Date).getTimezoneOffset();(0,a.statlogsValueEvent)("search_attempts",e,l,r,n,h,o,s,i,_,t,c,u,d,p)}(e,l,r,n,_,o,s,c,d,p,h,m,E),u[e]&&ct(e);const g=et.pbind(e,n,r,s,c,p);u[e]=g,(0,i.addEvent)(window,"click",g,!1,!1,!0),cur.destroy||(cur.destroy=[]),cur.destroy.some((e=>e===_t))||cur.destroy.push(_t)}function dt(){return(0,r.rand)(-9223372035,9223372035).toFixed(0).concat((0,r.rand)(0,999999999).toFixed(0))}},858367:(e,t,o)=>{"use strict";o.d(t,{initStl:()=>h,updateSTL:()=>g});var n=o(248298),i=o(134020),r=o(240515),s=o(317412),a=o(688701),_=o(452314),c=o(879007),l=o(645024),u=o(448114);let d=!1,p=!0;function h(){const e={onclick:m,onmousedown:E,onmouseover:f,onmouseout:f};(0,_.val)(_stlLeft,`<div id="stl_bg"><div id="stl_text">${(0,u.getIcon24ChevronUp)().icon} ${l.getLang("global_to_top")}</div></div>`),(0,c.extend)(_stlLeft,e),(0,c.extend)(_stlSide,e),window._stlBg=_stlLeft.firstChild,window._stlText=window._stlBg.firstChild,(0,s.addEvent)(window,"blur",(function(){window._wf=-1,d=!1})),(0,s.addEvent)(window,"focus",(function(){window._wf=1,d||(window.__afterFocus=!0,d=!0,setTimeout((function(){window.__afterFocus=!1}),10),p&&((0,n.sbWidth)(!0),(0,i.onBodyResize)(!0),p=!1))}))}function m(e){return(0,s.checkEvent)(e)||(0,s.cancelEvent)(e)}function E(e){if(e=e||window.event,!(0,s.checkEvent)(e)&&!__afterFocus)if(_stlWasSet&&_stlWas){const e=_stlWas;window._stlWas=0,(0,a.scrollToY)(e,0,!0,!0),(0,r.updateLeftMenu)(!0)}else 1===_stlBack?_tbLink.onclick():(window._stlWas=(0,a.scrollGetY)(),(0,a.scrollToY)(0,0,!0,!0),(0,r.updateLeftMenu)())}function f(e){const t=e?e.originalEvent||e:window.event||{},o="mouseover"===t.type&&(t.pageX>0||t.clientX>0);(0,_.toggleClass)(_stlLeft,"over",o),(0,_.toggleClass)(_stlLeft,"over_fast",o&&(0===_stlBack||_tbLink.fast)&&0===_stlWasSet),(0,_.toggleClass)(_stlSide,"over",o)}function g(){const{innerWidth:e}=window,{clientWidth:t}=document.documentElement,o=Math.max((0,c.intval)(e),(0,c.intval)(t));(0,_.toggleClass)(document.body,"no_stl",o<vk.width+280),(0,_.toggleClass)(document.body,"no_sett",o<vk.width+62)}},119243:(e,t,o)=>{"use strict";o.d(t,{sendMask:()=>h,showNarrative:()=>l,showStory:()=>c,storiesPreloadStatic:()=>d});var n=o(20025),i=o(850101),r=o(645024),s=o(134020),a=o(452314);let _=!1;function c(e,t={},o=void 0){if(cur.storiesNotSupported)return(0,n.showFastBox)(r.getLang("global_error"),r.getLang("stories_bad_browser"));clearTimeout(_),_=setTimeout((function(){document.body.appendChild((0,a.ce)("div",{id:"stories_loader",innerHTML:(0,s.getProgressHtml)("stories_loader_pr","pr_baw pr_medium")+'<div class="back"></div>'}))}),1e3);const i=[window.jsc("web/stories.js"),"stories.css",window.jsc("web/emoji.js"),window.jsc("web/videoview.js"),"videoplayer.css"];window.stManager.add(i,(function(){clearTimeout(_),(0,a.re)("stories_loader"),window.Stories.show(e,t,o)}))}function l(e,t,o=0,n="",i={}){c(`${e}${o=o?`_${o}`:""}&${`narrative${t}`}/${n=n||`narrative${e}_${t}`}`,i)}let u=!1;function d(){u||cur.storiesNotSupported||(u=!0,window.stManager.add([window.jsc("web/stories.js"),"stories.css",window.jsc("web/story_publisher.js")]))}let p=!1;function h(e,t,o=!1){p||(p=!0,ajax.post("al_stories.php",{act:"send_mask",mask_id:e,hash:t,is_short_video:o},{loader:!0,onDone:(e,t,o,s)=>{"cant_send"===e?(0,n.showFastBox)({title:t,width:460},o,s):(0,i.showDoneBox)(r.getLang("stories_mask_sent")),p=!1},onFail:()=>(p=!1,(0,n.showFastBox)({title:r.getLang("global_box_error_title")},r.getLang("global_unknown_error")),!0)}))}},810903:(e,t,o)=>{"use strict";o.d(t,{destroyAllTooltips:()=>l,hideAllTooltips:()=>c,showHint:()=>_,showTitle:()=>a,showTooltip:()=>s});var n=o(452314),i=o(317412),r=o(879007);function s(e,t){(vk.loaded||t.noload)&&e&&(e.temphide||(e.temphide=function(){e.showing=!1},(0,i.addEvent)(e,"mouseout",e.temphide)),e.showing=!0,"loadingstat"!==e.tt&&(e.tt||(e.tt="loadingstat"),cur.cancelTooltip=!1,t.stat&&window.stManager.add(t.stat),window.stManager.add([window.jsc("web/tooltips.js"),"tooltips.css"],(function(){"loadingstat"===e.tt&&(e.tt=!1),e.showing&&!cur.cancelTooltip&&(!function(e){e.temphide&&((0,i.removeEvent)(e,"mouseout",e.temphide),(0,n.removeAttr)(e,"temphide"),(0,n.removeAttr)(e,"showing"))}(e),e.tt&&e.tt.el&&!t.force||(tooltips.create(e,t),t.onCreate&&t.onCreate()),tooltips.show(e,t))}))))}function a(e,t,o,i){e=(0,n.ge)(e);if(!o){o=[Math.round(20-(0,n.getSize)(e)[0]/2),8]}s(e,(0,r.extend)({text:function(){return t||e.getAttribute("data-title")},shift:o,black:1},i||{}))}function _(e,t){t=t||{};s(e=(0,n.ge)(e),(0,r.extend)({text:function(){return e.getAttribute("data-title")},dir:"auto",width:300,shift:[22,8]},t))}function c(e){tooltips.hideAll(e)}function l(e){tooltips.destroyAll(e)}},621684:(e,t,o)=>{"use strict";o.d(t,{default:()=>v,topHeaderClearClose:()=>g,topHeaderClose:()=>f});var n=o(452314),i=o(7144),r=o(402366),s=o(317412),a=o(879007),_=o(723561),c=o(645024),l=o(507035),u=o(756758),d=o(33068),p=o(781596),h=o(476726),m=o(793241),E=o(388078);function f(e,t){window.headerDestroy&&window.headerDestroy(t),window.headerDestroy=e}function g(){delete window.headerDestroy}const y={searchLinkId:"ts_search_link",cache:{},lists:{},maxItems:8,init:function(){if(this.inited)return!1;const e=(0,n.ge)("ts_input"),t=(0,n.ge)("ts_cont_wrap");if(vk.id&&Chat.init(),!e)return!1;(0,s.addEvent)(e,"focus",(function(){y.deselect(),(0,a.trim)((0,n.val)(this))&&(0,n.addClass)(t.firstChild,"active"),y.toggleInput(!0)})),(0,s.addEvent)(e,"keydown",(function(o){switch(o.keyCode){case s.KEY.DOWN:case s.KEY.UP:y.moveSelection(o.keyCode),(0,s.cancelEvent)(o);break;case s.KEY.ENTER:const i=(0,n.geByClass1)("active",t);if(i)y.select(i,o);else{const t=(0,a.trim)((0,n.val)(this));t&&(e.blur(),y.clear(),y.toggleInput(!1),nav.go("/search?c[section]=auto&c[q]="+encodeURIComponent(t)))}(0,s.cancelEvent)(o);break;case s.KEY.TAB:y.clear(),y.toggleInput(!1),(0,_.cancelStackFilter)("top_search",!0)}})),vk.id&&((0,s.addEvent)(e,"keyup",(function(e){switch(e.keyCode){case s.KEY.DOWN:case s.KEY.UP:case s.KEY.ENTER:case s.KEY.ESC:(0,s.cancelEvent)(e);break;default:y.prepareRows((0,a.trim)((0,n.val)(this)))}})),(0,s.addEvent)(e,"paste",(function(){setTimeout((function(){y.prepareRows((0,a.trim)((0,n.val)(e)))}),10)})),(0,s.addEvent)(document,"mousedown",(function(e){(0,s.checkKeyboardEvent)(e)||(0,n.domClosest)("top_audio_layer_place",e.target)||(0,n.domClosest)("_ap_layer__close",e.target)||(0,n.domClosest)("layer_wrap",e.target)||(0,n.domClosest)("PortalNavigation",e.target)||(0,n.domClosest)("PortalNavigationDropdown",e.target)||(0,n.domClosest)("ObsceneTextAlertBox",e.target)||f()})),this.inited=!0)},clear:function(){window.tooltips&&tooltips.destroyAll((0,n.ge)("ts_cont_wrap"));const e=(0,n.ge)("ts_input");e&&((0,n.val)(e,""),e.blur(),this.prepareRows())},select:function(e,t,o){if((0,s.checkEvent)(t))return!0;const i=(0,n.ge)("ts_input"),r=(0,a.trim)((0,n.val)(i)).length,_=e.getAttribute("hinttype");if(this.clear(),f(),r||i.blur(),o&&(0,n.hasClass)(t.target,"ts_contact_status"))return ajax.post("al_search.php",{act:"save_metrics",ql:r,mk:"chat_box"}),window?.reforgedME?.selectPeer?window.reforgedME.selectPeer(o,"global_search"):this.writeBox(o),!1;const c=nav.go(e,t,{params:{search_string:cur.tsStr||""}});return ajax.post("al_search.php",{act:"save_metrics",ql:r,mk:_}),c},deselect:function(){const e=(0,n.ge)("ts_cont_wrap");(0,a.each)((0,n.geByClass)("active",e),((e,t)=>(0,n.removeClass)(t,"active")))},itemOver:function(e,t,o){1===t&&y.deselect();const i=(0,a.inArray)(e.getAttribute("hintType"),["h_friends","h_correspondents","h_chats"]);(0,n.toggleClass)(e,"write",i),(0,n.toggleClass)(e,"active",t)},moveSelection:function(e){const t=(0,n.ge)("ts_cont_wrap"),o=(0,n.geByClass1)("active",t);let i;switch(e){case s.KEY.UP:i=!!o&&(this.getNextNode(o,-1,"a")||o);break;case s.KEY.DOWN:i=o?this.getNextNode(o,1,"a")||o:t.firstChild}return this.deselect(),i&&(0,n.addClass)(i,"active"),!1},getNextNode:function(e,t,o){let i=e;const r=(0,n.domPN)(e);for(;;){if(i=t>0?(0,n.domNS)(i):(0,n.domPS)(i),i||(i=t>0?(0,n.domFC)(r):(0,n.domLC)(r)),o&&i.tagName&&i.tagName.toLowerCase()===o||!o&&i)return i;if(i===e)return!1}},toggleInput:function(e){e=!!e;const t=(0,n.ge)("ts_cont_wrap");(0,n.isVisible)(t)!==e&&((0,n.toggle)("ts_cont_wrap",e),e&&(0,_.cancelStackPush)("top_search",(function(){const e=(0,n.ge)("ts_input");y.toggleInput(!1),e.blur()}),!0))},getList:function(e){switch(e){case"friends":return((0,i.isObject)(this.lists.friends)&&!(0,a.isEmpty)(this.lists.friends)?this.lists.friends:this.topFriends)||{};case"publics":case"events":case"groups":case"apps":case"chats":case"search":return this.lists[e]||{}}return{}},onlines:function(){return window.curFastChat&&curFastChat.onlines||this.lists.onlines||{}},getSimilarQueries:function(e){const t=[e=e.toLowerCase()];let o;return(o=(0,c.parseLatin)(e))&&t.push(o),(o=(0,c.parseLatKeys)(e))&&t.push(o),(o=(0,c.parseCyr)(e))&&t.push(o),t},searchCache:function(e,t){const o=y.getList(e);if(!t)return!1;const n=this.getSimilarQueries(t);if(void 0!==this.cache[e][t])return n;const r=this.cache[e][t]={};(0,a.each)(n,((t,n)=>{const s=this.cache[e][" "+n.charAt(0).toLowerCase()];if(s){const e=new RegExp("(^|[\\s\\-\\(\\)\\.,;|:]+)"+(0,a.escapeRE)(n),"gi");(0,a.each)(s,(t=>{const n=o[t+"_"];if(!(0,i.isArray)(n))return!0;null!==n[0].match(e)&&(r[t]=1)}))}}));let s=0;return(0,a.each)(r,(()=>s++)),r._num=s,n},updateCache:function(e,t,o){const n=t||this.getList(e);this.cache[e]=o&&this.cache[e]||{},(0,a.each)(n,((t,o)=>{const n=o[0],i=(0,a.intval)(t),r=n.split(/[\s\-\(\)\.,;|:]+/);(0,a.each)(r,((t,o)=>{const n=" "+o.charAt(0).toLowerCase();this.cache[e][n]=this.cache[e][n]||{},this.cache[e][n][i]=1}))}))},listSearch:function(e,t,o,n){const i=[];let r={};return t?(y.searchCache(e,t),r=y.cache[e]&&y.cache[e][t]||{}):(0,a.each)(y.getList(e),(function(e){const t=(0,a.intval)(e);r[t]=1})),(0,a.each)(y.getList(e),(function(e){const t=(0,a.intval)(e),s=r[t];if((!n||!n[t])&&s)return!!o--&&void i.push([t,this])})),i},row:function(e,t,o,n,i,r,s,_,c,u=!1){let p=0;if(r&&(n=n.replace(r,'$1<em class="ts_clist_hl">$2</em>')),(0,a.inArray)(s,["h_friends","h_correspondents","h_chats"])&&(p=e),_||(_=""),c=(0,a.intval)(c)){let t="";1&c&&(t+="page_verified "),2&c&&(t+="page_top_author "),8&c&&9!=c&&(t+="page_verified page_verified_by_services "),c=`<div class="${t}" onmouseover="pageVerifiedTip(this, {type: ${c}, oid: ${e}})"></div>`}else c="";let E="";p&&(E=(0,d.getIcon16MessageOutline)().icon);return`\n<a href="${t}" class="ts_contact clear_fix" id="ts_contact${e}" onclick="return TopSearch.select(this, event, ${p});" onmousedown="event.cancelBubble = true;"\n      onmouseover="TopSearch.itemOver(this, 1, event);"  onmouseout="TopSearch.itemOver(this, 0, event);" hinttype="${s}">\n  ${(0,h.partConfigEnabled)("avatar_component_refactor_web")?(0,m.renderAvatarToString)(o,34,"","ts_contact_photo",i,"",!1,e,n,u):`\n        <span class="ts_contact_photo ${(0,l.onlinePlatformClass)(i)}">\n            <img class="ts_contact_img" src="${o}" alt="" />\n        </span>\n    `}\n  <span class="ts_contact_name fl_l">\n    <div class="ts_contact_title_wrap${c?" is_verified":""}">\n      <span class="ts_contact_title">${n}</span>\n    </div>${c}\n    <div class="ts_contact_info">${_}</div>\n  </span>\n  <div class="ts_contact_status">${E}</div>\n</a>`},searchLists:function(e){let t={};return t=e?{friends:{order:0,count:y.maxItems-1,label:c.getLang("global_friends")},groups:{order:1,count:4,label:c.getLang("global_communities")},publics:{count:2,parent:"groups"},events:{count:1,parent:"groups"},apps:{order:2,count:1,label:c.getLang("global_apps")},vk_apps:{order:2,count:1,label:c.getLang("global_apps")},chats:{order:3,count:y.maxItems-1,label:c.getLang("global_chats")},search:{order:4,count:y.maxItems-1,label:c.getLang("head_search_results")}}:{friends:{order:0,count:y.maxItems,label:c.getLang("global_friends")}},t},initListsHtml:function(){y.listsHtml=[]},addToListsHtml:function(e,t,o){const n=y.searchLists(o),i=n[(n[e]||{}).parent||e]||{},r=i.order||0,s=i.label||"";y.listsHtml[r]=y.listsHtml[r]||(o&&s?[`<div class="ts_search_sep">${s}</div>`]:[]),y.listsHtml[r].push(t)},searchLinkHtml:function(e,t,o,n){return`<a href="${(0,a.clean)(e)}" class="ts_search_link${n?" ts_search_link_sep":""} clear_fix active" id="${(0,a.clean)(o)}" onclick="return TopSearch.select(this, event);" onmousedown="event.cancelBubble = true;" onmouseover="TopSearch.itemOver(this, 1, event);" onmouseout="TopSearch.itemOver(this, 0, event);" >\n        <span class="ts_search_link__label">${t}</span>\n        <span class="ts_search_link__icon">${(0,p.getIcon16Chevron)().icon}</span>\n      </a>`},htmlRows:function(e){let t="";const o=y.listsHtml.map((e=>e.join(""))).join("");if(e){const o="#"===e[0],n=`/search?c[section]=${o?"statuses":"auto"}&c[q]=${encodeURIComponent(e)}`,i=o?c.getLang("global_news_search_results"):c.getLang("global_show_all_results");t=y.searchLinkHtml(n,i,y.searchLinkId)}return t+o},prepareRows:function(e){let t=y.maxItems;const o=(0,n.ge)("ts_cont_wrap");if(!o||!vk.id)return!1;if(cur.tsStr&&cur.tsStr===e&&!y.forceUpdate)return!1;delete y.forceUpdate,y.initListsHtml();const i={};if(e){const o=[];(0,a.each)(this.getSimilarQueries(e),(function(){o.push((0,a.escapeRE)(this))})),cur.lastRe=new RegExp("([ -]|^|s|&nbsp;|\b)("+o.join("|")+")","gi"),t--}(0,a.each)(y.searchLists(e),(function(o,r){if(!y.cache[o])return;const s=r.count,_=y.listSearch(o,e,s,i),c=[];let l=0;(0,a.isEmpty)(_)||((0,a.each)(_,((e,o)=>{if(!t||l>=s)return!1;c.push(o),t--,l++})),c.length&&(0,a.each)(c,((t,r)=>{const s=r[1],_=(0,a.intval)(r[0]),c=!!E.Ranges.isUserIdTransitional(_)&&y.onlines()[_],[l,u,d,p,h,m,f=!1]=s,g="search"===o?p:"h_"+o,v=y.row(_,d,u,l,c,n.re,g,h,m,f);y.addToListsHtml(o,v,e),i[_]=1})))})),o.innerHTML=y.htmlRows(e),e||(0,u.removeSearchPositionTracker)(u.serviceTopSearch),!t&&e&&"#"!==e[0]&&(0,u.saveSearchAttemptStats)(u.serviceTopSearch,0,!0,e),t&&e&&"#"!==e[0]&&this.hintsSearch(e,cur.lastRe||!1),(e||""===e)&&(cur.tsStr=e)},hintsSearch:function(e,t){const o=(0,n.ge)("ts_input"),i=(0,n.ge)("ts_cont_wrap");let r;const s=+new Date;ajax.post("al_search.php",{act:"get_pages_hints",q:e},{cache:1,onDone:function(_,c){if((0,a.trim)((0,n.val)(o))!==e)return!1;if(!_)return!1;let l=y.maxItems-(0,n.geByClass)("ts_contact",i).length-1;const d=l,p={};(0,a.each)(_,(function(o,i){const s=(0,a.intval)(o),[_,c,u,d,h,m,E=!1]=i,f=y.searchLists(e),g=d.replace("h_","");let v=(f[g]||{}).parent||g;if(void 0===f[v]&&(v="search"),p[v]=p[v]||{},p[v][o]=i,y.lists[v]=y.lists[v]||{},y.lists[v][o]=i,(0,n.ge)("ts_contact"+s))return!0;if(!l--)return!1;const w=y.row(s,u,c,_,!1,t,d,h,m,E);return y.addToListsHtml(v,w,e),r=!0,!0}));const h=+new Date-s;if((0,u.saveSearchAttemptStats)(u.serviceTopSearch,0,d!==l,e,0,c,h),(0,a.each)(p,((e,t)=>y.updateCache(e,t,!0))),r){const t=(0,n.geByClass1)("active",i),o=t?t.id:"";i.innerHTML=y.htmlRows(e),o&&(0,n.ge)(o)&&(0,n.addClass)((0,n.ge)(o),"active")}}})},writeBox:function(e){window.curFastChat&&curFastChat.inited&&window.FastChat?window.FastChat.selectPeer(e,!1,{entrypoint:"fastchat_global_search"}):E.Ranges.isUserIdTransitional(e)?(0,r.showWriteMessageBox)(!1,e):nav.go("/im?sel="+e)}},v=y},248298:(e,t,o)=>{"use strict";o.d(t,{actionsMenuItemLocked:()=>f,buttonLocked:()=>I,checkbox:()=>M,createButton:()=>E,disable:()=>D,disableButton:()=>C,disableEl:()=>B,enableEl:()=>x,hideProgress:()=>N,initUiHelpers:()=>U,isButtonLocked:()=>P,isChecked:()=>O,linkLocked:()=>v,lockActionsMenuItem:()=>g,lockButton:()=>b,lockLink:()=>w,notaBene:()=>h,radiobtn:()=>k,radioval:()=>L,sbWidth:()=>S,showProgress:()=>R,unlockActionsMenuItem:()=>y,unlockButton:()=>T,unlockLink:()=>A,updSideTopLink:()=>m});var n=o(452314),i=o(317412),r=o(879007),s=o(688701),a=o(663878),_=o(714209),c=o(645024),l=o(258643),u=o(448114),d=o(970263),p=o(377803);function h(e,t,o){if(!(e=(0,n.ge)(e)))return;if(e.classList.contains("selector_container"))return e.classList.add("selector_container--error"),void setTimeout((()=>{e.classList.remove("selector_container--error")}),700);(e.classList.contains("vkuiInput__el")||e.classList.contains("vkuiTextarea__el"))&&(e=e.parentNode),o||(0,n.elfocus)(e),void 0===(0,n.data)(e,"backstyle")&&(0,n.data)(e,"backstyle",e.style.backgroundColor||"");const i=(0,n.data)(e,"back")||(0,n.data)(e,"back",(0,n.getStyle)(e,"backgroundColor")),r={notice:p.default.colorBackgroundNegativeTint.normal.value,warning:p.default.colorBackgroundNegativeTint.normal.value};(0,n.setStyle)(e,"backgroundColor",r[t]||t||r.warning),setTimeout((()=>(0,a.animate)(e,{backgroundColor:i},300,(function(){e.style.backgroundColor=(0,n.data)(e,"backstyle")}))),400)}function m(e){if(!window.scrollNode||_.browser.mobile||!window._tbLink)return;const t=(0,n.ge)("page_body");if(!t)return;const o=(0,n.getXY)(t);let i=(0,s.scrollGetY)();const r=document.body.scrollLeft,l=(0,n.ge)("side_bar"),p=(0,n.isVisible)(l);if(window._stlSideTop=Math.max((p?(0,n.getSize)(l)[1]:0)-i-(_.browser.mozilla?(0,n.getXY)(pageNode)[1]:0),o[1]),e||r!=__scrLeft){const e=(0,n.ge)("page_layout"),i=vk.rtl?e.offsetLeft+e.offsetWidth:0,s=vk.rtl?(window.lastWindowWidth||0)-i:e.offsetLeft;(0,n.setStyle)(_stlLeft,{width:Math.max(s-1,0)});const a=vk.rtl?o[0]+t.offsetWidth+5:s,_=vk.rtl?i-a:o[0]-5-a;(0,n.setStyle)(_stlSide,{left:a-r,width:Math.max(_,0)}),__scrLeft=r}(0,n.setStyle)(_stlSide,{top:_stlSideTop,height:Math.max((window.lastWindowHeight||0)-_stlSideTop,0)}),__adsUpdate();const h=200,m=_tbLink.loc||_stlWas||i>h,E=i>250&&cur._regBar;let f=0,g=!1;if(m){1!==_stlShown&&(_stlLeft&&(_stlLeft.style.display="block"),_stlSide&&(_stlSide.style.display="block"),(0,n.addClass)(_stlLeft,"stl_active"),(0,n.addClass)(_stlSide,"stl_active"),_stlShown=1),_tbLink.loc&&cur._noUpLink&&(i=0),_stlWas&&i>500&&(_stlWas=0),i>h?(f=(i-h)/h,(_stlWasSet||_stlBack)&&(_stlWasSet=_stlBack=0,g=1,(0,n.val)(_stlText,`${(0,u.getIcon24ChevronUp)().icon} ${c.getLang("global_to_top")}`))):(f=(h-i)/h,_stlWas?_stlWasSet||(_stlWasSet=1,g=0,(0,n.val)(_stlText,(0,d.getIcon24ChevronDown)().icon),_stlBack&&(_stlBack=0)):_tbLink.loc&&(_stlBack||(_stlBack=1,g=_tbLink.fast?1:0,(0,n.val)(_stlText,c.getLang("global_back")),_stlWasSet&&(_stlWasSet=0)))),!1!==g&&(0,n.toggleClass)(_stlLeft,"over_fast",(0,n.hasClass)(_stlLeft,"over")&&g);const e={opacity:Math.min(Math.max(f,0),1)};vk.staticheader&&(e.top=-Math.min((0,n.getSize)("page_header_cont")[1],i)),(0,n.setStyle)(_stlLeft,e)}else 0!==_stlShown&&(_stlLeft&&(_stlLeft.style.display="none"),_stlSide&&(_stlSide.style.display="none"),_stlShown=0);vk.id||(!_regBar&&E?(_regBar=1,(0,n.val)((0,n.ge)("reg_bar_content"),cur._regBar),(0,a.animate)((0,n.ge)("reg_bar"),{top:0,transition:a.Fx.Transitions.sineInOut},400),(0,a.animate)((0,n.ge)("stl_bg"),{paddingTop:60,transition:a.Fx.Transitions.sineInOut},400)):_regBar&&!E&&(_regBar=0,(0,a.animate)((0,n.ge)("reg_bar"),{top:-56,transition:a.Fx.Transitions.sineInOut},400),(0,a.animate)((0,n.ge)("stl_bg"),{paddingTop:13,transition:a.Fx.Transitions.sineInOut},400)))}function E(e,t){if(!(e=(0,n.ge)(e))||e.btnevents)return;if((0,n.hasClass)(e,"flat_button"))return void((0,r.isFunction)(t)&&(e.onclick=t.pbind(e)));const o=e.parentNode;if((0,n.hasClass)(o,"button_blue")||(0,n.hasClass)(o,"button_gray"))return void((0,r.isFunction)(t)&&(e.onclick=t.pbind(e)));let s=!1;(0,i.addEvent)(e,"click mousedown mouseover mouseout",(function(r){if(!(0,n.hasClass)(o,"locked"))switch(r.type){case"click":if(!s)return;return e.className="button_hover",t(e),(0,i.cancelEvent)(r);case"mousedown":e.className="button_down";break;case"mouseover":s=!0,e.className="button_hover";break;case"mouseout":e.className="button",s=!1}})),e.btnevents=!0}function f(e){const t=(0,n.ge)(e);if(t)return(0,n.hasClass)(t,"ui_actions_menu_item_lock")}function g(e){if((e=(0,n.ge)(e))&&!e.classList.contains("ui_actions_menu_item_lock")){if(e.classList.contains("ui_actions_menu_item_with_icon"))return e.classList.add("ui_actions_menu_item_lock"),void R(e);if((0,n.hasClass)(e,"ui_actions_menu_item")){(0,n.data)(e,"inner",e.innerHTML),(0,n.addClass)(e,"ui_actions_menu_item_lock");const t=(0,n.ce)("div",{className:"ui_actions_menu_item_lock_text"});(0,n.val)(t,e.innerHTML),e.appendChild(t),R(e)}}}function y(e){if((e=(0,n.ge)(e))&&e.classList.contains("ui_actions_menu_item_lock"))return e.classList.contains("ui_actions_menu_item_with_icon")?(e.classList.remove("ui_actions_menu_item_lock"),void N(e)):void((e=(0,n.ge)(e))&&(0,n.hasClass)(e,"ui_actions_menu_item")&&(0,n.hasClass)(e,"ui_actions_menu_item_lock")&&((0,n.removeClass)(e,"ui_actions_menu_item_lock"),e.innerHTML=(0,n.data)(e,"inner")))}function v(e){const t=(0,n.ge)(e);if(t)return(0,n.hasClass)(t,"link_lock")}function w(e,t){const o=(0,n.ge)(e);o&&"a"===o.tagName.toLowerCase()&&!v(o)&&((0,n.addClass)(o,"link_lock"),t&&(0,r.each)(t,((e,t)=>(0,n.addClass)(o,t))))}function A(e,t){const o=(0,n.ge)(e);o&&v(o)&&((0,n.removeClass)(o,"link_lock"),t&&(0,r.each)(t,((e,t)=>(0,n.removeClass)(o,t))))}function b(e){const t=(0,n.ge)(e);if(!t)return;if(l.FlatButton.isFlatButton(t))return l.FlatButton.lock(t);if("button"!==t.tagName.toLowerCase()&&!(0,n.hasClass)(t,"flat_button")&&!(0,n.hasClass)(t,"wr_header")||P(t))return;const o=(0,n.getSize)(t);(0,n.addClass)(t,"flat_btn_lock"),(0,n.data)(t,"inner",t.innerHTML),(0,n.setStyle)(t,{width:o[0],height:o[1]}),t.innerHTML="",R(t,"btn_lock")}function T(e){const t=(0,n.ge)(e);if(t)return l.FlatButton.isFlatButton(t)?l.FlatButton.unlock(t):void(P(t)&&(N(t),t.innerHTML=(0,n.data)(t,"inner"),(0,n.removeClass)(t,"flat_btn_lock"),(0,n.setStyle)(t,{width:null,height:null})))}function I(e){return P(e)}function P(e){const t=(0,n.ge)(e);if(t)return l.FlatButton.isFlatButton(t)?l.FlatButton.isLocked(t):(0,n.hasClass)(t,"flat_btn_lock")}function C(e,t){const o=(0,n.ge)(e);if(o&&"button"===o.tagName.toLowerCase()){if(l.FlatButton.isFlatButton(o))return l.FlatButton.setDisabled(o,t);if(t){if(!(0,n.isVisible)(o))return;o.parentNode.insertBefore((0,n.ce)("button",{innerHTML:o.innerHTML,className:o.className+" button_disabled"}),o),(0,n.hide)(o)}else{const e=(0,n.domPS)(o);e&&(0,n.hasClass)(e,"button_disabled")&&(0,n.re)(e),(0,n.show)(o)}}}function S(e){if(void 0===window._sbWidth||e){const e=(0,n.ce)("div",{innerHTML:'<div style="height: 75px;">1<br>1</div>'},{overflowY:"scroll",position:"absolute",width:"50px",height:"50px"});document.body.appendChild(e),window._sbWidth=Math.max(0,e.offsetWidth-e.firstChild.offsetWidth-1),document.body.removeChild(e)}return window._sbWidth}function O(e){return(e=(0,n.ge)(e))&&(0,n.hasClass)(e,"on")?1:""}function M(e,t){const o=(0,n.ge)(e);if(o&&!(0,n.hasClass)(o,"disabled"))return void 0===t&&(t=!O(o)),(0,n.toggleClass)(o,"on",t),o.setAttribute("aria-checked",t?"true":"false"),!1}function D(e,t){return e=(0,n.ge)(e),void 0===t&&(t=!(0,n.hasClass)(e,"disabled")),(0,n.toggleClass)(e,"disabled",t),"INPUT"===e.tagName&&(t?e.setAttribute("readonly","readonly"):e.removeAttribute("readonly")),!1}function L(e){return!!radioBtns[e]&&radioBtns[e].val}function k(e,t,o){if(radioBtns[o]&&!(0,n.hasClass)(e,"disabled"))return(0,r.each)(radioBtns[o].els,(function(){this&&(this==e?((0,n.addClass)(this,"on"),this.setAttribute("aria-checked","true"),this.setAttribute("tabindex","0")):((0,n.removeClass)(this,"on"),this.setAttribute&&(this.setAttribute("aria-checked","false"),this.setAttribute("tabindex","-1"))))})),radioBtns[o].val=t}function R(e,t,o,i){if(!(e=(0,n.ge)(e)))return;let r;return(0,n.hasClass)(e,"pr")?r=e:(r=(0,n.se)((0,n.rs)(vk.pr_tpl,{id:t||"",cls:o||""})),i?(0,n.domInsertBefore)(r,e):e.appendChild(r)),setTimeout((function(){(0,n.setStyle)(r,{opacity:1})})),r}function N(e){e&&((0,n.hasClass)(e,"pr")?(0,n.setStyle)(e,{opacity:0}):(0,n.re)((0,n.geByClass1)("pr",e)))}function B(e){(0,n.setStyle)(e,"pointer-events","none")}function x(e){(0,n.setStyle)(e,"pointer-events","")}function U(){window.__scrLeft=0,window.radioBtns={}}},357889:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{showGlobalPrg:()=>showGlobalPrg,showMsg:()=>showMsg,topError:()=>topError,topMsg:()=>topMsg});var _dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(452314),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(476726),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(568352),_shared_lib_sentry_config__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(65689),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(879007),_vkontakte_internal_vkcom_kit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(377803);function topMsg(e,t,o){if(o||(o=_vkontakte_internal_vkcom_kit__WEBPACK_IMPORTED_MODULE_5__.default.colorBackgroundSecondary.normal.value),e){clearTimeout(window.topMsgTimer);const n=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("system_msg");n.style.backgroundColor=o,n.innerHTML=e,(0,_dom__WEBPACK_IMPORTED_MODULE_0__.show)(n),t&&(window.topMsgTimer=setTimeout(topMsg.pbind(!1),1e3*t))}else(0,_dom__WEBPACK_IMPORTED_MODULE_0__.hide)("system_msg")}function topError(text,opts){const prefix="VK error: ";opts||(opts={});let hasDummyStacktrace=!opts.stack;if(text.message){const e=text;text="<b>JavaScript error</b>"+((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_1__.partConfigEnabled)("extended_client_logging")?": "+e.message:""),opts.stack=e.stack,e.stack&&__debugMode&&(text+="<br/>"+e.stack.replace(/\n/g,"<br/>"));try{console.error(prefix,e.message),console.log(e.stack)}catch(e){}}else try{console.error(prefix,text)}catch(e){}if(!opts.stack){hasDummyStacktrace=!0;try{eval("0 = 1")}catch(e){opts.stack=e.stack}}if(-1!=opts.dt&&topMsg(text,opts.dt,"#FFB4A3"),1!==opts.type&&!__dev&&!(0,_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("debuglogwrap")){delete opts.dt;const e={message:text,data:{msg:opts.msg||text,module:(window.cur||{}).module,id:vk.id,host:locHost,lang:vk.lang,loc:(window.nav||{}).strLoc,realloc:location.toString()}};(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_2__.logError)(opts,{environment:_shared_lib_sentry_config__WEBPACK_IMPORTED_MODULE_3__.topErrorModuleName,breadcrumb:e,hasDummyStacktrace})}}function showMsg(e,t,o,n){let i="msg"+("msg"!==o?" "+o:"");n&&(i+=" msg_appear"),e=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(e);const r=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)(o,e),s=r||(0,_dom__WEBPACK_IMPORTED_MODULE_0__.domFC)(e),a=e.insertBefore((0,_dom__WEBPACK_IMPORTED_MODULE_0__.ce)("div",{className:i,innerHTML:'<div role="alert" class="msg_text">'+t+"</div>"}),s);r&&(0,_dom__WEBPACK_IMPORTED_MODULE_0__.re)(r),setTimeout(_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass.pbind(a,"msg_appear"),0)}function showGlobalPrg(e,t){const o=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(e),n=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(e),i=t||{},{w:r=32,h:s=13}=i,a=(0,_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("global_prg");a.className=i.cls||"progress",(0,_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(a,{left:o[0]+Math.floor((n[0]-r)/2)+(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.intval)(i.shift?i.shift[0]:0),top:o[1]+Math.floor((n[1]-s)/2)+(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.intval)(i.shift?i.shift[1]:0),width:r,height:s,display:"block","z-index":i.zIndex?i.zIndex:null}),i.hide&&(e.style.visibility="hidden")}},507035:(e,t,o)=>{"use strict";o.d(t,{arrayUnique:()=>v,checkTextLength:()=>T,getAct:()=>R,getDropdownValue:()=>k,getSelectionText:()=>I,goAway:()=>P,handleScroll:()=>D,hashCode:()=>b,isClaimContent:()=>N,isFullScreen:()=>C,lplog:()=>g,onlinePlatformClass:()=>M,parallel:()=>A,parseJSON:()=>m.parseJSON,showErrorBox:()=>L,shuffle:()=>E.shuffle,throttle:()=>w,throttleAccumulate:()=>f,toArray:()=>y,toggleOnline:()=>O,unpackStore:()=>h.unpackStore,updateMoney:()=>S});var n=o(705744),i=o(879007),r=o(772546),s=o(7144),a=o(20025),_=o(452314),c=o(645024),l=o(714209),u=o(967886),d=o(317412),p=o(688701),h=o(485413),m=o(614212),E=o(823085);function f(e,t){let o=[],n=0;return function(i){o.push(i),n||(n=setTimeout((()=>{n=!1,e(o),o=[]}),t))}}function g(e,t){let o,n;if(window.__debugMode){switch(t){case"error":o="color: red",n="background: red; color: white";break;case"success":o="color: green",n="background: green; color: white";break;default:o="color: blue;",n="background: #000; color: #fff;"}try{let t=new Date;console.debug(`%cLP:[${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}:${t.getMilliseconds()}]%c ${e}`,n,o)}catch(e){}}}function y(e){let t=[];if(void 0===e.length)return Object.keys(e).map((t=>e[t]));for(let o=0;o<e.length;o++)t.push(e[o]);return t}function v(e){let t={},o=[];for(let n=0;n<e.length;n++)t[e[n]]||(o.push(e[n]),t[o[n]]=1);return o}function w(e,t){let o;return function(){o||(e.apply(this,arguments),o=setTimeout((function(){o=!1}),t))}}function A(){const e=[].slice.call(arguments),t=e.pop(),o=new CallHub(t,e.length);(0,i.each)(e,((e,t)=>t((()=>o.done()))))}function b(e){let t=0;if(0===e.length)return t;for(let o=0,n=e.length;o<n;o++){t=(t<<5)-t+e.charCodeAt(o),t|=0}return t}function T(e,t,o,n,i,r,s,a,l){if(!t)return;const u=t.getValue?t.getValue():t.value,d=t.lastLen||0;if(t.lastLen===u.length&&!r)return;t.lastLen=u.length;const p={"&":5,"<":4,">":4,'"':6,"\n":n?1:4,"\r":0,"!":5,"'":5,$:6,"\\":6},h={1168:1,1169:1,8211:1,8212:1,8216:1,8217:1,8218:1,8230:1,8240:1,8249:1,8250:1,8364:1,8470:1,8482:1,65533:1},m={1037:1,1104:1,1117:1};i&&(p[","]=5);const E=function(e){let t=0;for(let o=0,n=e.length;o<n;o++){const n=l?void 0:p[e.charAt(o)],i=e.charCodeAt(o);t+=void 0!==n?n:!s&&i>=128&&(i<1025||m[i]||i>1119)&&!h[i]&&(i<8220||i>8222)&&(i<8224||i>8226)?("&#"+i+";").length:1}return t}(u);if(o=(0,_.ge)(o),E>Math.max(e-100,.75*e))if((0,_.show)(o),E>e)if(i){const n=(0,_.val)(t,function(e,t){let o=0,n="";for(let i=0,r=e.length;i<r;i++){const r=e.charAt(i),a=l?void 0:p[r],_=e.charCodeAt(i);if(o+=void 0!==a?a:!s&&_>=128&&(_<1025||m[_]||_>1119)&&!h[_]&&(_<8220||_>8222)&&(_<8224||_>8226)?("&#"+_+";").length:1,o>t)break;n+=r}return n}(u,Math.min(e,d)));t.lastLen=n.length,o.innerHTML=c.getLang("text_N_symbols_remain",0),a&&o.classList.contains(a)&&o.classList.remove(a)}else o.innerHTML=c.getLang("text_exceeds_symbol_limit",E-e),a&&!o.classList.contains(a)&&o.classList.add(a);else o.innerHTML=c.getLang("text_N_symbols_remain",e-E),a&&o.classList.contains(a)&&o.classList.remove(a);else(0,_.hide)(o)}function I(){let e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!==document.selection.type&&(e=document.selection.createRange().text),e}function P(e,t,o){if(-1!==(t||{}).h||(0,d.checkEvent)(o))return!0;if(-1!==(t||{}).h){const o=e.match(n.VK_URL_REGEX_STRICT);if(o&&"api."!==o[1].toLowerCase())return location.href=e,!1;const a=(0,i.intval)((0,r.getCookie)("remixsettings_bits"));if(n.VK_URL_REGEX_STRICT.test((0,s.locBase)())||1&a)return window.open("/away.php?to="+encodeURIComponent(e)+(t&&void 0!==t.h?"&h="+t.h:""),"_blank"),!1}const _=(0,i.extend)({act:"a_go",to:e},t||{});return!(0,a.showBox)("away.php",_,{},o)}function C(){return!!(document.fullscreenElement||document.fullScreenElement||document.msFullscreenElement||document.mozFullScreen||document.webkitIsFullScreen||cur.pvPartScreen)}function S(e,t){if(void 0===e||!1===e)return;if("object"==typeof e)return;let o="";!0===t?(vk.balanceEx=e,o="_ex"):vk.balance=e;const n=(0,_.geByClass)("votes_balance_nom"+o);(0,i.each)(n,((t,o)=>o.innerHTML=`${e} ${c.getLang("votes_flex",e)}`));const r=e*(vk.vcost||7),s=(0,_.geByClass)("money_balance_nom"+o);(0,i.each)(s,((e,t)=>t.innerHTML=c.getLang("global_money_amount_rub",r,!0))),void 0!==t&&!1!==t&&!0!==t&&S(t,!0),window.GamesCatalog&&window.GamesCatalog.updateMoney(e);const a=document.getElementById("topmenu-balance");a&&(a.textContent=e)}function O(e,t){const o=M(t).split(" "),n=[];["online","mobile","_online"].forEach((function(t){(0,i.inArray)(t,o)&&!(0,_.hasClass)(e,t)?n.push(t):!(0,i.inArray)(t,o)&&(0,_.hasClass)(e,t)&&(0,_.removeClass)(e,t)})),n.length>0&&(0,_.addClass)(e,n.join(" "))}function M(e){let t=" _online";return e&&(t+=" online"),l.mobPlatforms[e]&&(t+=" mobile"),(0,u.updateOnlineText)(),t}function D(e){e=e.split(",");const t=cur.named||{};let o=e[0]&&(t[e[0]]||(0,_.ge)(e[0]))||!1;const n=e[1]&&(t[e[1]]||(0,_.ge)(e[1]))||!1;if(!o&&!n){if(o=document.getElementsByName(e[0])[0],!o)return;o=o.nextSibling}const i=(0,_.ge)("page_header_wrap")||(0,_.ge)("dev_top_nav_wrap");setTimeout((function(){o&&(0,p.scrollToY)((0,_.getXY)(o)[1]-(i?(0,_.getSize)(i)[1]:0),0),n&&(0,_.elfocus)(n)}),300)}function L(e,t){return void 0===t&&(t=1e4),setTimeout((0,a.showFastBox)({title:c.getLang("global_error")},e).hide,t)}function k(e){let t=(0,_.ge)(e+"_container");if(t||(t=(0,_.ge)(e)),t&&t.dropdown)return t.dropdown.val()}function R(){return window.nav.objLoc.act}function N(){return Boolean(window.nav&&window.nav.objLoc&&window.nav.objLoc.claim)}},879007:(e,t,o)=>{"use strict";o.d(t,{addTemplates:()=>v,clean:()=>s.clean,clone:()=>g,decodeHtml:()=>P,each:()=>s.each,encodeHtml:()=>I,escapeAttr:()=>s.escapeAttr,escapeRE:()=>s.escapeRE,extend:()=>y,extractUrls:()=>b,floatval:()=>s.floatval,formatCount:()=>T,getTemplate:()=>w,inArray:()=>f,indexOf:()=>E,intval:()=>s.intval,irand:()=>s.irand,isArray:()=>s.isArray,isEmpty:()=>s.isEmpty,isFunction:()=>s.isFunction,isNumber:()=>h,isNumeric:()=>p,isObject:()=>s.isObject,isPageFirstOneOpened:()=>c,isRetina:()=>s.isRetina,isString:()=>s.isString,isUndefined:()=>s.isUndefined,lTimeout:()=>l,positive:()=>s.positive,rand:()=>s.rand,replaceEntities:()=>s.replaceEntities,serializeForm:()=>A,stripHTML:()=>d,trim:()=>u,unclean:()=>s.unclean,vkImage:()=>s.vkImage,vkLocal:()=>_,vkNow:()=>s.vkNow,winToUtf:()=>m});var n=o(452314),i=o(645024),r=o(714209),s=o(7144),a=o(476726);function _(e){const t=window.PageID;return function(){if(t===window.PageID)return e.apply(this,arguments)}}function c(){return 1===window.PageID}function l(e,t){return setTimeout(_(e),t)}const u=e=>(e||"").replace(/^\s+|\s+$/g,""),d=e=>e?e.replace(/<(?:.|\n|\r|\u2028|\u2029)*?>/g,""):"";function p(e){return!isNaN(e)}function h(e){return"number"==typeof e&&(e===Number(e)&&(e!==1/0&&e!==-1/0))}function m(e){return e.replace(/&#(\d\d+);/g,(function(e,t){return(t=(0,s.intval)(t))>=32?String.fromCharCode(t):e})).replace(/&quot;/gi,'"').replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}function E(e,t,o){for(let n=o||0,i=(e||[]).length;n<i;n++)if(e[n]==t)return n;return-1}function f(e,t){return-1!==E(t,e)}function g(e,t){const o=(0,s.isObject)(e)||void 0===e.length?{}:[];for(const n in e)(!/webkit/i.test(window._ua)||"layerX"!=n&&"layerY"!=n&&"webkitMovementX"!=n&&"webkitMovementY"!=n)&&(t&&"object"==typeof e[n]&&"prototype"!==n&&null!==e[n]?o[n]=g(e[n]):o[n]=e[n]);return o}function y(){const e=arguments,t=e.length;let o=e[0]||{},n=1,i=!1;for("boolean"==typeof o&&(i=o,o=e[1]||{},n=2),"object"==typeof o||(0,s.isFunction)(o)||(o={});n<t;n++){const t=e[n];if(null!=t)for(const e in t){if(!t.hasOwnProperty(e))continue;const n=o[e],r=t[e];o!==r&&(i&&r&&"object"==typeof r&&!r.nodeType?o[e]=y(i,n||(null!=r.length?[]:{}),r):void 0!==r&&(o[e]=r))}}return o}function v(e){window.templates=window.templates||{},y(window.templates,e)}function w(e,t){let o=(window.templates=window.templates||{})[e];return"function"==typeof o&&(o=o()),o&&t?(0,n.rs)(o,t):o||""}function A(e){if("object"!=typeof e)return!1;const t={},o=t=>(0,n.geByTag)(t,e),i=function(o,i){if(i.name)if("text"!==i.type&&i.type)if(i.getAttribute("bool")){const e=(0,n.val)(i);if(!e||"0"===e)return;t[i.name]=1}else t[i.name]=r.browser.msie&&!i.value&&e[i.name]?e[i.name].value:i.value;else t[i.name]=(0,n.val)(i)};return(0,s.each)(o("input"),(function(e,t){if("radio"!==t.type&&"checkbox"!==t.type||t.checked)return i(0,t)})),(0,s.each)(o("select"),i),(0,s.each)(o("textarea"),i),t}function b(e,t){if(!e)return[];let o=/(?:([!()?@., \n\r\t \u00A0\[]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg|xn--90ais))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|\|.*]?|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб|бел))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i;t&&(o=/(?:([!()?@., \n\r\t \u00A0\[]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg|xn--90ais))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|\|.*]?|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб|бел))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i);const n=(0,a.partConfigEnabled)("links_parsing_latin_domain_enabled");n&&!t&&(o=/(?:([!()?@., \n\r\t \u00A0\[]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg|xn--90ais))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|\|.*]?|[ \t\r\n \u00A0]))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб|бел|[a-z]{2,10}))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)]*(&nbsp;|[ \t\r\n \u00A0])))/i),n&&t&&(o=/(?:([!()?@., \n\r\t \u00A0\[]|^)((https?:\/\/)?((?:[a-z0-9_\-]+\.)+(?:[a-z]{2,10}|xn--p1ai|xn--j1amh|xn--80asehdb|xn--80aswg|xn--90ais))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|\|.*]?|[ \t\r\n \u00A0]|$))|([!()?., \n\r\t \u00A0]|^)((https?:\/\/)?((?:[a-z0-9а-яєґї_\-]+\.)+(?:рф|укр|онлайн|сайт|срб|бел|[a-z]{2,10}))(\/.*?)?(\#.*?)?)(?:[\.!:;,\*\(\)&]*(&nbsp;|[ \t\r\n \u00A0]|$)))/i);const i=[];let r;for(;e&&(r=e.match(o),r);){if(e=e.substr(r.index+r[0].length),!r||!r.length||"@"===r[0][0])continue;let t=0;r[4]||(t=7),i.push({url:r[2+t],query:r[5+t]||"",domain:r[4+t]})}return i}function T(e,t={}){const o=t.kLimit||1e3,n=t.mLimit||1e6;return e>=(t.gLimit||1e9)&&!t.noCheck?T(e=(e=(0,s.intval)(e/1e8))>1e6?(0,s.intval)(e/10):e/10,y(t,{noCheck:!0}))+"G":e>=n&&!t.noCheck?T(e=(e=(0,s.intval)(e/1e5))>1e3?(0,s.intval)(e/10):e/10,y(t,{noCheck:!0}))+"M":e>=o&&!t.noCheck?T(e=(e=(0,s.intval)(e/100))>100?(0,s.intval)(e/10):e/10,y(t,{noCheck:!0}))+"K":(0,i.langNumeric)(e,"%s",!0).replace(/,/g,".")}let[I,P]=function(){let e=null;return[function(t){return e||(e=(0,n.se)("<span> </span>")),e.innerText=t,e.innerHTML},function(t){return e||(e=(0,n.se)("<span> </span>")),e.innerHTML=t.replace(/<br\s*\/?>/gim,"\n"),e.innerText}]}()},744025:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{VideoConstants:()=>VideoConstants,initVideo:()=>initVideo,loadInlineVideo:()=>loadInlineVideo,pauseLastInlineVideo:()=>pauseLastInlineVideo,playLastInlineVideo:()=>playLastInlineVideo,revertLastInlineVideo:()=>revertLastInlineVideo,showInlineVideo:()=>showInlineVideo,showVideo:()=>showVideo});var _videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(580843),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(490712),_web_lib_date__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(307188),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(452314),_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(317412),_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(879007),_lang__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(645024),_message_box__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(20025),_layout_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(134020),_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(253693),_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(400281),_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(705744);const rtrgQuery=`//${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_10__.getHostName)()}/rtrg?r=w*Z1Flwi3QdbWaoLMc7zOA*7Cr4Nrtojr9otHjsjIhsb2CVqRWalgbvxZw3MzxZa6be3Siu2XY3gvK5fysYtWLWgNwHMpjRTupSGZrcGRNlj7fduqq9*t7ij6CX4aMcBTD5be8mIXJsbTsvP8Zl2RZEd76a4FTuCOFqzMxqGtFc-`;function showVideo(e,t,o={},n){if(cur.viewAsBox)return cur.viewAsBox();if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(n))return;if((0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.isUnauthorizedMediaLayerBoxAvailable)()&&(n||o.openInPopup)&&!o.forceUnauth&&!cur.is_showcase)return _web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.Unauthorized.showMoreBox(null,0,_web_unauthorized_unauthorized__WEBPACK_IMPORTED_MODULE_8__.UnauthorizedSourceType.VIDEO,(()=>{showVideo(e,t,{...o,openInPopup:!1,forceUnauth:!0},n)})),!1;if(o.forceUnauth=!0,window.mvcur&&mvcur.mvShown&&mvcur.minimized&&mvcur.videoRaw==e)return o.fromPlayer||Videoview.unminimize(),!1;const i=nav.objLoc.claim,r=!(!o.addParams||!/^-?\d+_\d+$/.test(o.addParams.post_id))&&o.addParams.post_id;if(!o.playlistId&&r&&(/^public|groups|profile$/.test(cur.module)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hasClass)("post"+r,"own")?o.playlistId="wall_"+cur.oid:o.playlistId="post_"+o.addParams.post_id),o.playlistId)if(o.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o.addParams,{playlist_id:o.playlistId}),window.VideoPlaylist&&VideoPlaylist.getList(o.playlistId))e||(o.addParams.load_playlist=1);else if(/^wall_/.test(o.playlistId)){const e=cur.wallVideos&&cur.wallVideos[o.playlistId];o.addParams.load_playlist=e?.list.length>=50?0:1,o.addParams.show_next=e?.list.length>=1?1:0}else{const e=/^(?:post_)?-?\d+_-?\d+$/.test(o.playlistId)&&!(cur.pageVideosList&&cur.pageVideosList[o.playlistId]);o.addParams.load_playlist=e?1:0,o.addParams.show_next=e?1:0}o.expandPlayer||!cur.videoInlinePlayer||cur.videoInlinePlayer.getVideoId()!=e&&cur.videoInlinePlayer.getProjectId()!=e||!cur.videoInlinePlayer.canExpand()||(o.expandPlayer=cur.videoInlinePlayer),o.expandPlayer&&(o.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o.addParams,{expand_player:1}),delete cur.videoInlinePlayer),cur.simple_description&&(o.addParams=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o.addParams||{},{simple_description:cur.simple_description}));const s=new CallHub((function(){o.hidden?o.hidden(s.data,o,t,e):Videoview.showVideo.apply(Videoview,s.data)}),2);window.stManager.add([window.jsc("web/videoview.js"),"videoview.css",window.jsc("web/page.js"),"page.css"],(()=>{s.failed||(o.hidden||(revertLastInlineVideo(),Videoview.show(n,e,t,o)),s.done())})),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(o,{onDone:function(){const t=Array.prototype.slice.call(arguments);t.unshift(e),s.data=t,s.done()},onFail:function(t){if(s.failed=1,!o.hidden){if(window.mvcur&&mvcur.mvShown)window.Videoview.hide();else{const t=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.clone)(nav.objLoc);t.z==="video"+e&&delete t.z,t[0]==="video"+e&&(t[0]="videos"+e.split("_")[0]),nav.setLoc(t)}const o=t&&"object"==typeof t?t?.data:t;if((0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error"),o||_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error_occured")),window.Videoview?.isMinimized())if(mvcur&&mvcur.fallbackData){const{videoRaw:e,options:t,listId:o,mvData:n}=mvcur.fallbackData;mvcur.videoRaw=e,mvcur.options=t,mvcur.listId=o,mvcur.myData=n,mvcur.fallbackData=null,Videoview.initPlaylistBlock(e,t.playlistId,t.catLoadMore),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)("mv_player_box"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)("mv_progress_box")}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)("mv_player_box","");s.done()}return!0},cache:"status"!==t}),window.VideoPlaylist&&(window.VideoPlaylist.module=null);let a=o.params;return a||(a={act:"show",video:e,list:t,autoplay:o.autoplay?1:0,ad_video:o.ad_video,module:o.module||window.Videoview&&window.Videoview.getVideoModule()||"",webcast:nav.objLoc.webcast?1:0,screen:nav.objLoc.screen?1:0}),cur.is_showcase&&!a.context&&cur.ref_context&&(a.context=cur.ref_context),o.addParams&&(a=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(a,o.addParams)),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(a.module)||(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(a,{_nol:JSON.stringify(nav.objLoc)}),a.module&&(window.VideoPlaylist&&(window.VideoPlaylist.module=a.module),o.is_similar&&(a.module+=":similar")),i&&(a.claim=i),ajax.post(`al_video.php?act=${a.act}`,a,o),(0,_web_video_video_utils__WEBPACK_IMPORTED_MODULE_9__.idlizeCall)((()=>{(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=`${locProtocol}${rtrgQuery}`})),!1}function showInlineVideo(videoId,listId,options,ev,thumb){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(ev))return!0;if(options=options||{},window.mvcur&&mvcur.mvShown||options.hasRestriction)return showVideo(videoId,listId,options,ev);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-loading"))return!1;const h=thumb.clientHeight,w=thumb.clientWidth,btn=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(thumb,"page_post_video_play_inline"),onLoaded=options.onLoaded;onLoaded&&delete options.onLoaded;const params={video:videoId,list:listId,autoplay:options.autoplay,module:options.module};return thumb.className.includes("page_video_croppable")&&(params.with_crop=!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domData)(thumb,"stretch-vertical")&&(params.stretch_vertical=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)(params,options.addParams),window.VideoPlaylist&&(window.VideoPlaylist.module=params.module),showProgress(),loadInlineVideo(params,(function(e,t){hideProgress(),e?onDone.apply(null,t):onFail.apply(null,t)}),options.cache),cur.videoInlinePlayerDestroyerSet||(cur.destroy.push(_destroyInlineVideoPlayer),cur.videoInlinePlayerDestroyerSet=1),(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkImage)().src=rtrgQuery,!1;function onDone(title,html,js,opts){revertLastInlineVideo(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.hide)(thumb);const isMt=thumb.dataset.mtId,isDirectMp4=!!thumb.dataset.directMp4,mtAspectRatio=thumb.dataset.mtAspectRatio?Number(thumb.dataset.mtAspectRatio):0,videoWrap=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{innerHTML:html,className:"inline_video_wrap"},{width:w,height:isMt&&mtAspectRatio?Math.round(w*mtAspectRatio):h});if(opts&&opts.mvData&&-195297477!==opts.mvData.authorId&&(window._videoLastInlined=[videoWrap,thumb]),thumb.parentNode.appendChild(videoWrap),cur.mvOpts=!(!opts||!opts.mvData)&&opts.mvData,opts.player){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domByClass)(videoWrap,"video_box_wrap");(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(onLoaded)&&(opts.player.params[0].onPlayerLoaded=onLoaded);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.attr)(thumb,"data-link-attr");if(t&&(opts.player.params[0].link_attr=t),isMt){opts.player.params[0].ad_block_id=isMt;const e=thumb.dataset.mtVideoMp4;e&&(opts.player.params[0].direct_mp4=e);const t=thumb.dataset.mtVideoHls;t&&(opts.player.params[0].hls=t),mtAspectRatio&&(opts.player.params[0].aspect_ratio=mtAspectRatio);const o=thumb.firstChild&&thumb.firstChild.firstChild&&thumb.firstChild.firstChild.src;o&&(opts.player.params[0].jpg=o);const n=thumb.firstChild,i=n.dataset.mtLink,r=n.getAttribute("onclick");i&&(opts.player.params[0].link_attr=`href="${i}" onclick="${r}"`)}isDirectMp4&&(opts.player.params[0].direct_mp4=thumb.dataset.directMp4,opts.player.params[0].hls=void 0,opts.player.params[0].dash_sep=void 0,Object.keys(opts.player.params[0]).forEach((e=>{e.startsWith("url")&&(opts.player.params[0][e]=void 0)}))),VideoInitializer.initPlayer(e,opts.player.type,opts.player.params)}try{eval("(function () {"+js+"})();")}catch(e){}if(!params.from_autoplay){const e=window.Notifier;e&&setTimeout((()=>e.lcSend("video_start")),0);const t=window.ap;t&&t.isPlaying()&&(t.pauseByChangeChannel(),t.pausedByVideo=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.vkNow)())}ev&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("bookmarks_row_type_video",ev.target)&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_0__.statlogsValueEvent)("bookmarks_product_analytics",{item_type:"video",item_owner_id:cur.mvOpts.oid,item_id:cur.mvOpts.vid,time:(0,_web_lib_date__WEBPACK_IMPORTED_MODULE_1__.getServerTime)()}),thumb.setAttribute("data-playing",1)}function onFail(e){params.from_autoplay||(0,_message_box__WEBPACK_IMPORTED_MODULE_6__.showFastBox)(_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error"),e||_lang__WEBPACK_IMPORTED_MODULE_5__.getLang("global_error_occured"))}function showProgress(){thumb.setAttribute("data-loading",1),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.addClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,(0,_layout_utils__WEBPACK_IMPORTED_MODULE_7__.getProgressHtml)()))}function hideProgress(){thumb.removeAttribute("data-loading"),options.no_progress||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.removeClass)(btn,"page_post_video_play_inline_loading"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.val)(btn,""))}}function loadInlineVideo(e,t,o){const n=(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.extend)({autoplay:0,module:cur.module},e);(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.trim)(n.module)||(n._nol=JSON.stringify(nav.objLoc));const i=[window.jsc("web/videoview.js"),"videoview.css"];function r(e,o){(0,_utils_common__WEBPACK_IMPORTED_MODULE_4__.isFunction)(t)&&t(e,o)}n.from_autoplay&&i.push("videoplayer.css"),ajax.post("al_video.php?act=video_box",n,{onDone:function(){r(!0,[].slice.call(arguments))},onFail:function(){return r(!1,[].slice.call(arguments)),!0},stat:i,local:1,cache:o})}function revertLastInlineVideo(e,t=!1){if(!window._videoLastInlined)return;let o,n=!1;const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(e);if(i&&(o=window._videoLastInlined[0],o)){for(;o=o.parentNode;)if(o==i){n=!0;break}if(!n)return}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)(window._videoLastInlined[0]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(window._videoLastInlined[1]),window._videoLastInlined[1].removeAttribute("data-playing"),window._videoLastInlined=!1,_destroyInlineVideoPlayer(t),delete cur.mvOpts}function _destroyInlineVideoPlayer(e=!1){cur.videoInlinePlayer&&(cur.videoInlinePlayer.destroy(e),delete cur.videoInlinePlayer)}function pauseLastInlineVideo(){if(!window._videoLastInlined)return;const e=cur.videoInlinePlayer||document.getElementById("video_yt")&&window.VideoYoutube;if(e){if(e.isActiveLive&&e.isActiveLive())return;cur.mvOpts.lastPlayerState=e.getState(),e.togglePlay(!1)}}function playLastInlineVideo(){if(!window._videoLastInlined||!cur.mvOpts||cur.mvOpts.lastPlayerState!==_videoplayer_lib_player_states__WEBPACK_IMPORTED_MODULE_11__.PLAYING)return;const e=cur.videoInlinePlayer||document.getElementById("video_yt")&&window.VideoYoutube;e&&e.togglePlay(!0)}const VideoConstants={VIDEO_ITEM_INDEX_OWNER_ID:0,VIDEO_ITEM_INDEX_ID:1,VIDEO_ITEM_INDEX_THUMB:2,VIDEO_ITEM_INDEX_TITLE:3,VIDEO_ITEM_INDEX_FLAGS:4,VIDEO_ITEM_INDEX_DURATION:5,VIDEO_ITEM_INDEX_HASH:6,VIDEO_ITEM_INDEX_OWNER:8,VIDEO_ITEM_INDEX_DATE:9,VIDEO_ITEM_INDEX_VIEWS:10,VIDEO_ITEM_INDEX_PLATFORM:11,VIDEO_ITEM_INDEX_BLOCKED:12,VIDEO_ITEM_INDEX_MUSIC_VIDEO_META:13,VIDEO_ITEM_INDEX_ARIA:14,VIDEO_ITEM_INDEX_RESTRICTION_BLOCK:15,VIDEO_ITEM_INDEX_RESTRICTION_CLASSES:16,VIDEO_ITEM_INDEX_ADMIN_INFO:17,VIDEO_ITEM_INDEX_CARD_MENU_TOGGLE:18,VIDEO_ITEM_INDEX_RAW_DURATION:19,VIDEO_ITEM_INDEX_LINK:20,VIDEO_ITEM_INDEX_TRAILER:21,VIDEO_ITEM_INDEX_VIEWED_DURATION:22,VIDEO_ITEM_INDEX_VIEWED_DAY:23,VIDEO_ITEM_INDEX_LIST_ID:24,VIDEO_ITEM_INDEX_PLAYLIST_ID:25,VIDEO_ITEM_INDEX_CARD_ACTIONS:26,VIDEO_ITEM_INDEX_CARD_PRIVACY_ICONS:27,VIDEO_ITEM_INDEX_SMALL_THUMB:28,VIDEO_ITEM_INDEX_ML_THUMB_ID:29,VIDEO_ITEM_INDEX_PLAY_FROM:30,VIDEO_ITEM_INDEX_RECOMMENDATION_SOURCES:31,VIDEO_ITEM_INDEX_RECOMMENDATION_USERS:32,VIDEO_ITEM_TRACK_CODE:33,VIDEO_ITEM_INDEX_SUBTITLE_PLACE:34,VIDEO_ITEM_INDEX_AVATAR_IMAGE:35,VIDEO_ITEM_INDEX_AVATAR_PLACE:36,VIDEO_ITEM_INDEX_DESCRIPTON:37,VIDEO_ITEM_INDEX_DOWNLOAD_URL:38,VIDEO_ITEM_INDEX_OWNER_HREF:39,VIDEO_ITEM_PUBLISH_DATE:40,VIDEO_ITEM_BOOKMARKED:41,VIDEO_ITEM_BOOKMARK_HASH:42,VIDEO_ITEM_INDEX_UPCOMING_LIVE_DATE:43,VIDEO_TEMPLATE_INDEX_SUBTITLE_DURATION_WITH_VIEWS:0,VIDEO_TEMPLATE_INDEX_SUBTITLE_LABEL:1,VIDEO_TEMPLATE_INDEX_SUBTITLE_SCHEDULED:2,VIDEO_TEMPLATE_INDEX_SUBTITLE_UPCOMING_LIVE:3,VIDEO_ITEM_FLAG_EXTERNAL:1,VIDEO_ITEM_FLAG_ACTIVE_LIVE:2,VIDEO_ITEM_FLAG_CAN_DOWNLOAD:32,VIDEO_ITEM_FLAG_CAN_EDIT:64,VIDEO_ITEM_FLAG_CAN_DELETE:128,VIDEO_ITEM_FLAG_CAN_ADD:256,VIDEO_ITEM_FLAG_PRIVATE:512,VIDEO_ITEM_FLAG_NO_AUTOPLAY:1024,VIDEO_ITEM_FLAG_ADDED:2048,VIDEO_ITEM_FLAG_SKIP_THUMB_LOAD:4096,VIDEO_ITEM_FLAG_NEED_SIGN_IN:8192,VIDEO_ITEM_FLAG_HD:16384,VIDEO_ITEM_FLAG_DELETED:32768,VIDEO_ITEM_FLAG_CAN_MOVE:65536,VIDEO_ITEM_FLAG_CAN_DELETE_FROM_HISTORY:1<<17,VIDEO_ITEM_FLAG_PRIVATE_BY_LINK:1<<18,VIDEO_ITEM_FLAG_LIVE:1<<19,VIDEO_ITEM_FLAG_PRIVATE_NOT_PUBLISHED:1<<20,VIDEO_ITEM_FLAG_PRIVATE_MEMBERS:1<<21,VIDEO_ITEM_FLAG_HORIZONTAL:1<<22,VIDEO_ITEM_FLAG_NFT_AVATAR:1<<23,VIDEO_ITEM_FLAG_SCHEDULED:1<<24,VIDEO_ITEM_FLAG_CAN_BOOKMARK:1<<25,VIDEO_ITEM_FLAG_BOOKMARKED:1<<26,VIDEO_ITEM_FLAG_UPCOMING_LIVE:1<<27};function initVideo(){window._videoLastInlined=!1}},261180:(e,t,o)=>{"use strict";o.d(t,{processAliExpressMiniAppLinkClickEvent:()=>s});var n=o(528411),i=o(476726),r=o(705744);function s(e){const t=e.target||e.srcElement;if(t&&t.href){const e=t.href;let o,s;try{o=decodeURIComponent(e)}catch(e){return!1}if((0,i.partConfigEnabled)("aliexpress_app_links_redirect_web_links")){if(s=function(e){const t=[new RegExp(`(https?://)?${r.VK_SITE_REGEX_SOURCE_UNSAFE}/app${n.MARKET_ALIEXPRESS_APP_ID}(_6492794)?(#|/|#/)?$`),new RegExp(`(https?://)?${r.VK_SITE_REGEX_SOURCE_UNSAFE}/${n.MARKET_ALIEXPRESS_APP_NAME}(#|/|#/)?$`)];for(const o in t)if(e.match(t[o]))return"/away.php?to="+encodeURIComponent(n.MARKET_ALIEXPRESS_HOME_URL);return""}(o),s)return a(s,t),!0}else if(s=function(e){const t=e.match(new RegExp(`/app${n.MARKET_ALIEXPRESS_APP_ID}#(?:.+)product_id=(d+)`));if(t&&t[1])return"/away.php?to="+encodeURIComponent(`${n.MARKET_ALIEXPRESS_HOME_URL}/item/${t[1]}.html`)}(o),s)return a(s,t),!0}return!1}function a(e,t){"_blank"===t.getAttribute("target")&&void 0!==t.open?t.open(e):window.location.href=e}},953550:(e,t,o)=>{"use strict";o.d(t,{AppOrderBox:()=>u});var n=o(452314),i=o(610989),r=o(879007),s=o(850101),a=o(248298),_=o(20025),c=o(507035),l=o(984709);class u{static instantSkipAppOrder(e,t){const o=(0,n.gpeByClass)("payments_instant_progress_wrap",e);let i={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,test_mode:cur.paymentsOrderTestMode,_skip_instant:t||1,hash:cur.paymentsOrderHash};void 0!==cur.checkedMaxVotes&&(i.checked_max_votes=cur.checkedMaxVotes),ajax.post("al_apps.php",i,{forceDone:1,onDone:()=>{cur.paymentsCheckOrderCnt=1,(0,s.curBox)().hide(),cur.paymentsCheckOrderCnt=0,cur.fromInstantPay=!0},showProgress:()=>o&&o.classList.add("loading"),hideProgress:()=>o&&o.classList.remove("loading")})}static processOrder(e,t){t||(t=(0,s.curBox)());const o=(0,n.isVisible)("payments_box")?2:0;let r=!1;e||(e=o),o&&(r=t.btns.ok[0],(0,a.lockButton)(r));let d={act:"a_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,votes:cur.paymentsPreferVotes,from:nav.objLoc[0],test_mode:cur.paymentsOrderTestMode,_votes_ok:e,hash:cur.paymentsOrderHash};1==e&&cur.paymentsOrderBillPeriod&&(d.payment_type=cur.votesType),!cur.paymentsOrderBillPeriod&&(0,n.ge)("payments_order_auto_confirm")&&(d.auto_confirm=(0,a.isChecked)("payments_order_auto_confirm")),ajax.post("al_apps.php",d,{forceDone:3==+e?1:0,onDone:(d,p,h,m,E)=>{if(m&&-1e3!==m&&(cur.votesBoxOptions=m),3==e&&-1e3==h)return l.Gifts.processBoxOptions((0,s.curBox)(),m),cur.paymentsCheckOrderCnt=1,t.hide(),void(cur.paymentsCheckOrderCnt=0);if(0===h||h>0)return cur.paymentsPreferVotes=1,o?cur.paymentsShowBoxError(p):(t.hide(),(0,_.showFastBox)(i.getLang("global_error"),p)),void((cur.paymentsOrderBillPeriod||E)&&cur.onSubscriptionFail?cur.onSubscriptionFail(h):cur.onAppOrderFail&&cur.onAppOrderFail(h));if(d.result){let e=(0,s.curBox)();return cur.isPaymentsAppOrder=!1,e&&e.hide(),(0,s.showDoneBox)(p),d.balance&&(0,c.updateMoney)(d.balance),void(cur.onSubscriptionDone&&d.subscriptionStatus&&(cur.onSubscriptionDone(d.subscriptionStatus),cur.onSubscriptionDone=!1))}const f=d.orderId;if(!f)return void(cur.paymentGetOrderItemTO=setTimeout(u.processOrder.pbind(!1,t),1e3));p&&(t=(0,_.showFastBox)("",p)).setOptions({title:!1,width:520,bodyStyle:"padding: 0;",hideButtons:!0}),r&&(0,a.unlockButton)(r),cur.isPaymentsAppOrder=!1,cur.paymentsOrderId=f,d.subscriptionId&&(cur.paymentsSubscriptionId=d.subscriptionId),cur.paymentsOrderCheckHash=d.checkHash;const g=i.getLang("payments_waiting_app_order_complete");(0,n.ge)("payments_box_progress_msg_wrap")?((0,n.val)("payments_box_progress_msg_wrap",`<span id="payments_box_progress_msg">${g}</span>`),cur.paymentsShowProgress()):(0,n.val)("apps_paymentbox_progress_msg_wrap",g),cur.paymentsCheckOrderCnt=0,cur.paymentsCheckOrderInt=setInterval(u.checkOrder,2e3)},onFail:function(e){return!e||(cur.onSubscriptionFail?cur.onSubscriptionFail():cur.onAppOrderFail&&cur.onAppOrderFail(),(0,n.isVisible)("payments_box")?cur.paymentsShowBoxError(e):(t.hide(),(0,_.showFastBox)(i.getLang("global_error"),e)),!0)}})}static checkOrder(){if(15==cur.paymentsCheckOrderCnt)(0,n.ge)("payments_box_progress_msg").innerHTML=i.getLang("payments_waiting_payment_complete_still");else if(cur.paymentsCheckOrderCnt>30)return clearInterval(cur.paymentsCheckOrderInt),(0,s.curBox)().hide(),void(0,_.showFastBox)(i.getLang("payments_app_order_box_title"),i.getLang("payments_app_add_votes_delay"),i.getLang("global_close"),(()=>{cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.onAppOrderCancel&&cur.onAppOrderCancel(),(0,s.curBox)().hide()}));cur.paymentsCheckOrderCnt++,ajax.post("al_apps.php",{act:"a_check_order",aid:cur.paymentsOrderAppId,order_id:cur.paymentsOrderId,test_mode:cur.paymentsOrderTestMode,from:nav.objLoc[0],hash:cur.paymentsOrderCheckHash},{onDone:(e,t,o,n,i)=>{e&&((0,s.curBox)()&&(0,s.curBox)().hide(),clearInterval(cur.paymentsCheckOrderInt),cur.paymentsCheckOrderCnt=0,(0,s.showDoneBox)(t,{out:1e3}),o&&(0,c.updateMoney)(o),1==e?(cur.paymentsOrderBillPeriod&&cur.onSubscriptionSuccess?(cur.onSubscriptionSuccess(cur.paymentsSubscriptionId),TopNotifier&&TopNotifier.invalidate()):cur.onAppOrderSuccess&&cur.onAppOrderSuccess(cur.paymentsOrderId),cur.onSubscriptionDone&&i&&(cur.onSubscriptionDone(i),cur.onSubscriptionDone=!1)):cur.paymentsOrderBillPeriod&&cur.onSubscriptionFail?cur.onSubscriptionFail(n):cur.onAppOrderFail&&cur.onAppOrderFail(n))},onFail:function(e){return clearInterval(cur.paymentsCheckOrderInt),cur.paymentsShowBoxError(e),!0}})}static initialize(e,t,o,n,i,s,a){(0,r.extend)(cur,{isPaymentsAppOrder:!0,paymentsAuthPayment:!1,paymentsOrderNotice:!1,paymentsOrderId:e,paymentsOrderAppId:t,paymentsOrderTestMode:o,paymentsOrderHash:n,paymentsPreferVotes:i,paymentsOrderDiscount:s,paymentsOrderBillPeriod:a})}}},359136:(e,t,o)=>{"use strict";o.d(t,{MoneyTransfer:()=>L});var n=o(248298),i=o(714209),r=o(174628),s=o(7144),a=o(691004),_=o(317412),c=o(850101),l=o(20025),u=o(452314),d=o(357889),p=o(507035),h=o(879007),m=o(618913),E=o(756758),f=o(610989),g=o(126645),y=o.n(g),v=o(14563),w=o(459841),A=o(823875),b=o(810903),T=o(992851),I=o(705744),P=o(258643),C=o(388078),S=o(377803);const O=1,M=2,D=-1,L={initHandlers(){(0,A.tq)().setInteractiveHandler("MoneyTransfer/receive_method_change",(e=>{const t=e.payload.event.target;if((0,u.hasClass)(t,"disabled"))return;const{value:o,name:n}=e.payload.dataAttrs;L.onReceiveMethodChange(t,o,n)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/in_chat_focus_amount",(()=>{(0,u.elfocus)("transfer_amount")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_user_message",(()=>{L.checkUserMessage()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/show_hint",(e=>{(0,b.showHint)(e.payload.event.target)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/send",(e=>{L.send(Boolean(e.payload.dataAttrs.newWindow))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_participate",(e=>{(0,n.checkbox)(e.payload.event.target),L.checkRequestParticipate()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check",(e=>{(0,n.checkbox)(e.payload.event.target)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_auto_accept",(e=>{(0,n.checkbox)(e.payload.event.target),L.checkAutoAccept()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/about",(e=>{L.aboutBox(e.payload.dataAttrs.aboutKey)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/history",(()=>{L.historyBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/hide_pin_box",(()=>{L.hidePinBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/check_vk_pay_offer",(()=>{L.checkVkPayOfferBox()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/clean_amount",(e=>{L.cleanAmount(e.payload.event.target,e.payload.event,Boolean(e.payload.dataAttrs.onlyClean))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/send_amount_on_enter",(e=>{13===e.payload.event.keyCode&&L.send(),L.autosizeAmount()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/focus_from_to",(e=>{(0,u.elfocus)(e.payload.event,0,1e4)})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/focus_and_hide_link",(e=>{(0,u.elfocus)(e.payload.event,0,1e4),L.hideLinkCopied()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/copy_link",(e=>{L.copyLinkToClipboard((0,u.ge)(e.payload.dataAttrs.element))})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/share_qr",(()=>{L.shareQRCode()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/download_qr",(()=>{L.downloadQRCode()})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_transfer_box",(e=>{L.switchBoxSection(e.payload.event.target,"transfer")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_request_box",(e=>{L.switchBoxSection(e.payload.event.target,"request")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/switch_to_link_box",(e=>{L.switchBoxSection(e.payload.event.target,"link")})),(0,A.tq)().setInteractiveHandler("MoneyTransfer/init_accept",(()=>{L.initAccept(cur.paymentsOptions.chkData,cur.paymentsOptions.frame,!0)}))},init(){this.initHandlers();const e=(0,c.curBox)();if((0,u.ge)("payments_box")!=(0,u.geByClass1)("payments_money_transfer_box",e.bodyNode)&&_message_boxes.length>1){let e=!0;_message_boxes.forEach((function(t,o){e&&(0,u.ge)("payments_box")==(0,u.geByClass1)("payments_money_transfer_box",t.bodyNode)&&(boxLayer.removeChild((0,u.gpeByClass)("popup_box_container",t.bodyNode)),boxQueue._boxes.splice(o,1),delete _message_boxes[o],e=!1)}))}if(cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip),e.setOptions({grey:!0}),cur.paymentsOptions.requestId&&!cur.paymentsOptions.vkpayAvailable&&(e.changed=!0,e.setOptions({width:510}),L.send()),(0,a.placeholderInit)("transfer_amount"),(0,a.placeholderInit)("transfer_comment"),cur.paymentsOptions.isChat){if((0,a.placeholderInit)("transfer_chunk_amount"),cur.autoacceptCardDD=new InlineDropdown("transfer_autoaccept_card",{items:cur.paymentsOptions.cards,selected:cur.paymentsOptions.cardSeleceted,withArrow:!0,onShow:L.enableAutoaccept,onSelect:e=>{-1==e?L.sendBind():cur.paymentsOptions.vkpayAvailable&&L.checkAmount((0,u.val)("transfer_amount"))}}),cur.autoacceptCardEl=(0,u.ge)("transfer_autoaccept_card"),(0,u.toggleClass)("transfer_autoaccept_card","disabled",!cur.paymentsOptions.autoAcceptEnabled),cur.paymentsOptions.autoAcceptEnabled&&(0,n.checkbox)("transfer_autoaccept",!0),cur.paymentsOptions.cards.length<2){let e=(0,u.ce)("a",{id:"payments_money_transfer_new_card_lnk",innerHTML:f.getLang("payments_money_transfer_new_card")});(0,_.addEvent)(e,"mousedown",L.sendBind),(0,u.hide)(cur.autoacceptCardEl),cur.autoacceptCardEl.parentNode.appendChild(e)}}else if((0,u.ge)("transfer_to")){(0,u.hide)("payments_money_transfer_user");let e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo=new Dropdown((0,u.ge)("transfer_to"),cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]})),{big:!0,introText:f.getLang("votes_transfer_start_typing_recipient"),noResult:"",placeholder:f.getLang("votes_transfer_choose_recipients"),multiselect:!1,enableCustom:!0,autocomplete:!0,imageId:"transfer_to_photo",indexkeys:[1,4],noImageSrc:"/images/blank.gif",onChange:e=>{if(!e||-1==e)return;const t=cur.uiTransferTo.val_full();cur.paymentsOptions.toId=t[0],cur.paymentsOptions.hash=t[5],(0,u.val)("payments_money_transfer_summary",t[6]),setTimeout(u.elfocus.pbind("transfer_amount"),100),cur.paymentsOptions.vkpayAvailable&&L.updateMethods()}})}else(0,u.ge)("transfer_method")&&L.initMethods();setTimeout(u.elfocus.pbind("transfer_amount"),100),(0,r.shortCurrency)(),"link"===cur.paymentsOptions.boxTab&&L.genQRCode();let t=(0,u.val)("transfer_amount");t&&L.checkAmount(t,!1,!0),L.autosizeAmount(),L.showMoneyLinksTooltip(),cur.transferPageLoaded=!1,cur.destroy.push(L.destroy)},destroy(){L.stopCheckFrameLoad(),cur.uiTransferTo&&cur.uiTransferTo.destroy(cur.uiTransferTo),cur.qrFrame&&(0,u.re)(cur.qrFrame)},initMethods(){cur.paymentsOptions.onlyCards=!(0,u.isVisible)("payments_money_transfer_receive_methods");let e=cur.paymentsOptions.cardSelected;if([M,O].includes(parseInt(cur.paymentsOptions.forceType)))for(const[t]of cur.paymentsOptions.cards)t===D&&(e=D);if(cur.uiTransferCard=new Dropdown((0,u.ge)("transfer_method"),cur.paymentsOptions.cards,{big:!0,selectedItems:e,onChange:(e,t)=>{if(-2===parseInt(e)){const e=(0,u.se)(t);nav.go(e.getAttribute("data-url"));const o=document.querySelector("#payments_money_transfer_send");return P.FlatButton.lock(o),!1}L.updateTransferType(),L.updateCardFee(!0),(0,u.val)("transfer_amount")||setTimeout(u.elfocus.pbind("transfer_amount"),100)}}),!cur.paymentsOptions.onlyCards){(0,u.geByClass1)("payments_money_transfer_receive_options","payments_money_transfer_receive_methods")&&(window.radioBtns.receiveOptions={els:Array.prototype.slice.apply((0,u.geByClass)("radiobtn")),val:e==D?"vkpay":"cards"})}if(void 0!==cur.paymentsOptions.vkpayBalance&&((0,h.each)((0,u.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,_.addEvent)(this,"mousedown",L.onPinClick),(0,_.addEvent)(this,"keyup",L.onPinKeyUp),(0,_.addEvent)(this,"keypress",L.onPinEnter)})),L.isVKPayFillUpEnabled())){const e=L.getBindCards();e.length>0&&(cur.uiFillUpCard=new Dropdown((0,u.ge)("fill_up_card"),e,{big:!0,selectedItems:cur.paymentsOptions.fillUpCardSelected}))}const t=!cur.paymentsOptions.transferType||cur.paymentsOptions.forceType;t&&L.updateTransferType(),L.updateCardFee(!t)},updateLocalStorageNewWindowSign(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()+20+20*Math.random());return localStorage.setItem("money_transfer_new_window",t.getTime()),t},getLocalStorageNewWindowSign(){let e=parseInt(localStorage.getItem("money_transfer_new_window")??0);if(1===e)e=L.updateLocalStorageNewWindowSign().getTime();else if(0===e)return!1;return e>(new Date).getTime()},updateMethods(){const e=cur.paymentsOptions.toId;if(!e||!cur.paymentsOptions.vkpayAvailable||!C.Ranges.isUserIdTransitional(e)&&!C.Ranges.isChatOrChannelPeer(e))return;const t=document.querySelector("#payments_money_transfer_send");(0,u.val)("payments_box_error",""),cur.moneyTranferMethodsReq&&(cur.moneyTranferMethodsReq.abort(),cur.moneyTranferMethodsReq=null),"request"!==cur.paymentsOptions?.boxTab&&(cur.moneyTranferMethodsReq=ajax.post("al_payments.php?act=a_get_money_transfer_methods",{to_id:e},{onDone:(e,o)=>{P.FlatButton.unlock(t),(0,u.val)("payments_money_transfer_methods",e),cur.paymentsOptions=(0,h.extend)(cur.paymentsOptions,o),cur.paymentsOptions.transferType=o.transferType,L.initMethods()},onFail:e=>(e&&(0,s.isString)(e)&&(P.FlatButton.unlock(t),L.showError(e)),!0),showProgress:()=>P.FlatButton.lock(t)}))},send(e=!1,t=!1){const o=(0,c.curBox)(),i=document.querySelector("#payments_money_transfer_send");if(P.FlatButton.isLocked(i))return;if(!cur.paymentsOptions.toId&&cur.uiTransferTo)return void(0,n.notaBene)(cur.uiTransferTo.container);let r=0;if(L.resetTransferWindow(),!(0,u.isVisible)("payments_money_transfer_no_amount_wrap")){if(r=(0,u.val)("transfer_amount"),!r||r<=0)return(0,u.addClass)("payments_money_transfer_amount_wrap","money_error"),setTimeout(u.removeClass.pbind("payments_money_transfer_amount_wrap","money_error"),500),void(0,u.elfocus)("transfer_amount");if(!L.checkAmount(r,!0))return;if((0,n.isChecked)("transfer_participate")){r-=L.getChunkAmount(r,!0)}}if(L.hideMoneyLinksTooltip(),cur.paymentsOptions.onSendStart&&cur.paymentsOptions.onSendStart(),"request"===cur.paymentsOptions.boxTab)return void L.sendRequest(r);L.createFrame();let s={act:"a_init_money_transfer",to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:r,currency:cur.paymentsOptions.currency,comment:(0,u.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash,accept_vk_pay_offer:cur.paymentsOptions.shouldAcceptVkPayOffer};if(cur.paymentsOptions.vkpayAvailable&&(s.card_id=cur.uiTransferCard.val(),cur.paymentsOptions.onlyCards||(s.receive_method=(0,n.radioval)("receiveOptions")),"-1"===s.card_id)){if(!t)return void L.showPinBox();s.vkpay_pin=t}if(L.isVKPayTransfer()&&L.isVKPayFillUpEnabled()&&L.isFillUpCardSelectionVisible()&&(s.fill_up_card_id=cur.uiFillUpCard.val()),cur.paymentsOptions.requestId&&(s.request_id=cur.paymentsOptions.requestId),cur.paymentsOptions.statSessionId&&(s.stat_session_id=cur.paymentsOptions.statSessionId),(0,u.val)("payments_box_error",""),e||!localStorage||this.isVKPayTransfer()||"-1"===s.card_id||(e=L.getLocalStorageNewWindowSign()),e){cur.paymentsOptions.qid&&(s.act="a_continue_money_transfer",s.qid=cur.paymentsOptions.qid),cur.transferWindow=window.open("","Money Transfer");let e=v.PaymentsBox.popupHtml(f.getLang("payments_cards_redirect"),"","");cur.transferWindow.document.write(e)}ajax.post("al_payments.php",s,{onDone:(t,i)=>{if(i)if(cur.paymentsOptions.qid=t.qid,e)cur.transferWindow?L.updateTransferWindow(i):L.showError(f.getLang("payments_payment_cancelled"),"info_msg");else{let e;cur._popup_text=i,cur._popup_callback=function(){(0,u.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_prg","payments_iframe_cookie_disabled_div"),(0,u.show)("payments_money_transfer_iframe","payments_iframe_container"),cur.uiTransferTo&&((0,u.hide)("payments_money_transfer_user_select"),(0,u.show)("payments_money_transfer_user")),(0,u.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",L.frameMessage,!1),o.changed=!0,o.setOptions({width:510}),!cur.paymentsOptions.requestId&&(0,u.isVisible)(o.titleWrap)&&o.setBackTitle(L.resetSendBox),(0,u.setStyle)(e,{width:(0,u.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},e=(0,u.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(i),e.contentWindow.document.close(),cur._popup_callback(),L.startCheckFrameLoad(+new Date)}else cur.paymentsOptions.receiptRedesign&&window.addEventListener("message",L.frameMessage,!1),(0,u.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_container",(0,u.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,u.hide)("payments_money_transfer_user_select"),(0,u.show)("payments_money_transfer_user")),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg");L.startCheckStatus(t,e)},onFail:e=>(L.resetTransferWindow(),L.showError(e),!0),showProgress:()=>P.FlatButton.lock(i),hideProgress:()=>P.FlatButton.unlock(i)})},sendRequest(e){let t=document.querySelector("#payments_money_transfer_send"),o={to_id:cur.paymentsOptions.toId,owner_id:cur.paymentsOptions.ownerId,amount:e,currency:cur.paymentsOptions.currency,comment:(0,u.val)("transfer_comment"),from:cur.paymentsOptions.from,hash:cur.paymentsOptions.hash};if(cur.paymentsOptions.statSessionId&&(o.stat_session_id=cur.paymentsOptions.statSessionId),cur.paymentsOptions.isChat){if(o.total_amount=parseInt(e),o.amount=parseInt((0,u.val)("transfer_chunk_amount")),o.pin_message=(0,n.isChecked)("transfer_pin_message")?1:0,(0,n.isChecked)("transfer_autoaccept")&&(cur.autoacceptCardDD&&(o.accept_card=cur.autoacceptCardDD.val()),!o.accept_card||-1==o.accept_card))return L.showError(f.getLang("payments_money_request_error_no_accept_card")),!1;let t=!1;const i=L.getTransferLimit("minAmount"),r=L.getTransferLimit("maxAmount");if(i&&o.amount<i?t=f.getLang("payments_money_request_error_min_chunk_amount_currency"):r&&o.amount>r?t=f.getLang("payments_money_request_error_max_chunk_amount_currency"):o.total_amount&&o.amount>o.total_amount&&(t=f.getLang("payments_money_request_error_chunk_amount_too_big")),t)return L.showError(t),(0,n.notaBene)("transfer_chunk_amount"),!1}(0,u.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_send_money_request",o,{onDone:e=>{(0,c.curBox)().hide(),(0,c.showDoneBox)(e,{out:6e3})},onFail:e=>(L.showError(e),!0),showProgress:()=>P.FlatButton.lock(t),hideProgress:()=>P.FlatButton.unlock(t)})},sendBind(){const e=(0,c.curBox)();L.createFrame(),(0,u.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_money_transfer_summary_wrap","payments_iframe_container",(0,u.geByClass1)("msg","payments_money_transfer_iframe"),(0,u.geByClass1)("tb_tabs_wrap",e.bodyNode)),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg"),e.setBackTitle(L.resetSendBox),e.setOptions({width:510});const t={type:"card",only_auth:1,hash:cur.paymentsOptions.bindHash};(0,u.val)("payments_box_error",""),ajax.post("al_payments.php?act=a_getvotes_charge",t,{onDone:(t,o)=>{let i;cur._popup_text=o,cur._popup_callback=function(){(0,u.hide)("payments_money_transfer_prg"),(0,u.show)("payments_iframe_container"),(0,u.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",L.frameMessage,!1),cur.autoacceptCardDD&&(0,u.isVisible)(cur.autoacceptCardEl)&&cur.autoacceptCardDD.select(cur.paymentsOptions.cards[0][0]),e.changed=!0,(0,u.setStyle)(i,{width:(0,u.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},i=(0,u.ge)("transfer_iframe"),i.contentWindow.document.open("text/html","replace"),i.contentWindow.document.write(o),i.contentWindow.document.close(),cur._popup_callback(),cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTranferCheckInt=setInterval((function(){L.checkBindStatus(t),(cur.isPaymentCanceled||cur.isPaymentFailed)&&(clearInterval(cur.moneyTranferCheckInt),cur.isPaymentFailed?L.showError(f.getLang("payments_landing_cancelled")):L.showError(f.getLang("payments_payment_cancelled"),"info_msg"))}),2e3)},onFail:e=>(L.showError(e),!0)})},createFrame(){let e=(0,u.ge)("payments_iframe_container"),t=(0,u.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:510-(0,n.sbWidth)()+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t)},popupWrite(e){if(e.document.innerHTML!==cur._popup_text){e.document.write(cur._popup_text),e.document.close();try{e.document.charset="windows-1251"}catch(e){}e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback()}},resetSendBox(){const e=(0,c.curBox)();if(!e)return;const t=(0,u.geByClass1)("tb_tabs_wrap",e.bodyNode);(0,u.hide)("payments_money_transfer_iframe"),(0,u.show)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_money_transfer_summary_wrap",t,(0,u.geByClass1)("payments_money_transfer_mc_info_msg","payments_money_transfer_iframe")),cur.uiTransferTo&&((0,u.hide)("payments_money_transfer_user"),(0,u.show)("payments_money_transfer_user_select")),t&&e.setOptions({title:""}),e.changed=!1,e.setOptions({width:510}),(0,u.isVisible)(e.titleWrap)&&e.setBackTitle(!1)},resetTransferWindow(){cur.transferWindow&&((0,u.show)("payments_money_transfer_wrap","payments_money_transfer_buttons"),(0,u.hide)("payments_money_transfer_prg","payments_money_transfer_iframe"),cur.transferWindow.location=window.location,cur.transferWindow.close()),cur.transferWindow=void 0},updateTransferWindow(e){const t=cur.transferWindow.document.getElementById("wait_text_container");t&&(t.innerHTML=""),cur.transferWindow.document.write(e),setTimeout((()=>{cur.transferWindow.document.getElementById("popup_payment_form")?.submit()}),1500),window.addEventListener("message",L.frameMessage,!1),(0,u.hide)("payments_money_transfer_wrap","payments_money_transfer_buttons","payments_box_error","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,u.val)("payments_transfer_box_progress_msg",f.getLang("payments_waiting_transfer_complete")),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg")},startCheckStatus(e,t=!1){cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.moneyTransferRedirected=!1,cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=setInterval((function(){if(L.checkStatus(e,t),cur.isPaymentCanceled||cur.isPaymentFailed){let t=L.resetTransferWindow();if(t&&t(),clearInterval(cur.moneyTranferCheckInt),e.accept)return void(0,c.curBox)().hide();cur.isPaymentFailed?L.showError(f.getLang("payments_landing_cancelled")):L.showError(f.getLang("payments_payment_cancelled"),"info_msg")}}),2e3)},hideBoxQueue(){for(;boxQueue.count();)boxQueue.hideLast(!1)},stopListeningFrameMessages(){window.removeEventListener("message",L.frameMessage,!1)},checkStatus(e,t){const o={act:"a_check_money_transfer",qid:e.qid,hash:e.hash};e.accept&&(o.accept=e.accept),ajax.post("al_payments.php",o,{onDone:(o,i,r,s)=>{if(!o||4==o&&cur.moneyTransferRedirected)t&&cur.transferWindow?.closed&&(L.showError(f.getLang("payments_payment_cancelled")),L.stopListeningFrameMessages(),L.resetTransferWindow(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1);else{if(1==o||3==o){if(t){0===cur.paymentsOptions.transferType||cur.paymentsOptions.transferType===O?cur.transferWindow&&!cur.transferWindow.closed&&(L.resetTransferWindow(),L.hideBoxQueue()):(L.resetTransferWindow(),L.hideBoxQueue())}else cur.paymentsOptions.transferType===M?(L.resetTransferWindow(),L.hideBoxQueue()):cur.paymentsOptions.receiptRedesign&&((0,u.hide)(document.querySelector(".payments_money_transfer_footer")),s?.receipt_link&&L.setIframeByLink(s.receipt_link));s||(0,c.showDoneBox)(i,{out:6e3});const n=nav.objLoc;e.accept||"settings"!==n[0]||"payments"!==n.act||"transfer"!==n.section||(cur.historyOffset||(cur.historyOffset={}),cur.historyOffset.transfer=0,(0,T.showNextPaymentsHistory)(!1,n.section)),3==o&&(s&&s.title&&(0,l.showFastBox)({title:s.title},i,f.getLang("payments_remember_card_btn"),L.rememberAcceptCard.pbind(s),f.getLang("payments_dont_remember_card_btn")),TopNotifier.invalidate(),cur.acceptMoneyBtn&&(0,u.hasClass)((0,u.domPN)(cur.acceptMoneyBtn),"feedback_buttons")?((0,u.re)((0,u.domPN)(cur.acceptMoneyBtn)),cur.acceptMoneyBtn=!1):cur.acceptMoneyBtn&&((0,u.re)((0,u.geByClass1)("_decline_btn",(0,u.domPN)(cur.acceptMoneyBtn))),(0,u.domReplaceEl)(cur.acceptMoneyBtn,r),cur.acceptMoneyBtn=!1))}else if(2==o||5==o)L.showError(i),L.stopListeningFrameMessages(),cur.isPaymentFailed=!1,cur.isPaymentCanceled=!1;else{if(4==o){if(cur.moneyTransferRedirected=!0,cur._popup_text=r,t&&cur.transferWindow)L.updateTransferWindow(r);else{let e;cur._popup_callback=function(){(0,u.hide)("payments_money_transfer_prg"),(0,u.show)("payments_iframe_container"),(0,u.ge)("payments_iframe_container").scrollTop=0,window.addEventListener("message",L.frameMessage,!1),(0,c.curBox)().changed=!0,(0,u.setStyle)(e,{width:(0,u.ge)("payments_iframe_container").parentNode.offsetWidth-(0,n.sbWidth)()+"px"})},e=(0,u.ge)("transfer_iframe"),e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(r),e.contentWindow.document.close(),cur._popup_callback()}return}if(6==o)return void((0,u.isVisible)("payments_money_transfer_prg")||((0,u.hide)("payments_iframe_container"),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg")))}clearInterval(cur.moneyTranferCheckInt)}},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),L.resetTransferWindow()(),L.showError(e),!0)})},checkBindStatus(e){let t={act:"a_getvotes_check",type:"card"};e&&(e.oid||e.qid)&&(t.oid=e.oid,t.qid=e.qid,t.hash=e.hash),ajax.post("al_payments.php",t,{onDone:(e,t,o)=>{e&&(1==e?(L.resetSendBox(),L.enableAutoaccept(),o&&cur.autoacceptCardDD&&((0,u.isVisible)(cur.autoacceptCardEl)||((0,u.hide)((0,u.geByTag)("A",cur.autoacceptCardEl.parentNode)[0]),(0,u.show)(cur.autoacceptCardEl)),cur.paymentsOptions.cards.unshift([o.bindingId,o.bin]),cur.autoacceptCardDD.setItems(cur.paymentsOptions.cards),cur.autoacceptCardDD.select(o.bindingId))):2!=e&&10!=e||L.showError(t),clearInterval(cur.moneyTranferCheckInt))},onFail:e=>(clearInterval(cur.moneyTranferCheckInt),L.showError(e),!0)})},paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,L.frameHeight()},frameHeight(e,t){let o=(0,u.ge)("transfer_iframe");e?(e=Math.max(e,250),cur.prevFrameHeight=o.style.height,o.style.height=e+"px"):(o.style.height=cur.prevFrameHeight,(0,u.removeClass)("payments_iframe_container","payments_threeds_frame")),t||((0,u.ge)("payments_iframe_container").style.height=(e||cur.prevFrameHeight)+15+"px"),(0,u.ge)("payments_iframe_container").scrollTop=0},frameMessage(e){if(!(0,c.curBox)()&&cur.paymentsOptions.receiptRedesign)return void L.stopListeningFrameMessages();if(!(e.origin.match(/^https?:\/\/([a-zA-Z0-9\-.]+\.)?money\.mail\.ru$/)||e.origin.match(new RegExp(`^https?:\\/\\/([a-zA-Z0-9\\-.]+\\.)?${I.VK_SITE_REGEX_SOURCE_UNSAFE}$`))&&cur.paymentsOptions?.receiptRedesign))return!1;let t={};if(e.data){switch(typeof e.data){case"object":t=e.data;break;case"string":"{"===e.data.substr(0,1)&&(t=(0,p.parseJSON)(e.data))}if("billing"!==t.type)return!1}vk.dev&&(0,m.debugLog)(t);const o=(0,u.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,u.ge)("payments_iframe_container");if(cur.transferPageLoaded=!0,"resizeFrame"===t.action?setTimeout(L.frameHeight.pbind(t.action_params.height),200):"submit"===e.data||"3dsPage"===t.action?(setTimeout(L.frameHeight.pbind(600,!0),200),(0,u.addClass)(o,"payments_threeds_frame")):"3dsFinish"===t.action?(L.frameHeight(),(0,u.removeClass)(o,"payments_threeds_frame")):"session_fail"===t.action?((0,u.hide)(o),L.resetTransferWindow(),(0,u.show)("payments_iframe_safari_trouble_div"),L.updateLocalStorageNewWindowSign()):"putPixel"===t.action&&"page_load"===t.action_params.alias?(v.PaymentsBox.finishFormMeasure("dmr_transfer"),(0,E.statlogsValueEvent)("money_transfers",0,"iframe_loaded")):"paySuccess"===t.action?setTimeout(L.frameHeight.pbind(500),300):"payError"===t.action&&(0,u.isVisible)("payments_iframe_container")&&((0,u.hide)("payments_iframe_container"),(0,u.val)("payments_transfer_box_progress_msg",f.getLang("payments_waiting_transfer_complete")),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg")),cur.paymentsOptions.receiptRedesign){if("make_one_more_transfer"===t.action||"close_window"===t.action)switch(clearInterval(cur.moneyTranferCheckInt),L.resetTransferWindow(),L.stopListeningFrameMessages(),t.action){case"make_one_more_transfer":L.resetSendBox();break;case"close_window":L.hideBoxQueue()}if("get_transfer_source"===t.action){let e=vk.dev?"*":window.location.origin;cur.transferWindow&&cur.transferWindow.postMessage(JSON.stringify({from:cur.paymentsOptions.from}),e);let t=(0,u.ge)("transfer_iframe");t&&t.contentWindow.postMessage(JSON.stringify({action:"set_transfer_source",source:cur.paymentsOptions.from}),e)}}},setIframeByLink(e){let t=(0,u.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,u.ge)("payments_iframe_container"),o=(0,u.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});o.frameBorder=0,t.innerHTML="",t.appendChild(o),(0,u.hide)((0,u.ge)("payments_money_transfer_prg")),(0,u.show)(t),o.src=e},startCheckFrameLoad(e){cur.frameLoadChecker=setInterval((function(){if(cur.transferPageLoaded)L.stopCheckFrameLoad();else{+new Date-e>5e3&&(L.stopCheckFrameLoad(),L.resetTransferWindow(),(0,u.hide)("payments_iframe_container"),(0,u.show)("payments_iframe_safari_trouble_div"),L.updateLocalStorageNewWindowSign())}}),1e3)},stopCheckFrameLoad(){clearInterval(cur.frameLoadChecker)},initAccept(e,t,o=!1){if(o)cur.transferWindow=window.open("/","Money transfer"),cur.transferWindow.document.write(t),(0,u.hide)("payments_box_error","payments_iframe_container","payments_iframe_safari_trouble_div","payments_iframe_container"),(0,u.val)("payments_transfer_box_progress_msg",f.getLang("payments_waiting_transfer_complete")),(0,u.show)("payments_money_transfer_iframe","payments_money_transfer_prg");else{let e=(0,u.geByClass1)("payments_iframe_container",(0,c.curBox)().bodyNode)||(0,u.ge)("payments_iframe_container");(0,u.show)(e);let o=(0,u.ce)("iframe",{id:"transfer_iframe",name:"transfer_iframe"},{border:0,height:"445px",width:"510px",overflowX:"hidden",overflowY:"hidden"});o.frameBorder=0,e.innerHTML="",e.appendChild(o),o.contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(t),o.contentWindow.document.close(),L.startCheckFrameLoad(+new Date)}window.addEventListener("message",L.frameMessage,!1),L.startCheckStatus(e,o)},rememberAcceptCard(e){const t=(0,c.curBox)()||{};let o=t.btns.ok[0];ajax.post("al_payments.php?act=a_remember_money_transfer_accept_card",{card_id:e.card_id,hash:e.hash},{onDone:t.hide,showProgress:()=>P.FlatButton.lock(o),hideProgress:()=>P.FlatButton.unlock(o)})},cleanAmount(e,t,o){if(13===t.keyCode)return;let n=e.value.replace(/[^0-9]/g,"");n=n.replace(/^0+/,""),e.value!=n&&(e.value=n),o||(L.checkAmount(n),L.autosizeAmount(),cur.paymentsOptions.cardsFee&&L.updateCardFee(!0))},getTransferLimit(e){let t="request"===cur.paymentsOptions.boxTab?0:cur.paymentsOptions.transferType;return"balance"===e&&parseInt(t)===M?cur.paymentsOptions.vkpayBalance:(cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab&&"maxAmount"===e&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(t=2),cur.paymentsOptions.limits[t][e])},checkAmount(e,t,o){let i=!1;const r=(0,u.hasClass)("payments_money_transfer_amount_wrap","money_error"),s=parseInt(cur.uiTransferCard?.val())===D,a=L.isVKPayTransfer(),_=L.isVKPayFillUpEnabled();if(t&&r)return a&&e>L.getTransferLimit("balance")&&!_&&(0,l.showFastBox)({title:f.getLang("payments_vkpay_low_balance_title"),width:420},f.getLang("payments_vkpay_low_balance_text"),f.getLang("payments_vkpay_topup_button"),nav.go.pbind("/vkpay#action=refill"),f.getLang("global_close")),!1;const c=cur.paymentsOptions.isChat&&"request"===cur.paymentsOptions.boxTab,d=c&&(0,n.isChecked)("transfer_participate"),p=L.getTransferLimit("minAmount")*(d?2:1),h=L.getTransferLimit("maxAmount"),m=L.getTransferLimit("balance"),E=(0,f.langNumeric)(p,cur.paymentsOptions.currencyStr,!0),g=f.getLang("payments_money_transfer_amount_limits").replace("{min_amount}",E);let y=!c;if(c&&cur.autoacceptCardDD&&-2===cur.autoacceptCardDD.val()&&(y=!0),s&&a&&_&&!(void 0!==m&&e<=m)||L.hideFillUpCardSelection(),t&&p&&e<p)i=f.getLang("payments_money_transfer_error_min_amount_currency").replace("{min_amount}",E);else if(h&&y&&e>h){const e=(0,f.langNumeric)(h,cur.paymentsOptions.currencyStr,!0);i=f.getLang("payments_money_transfer_error_max_amount_currency").replace("{max_amount}",e)}else if(s&&void 0!==m&&e>m)if(a&&_){L.getBindCards().length>0?L.showFillUpCardSelection():i=f.getLang("payments_money_transfer_low_balance")}else i=f.getLang("payments_money_transfer_low_balance");const v=(0,u.ge)("payments_money_transfer_notice");if(0!=i)return(0,u.val)(v,i),(0,u.addClass)("payments_money_transfer_amount_wrap","money_error"),!1;if((r||o||e<p)&&((e<p||"request"===cur.paymentsOptions.boxTab)&&(0,u.val)(v,g),(0,u.removeClass)("payments_money_transfer_amount_wrap","money_error")),!t&&c){const t=L.getChunkAmount(e,d);if((0,u.val)("transfer_chunk_amount",t),p&&e<p)(0,u.val)(v,g);else{const o=d?e-t:e,n=(0,f.langNumeric)(o,cur.paymentsOptions.currencyStr,!0);(0,u.val)(v,f.getLang("payments_money_transfer_will_be_requested").replace("{amount}",n))}}return!0},getChunkAmount(e,t){const o=L.getTransferLimit("minAmount"),n=L.getTransferLimit("maxAmount");let i=Math.max(o||100,Math.ceil(e/Math.max(1,cur.paymentsOptions.chatCount-(t?0:1))));return n&&(i=Math.min(i,n)),i},autosizeAmount(){let e=(0,u.ge)("transfer_amount"),t=(0,u.ce)("span",{innerHTML:e.value||"0"},{fontFamily:(0,u.getStyle)(e,"fontFamily"),fontSize:(0,u.getStyle)(e,"fontSize"),fontWeight:(0,u.getStyle)(e,"fontWeight")});(0,u.ge)("utils").appendChild(t);let o=Math.floor((0,u.getSize)(t)[0])+50;(0,u.re)(t),cur.amountMinSize||(cur.amountMinSize=80),o<cur.amountMinSize&&(o=cur.amountMinSize),(0,u.setStyle)(e,{width:o})},checkUserMessage(){(0,p.checkTextLength)(cur.paymentsOptions.maxTextLength,(0,u.ge)("transfer_comment"),(0,u.ge)("transfer_comment_limit_message"),!1,!0),((0,u.val)("transfer_comment_limit_message")&&(0,u.isVisible)("transfer_comment_limit_message")?u.hide:u.show)("payments_money_transfer_fee_link")},checkRequestParticipate(){L.checkAmount((0,u.val)("transfer_amount"))},checkRequestNoAmount(e,t){e&&uiTabs.switchTab(e),t?((0,u.hide)("payments_money_transfer_amount_wrap","transfer_participate"),(0,u.show)("payments_money_transfer_no_amount_wrap")):((0,u.hide)("payments_money_transfer_no_amount_wrap"),(0,u.show)("payments_money_transfer_amount_wrap","transfer_participate"),(0,u.elfocus)("transfer_amount"))},checkAutoAccept(){(0,u.toggleClass)("transfer_autoaccept_card","disabled",!(0,n.isChecked)("transfer_autoaccept"))},enableAutoaccept(){(0,n.isChecked)("transfer_autoaccept")||((0,n.checkbox)("transfer_autoaccept",!0),(0,u.removeClass)("transfer_autoaccept_card","disabled"))},showMoneyTransferBox:(e,t,o=void 0,n=null)=>(0,l.showBox)("al_payments.php",{...e,act:"money_transfer_box"},{...t,onDone(e,t){n?.(),cur.paymentsOptions=t,e.setOptions({width:510,bodyStyle:"padding: 0;",hideButtons:!0,onClean(){cur.moneyTranferCheckInt&&clearInterval(cur.moneyTranferCheckInt),nav.objLoc.z&&"moneysend"===nav.objLoc.z.substr(0,9)&&(delete nav.objLoc.z,nav.setLoc(nav.objLoc))}}),L.init()},onFail:o}),aboutBox:e=>!(0,l.showFastBox)({title:f.getLang("payments_money_transfer_about_title"),width:560},f.getLang(e)),showError(e,t){e&&((0,u.ge)("payments_box_error").innerHTML="",(0,d.showMsg)("payments_box_error",e,t||"error"),(0,u.show)("payments_box_error")),(0,u.ge)("payments_money_transfer_wrap")&&(L.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1))},switchBoxSection(e,t){if(cur.paymentsOptions.boxTab!==t){if(e&&uiTabs.switchTab(e),"transfer"===cur.paymentsOptions.boxTab&&(0,u.isVisible)("payments_money_transfer_iframe")&&(L.resetSendBox(),cur.moneyTranferCheckInt&&(clearInterval(cur.moneyTranferCheckInt),cur.moneyTranferCheckInt=!1)),"transfer"===cur.paymentsOptions.boxTab&&cur.paymentsMoneyBoxTTHide&&cur.paymentsMoneyBoxTTHide(),"link"===cur.paymentsOptions.boxTab&&((0,u.hide)("payments_money_link_box"),(0,u.show)("payments_money_transfer_request_box"),L.hideMoneyLinksTooltip()),cur.paymentsOptions.boxTab=t,"link"===t)(0,u.hide)("payments_money_transfer_request_box"),(0,u.show)("payments_money_link_box"),L.hideMoneyLinksTooltip(),L.genQRCode(),L.showMoneyLinksTooltip();else{(0,u.val)("payments_money_transfer_summary",cur.paymentsOptions.boxSections[t].summary);const e=document.querySelector("#payments_money_transfer_send");P.FlatButton.setLabel(e,cur.paymentsOptions.boxSections[t].btn),(0,u.val)("payments_money_transfer_user_select_label",cur.paymentsOptions.boxSections[t].user_select_label),L.checkAmount((0,u.val)("transfer_amount"),!1,!0),"transfer"===t&&L.updateCardFee(!0)}(0,u.toggle)("payments_money_transfer_nf_warning","transfer"===t),(0,u.toggle)("payments_money_transfer_methods","transfer"===t),(0,u.toggle)("payments_money_transfer_vk_pay_offer","transfer"===t),L.renderSelectBox(),setTimeout(u.elfocus.pbind("transfer_amount"),100)}},genQRCode(){const e=(0,u.ge)("payments_money_transfer_qr");if(e.childNodes.length)return;const t={isShowLogo:!0,isShowBackground:!1,foregroundColor:S.default.colorTextPrimary.normal.value,logoColor:S.default.colorIconAccent.normal.value};(0,u.val)(e,y().createQR(cur.paymentsOptions.transferLink,115,"qr-code",t))},shareQRCode(){L.hideMoneyLinksTooltip(!0),(0,l.showBox)("like.php",{act:"publish_box",object:"moneysend"+vk.id+"_0",list:""})},downloadQRCode(){if(!cur.paymentsOptions.qrUrl)return!1;let e=(0,u.ce)("iframe",{src:cur.paymentsOptions.qrUrl});return utilsNode.appendChild(e),cur.qrFrame&&(0,u.re)(cur.qrFrame),cur.qrFrame=e,!1},hideLinkCopied(){(0,h.each)((0,u.geByClass)("_link_copied","payments_money_link_box"),u.hide.pbind(this))},copyLinkToClipboard(e){L.hideLinkCopied(),L.hideMoneyLinksTooltip(!0),e.select(),document.execCommand("copy");const t=(0,u.geByClass1)("_link_copied",(0,u.gpeByClass)("_link_wrap",e));(0,u.show)(t)},renderSelectBox(){if(!cur.uiTransferTo)return;const e="transfer"===cur.paymentsOptions.boxTab;cur.uiTransferTo.setData([]),cur.uiTransferTo.setOptions({autocomplete:!1}),cur.uiTransferTo.setData(cur.paymentsOptions.friends.filter((function(t){return e||!0===t[7]}))),cur.uiTransferTo.setOptions({autocomplete:!0}),cur.paymentsOptions.toId=null,cur.paymentsOptions.hash=null,cur.uiTransferTo.clear(),cur.uiTransferTo.deselectTokens(),(0,u.val)("payments_money_transfer_methods","")},updateImHistory(e,t,o){const n=(0,u.geByClass1)("_money_transfer"+t,e);if(!n)return;let i=(0,u.geByClass1)("_accept_btn",n);i&&((0,u.re)((0,u.geByClass1)("_decline_btn",(0,u.domPN)(i))),(0,u.domReplaceEl)(i,o))},initHistoryBox(e,t,o,r){let s=(0,u.ge)("ui_money_transfer_load_more");if(s){let a=(0,u.ge)("settings_transfer_history").tBodies[0];cur.userAutoScroll=new w.default(a,{offset:o,onNoMore:u.re.pbind(s),onNeedRows:(o,n)=>{let i={act:"money_transfer_history_box",offset:n,owner_id:e};t&&(i.request_id=t),r&&(i.hash=r),ajax.post("al_payments.php",i,{onDone:o})},drawRows:(e,t)=>{if(i.browser.msie){const o=(0,u.se)("<table>"+t+"</table>");t=(0,u.geByTag)("tr",o);for(let o in t)1==t[o].nodeType&&e.appendChild(t[o])}else e.insertAdjacentHTML("beforeEnd",t)},showProgress:()=>(0,n.lockButton)(s),hideProgress:()=>(0,n.unlockButton)(s),rowClass:"settings_history_row"})}},historyBox(){(0,l.showBox)("al_payments.php?act=money_transfer_history_box")},showMoneyLinksTooltip(){if(!cur.paymentsOptions.moneylinks_feature_tooltip||cur.moneyLinksTooltip)return;let e,t,o;(0,u.isVisible)("payments_money_link_box")?(e=(0,u.geByClass1)("payments_money_transfer_link_copy_btn","payments_money_link_box"),t=f.getLang("payments_money_link_btn_feature_text"),o={forceSide:"right",width:320,offset:[6,0]}):(e=(0,u.geByClass1)("ui_tab",(0,u.geByClass1)("_moneylink_tab","box_layer")),e&&(t=f.getLang("payments_money_link_tab_feature_text"),o={forceSide:"bottom",width:250,offset:[0,4]})),e&&setTimeout((function(){cur.moneyLinksTooltip=new ElementTooltip(e,(0,h.extend)({content:'<div class="feature_tooltip__close" onclick="cur.moneyLinksTooltip.hide();"></div>'+t,cls:"feature_intro_tt feature_info_tooltip moneylinks_feature_tooltip",autoShow:!1,noHideOnClick:!0,noAutoHideOnWindowClick:!0,appendTo:(0,u.geByClass1)("ui_tabs","box_layer"),onHide:L.hideMoneyLinksTooltip.pbind(!0)},o)),cur.moneyLinksTooltip.show(),cur.destroy.push(L.hideMoneyLinksTooltip)}),500)},hideMoneyLinksTooltip(e){e&&ajax.post("al_index.php",{act:"hide_feature_tt",hash:cur.paymentsOptions.moneylinks_feature_tooltip_hash,type:"moneylinks"}),cur.moneyLinksTooltip&&(cur.moneyLinksTooltip.destroy(),delete cur.moneyLinksTooltip)},showPinBox(){(0,u.addClass)((0,c.curBox)().bodyNode,"payments_box_code_showed"),(0,u.show)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,h.each)((0,u.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,u.val)(this,"")})),(0,u.elfocus)("payments_code1"),(0,c.curBox)().changed=!0;const e=document.querySelector("#payments_money_transfer_send");e&&(e.style.pointerEvents="none",setTimeout((()=>{e.style.pointerEvents="auto"}),0))},hidePinBox(){(0,u.hide)("payments_money_transfer_layer_bg","payments_money_transfer_code_box"),(0,u.removeClass)((0,c.curBox)().bodyNode,"payments_box_code_showed"),(0,c.curBox)().changed=!1},checkVkPayOfferBox(){const e="payments_money_transfer_vk_pay_offer_box",t=!(0,n.isChecked)(e),o=document.querySelector("#payments_money_transfer_send");P.FlatButton.setDisabled(o,!t),(0,n.checkbox)(e)},onPinKeyUp(e){const t=e.target;if(8==e.keyCode){const e=(0,u.domPS)(t);if(e){const t=e.getAttribute("data-index");(0,u.val)(e,""),cur.paymentsOptions.vkpcode[t]="",cur.paymentsOptions.vkpcode[t-1]="",(0,u.elfocus)(e)}}},onPinEnter(e){const t=e.target;if(!(e.keyCode>=47&&e.keyCode<=57))return(0,_.cancelEvent)(e);{const o=t.getAttribute("data-index");cur.paymentsOptions.vkpcode||(cur.paymentsOptions.vkpcode=[]),cur.paymentsOptions.vkpcode[o-1]=e.key,(0,u.val)(t,String.fromCharCode(9679));const n=(0,u.domNS)(t);n?setTimeout(u.elfocus.pbind(n),10):setTimeout((function(){t.blur(),L.checkPin()}),10)}},onPinClick(e){const t=e.target,o=(0,u.domPS)(t);if(o&&!(0,u.val)(o))return(0,_.cancelEvent)(e)},checkPin(){const e=cur.paymentsOptions.vkpcode.join("");delete cur.paymentsOptions.vkpcode,(0,u.val)("payments_money_transfer_code_error",""),ajax.post("al_payments.php?act=a_check_vkpay_pin",{code:e,hash:cur.paymentsOptions.pinHash},{onDone:t=>{if(1==t)return(0,u.hide)((0,u.geByClass1)("_code_enter","payments_money_transfer_code_box")),void(0,u.show)((0,u.geByClass1)("_code_recover","payments_money_transfer_code_box"));L.hidePinBox(),L.send(!1,e)},onFail:e=>(e&&(0,u.val)("payments_money_transfer_code_error",e),(0,h.each)((0,u.geByClass)("_code","payments_money_transfer_code_wrap"),(function(){(0,u.val)(this,""),(0,n.notaBene)(this)})),(0,u.elfocus)("payments_code1"),!0),showProgress:function(){(0,u.hide)("payments_money_transfer_code_wrap"),(0,u.show)("payments_money_transfer_spinner")},hideProgress:function(){(0,u.hide)("payments_money_transfer_spinner"),(0,u.show)("payments_money_transfer_code_wrap")}})},onReceiveMethodChange(e,t,o){(0,n.radiobtn)(e,t,o),L.updateTransferType(e),L.updateCardFee(!0)},updateTransferType(e){void 0!==cur.paymentsOptions.forceType?cur.paymentsOptions.transferType=cur.paymentsOptions.forceType:parseInt(cur.uiTransferCard.val())===D?cur.paymentsOptions.transferType=M:cur.paymentsOptions.onlyCards?cur.paymentsOptions.transferType=0:(void 0===e&&(0,h.each)(radioBtns.receiveOptions.els,(function(){(0,u.hasClass)(this,"on")&&(e=this)})),void 0!==e&&(cur.paymentsOptions.transferType=(0,h.intval)((0,u.attr)(e,"data-type")))),L.checkAmount((0,u.val)("transfer_amount"),!1,!0)},updateCardFee(e){if(!cur.uiTransferCard||"request"===cur.paymentsOptions.boxTab)return;const t=(0,h.intval)((0,u.val)("transfer_amount")),o=L.getTransferLimit("minAmount"),n=(0,u.ge)("payments_money_transfer_to_card"),i=cur.uiTransferCard.val(),r=cur.paymentsOptions.cardsFee[i],s=0===cur.paymentsOptions.transferType,a=parseInt(i)===D||cur.paymentsOptions.forceType===O||cur.paymentsOptions.forceType===M,_=parseInt(i)!==D&&!cur.paymentsOptions.receiverVkpay||0===cur.paymentsOptions.forceType;let c=f.getLang("payments_transfer_without_fee"),l=f.getLang("payments_money_transfer_btn"),d=a?"payments_money_transfer_to_vkpay":"payments_money_transfer_to_card",p=_,m=0;if((0,u.toggleClass)(n,"disabled",a),(0,u.toggleClass)("payments_money_transfer_to_vkpay","disabled",_),0===parseInt(i))s&&(c=cur.paymentsOptions.mastercardPromoEnabled?f.getLang("payments_transfer_method_without_fee_for_mastercard"):f.getLang("payments_money_transfer_commission_undefined"));else if(parseInt(i)===D)p=!0;else if(s&&r&&(r.percent||r.vkPay&&r.vkPay.percent)){const e=r.free_amount_rest||0,o=r.free_amount_min||0;if(!e||t>e||o&&t<o){let o=t;t>e&&(o=t-e);const n=r.percent||0,i=r.min||0,s=r.add||0;m=o*n,m<i?m=i:m+=s,m=+(Math.round(m+"e+3")+"e-3"),m=+(Math.round(m+"e+2")+"e-2"),c=(0,f.langNumeric)(m,cur.paymentsOptions.cardsFeeStr,!0)}if(r.vkPay){const e=t+m,o=r.vkPay.percent||0,n=r.vkPay.min||0,i=r.vkPay.add||0;let s=e*o;s<n?s=n:s+=i,m=+(Math.round(m+s+"e+2")+"e-2"),s=+(Math.round(s+"e+2")+"e-2"),c=(0,f.langNumeric)(m,cur.paymentsOptions.cardsFeeStr,!0),c+=(0,f.langNumeric)(s,cur.paymentsOptions.cardsFeeVkPayStr,!0)}}!d||e&&!p||(0,u.ge)(d).classList.contains("on")||(0,u.ge)(d).click(),t>=o&&!(0,u.hasClass)("payments_money_transfer_amount_wrap","money_error")&&((0,u.val)("payments_money_transfer_notice",c),0===parseInt(i)&&s||(l=(0,f.langNumeric)(+(Math.round(t+m+"e+2")+"e-2"),cur.paymentsOptions.buttonAmountStr,!0)));const E=document.querySelector("#payments_money_transfer_send");P.FlatButton.setLabel(E,l)},isVKPayFillUpEnabled:()=>1==cur.paymentsOptions.vkpayFillUpEnabled,isVKPayTransfer:()=>parseInt(cur.paymentsOptions.transferType)===M,getBindCards:()=>cur.paymentsOptions.cards.filter((e=>{const t=parseInt(e[0]);return 0!==t&&t!==D})),hideFillUpCardSelection(){(0,u.hide)("payments_money_transfer_fill_up_cards")},showFillUpCardSelection(){(0,u.show)("payments_money_transfer_fill_up_cards")},isFillUpCardSelectionVisible:()=>(0,u.isVisible)("payments_money_transfer_fill_up_cards")}},14563:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{PaymentsBox:()=>PaymentsBox});var _icons_desktop__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(275563),_shared_evbus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(823875),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(714209),_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7144),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(610989),_shared_lib_site__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(705744),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(490712),_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(967886),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(850101),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(618913),_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(452314),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(317412),_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(788407),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(20025),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(810903),_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(248298),_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(357889),_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(507035),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(879007),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(953550);class PaymentsBox{static initHandlers(){(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/ps_promo_banner_click",(e=>{(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments_ps_promo_banner_event","","votes_buypage","relocate"),PaymentsBox.getVotesAmounts(!1,"spasibo",e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/save_phone_prefix_click",(e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByTag1)("input",e.payload.target.parentNode),0,0)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/save_phone_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.saveSmsPhone()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/get_votes_amounts",(e=>{PaymentsBox.getVotesAmounts(!1,e.payload.dataAttrs.name,e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/phone_code_input",(e=>{13===e.payload.event.keyCode&&PaymentsBox.smsSendCode()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_confirm_on_enter",(e=>{13===e.payload.event.keyCode&&PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_confirm",(()=>{PaymentsBox.showConfirm()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_types",(()=>{PaymentsBox.showTypes()})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_terminal_tt",(e=>{PaymentsBox.paymentsShowTerminalTT(e.payload.target,e.payload.dataAttrs.name)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form",(()=>{PaymentsBox.showPhoneForm(2)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_phone_form_1",(()=>{PaymentsBox.showPhoneForm(1)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/show_all_prices",(e=>{PaymentsBox.showAllPrices(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/change_option",(e=>{const{index:t,name:o}=e.payload.dataAttrs;PaymentsBox.onChangeOption(e.payload.target,t,o)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/focus_votes",(()=>{PaymentsBox.onChangeOption((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("last","payments_getvotes_amounts"),4,"payments_getvotes_amounts")})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/update_pay_amount",(e=>{PaymentsBox.updatePayAmount(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/make_checkbox",(e=>{(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.checkbox)(e.payload.target)})),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_0__.tq)().setInteractiveHandler("PaymentsBox/toggle_email",(e=>{PaymentsBox.toggleEmail(e.payload.target)}))}static initialize(e){PaymentsBox.initHandlers(),window.curNotifier&&curNotifier.idle_manager&&curNotifier.idle_manager.started&&((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__.isArray)(cur.onUnidle)||(cur.onUnidle=[]),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_2__.isArray)(cur.onIdle)||(cur.onIdle=[]),cur.onUnidle.push((()=>{cur.getVotesDoneHide=!0})),cur.onIdle.push((()=>{cur.getVotesDoneHide=!1})));let t={bodyStyle:"padding: 0;",hideButtons:!0};if(cur.paymentsWideBox){let e={width:cur.checkoutEnabled?800:780,height:390};cur.checkoutEnabled||(e.title=!1),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,e)}else t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,{width:480});if(e.setOptions((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(t,{onClean:()=>{let t="sms"===cur.votesType&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress");cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt);for(let e in cur.paymentsWaitingCache)cur.paymentsWaitingCache[e][2]&&clearInterval(cur.paymentsWaitingCache[e][2]);cur.smsAmountsInt&&clearTimeout(cur.smsAmountsInt),cur.isPaymentsAppOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)?e.onDone?e.onDone():(e.hide(),_web_payments_app_order_box__WEBPACK_IMPORTED_MODULE_18__.AppOrderBox.processOrder(1,e)):cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.paymentsOrderBillPeriod&&cur.onSubscriptionCancel?cur.onSubscriptionCancel():cur.isPaymentsAppOrder&&!cur.paymentsCheckOrderCnt&&cur.onAppOrderCancel?cur.onAppOrderCancel():cur.paymentsTryCompleteOrder&&(cur.isPaymentComplete||cur.isPaymentAttemted)&&e.onDone&&e.onDone(),PaymentsBox.removeCheckOffersEvent(),window.removeEventListener("message",PaymentsBox.frameMessage,!1),window.removeEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1),t&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showDoneBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_box_close_notice"),{out:6e3})}})),(cur.fromInstantPay||cur.paymentsAuthPayment)&&(e.onDone=!1),cur.votesBox=e,cur.destroy.push((()=>{for(;boxQueue.count();)boxQueue.hideLast(!1)})),cur.checkoutEnabled)if(cur.paymentsWideBox){PaymentsBox.showProgress(""),PaymentsBox.submitDmrCheckout(cur.paymentsPreferVotes,!0);let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_wide_box_close_btn");e&&(e.onclick=cur.votesBox.hide)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_cont"),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")))},PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm);else cur.votesTypeInit&&(PaymentsBox.getVotesAmounts(!1,cur.votesTypeInit),cur.votesTypeInit=!1)}static initPhoneCountry(e,t){cur.countries=e,cur.defCountry=t,cur.uiPhoneCountry=new Dropdown((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone_country"),cur.countries,{selectedItems:t,big:!0,autocomplete:!0,multiselect:!1,onChange:e=>{let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_phone_prefix"),n=cur.uiPhoneCountry.val_full()[3];if(0===e||"0"===e||""===e||!1===e||void 0===e){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(o);if(n==e)return;for(let t=0,o=cur.countries.length;t<o;++t)if(cur.countries[t][3]==e)return cur.uiPhoneCountry.val(cur.countries[t]);return cur.uiPhoneCountry.val(cur.defCountry,!0)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(o,n),setTimeout(_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus.pbind(t),0)}}),cur.destroy.push(cur.uiPhoneCountry.destroy.bind(cur.uiPhoneCountry))}static initPhoneNumber(e){e&&["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(t){e.addEventListener(t,(e=>{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domClosestByTag)("input",e.target);t&&(t.value=t.value.replace(/\D/g,""))}))}))}static validateEmail(e){return e.length<64&&e.match(/^.{1,40}@.{1,40}$/)&&e.match(/^([a-z0-9_\-]{0,40}\.){0,10}[a-z0-9_\-*]{1,40}@(([a-z0-9][a-z0-9_\-]{0,40})?[a-z0-9]\.){1,6}[a-z]{2,7}$/i)}static getEmail(){let e=!1;if(cur.paymentsEmailCheckbox)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(cur.paymentsEmailCheckbox)){if(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(cur.paymentsEmailInput)),!e)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),""}else e="false";return e}static toggleEmail(e){"INPUT"===e.tagName&&(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)(e)),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(e))||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.checkbox)(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)(cur.paymentsEmailInput))}static unbind(e,t,o,n){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit"))return;const i=cur.paymentsPreferVotes;if(!o){const o="card"==e?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_unbind_card_confirm"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_revoke_token_confirm");return void(cur.confirmBox=(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_action_confirmation"),bodyStyle:"padding: 20px; line-height: 160%;"},o,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_unbind_card_btn"),(()=>{PaymentsBox.unbind(e,t,!0)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel")))}const r={act:"a_del_instant_method",type:e,prefer_votes:n?-1:i,hash:t};cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId),ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:function(e){return PaymentsBox.showBoxError(e),!0},showProgress:()=>{cur.confirmBox?cur.confirmBox.showProgress():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit")},hideProgress:()=>{cur.confirmBox?cur.confirmBox.hide():(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit")}})}static instantPay(){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit"))return;const e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();if(cur.isPaymentAttemted=!0,cur.paymentsAuthPayment)return void e.hide();let t,o,n;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")&&(cur.votesAmountsVal=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radioval)("payments_getvotes_amounts")),void 0===cur.votesAmountsData[cur.votesAmountsVal]){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num").value,10):0;if(!(e>0))return;cur._otherVotes=e,t=cur._otherAmount,o=cur._otherAmount,n=cur.votesAmountCustomTimeHash}else t=cur.votesAmountsData[cur.votesAmountsVal][2],o=cur.votesAmountsData[cur.votesAmountsVal][3],n=cur.votesAmountsData[cur.votesAmountsVal][4];let i={act:"a_getvotes_charge",type:cur.votesType,instant_pay:1,amount:t,order_amount:o,hash:n};cur.statSessionId&&(i.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(i.order_id=cur.paymentsOrderId,i.order_app_id=cur.paymentsOrderAppId,i.order_bill_period=cur.paymentsOrderBillPeriod,i.order_hash=cur.paymentsOrderHash),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",i,{onDone:(e,t,o,n)=>{PaymentsBox.setCurMidas(n),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,e)}),2e3),PaymentsBox.showProgress&&PaymentsBox.showProgress()},onFail:e=>(PaymentsBox.showBoxError(e),!0),showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton.pbind("payments_getvotes_submit"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton.pbind("payments_getvotes_submit")})}static showAllPrices(e){return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(t)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(e),!1}static paymentsShowTerminalTT(e,t){let o="";cur.paymentsTooltips[t]&&(o+=cur.paymentsTooltips[t]),o&&(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(e,{text:o,dir:"auto",slide:15,className:"payments_terminal_tt",shift:[-3,3],hasover:1})}static updatePayAmount(o){let v=o.value.replace(/[^0-9]/g,"");const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(parseInt(v,10));v=i<1e4?i:parseInt(i.toString().substr(0,4),10),o.value!==v.toString()&&(o.value=v);let amount=0;if(cur.votesAmountsData.calcPayAmount){-1==cur.votesAmountsData.calcPayAmount.indexOf("return")&&(cur.votesAmountsData.calcPayAmount="return "+cur.votesAmountsData.calcPayAmount);const calcFunc="(function(votes){"+cur.votesAmountsData.calcPayAmount+";})("+v+")";try{amount=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,calcFunc)}amount=amount?Math.ceil(100*amount)/100:0,amount=parseInt(amount,10)==amount?amount.toFixed(0):amount.toFixed(2),cur._otherAmount=amount,cur._otherVotes=v}const isBonusVotesDiscount=!!cur.votesAmountsData.calcBonusVotesForDiscount,isPriceDiscount=!!cur.votesAmountsData.calOriginalAmountForDiscount;let bonusElement=null;if(bonusElement=isBonusVotesDiscount?document.getElementById("personal_discount_bonus"):isPriceDiscount?document.getElementById("personal_discount_original_amount"):document.getElementById("payments_other_votes_bonus"),bonusElement&&(cur.votesAmountsData.bonusesTable||cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount)){let bonus=0;if(cur.votesAmountsData.calcBonusVotes||isBonusVotesDiscount||isPriceDiscount){const calcFunc="(function(votes){"+(cur.votesAmountsData.calcBonusVotes||cur.votesAmountsData.calcBonusVotesForDiscount||cur.votesAmountsData.calOriginalAmountForDiscount)+";})("+v+")";try{bonus=eval(calcFunc)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,calcFunc)}}else for(let e in cur.votesAmountsData.bonusesTable)if(v>=e){const t=Math.floor(v*cur.votesAmountsData.bonusesTable[e]/e);t>bonus&&(bonus=t)}if(bonus)if(isBonusVotesDiscount)bonusElement.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("apps_personal_discount_amount_gift_calc",bonus),bonusElement.style.display="block";else if(isPriceDiscount){let e="";e=cur.votesAmountsData.currency_str?bonus>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(bonus,cur.votesAmountsData.currency_str):"":bonus>0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_votes_cost_in_rubles",bonus):"",bonusElement.innerHTML=e,bonusElement.style.display="inline-block"}else bonusElement.innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_bonus_votes",bonus),bonusElement.style.display="inline-block";else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(bonusElement)}if(cur.votesAmountsData.currency_str?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_amount").innerHTML=amount>0?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(amount,cur.votesAmountsData.currency_str):"":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_amount").innerHTML=amount>0?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_votes_cost_in_rubles",amount):"",isPriceDiscount){const e=document.getElementById("votes_amount");e&&e.classList.add("payments_opt_gift")}}static onChangeOption(e,t,o){let n;if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radiobtn)(e,t,o),"payments_getvotes_amounts"===o){const e=cur.votesAmountsData[t];if(e){cur.votesAmountsVal=t,n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_for_X").replace("{amount}",e[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("votes_num",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("votes_amount","");const o=document.getElementById("personal_discount_original_amount");o&&(o.style.display="none"),cur.paymentsEmailCheckbox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(cur.paymentsEmailCheckbox)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)(cur.paymentsEmailInput)}else n=cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("votes_num");cur.checkoutEnabled?PaymentsBox.setButtons(n,PaymentsBox.showConfirm):PaymentsBox.setButtons(n,cur.votesAmountIsInstant||e&&e.length>=5?PaymentsBox.instantPay:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}}static setConfirmButtons(){if("card"!=cur.votesType&&cur.psList[cur.votesType]){const e=cur.paymentsWideBox?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_back_to_ps_list"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_go_ps_list");let t=!cur.psList[cur.votesType].in_menu;cur.paymentsInstantPayType==cur.votesType?t?PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_pay_order_btn"),PaymentsBox.instantPay,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_pay_order_btn"),PaymentsBox.instantPay):t?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,e,PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm)}else cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes)}static popupWrite(e){return!(e.document.innerHTML==cur._popup_text||!cur._popup_text)&&(e.document.write(cur._popup_text),e.document.close(),e.blur(),e.focus(),cur._popup_callback&&cur._popup_callback(),!0)}static show3DsFrame(e,t){if(cur.threeds_submitted)return!0;cur.threeds_submitted=!0;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("cards_iframe");n||(n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:o.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"}),n.frameBorder=0,o.innerHTML="",o.appendChild(n));let i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("form",{target:"card_iframe",method:"POST",action:e});for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("input",{type:"hidden",name:e,value:t[e]}));o.appendChild(i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress"),i.submit()}static submitDmrCheckout(e,t=!1){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&!t)return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");const o=cur.psList.dmr_checkout;let n=!1;const i=(e*o.vote_cost).toFixed(2);if(!e||e<=0?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):o.min_amount&&e<o.min_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",o.min_amount):o.max_amount&&e>o.max_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",o.max_amount):void 0!==o.rest_amount_day&&e>o.rest_amount_day?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",o.rest_amount_day):void 0!==o.rest_amount_week&&e>o.rest_amount_week&&(n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",o.rest_amount_week)),n)return PaymentsBox.showBoxError(n),!1;const r=PaymentsBox.getEmail();if(""===r)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),!1;if(r&&"false"!==r&&!PaymentsBox.validateEmail(r))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email")),!1;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame");let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:cur.isMidas?"560px":"435px",width:s.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden",display:"block",borderRadius:"0 0 4px 4px"});a.frameBorder=0,s.innerHTML="",s.style.height=a.style.height,s.appendChild(a),window.addEventListener("message",PaymentsBox.frameMessage,!1);let _=cur.votesType;!_&&cur.votesTypeInit&&(_=cur.votesTypeInit);const c={act:"a_getvotes_charge",type:"dmr_checkout",hash:cur.paymentsHash,amount:i,stat_session_id:cur.statSessionId,votes:e};_&&(c.pay_method=_),cur.paymentsAuthPayment&&(c.only_auth=1),r&&(c.email=r),cur.votesAmountsData.appoveCode&&(c.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(c.order_id=cur.paymentsOrderId,c.order_app_id=cur.paymentsOrderAppId,c.order_bill_period=cur.paymentsOrderBillPeriod,c.order_hash=cur.paymentsOrderHash),cur.votesAmountsData.purchaseDescr&&(c.purchase_descr=cur.votesAmountsData.purchaseDescr),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr_checkout","iframe_track_protection_disabled")})),ajax.post("al_payments.php",c,{onDone:function(t,n,r,s){if(PaymentsBox.setCurMidas(s),!t)return;if(-2==t){const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(i));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=r,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),!cur.paymentsWideBox){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_submit");PaymentsBox.setButtons(e.innerHTML,PaymentsBox.showConfirm,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),PaymentsBox.showVotesAmounts)}cur._popup_text=n,cur._popup_callback=!1,cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container").scrollTop=0};let a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");if(a.contentWindow.document.open("text/html","replace"),a.contentWindow.document.write(n),a.contentWindow.document.close(),cur._popup_callback(),cur.isMidas){let e=a.closest(".popup_box_container");e&&(e.style.width="520px",e.style.minWidth="520px",e.style.minHeight="560px",e.style.height=null);let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");if(t.style.width="520px",t.style.minHeight="560px",t.style.height=null,a.style.width="520px",a.style.minWidth="520px",a.style.minHeight="560px",a.style.height=null,document.body.attributes.scheme&&"vkcom_dark"==document.body.attributes.scheme.value&&e&&(e.querySelector(".box_title_wrap").style.backgroundColor="#19191a",e.querySelector(".box_body").style.backgroundColor="#19191a"),cur.isHideButtonBackAndText){let t=e.querySelector(".payments_box_summary");t&&(t.style.display="none")}}cur.smsChkData=t,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("dmr_checkout",t),o.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"dmr_checkout"!=o.name&&PaymentsBox.showTypes()}),2e3)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0),frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile})}static submitCard(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");const t=cur.psList.card;let o=!1;const n=(e*t.vote_cost).toFixed(2);if(!e||e<=0?o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):t.min_amount&&e<t.min_amount?o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",t.min_amount):t.max_amount&&e>t.max_amount?o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",t.max_amount):null!=t.rest_amount_day&&e>t.rest_amount_day?o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",t.rest_amount_day):null!=t.rest_amount_week&&e>t.rest_amount_week&&(o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",t.rest_amount_week)),o)return PaymentsBox.showBoxError(o),!1;const i=PaymentsBox.getEmail();if(""===i)return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),!1;if(i&&"false"!==i&&!PaymentsBox.validateEmail(i))return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)(cur.paymentsEmailInput),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email")),!1;if(cur.votesAmountsData.needApprove){const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",cur.votesAmountsData.needApprove),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",t)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),delete cur.votesAmountsData.needApprove,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),void PaymentsBox.approveGetCode()}let r;if(PaymentsBox.disablePaymentTypesRows(),t.use_iframe){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("iframe",{id:"card_iframe",name:"card_iframe"},{border:0,height:"435px",width:e.parentNode.offsetWidth+"px",overflowX:"hidden",overflowY:"hidden"});t.frameBorder=0,e.innerHTML="",e.appendChild(t),window.addEventListener("message",PaymentsBox.frameMessage,!1)}else{const e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;r=window.open("","_blank",e),cur._popup_text=PaymentsBox.popupHtml(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_cards_redirect"),"",""),PaymentsBox.popupWrite(r)}const s={act:"a_getvotes_charge",type:"card",hash:cur.paymentsHash,amount:n,stat_session_id:cur.statSessionId};cur.paymentsAuthPayment&&(s.only_auth=1),i&&(s.email=i),cur.votesAmountsData.appoveCode&&(s.approve_code=cur.votesAmountsData.appoveCode),cur.isPaymentsAppOrder&&cur.paymentsOrderId&&(s.order_id=cur.paymentsOrderId,s.order_app_id=cur.paymentsOrderAppId,s.order_bill_period=cur.paymentsOrderBillPeriod,s.order_hash=cur.paymentsOrderHash),PaymentsBox.trackingProtectionEnabled((function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_enabled")}),(function(){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_track_protection_disabled")})),ajax.post("al_payments.php",s,{onDone:function(o,i,s,a){if(PaymentsBox.setCurMidas(a),o){if(-2==o){t.use_iframe||r.close();const o=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",Math.floor(n));return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",i),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_money_for_votes",e).replace("{money}",o)),cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_hash=s,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("confcode",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.enablePaymentTypesRows(),void PaymentsBox.approveGetCode()}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")&&PaymentsBox.showVotesAmounts(),t.use_iframe||((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress()),cur._popup_text=i,cur._popup_callback=!1,t.use_iframe){cur._popup_callback=function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap","payments_getvotes_buttons","payments_box_progress","payments_box_error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container").scrollTop=0};let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");e.contentWindow.document.open("text/html","replace"),e.contentWindow.document.write(i),e.contentWindow.document.close(),cur._popup_callback()}else r.document.open("text/html","replace"),r.document.write(i),r.document.close(),r.blur(),r.focus();cur.smsChkData=o,cur.isPaymentComplete=cur.isPaymentCanceled=cur.isPaymentFailed=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus("card",o),!t.use_iframe&&r.closed?setTimeout((function(){cur.isPaymentComplete||(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),500):t.use_iframe&&(cur.isPaymentCanceled||cur.isPaymentFailed)?(clearInterval(cur.smsChkStatInt),PaymentsBox.showVotesAmounts(),cur.isPaymentFailed?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_landing_cancelled")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),window.removeEventListener("message",PaymentsBox.frameMessage,!1)):cur.isPaymentComplete&&"alfabank"!=t.name&&"dmr"!=t.name&&PaymentsBox.showTypes()}),2e3)}},onFail:function(e){return t.use_iframe||r.close(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0},frame:_shared_lib_browser__WEBPACK_IMPORTED_MODULE_1__.browser.safari_mobile})}static trackingProtectionEnabled(e,t){let o=new XMLHttpRequest;o.open("GET","https://top-fwz1.mail.ru/counter2?id=1",!0),o.onreadystatechange=function(){200!==o.status?e():t(),o.onreadystatechange=null},o.send()}static submitPaymentSystem(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;const t=cur.votesType,o=cur.psList[t];let n=!1,i=0,r=0,s=0,a=0;if(!o.simple_redirect){if(!e)return;i=(e*o.vote_cost).toFixed(2),r=(e*o.vote_cost/cur.usdRate).toFixed(2),s=Math.floor(i),a=100*(i-s),!e||e<=0?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_web_no_sum"):o.min_amount&&e<o.min_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_min_amount_limit_votes").replace("%s",o.min_amount):o.max_amount&&e>o.max_amount?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_max_amount_limit_votes").replace("%s",o.max_amount):null!=o.rest_amount_day&&e>o.rest_amount_day?n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_day_votes").replace("%s",o.rest_amount_day):null!=o.rest_amount_week&&e>o.rest_amount_week&&(n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_rest_amount_week_votes").replace("%s",o.rest_amount_week))}if(n)return PaymentsBox.showBoxError(n),!1;const _=PaymentsBox.getEmail();if(""===_)return;if(_&&"false"!==_&&!PaymentsBox.validateEmail(_))return void PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_error_invalid_email"));if(PaymentsBox.showProgress(),PaymentsBox.disablePaymentTypesRows(),"mailmoney_vkpay"===t){const e={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:i,random_auth:0,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",e,{onDone:(e,t,o,n)=>{PaymentsBox.setCurMidas(n);const i=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)(),r={noLocChange:1,skipBoxesHide:1,noClickHide:1};cur.isPaymentsAppOrder?cur.app.openAppInLayer(e,!1,!0,r):(0,_web_lib_feature_entries__WEBPACK_IMPORTED_MODULE_11__.showWiki)({w:e},!1,!1,r),i._hide(!1,!0),cur.onExternalAppDone=e=>{i._show(),e.status||(PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons(),clearInterval(cur.smsChkStatInt)),cur.onExternalAppDone=null,window.WkView&&WkView.hide(!1,!0)},cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.data,null,i)}),2e3)},onFail:e=>(PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}else{if(cur.votesAmountsData.oauth_url&&(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_remember_wallet")||(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)("payments_remember_wallet"))){const e=cur.votesAmountsData.oauth_params;let n="";for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){n+=`<input type="hidden" autocomplete="off" name="${t}" value="${e[t]}"/>`}let r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm");r.action=cur.votesAmountsData.oauth_url,r.method="post",r.innerHTML=n;const s=cur.votesAmountsData.popup_params||{},a="_blank",c=s.width||700,l=s.height||600,u=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-c/2}, top=${Math.floor(window.screen.height/2)-l/2}, width=${c}, height=${l}`,d=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",o.title),p=`<form action="${r.action}" method="${r.method}" id="popup_payment_form" accept-charset="UTF-8">${r.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(d,p,"document.getElementById('popup_payment_form').submit()"),cur._popup_callback=!1,window.addEventListener("message",PaymentsBox.handlePaymentCompleteMessage,!1);let h=window.open("",a,u);cur.smsChkStatCnt=0,cur.oauthState=0;let m=0;return cur.smsChkStatInt=setInterval((function(){if(2==cur.oauthState)PaymentsBox.checkStatus(cur.votesType,cur.smsChkData);else if(0==cur.oauthState&&(m=cur.isPaymentComplete&&cur.paymentCompleteParams&&cur.paymentCompleteParams.code?cur.paymentCompleteParams.code:0,m)){cur.oauthState=1;let e={act:"a_getvotes_charge",type:t,oauth_code:m,hash:cur.paymentsHash,amount:i,stat_session_id:cur.statSessionId};return cur.paymentsAuthPayment&&(e.only_auth=1),_&&(e.email=_),void ajax.post("al_payments.php",e,{onDone:(e,t,o,n)=>{PaymentsBox.setCurMidas(n),cur.oauthState=2,cur.smsChkData=e},onFail:e=>(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0)})}(h.closed&&!cur.isPaymentComplete||cur.isPaymentComplete&&!m)&&(clearInterval(cur.smsChkStatInt),cur.isPaymentComplete?PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_sms_money_fail")):PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),PaymentsBox.setConfirmButtons())}),2e3),void PaymentsBox.popupWrite(h)}if(cur.votesAmountsData.provider&&-1!==["dmr","paypal","yandexmoney","api_provider"].indexOf(cur.votesAmountsData.provider)){const e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",o.title);let n,r={act:"a_getvotes_charge",type:t,hash:cur.paymentsHash,amount:i,random_auth:0,stat_session_id:cur.statSessionId};if(_&&(r.email=_),"paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_remember_wallet")?(r.remember_wallet=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)("payments_remember_wallet")||cur.forceRebind,cur.forceRebind&&(cur.forceRebind=!1)):r.remember_wallet=1,r.remember_wallet){const t=cur.votesAmountsData.popup_params||{},o=t.width||700,n=t.height||600;e=`scrollbars=1, resizable=1, menubar=0, left=${Math.floor(window.screen.width/2)-o/2}, top=${Math.floor(window.screen.height/2)-n/2}, width=${o}, height=${n}`}else{e=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`}n=r.remember_wallet?window.open("","",e):window.open("","_blank",e);const t=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",o.title);cur._popup_text=PaymentsBox.popupHtml(t,"",""),PaymentsBox.popupWrite(n)}ajax.post("al_payments.php",r,{onDone:function(t,o,i,r){if(PaymentsBox.setCurMidas(r),!t)return;let s="api_provider"!==cur.votesAmountsData.provider;cur.canOpenPopup=s;let a=!s;PaymentsBox.checkStatusCallback=t=>{if("paypal"===cur.votesAmountsData.provider||"yandexmoney"===cur.votesAmountsData.provider){if(n&&!n.closed&&!a){a=!0;let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm");o.action=t.action,o.method="get";let i="";for(let e in t.params)if(Object.prototype.hasOwnProperty.call(t.params,e)){i+=`<input type="hidden" autocomplete="off" name="${e}" value="${t.params[e]}"/>`}o.innerHTML=i;let r=`<form action="${o.action}" method="${o.method}" id="popup_payment_form" accept-charset="UTF-8">${o.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(e,r,"document.getElementById('popup_payment_form').submit()"),PaymentsBox.popupWrite(n)}(n.closed&&!cur.isPaymentComplete||cur.isPaymentComplete)&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(cur.isPaymentComplete?_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_sms_money_fail"):_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled")),PaymentsBox.setConfirmButtons())}else cur._popup||(cur._popup=window.open("","_blank"))},cur.smsChkData=t,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,t)}),2e3)},onFail:function(e){return(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||PaymentsBox.setConfirmButtons(),PaymentsBox.showBoxError(e),!0}})}else{if(!cur.isAdsPayment){const t={act:"a_getvotes_invoice",type:cur.votesType,amount:i,votes:e,invoice_hash:cur.votesAmountsData.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",t)}let n=o.gate_params,c="",l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("paymentSystemsForm"),u=(new Date).getTime();for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let o=n[t];o=o.replace("{amount_votes}",e),o=o.replace("{amount_rub}",i),o=o.replace("{amount_usd}",r),o=o.replace("{amount_rub_int}",s),o=o.replace("{amount_rub_frac}",a),o=o.replace("{time}",u),c+=`<input type="hidden" autocomplete="off" name="${t}" value="${o}"/>`}let d=o.gate_url;d=d.replace("{time}",u),d=d.replace("{amount_votes}",e),d=d.replace("{amount_rub}",i),d=d.replace("{amount_usd}",r),d=d.replace("{amount_rub_int}",s),d=d.replace("{amount_rub_frac}",a),l.action=d,l.method=o.gate_method,l.innerHTML=c;const p="_blank",h=`scrollbars=1, resizable=1, menubar=1, left=${0}, top=${0}, toolbar=1, status=1`;let m=!1;try{const n=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payment_redirect").replace("%s",o.title),s=`<form action="${l.action}" method="${l.method}" id="popup_payment_form" accept-charset="${o.gate_charset}">${l.innerHTML}</form>`;cur._popup_text=PaymentsBox.popupHtml(n,s,`Payments.submitPopupForm("${t}", "${e}", "${i}", "${r}")`),cur._popup_callback=!1,m=window.open("",p,h),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments","","votes",t,"start"),cur.smsChkData=!1,cur.isPaymentComplete=!1,cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval((function(){PaymentsBox.checkStatus(cur.votesType,!1),m.closed&&!cur.isPaymentComplete&&(clearInterval(cur.smsChkStatInt),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),o.simple_redirect?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):PaymentsBox.setConfirmButtons())}),2e3),PaymentsBox.popupWrite(m)}catch(e){l.submit()}_&&ajax.post("al_payments.php",{act:"a_set_receipt_email",email:_,hash:cur.paymentsHash},{onFail:e=>!0})}}}static approveSendCode(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_error");let t=0;for(let o=0;o<e.length;o++)t+=parseInt(e[o]);if(t%=10,t!=cur.votesAmountsData.approveCodeChk)return PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_invalid_code")),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");cur.votesAmountsData.appoveCode=e,PaymentsBox.showConfirm()}static approveGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_approve_code",hash:cur.votesAmountsData.confirm_hash};return e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(t,o){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),1==t?PaymentsBox.showBoxError(o):e||(cur.votesAmountsData.approveCodeChk=o,PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.approveSendCode,cur.paymentsChangeType,cur.checkoutEnabled?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),!0}}),!1}static smsSendPin(){if(null==cur.votesAmountsVal)return!1;const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4!=e&&8!=t&&(2!=e||5!=t))return!1;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;o.length&&((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",code:o,oid:cur.votesAmountsData[cur.votesAmountsVal][3],qid:cur.smsChkData.qid,hash:cur.smsChkData.hash},{onDone:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.showProgress(),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind("sms",cur.smsChkData),2e3)},onFail:function(e){return PaymentsBox.showBoxError(e),!0}}))}static smsSendCode(){if("card"===cur.votesType)return!1;if(null!=cur.votesAmountsVal){const e=cur.votesAmountsData[cur.votesAmountsVal][3],t=cur.votesAmountsData[cur.votesAmountsVal][2];if(4==e||8==t||2==e&&5==t)return PaymentsBox.smsSendPin()}const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value;e.length?((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"),ajax.post("al_payments.php",{act:"a_getvotes_validate",pid:cur.votesAmountsVal,code:e,hash:cur.votesAmountsData[cur.votesAmountsVal].hash},{onDone:function(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e&&PaymentsBox.getVotesCharge()},onFail:function(e){return PaymentsBox.showBoxError(e),!0}})):(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode")}static smsGetCode(e){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let t={act:"a_getvotes_validate",hash:cur.votesAmountsData[cur.votesAmountsVal].hash,pid:cur.votesAmountsVal};e&&(t.resend=1),ajax.post("al_payments.php",t,{onDone:function(e,t){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),2==e?(PaymentsBox.showBoxError(t,"ok_msg"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode")):e&&3==cur.votesAmountsData[cur.votesAmountsVal][2]?PaymentsBox.getVotesCharge(!1,!0):e?PaymentsBox.getVotesCharge():(PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode"),cur.paymentsWideBox?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_change_phone_number"),PaymentsBox.showPhoneForm):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.smsSendCode,cur.paymentsChangeType,PaymentsBox.showTypes))},onFail:function(e){return PaymentsBox.showBoxError(e),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.elfocus)("confcode"),!0}})}static confirmPinCode(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").value);if(!e.length)return void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("confcode");let t={act:"a_getvotes_confirm_pin",hash:cur.updateTnxHash,ps:cur.votesType,qid:cur.smsChkData.qid,pin:e};PaymentsBox.showProgress(),ajax.post("al_payments.php",t,{onDone:function(){cur.smsChkStatInt=setInterval((()=>{PaymentsBox.checkStatus(cur.votesType,cur.smsChkData)}),2e3)},onFail:function(e){PaymentsBox.refreshBox(),PaymentsBox.showBoxError(e)}})}static checkPinKeyPress(e){if((e=e||window.event).ctrlKey||e.altKey||e.metaKey)return;let t=null;return null===e.which&&e.keyCode>=32?t=String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode&&e.which>=32&&(t=String.fromCharCode(e.which)),null!==t?!(t<"0"||t>"9")&&void 0:void 0}static fillBDay(){let params={act:"a_getvotes_fill_bday"};ajax.post("al_payments.php",params,{onDone:function(js){if(js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}}})}static showOffer(e){let t={act:"a_getvotes_offer",offer_id:e,offer_aid:cur.paymentsOfferApp||0,app_currency:cur.offersAppCurrency||0};cur.app&&cur.app.options&&(t.aid=cur.app.options.aid),cur.paymentsOfferPreview&&(t.offer_view=cur.paymentsOfferPreview),ajax.post("al_payments.php",t,{onDone:PaymentsBox.offerOnLoad,onFail:e=>(e&&(PaymentsBox.showBoxError(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap")),!0)})}static showNextOffers(e){let t={act:"a_getvotes_amounts",type:"offers",offset:cur.offersOffset,app_currency:cur.offersAppCurrency,hash:cur.paymentsHash};cur.app&&cur.app.options&&(t.isAppOrder=cur.paymentsOfferApp?1:0,t.aid=cur.app.options.aid),ajax.post("al_payments.php",t,{onDone:function(t,o){o&&(t||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(e),cur.offersOffset+=20,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offers_wrap").innerHTML+=o,PaymentsBox.checkOffers())},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)(e),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)(e)})}static showConfirm(){cur.votesAmountsVal=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.radioval)("payments_getvotes_amounts"):0;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")?parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num").value,10):0;if(void 0===cur.votesAmountsVal)return;cur.votesAmountsVal&&null==cur.votesAmountsData[cur.votesAmountsVal]&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("votes_num")&&!e&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.notaBene)("votes_num");let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_spasibo_rules_accept");if(t&&!(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isChecked)(t)){let e={text:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_spasibo_rules_not_accepted"),dir:"auto",className:"payments_terminal_tt",hasover:1};return cur.paymentsWideBox&&(e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(e,{shift:[-30,10]})),void(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_13__.showTooltip)(t,e)}if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().changed=!0,"sms"===cur.votesType){cur.isResetCheckedMaxSmsVotesValue&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_msg").innerHTML=cur.votesAmountsData.confirm_msg_again,cur.isResetCheckedMaxSmsVotesValue=!1);const t=cur.votesAmountsData.confirm_type;if(2==t&&null!=cur.votesAmountsData.checked_max_sms_votes_val&&(cur.votesAmountsVal=cur.votesAmountsData.checked_max_sms_votes_val,cur.votesAmountsData.checked_max_sms_votes_val=0,cur.isResetCheckedMaxSmsVotesValue=!0),null==cur.votesAmountsData[cur.votesAmountsVal]&&e){if(!t)return void PaymentsBox.getVotesCharge(e,!0);cur.votesAmountsData[-1]=[e,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_money_amount_rub",cur._otherAmount),cur.votesAmountsData[0][2],0],cur.votesAmountsVal=-1}void 0===cur.votesAmountsData[cur.votesAmountsVal]&&(cur.votesAmountsVal=0);const o=cur.votesAmountsData[cur.votesAmountsVal][0],n=cur.votesAmountsData[cur.votesAmountsVal][1],i=cur.votesAmountsData[cur.votesAmountsVal][2],r=cur.votesAmountsData[cur.votesAmountsVal][3],s=cur.votesAmountsData[cur.votesAmountsVal][6];if(0==i){cur.smsChkData={oid:r,qid:0,hash:cur.votesAmountsData.check_hash};let e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_to_get_send_sms",o);cur.paymentsWideBox||(e+=`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost")}`);const t=cur.votesAmountsData[cur.votesAmountsVal];if(e=e.replace("{number}",cur.votesAmountsData[cur.votesAmountsVal][4]),e=e.replace("{text}",`<nobr>${cur.votesAmountsData[cur.votesAmountsVal][5]}${vk.id}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),t.invoice_hash&&cur.statSessionId){PaymentsBox.showWaiting("");const n={act:"a_getvotes_invoice",type:cur.votesType,oid:r,votes:o,invoice_hash:t.invoice_hash,stat_session_id:cur.statSessionId};ajax.post("al_payments.php",n,{onDone:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_msg").innerHTML=e},onFail:function(e){return clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0}})}else PaymentsBox.showWaiting(e)}else if(5==i||6==i||8==i)PaymentsBox.getVotesCharge();else if(7==i){PaymentsBox.getVotesCharge(),cur._popup_text=PaymentsBox.popupHtml(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_cards_redirect"),"",""),cur._popup_callback=!1,cur._popup_href=!1;const e="/payments?act=go_gate&type=sms",t=Math.floor(window.screen.width/2)-350,o=Math.floor(window.screen.height/2)-300;(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(e),cur._popup=window.open(e,"_blank",`scrollbars=1, resizable=1, menubar=0, left=${t}, top=${o}, width=700, height=600`)}else if(1!=i&&4!=i&&1!=t)PaymentsBox.getVotesCharge(!1,!0);else{if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",s),3==r&&(PaymentsBox.checkStatusCallback=function(e){cur.isResetCheckedMaxSmsVotesValue=!1,cur.checkedMaxVotes=e,PaymentsBox.getVotesAmounts(!0)}),2==t&&o<=cur.votesAmountsData.confirm_max_votes){if(cur.paymentsWideBox)return void PaymentsBox.getVotesCharge();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_confcode_wrap"),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm"),PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.getVotesCharge,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),PaymentsBox.showVotesAmounts)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap"),PaymentsBox.smsGetCode();cur.votesAmountsData.resend_msg&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_sms_resend",cur.votesAmountsData.resend_msg),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[r]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_comm",cur.votesAmountsData.confirm_wait_comment[r]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm_comm_wrap")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_comm_wrap"))}}else{let t;t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][0]:e,cur.checkoutEnabled?PaymentsBox.submitDmrCheckout(t):"card"===cur.votesType?PaymentsBox.submitCard(t):PaymentsBox.submitPaymentSystem(t)}}static offerOnLoad(html,js){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_offers_list");let offerView=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offer_view");if(offerView){offerView.innerHTML=html,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(offerView);try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}}}static showWaiting(e){const t=cur.votesAmountsData[cur.votesAmountsVal]?cur.votesAmountsData[cur.votesAmountsVal][3]:0;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_msg").innerHTML=e,t&&cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting_comm")):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_waiting_comm")),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),cur.paymentsWideBox&&cur.votesAmountsData[cur.votesAmountsVal]&&cur.votesAmountsData[cur.votesAmountsVal][7]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_amount").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][6],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting_phone").innerHTML=cur.votesAmountsData[cur.votesAmountsVal][7],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting_mo")):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_waiting_mo"),delete cur.paymentsWaitingCache[cur.votesType],cur.smsChkStatInt&&clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,cur.smsChkData),2e3)}static showPhoneForm(e,t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("_msg","payments_getvotes_phone").innerHTML=t||_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_input_phone"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("phone").value="",PaymentsBox.refreshBox(),t&&cur.paymentsWideBox?PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_save_phone"),PaymentsBox.saveSmsPhone):PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_save_phone"),PaymentsBox.saveSmsPhone,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_back"),2==e?PaymentsBox.getVotesAmounts:e?PaymentsBox.showVotesAmounts:PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_phone");const o=cur.uiPhoneCountry.container;if("spasibo"===cur.votesType)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(o),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix","+79");else{const e=cur.uiPhoneCountry.selectedItems();if(e.length>0)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix",e[0][3]);else for(let e=0,t=cur.countries.length;e<t;++e)cur.countries[e][0]==cur.defCountry&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_phone_prefix",cur.countries[e][3]);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(o)}return cur.paymentsBoxClass=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box").className,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_box","payments_phone_form"),!1}static showPaySystemsList(){return PaymentsBox.refreshBox(),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_ps_list_title_header").innerText),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_ps","payments_votes_vkpay_promo_banner"),cur.votesType=!1,PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!1}static showVotesAmounts(){return PaymentsBox.refreshBox(),cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):"card"!==cur.votesType&&cur.psList[cur.votesType]&&!cur.psList[cur.votesType].in_menu?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_go_ps_list"),PaymentsBox.showPaySystemsList):PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_cont","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&cur.paymentsOrderNotice&&((0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)("payments_box_error",cur.paymentsOrderNotice,"info_msg",null),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_error")),(0,_web_lib_accessibility__WEBPACK_IMPORTED_MODULE_6__.updateAriaElements)(),delete cur.votesAmountsData.appoveCode,!1}static showTypes(){if(cur.paymentsWideBox)return PaymentsBox.showVotesAmounts(),!1;if(PaymentsBox.refreshBox(),cur.votesAmountsVal=void 0,cur.votesAmountsData=[],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_method","payments_votes_vkpay_promo_banner"),cur.paymentBoxTitle){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().setOptions({title:cur.paymentBoxTitle})}return!1}static setButtons(e,t,o,n){if(!cur.paymentsWideBox||e){if(e){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_submit");o&&(o.innerHTML=e,o.onclick=t,o.dataset.taskClick="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(o,"payments_getvotes_buttons"))}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons");if(cur.paymentsWideBox){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_back");e&&(e.innerHTML="",o&&e.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ce)("div",{className:"button",innerHTML:o,onclick:n,"data-task-click":""})))}else{let e=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();e&&(cur.paymentBoxTitle||(cur.paymentBoxTitle=e.getOptions().title),o?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("box_title",e.titleWrap).innerHTML=`<div class="back"><span class="back__icon">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_19__.getIcon24BrowserBack)().icon}</span>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_box_title_back")}</div>`,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("back",e.titleWrap).onclick=n,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("back",e.titleWrap).dataset.taskClick=""):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("box_title",e.titleWrap).innerHTML=cur.paymentBoxTitle)}}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons")}static showBoxError(e,t){if("object"==typeof e&&(e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error_occured")),e&&cur.paymentsWideBox&&cur.checkoutEnabled){let t=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.MessageBox({title:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_error"),hideButtons:!0}),o=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();o&&o.hide(),t.content(e).show()}else{if(e){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_error");o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(o,""),(0,_web_lib_ui_util__WEBPACK_IMPORTED_MODULE_15__.showMsg)(o,e,t||"error"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(o))}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_wrap"),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),PaymentsBox.hideRowProgress(),PaymentsBox.enablePaymentTypesRows()}}static showProgress(e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_progress_msg","string"==typeof e?e:_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_waiting_payment_complete")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_error","payments_getvotes_wrap","payments_getvotes_buttons"),cur.paymentsWideBox&&e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_progress_link"):e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_progress")}static hideRowProgress(){["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"].forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)(e)&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_active_row",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(e)).forEach((t=>{"payments_box_menu"!==e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(t,"payments_getvotes_active_row"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(t,"payments_progress")}))}))}static refreshBox(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_box_progress","payments_box_error","payments_getvotes_method","payments_getvotes_cont","payments_getvotes_phone","payments_getvotes_confirm","payments_getvotes_waiting","payments_getvotes_other","payments_getvotes_terminals","payments_getvotes_ps","payments_getvotes_foreign_cards_warning","payments_iframe_container"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_wrap"),cur.smsChkStatInt&&!cur.paymentsWideBox&&clearInterval(cur.smsChkStatInt),cur.paymentsBoxClass&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box").className=cur.paymentsBoxClass,cur.paymentsBoxClass=""),cur.votesType&&"card"!==cur.votesType||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning"),PaymentsBox.enablePaymentTypesRows()}static saveSmsPhone(){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("phone")),t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_phone_prefix")||{})||"");e&&(cur.paymentsWaitingCache.sms&&(clearInterval(cur.paymentsWaitingCache.sms[2]),delete cur.paymentsWaitingCache.sms),cur.newSmsPhone=t+e,PaymentsBox.getVotesAmounts())}static startFormMeasure(){cur.formMeasureTime=Date.now(),vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(cur.formMeasureTime)}static finishFormMeasure(e){if(cur.formMeasureTime){const t=Date.now()-cur.formMeasureTime;vk.dev&&(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.debugLog)(t),delete cur.formMeasureTime,(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments_frame_load_time",t,e)}}static frameMessage(e){if(!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?paymentgate\.ru$/)&&!e.origin.match(/^https?:\/\/([a-zA-Z0-9\-\.]+\.)?money\.mail\.ru$/)&&!e.origin.match(/^https?:\/\/co\.vkpay\.io$/))return!1;let t={};if(e.data){switch(typeof e.data){case"object":t=e.data;break;case"string":"{"===e.data.substr(0,1)&&(t=(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__.parseJSON)(e.data))}if("billing"!==t.type)return!1}if("pageLoad"===t.action||"formLoad"===t.action)cur.paymentsIgnoreResize=!1;else if("paySuccess"===t.action||"closeWindow"==t.action&&"ok"==t.action_params.status)cur.paymentsIgnoreResize=!0,cur.checkoutEnabled&&(PaymentsBox.showProgress(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_iframe_container"));else if("submit"===e.data||"3dsPage"===t.action)setTimeout(PaymentsBox.frameHeight.pbind(600,!0),200),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("3dsFinish"===t.action)PaymentsBox.frameHeight(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame");else if("resizeFrame"===t.action)if(t.action_params.height<10&&cur.paymentsIgnoreResize)cur.paymentsIgnoreResize=!1;else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");e&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(e,"payments_threeds_checkout_frame")&&setTimeout(PaymentsBox.frameHeight.pbind(t.action_params.height),200)}else"putPixel"===t.action&&"page_load"===t.action_params.alias?(PaymentsBox.finishFormMeasure("dmr"),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_loaded")):"session_fail"===t.action?(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_5__.statlogsValueEvent)("payments",0,"votes","dmr","iframe_session_fail"):("payError"===t.action||"closeWindow"==t.action&&["error","cancel"].includes(t.action_params.status))&&cur.checkoutEnabled?PaymentsBox.checkoutDecline(t.action_params):"typePaymentMethod"===t.action&&cur.checkoutEnabled&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container","payments_threeds_checkout_frame"),t.action_params&&t.action_params.system&&PaymentsBox.checkoutPayMethodChanged(t.action_params.system))}static frameHeight(e,t){let o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("card_iframe");o&&(e?(cur.prevFrameHeight=o.style.height,o.style.height=e+"px"):(o.style.height=cur.prevFrameHeight,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)("payments_iframe_container",cur.checkoutEnabled?"payments_threeds_checkout_frame":"payments_threeds_frame")));let n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_iframe_container");n&&(cur.paymentsWideBox&&!cur.checkoutEnabled||t||(n.style.height=(e||cur.prevFrameHeight)+(cur.checkoutEnabled?0:10)+"px"),n.scrollTop=0)}static paymentCanceled(e){e?cur.isPaymentFailed=!0:cur.isPaymentCanceled=!0,PaymentsBox.frameHeight()}static checkoutDecline(e){let t=e||{};t.act="checkout_decline",t.qid=cur.smsChkData.qid,t.hash=cur.smsChkData.declineHash,ajax.post("payments",t,{onDone:function(e){return PaymentsBox.stopCheckAndShowError(e),!0},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}})}static checkoutPayMethodChanged(e){e&&ajax.post("payments",{act:"checkout_ps_choose",qid:cur.smsChkData.qid,pay_method:e})}static stopCheckAndShowError(e){clearInterval(cur.smsChkStatInt),PaymentsBox.needContinue=0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.showVotesAmounts():cur.checkoutEnabled?PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm):PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e)}static complete(e,t){cur.paymentCompleteParams=t,cur.isPaymentComplete=!0}static checkStatus(e,t,o,n){if("sms"===e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&!cur.paymentsWideBox&&7!=cur.votesAmountsData[cur.votesAmountsVal][2])if(15==cur.smsChkStatCnt)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_progress_msg").innerHTML=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_waiting_payment_complete_still");else if(cur.smsChkStatCnt>30){return clearInterval(cur.smsChkStatInt),cur.isPaymentAttemted=!0,(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),void(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.showFastBox)(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_internet_getting_votes"),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_delay"))}let i={act:"a_getvotes_check",type:e,votes_purchase:cur.isPaymentsAppOrder||cur.paymentsWideBox||cur.paymentsInstantPayType?0:1};t&&(t.oid||t.qid)?(i.oid=t.oid,i.qid=t.qid,i.hash=t.hash):i.hash=cur.psList[e].check_hash,0==cur.smsChkStatCnt&&(i.start=1),cur.statSessionId&&(i.stat_session_id=cur.statSessionId),t.test&&(i.test=1);let r=n||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)();ajax.post("al_payments.php",i,{onDone:function(o,n,i){if("sms"===e&&cur._popup&&cur._popup.closed)return clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0,PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_payment_cancelled"),"info_msg"),void PaymentsBox.setConfirmButtons();if(o){if(1==o){for(window.cur.paymentSuccess=!0,"mailmoney_vkpay"===e&&WkView&&(r._show(),cur.onExternalAppDone=null,WkView.hide(!1,!0)),cur.isPaymentAttemted=!0,PaymentsBox.needContinue&&(cur.needContinue=1,PaymentsBox.needContinue=0);boxQueue.count();)boxQueue.hideLast(!1);if(n&&!cur.isPaymentsAppOrder&&(!cur.paymentsTryCompleteOrder||!r.onDone)){let e=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_12__.MessageBox({width:400,hideButtons:!0,bodyStyle:"padding: 0; border-radius: 8px;"});e.content(n),e.show()}i&&(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_16__.updateMoney)(i)}else if(2==o||10==o)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_iframe_container")?PaymentsBox.showVotesAmounts():PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(n);else if(3==o){let o="sms"===e;cur.votesAmountsData[cur.votesAmountsVal]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",cur.votesAmountsData[cur.votesAmountsVal][0]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",cur.votesAmountsData[cur.votesAmountsVal][1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",o?cur.votesAmountsData[cur.votesAmountsVal][6]:cur.votesAmountsData[cur.votesAmountsVal][1])):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_num",cur._otherVotes),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_amount",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_box_votes_money",cur._otherAmount+" "+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.langNumeric)(cur._otherAmount,cur.votesAmountsData.currency_price_str))),o||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_get_votes_ps_enter_code")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_amount")),cur.votesAmountsData.confirm_wait_comment&&cur.votesAmountsData.confirm_wait_comment[t.oid]?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML=cur.votesAmountsData.confirm_wait_comment[t.oid],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_confirm_comm_wrap")):o&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_confirm_comm").innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_confirm_comm_wrap")),"spasibo"===e&&(cur.updateTnxHash=n),PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_box_confcode_wrap","payments_getvotes_confirm"),o&&n&&PaymentsBox.showBoxError(n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("confcode").onkeypress=o?"":PaymentsBox.checkPinKeyPress,PaymentsBox.setButtons(cur.payments_get_votes,o?PaymentsBox.smsSendCode:PaymentsBox.confirmPinCode,cur.paymentsChangeType,PaymentsBox.showTypes)}else{if(4==o){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")&&!cur.paymentsWaitingCache.sms){let e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_to_get_send_sms",cur.votesAmountsData[cur.votesAmountsVal][0]);cur.paymentsWideBox||(e+=`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost")}`),e=e.replace("{number}",n.service_number),e=e.replace("{text}",`<nobr>${n.message_text}</nobr>`),e=e.replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1]),PaymentsBox.showWaiting(e)}return}if(5==o)PaymentsBox.refreshBox(),PaymentsBox.showConfirm();else if(6==o)delete cur.votesAmountsData.oauth_url,delete cur.paymentsInstantPayType,PaymentsBox.showVotesAmounts(),PaymentsBox.showBoxError(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_instant_pay_amount_limit_error")),PaymentsBox.setConfirmButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_remember_wallet",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_getvotes_confirm_descr","payments_getvotes_cont"));else{if(7==o)return void(cur._popup&&!cur._popup_href&&(cur._popup_href=n,cur._popup.location.href=n));if(8==o)return void PaymentsBox.checkStatusCallback(n);if(9==o)return void PaymentsBox.show3DsFrame(n,i)}}clearInterval(cur.smsChkStatInt),cur.smsChkStatCnt=0}},onFail:function(e){return PaymentsBox.stopCheckAndShowError(e),!0}}),cur.smsChkStatCnt++}static checkStatusCallback(e){}static getVotesCharge(e,t){if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.isButtonLocked)("payments_getvotes_submit")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress"))return;if(!((e=parseInt(e,10))||null!=cur.votesAmountsVal&&cur.votesAmountsData[cur.votesAmountsVal]))return;let o={act:"a_getvotes_charge",type:cur.votesType,hash:cur.paymentsHash,stat_session_id:cur.statSessionId};const n=PaymentsBox.getEmail();""!==n&&(n&&(o.email=n),t?(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit"):PaymentsBox.showProgress(),e?(o.pid=-1,o.votes=e):(o.pid=cur.votesAmountsVal,-1==cur.votesAmountsVal&&(o.votes=cur.votesAmountsData[cur.votesAmountsVal][0])),cur.isResetCheckedMaxSmsVotesValue&&(o.pay_by_repay_status=1),PaymentsBox.disablePaymentTypesRows(),ajax.post("al_payments.php",o,{onDone:(o,n,i,r)=>{PaymentsBox.setCurMidas(r),PaymentsBox.votesChargeOnDone(o,e,t)},onFail:e=>((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_box_progress")&&PaymentsBox.setButtons(cur.payments_get_votes,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_confirm")?PaymentsBox.getVotesCharge:PaymentsBox.showConfirm,cur.paymentsChangeType,PaymentsBox.showTypes),PaymentsBox.showBoxError(e),!0)}))}static votesChargeOnDone(e,t,o){if(e)if((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),-1==e)PaymentsBox.getVotesAmounts(!0);else if(e.qid)if(cur.smsChkData=e,o){const e=_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_for_get_n_votes",t||cur.votesAmountsData[cur.votesAmountsVal][0]);let o=cur.votesAmountsData.confirm_wait_msg.replace("{amount}",e);if(o+=t?`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost_rubles",cur._otherAmount)}`:`<br/>${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_service_cost").replace("{amount}",cur.votesAmountsData[cur.votesAmountsVal][1])}`,cur.paymentsWideBox){o+=`<br><br/><a onclick="return PaymentsBox.showPhoneForm(1);">${_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_change_phone_number")}</a>`}PaymentsBox.showWaiting(o)}else cur.smsChkStatCnt=0,cur.smsChkStatInt=setInterval(PaymentsBox.checkStatus.pbind(cur.votesType,e),2e3)}static getVotesAmounts(e,t,o){if(null!=t&&cur.paymentsWideBox){if(cur.votesType==t&&cur.votesTypeInit!=t&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_cont")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_terminals")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_ps")))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_waiting")?cur.paymentsWaitingCache[cur.votesType]=[(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting").innerHTML,cur.smsChkStatInt]:cur.smsChkStatInt&&!cur.paymentsWaitingCache[t]&&clearInterval(cur.smsChkStatInt),cur.votesType=t}else null!=t&&(cur.votesType=t);if(!cur.votesType)return void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning");if(cur.paymentsWideBox&&!o&&(o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_method_"+cur.votesType,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_box_menu")))),cur.paymentsWideBox&&cur.paymentsTypesSum&&cur.paymentsTypesSum[t]){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_summary_bill");e?e.innerHTML=cur.paymentsTypesSum[t]:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_order_sum",cur.paymentsTypesSum[t]),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_tt"),((e,t)=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.re)(t)}))}let n="term"===cur.votesType||"ps"===cur.votesType;if(n){PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_method");let e="";if("term"===cur.votesType?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_terminals"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_votes_vkpay_promo_banner"),e="payments_terminals_title_header"):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_ps"),e="payments_ps_list_title_header"),cur.paymentsWideBox&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(e).innerText),PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes),!cur.paymentsWideBox)return}const i=["payments_getvotes_ps",cur.paymentsWideBox?"payments_box_menu":"payments_getvotes_method"];for(let t=0;t<i.length;t++){let r=i[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)(r)||cur.paymentsWideBox&&!o||"payments_box_menu"===r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_ps")&&o&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(o.parentNode,"payments_getvotes_ps_list"))continue;let s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)(r),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_active_row",s);if(!e&&a.length&&!cur.paymentsWideBox)return;a.forEach((e=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(e,"payments_getvotes_active_row"),cur.paymentsWideBox&&!n&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.removeClass)(e,"payments_progress")}))}if(o&&(!cur.paymentsWideBox||"payments_box_menu"!==o.parentNode.id||n||e||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)(o,"payments_progress"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.addClass)(o,"payments_getvotes_active_row")),cur.paymentsWideBox&&cur.paymentsWaitingCache[t])return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_title").innerHTML=cur.paymentsWaitingCache[t][0],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_waiting").innerHTML=cur.paymentsWaitingCache[t][1],PaymentsBox.refreshBox(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_waiting","payments_getvotes_title"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_buttons"),void PaymentsBox.hideRowProgress();if(n)return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.isVisible)("payments_getvotes_buttons")&&!cur.paymentsWideBox&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.lockButton)("payments_getvotes_submit");let r={act:"a_getvotes_amounts",type:cur.votesType,prefer_votes:cur.paymentsPreferVotes,hash:cur.paymentsHash};if(cur.statSessionId&&(r.stat_session_id=cur.statSessionId),cur.isPaymentsAppOrder&&cur.paymentsOrderAppId&&(r.aid=cur.paymentsOrderAppId,cur.paymentsOrderBillPeriod&&(r.bill_period=cur.paymentsOrderBillPeriod),cur.paymentsOrderDiscount&&(r.discount=cur.paymentsOrderDiscount)),"sms"===r.type)cur.checkedMaxVotes&&(r.checked_max_votes=cur.checkedMaxVotes,cur.checkedMaxVotes=0),cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.isCorpPhone&&(r.corp=cur.isCorpPhone,cur.isCorpPhone=!1);else if("offers"===r.type){if(cur.app&&cur.app.options&&(r.isAppOrder=cur.paymentsOfferApp?1:0,r.aid=cur.app.options.aid,r.orderBox=cur.isPaymentsAppOrder?1:0),cur.paymentsPreload)return PaymentsBox.getVotesAmountsOnDone.apply(this,cur.paymentsPreload),cur.paymentsPreload=!1,void(cur.paymentsOfferPreload&&(PaymentsBox.offerOnLoad.apply(this,cur.paymentsOfferPreload),cur.paymentsOfferPreload=!1,cur.paymentsOneOffer=!0))}else if("spasibo"===r.type)cur.newSmsPhone&&(r.phone=cur.newSmsPhone,cur.newSmsPhone=!1),cur.needContinue&&(r.continue=1,cur.needContinue=0);else if(cur.psList[r.type]&&cur.psList[r.type].simple_redirect)return PaymentsBox.hideRowProgress(),void PaymentsBox.submitPaymentSystem();ajax.post("al_payments.php",r,{onDone:PaymentsBox.getVotesAmountsOnDone,onFail:e=>(PaymentsBox.showBoxError(e),!0)})}static getVotesAmountsOnDone(result,html,data,js,title){if(PaymentsBox.hideRowProgress(),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_14__.unlockButton)("payments_getvotes_submit"),cur.paymentsWideBox&&(title&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_title",title),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_title")),data&&data.menu_money)){let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_summary_bill");e?e.innerHTML=data.menu_money:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(`payments_method_${cur.votesType}_descr`,data.menu_money)}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_votes_vkpay_promo_banner"),-1==result)return void PaymentsBox.showPhoneForm();if(-2==result)return void PaymentsBox.showPhoneForm(!1,html);if(-3==result){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt","payments_box_menu");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("payments_getvotes_active_row","payments_box_menu"));for(let t=0;t<e.length;t++){let o=e[t];if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hasClass)(o,"payments_getvotes_active_row")){o.onclick();break}}return}if(!result)return PaymentsBox.showProgress(""),void(cur.smsAmountsInt=setTimeout((()=>{PaymentsBox.getVotesAmounts(!0)}),1e3));if(!html)return;let other;if(2==result?(other=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_other"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)(other,html)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_cont",html),cur.votesAmountsData=data,(cur.fromInstantPay&&2==cur.votesAmountsData.confirm_type||2!=cur.votesAmountsData.confirm_type||!cur.votesAmountsData.checked_max_sms_votes_val)&&PaymentsBox.showVotesAmounts(),cur.votesType&&"card"!==cur.votesType?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_foreign_cards_warning"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_getvotes_foreign_cards_warning"),cur.paymentsPreload&&"offers"===cur.votesType?PaymentsBox.setButtons(!1):"offers"===cur.votesType?PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes):cur.paymentsPreload&&PaymentsBox.setButtons(cur.payments_get_votes,PaymentsBox.showConfirm),window.radioBtns.payments_getvotes_amounts={els:Array.prototype.slice.apply((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("radiobtn",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_getvotes_amounts")))},data.confirm_msg&&data.confirm_type&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.val)("payments_getvotes_confirm_msg",data.confirm_msg),2==result&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_getvotes_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)(other)),js)try{eval(js)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_8__.logEvalError)(e,js)}cur.instantNeedCVV&&(PaymentsBox.showConfirm(),cur.instantNeedCVV=!1),cur.paymentsEmailInput=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_receipt_email"),cur.paymentsEmailCheckbox=!!cur.paymentsEmailInput&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass1)("_checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.domPN)(cur.paymentsEmailInput))}static popupHtml(e,t,o){return`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">\n<head>\n    <meta http-equiv="content-type" content="text/html; charset=windows-1251" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <style>\n        body {font-family:tahoma,verdana,arial,sans-serif,Lucida Sans; font-size:11px;}\n        .text {position:relative; top:40%; text-align:center; line-height:24px;}\n        .text img {margin-bottom:8px;}\n        .text_container {position:absolute; top:0; left:0; right:0; bottom:0; line-height:150%; height: 100%;}\n    </style>\n    <script type="text/javascript">\n      if (!window.vk) window.vk = {loginscheme: '${vk.loginscheme}', ip_h: '${vk.ip_h}', __domain: '${(0,_shared_lib_site__WEBPACK_IMPORTED_MODULE_4__.getHostName)()}'};\n    <\/script>\n    <script type="text/javascript" src="${window.stManager.getCompiledPath(window.jsc("web/payments_legacy.js"))}"><\/script>\n</head>\n<body>\n${t}\n<div id="wait_text_container" class="text_container">\n    <div class="text">\n        <img src="/images/progress.gif" /><br/>${e}\n    </div>\n</div>\n<script type="text/javascript">\n  var st = setTimeout(function() {try {${o}; clearTimeout(st)} catch(e) {}}, 100)\n<\/script>\n</body>\n</html>`}static viewOffer(e){this.setButtons(e,(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("start_offer").submit(),PaymentsBox.setButtons(_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("payments_back_to_offers_list"),PaymentsBox.backToOffersList,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel"),PaymentsBox.backToOffersList)}),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_cancel"),PaymentsBox.backToOffersList)}static backToOffersList(){if(cur.paymentsOneOffer)return(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.hide)("payments_offer_view"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.show)("payments_offers_list"),cur.votesTypeInit||!1===cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(!1,!1,cur.paymentsChangeType,PaymentsBox.showTypes)}static initializeOfferChecker(e,t,o,n){cur.offersOffset=e,cur.offersAppCurrency=t,PaymentsBox.checkOffersList=[],PaymentsBox.checkOffersDo=()=>{if(o)return;const e=PaymentsBox.checkOffersList.join(",");PaymentsBox.checkOffersList=[],ajax.post("al_payments.php",{act:"a_offers_stat",offers:e,hash:n}),PaymentsBox.checkOffersTO=!1},PaymentsBox.checkOffers(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static removeCheckOffersEvent(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_10__.removeEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap"),"scroll",PaymentsBox.checkOffers)}static checkOffers(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_offer",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("payments_offers_wrap")),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.ge)("box_layer_wrap").scrollTop,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.getSize)("box_layer_wrap")[1];e.forEach((e=>{const n=e,i=n.offsetTop;i+30<t+o&&i+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.getSize)(n)[1]-20>t&&!n.getAttribute("checked")&&(n.setAttribute("checked",1),PaymentsBox.checkOffersList.push(n.id.substr(15)),PaymentsBox.checkOffersTO||(PaymentsBox.checkOffersTO=setTimeout(PaymentsBox.checkOffersDo,1e3)))}))}static offersRemoveButtons(){cur.votesTypeInit?PaymentsBox.setButtons(!1):PaymentsBox.setButtons(cur.paymentsChangeType,PaymentsBox.showTypes,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_3__.getLang("global_close"),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide)}static disablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++){let o=e[t];o.classList.contains("payments_getvotes_active_row")?o.classList.add("payments_getvotes_noevents_row"):o.classList.add("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}}static enablePaymentTypesRows(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_9__.geByClass)("payments_getvotes_method_opt");if(e&&e.length>0)for(let t=0;t<e.length;t++)e[t].classList.remove("payments_getvotes_disabled_row","payments_getvotes_noevents_row")}static handlePaymentCompleteMessage(e){e.origin==window.origin&&e.data.type&&"paymentCompleteMessage"===e.data.type&&window.PaymentsBox.complete(e.data.newUrl,e.data.params)}static setCurMidas(e){"object"==typeof e&&"isMidas"in e&&("cur"in window||(window.cur={}),window.cur.isMidas=Boolean(e.isMidas))}}},257375:(e,t,o)=>{"use strict";o.d(t,{deletePhotoOwnerAlbumCache:()=>_,dropPhotoCacheData:()=>c,getCurrentPhoto:()=>s,getIndexedFriends:()=>l,getPhotoData:()=>r,isImgBlurred:()=>d,setIndexedFriends:()=>u,setPhotoData:()=>a});var n=o(211981),i=o(477845);function r(e){const t=cur.pvListId,o=cur.pvIndex;if(cur.pvData&&t&&!isNaN(o)){const n=cur.pvData[t][o];return e?n[e]:n}return!1}function s(){const e=cur.pvListId,t=cur.pvIndex;return cur.pvData&&e&&!isNaN(t)?cur.pvData[e][t]:null}function a(e,t){const o=cur.pvListId,n=cur.pvIndex;return!(!cur.pvData||!o||isNaN(n))&&(cur.pvData[o][n][e]=t,cur.pvData[o][n])}function _(e){const t="album"+e+"_0/rev";delete window.cur.pvData[t]}function c(){delete cur.pvList,delete cur.pvData}function l(){return cur.pvIndexedFriends}function u(e,t){cur.pvIndexedFriends=new n.vkIndexer(e,(e=>e[1]),t)}function d(e){return!!e&&(!!e.restrictionBlur&&!(0,i.isPhotoUnblurred)(e.photoRaw))}},3677:(e,t,o)=>{"use strict";o.d(t,{initSettingsAddressBox:()=>l});var n=o(452314),i=o(879007),r=o(317412),s=o(810903),a=o(248298),_=o(610989),c=o(258643);function l(e,t){e.setOptions({title:_.getLang("settings_addrbox_title")});const o=document.querySelector("#settdbx_addr"),l=document.querySelector("#settdbx_addr_tt_place");o.onfocus=function(){-2===cur.addrChecked&&(0,s.showTooltip)(l,{text:_.getLang("settings_addrbox_hint"),dir:"left",slideX:15,className:"settings_pwd_tt",shift:[-12,-15,0],onCreate:function(){(0,r.removeEvent)(l,"mouseout")}})},o.onblur=function(){l.tt&&l.tt.hide()},(0,n.elfocus)(o),setTimeout(n.elfocus.pbind(o),100),(0,n.setStyle)(o,{width:230-(0,n.ge)("settdbx_base").offsetWidth-8}),(0,i.extend)(cur,{settDomainCheckAddress:function(e){clearTimeout(cur.addressCheckTO),cur.lastAddress!==(0,n.val)("settdbx_addr")&&(cur.addressCheckTO=setTimeout(cur.settDomainDoCheckAddress,e||0))},settDomainDoCheckAddress:function(){let e=document.querySelector("#settdbx_submit"),t=document.querySelector("#settdbx_advices");cur.lastAddress=(0,n.val)("settdbx_addr"),ajax.post("al_settings.php",{act:"a_check_address",name:cur.lastAddress,from:"box"},{onDone:function(o){cur.addrChecked=1,c.FlatButton.setLabel(e,o),c.FlatButton.setDisabled(e,!1),(0,n.val)(t,"")},onFail:function(i){let r=(i=i.split("<*>"))[1],s=i[2];return i=i[0],s?(cur.addrChecked=-2,o.onfocus()):(cur.addrChecked=-1,o.onblur()),c.FlatButton.setLabel(e,i),c.FlatButton.setDisabled(e,!0),(0,n.val)(t,r),!0}})},settDomainAdvisedAddress:function(e){(0,n.val)("settdbx_addr",e),cur.settDomainCheckAddress()},settDomainAddressSubmit:function(e){if(1!==cur.addrChecked)return void(0,a.notaBene)("settings_addr");let o=(0,n.val)("settdbx_addr"),i={act:"a_change_address",hash:t,name:o};c.FlatButton.lock(e),window.ajax.post("al_settings.php",i,{onDone:function(e){nav.go(o,!1,{params:{from:"address_box"}})},showProgress:()=>c.FlatButton.lock(e),hideProgress:()=>c.FlatButton.unlock(e)})}})}},992851:(e,t,o)=>{"use strict";o.d(t,{showNextPaymentsHistory:()=>s});var n=o(248298),i=o(714209),r=o(452314);const s=(e,t)=>{if((0,n.isButtonLocked)(e))return;let o,s;return(0,n.lockButton)(e),t||(t="votes"),void 0===cur.historyOffset[t]&&(cur.historyOffset[t]=5),"transfer"===t?(o={act:"a_transfer_history"},s=(0,r.ge)("settings_transfer_history")):"subscriptions"===t?(o={act:"a_payments_subsciptions"},s=(0,r.ge)("settings_payments_subscriptions")):"games"===t?(o={act:"a_payments_games"},s=(0,r.ge)("settings_payments_games")):"goods_orders"===t?(o={act:"a_payments_goods_orders"},s=(0,r.ge)("settings_payments_goods_orders")):(o={act:"a_votes_history"},s=(0,r.ge)("settings_votes_history")),o.offset=s.rows.length,"subscriptions"===t&&(o.extra_items_count=cur.historyExtraItemsSubscriptions),ajax.post("al_settings.php",o,{onDone:function(o,a,_){const c=s.tBodies[0];if(o){if((0,n.unlockButton)(e),i.browser.msie){const e=(0,r.se)("<table>"+o+"</table>");Array.from((0,r.geByTag)("tr",e)).forEach((e=>{1===e.nodeType&&c.appendChild(e)}))}else c.insertAdjacentHTML("beforeEnd",o);"subscriptions"===t&&_&&(cur.historyExtraItemsSubscriptions=_)}o&&!a||((0,r.addClass)(c.lastChild,"settings_votes_history_last"),(0,r.hide)(e))}}),!1}},580843:(e,t,o)=>{"use strict";o.r(t),o.d(t,{EMPTY:()=>n,ENDED:()=>a,ERROR:()=>_,PAUSED:()=>s,PLAYING:()=>r,UNSTARTED:()=>i});const n="empty",i="unstarted",r="playing",s="paused",a="ended",_="error"},374756:(e,t,o)=>{"use strict";o.d(t,{HTMLAudioNode:()=>y});var n=o(434518),i=o(763812),r=o(919225),s=o(208407),a=o(815152),_=(0,i._)("_emitter"),c=(0,i._)("_logger"),l=(0,i._)("_loaded"),u=(0,i._)("_hlsInstance"),d=(0,i._)("_preparing"),p=(0,i._)("_playing"),h=(0,i._)("_paused"),m=(0,i._)("_setUrlAsNative"),E=(0,i._)("_setUrlAsHls"),f=(0,i._)("_destroyHls"),g=(0,i._)("_addEventListeners");class y{get events(){return(0,n._)(this,_)[_].listenable}get playing(){return(0,n._)(this,p)[p]}get paused(){return(0,n._)(this,h)[h]}get loaded(){return(0,n._)(this,l)[l]}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=Math.max(0,e)}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=Math.max(0,Math.min(1,e))}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered&&0!==this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}get url(){const e=this.audioElement.firstElementChild,t=(0,n._)(this,u)[u]?.media?.src,o=e?.src;return t||o||null}get preparing(){return(0,n._)(this,d)[d]?(0,n._)(this,d)[d]:Promise.resolve()}async setUrl(e){(0,n._)(this,d)[d]=function(e){return!a.SHOULD_USE_NATIVE_HLS&&T&&function(e){return e.includes(".m3u8")}(e)}(e)?(0,n._)(this,E)[E](e):(0,n._)(this,m)[m](e),await(0,n._)(this,d)[d],(0,n._)(this,d)[d]=null}async play(e){e&&await this.setUrl(e);try{return await(0,s.wrapAudioPlay)(this.audioElement)}catch(e){switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}}pause(){this.audioElement.pause()}stop(){this.audioElement.pause(),this.audioElement.currentTime=0}constructor(e){Object.defineProperty(this,m,{value:v}),Object.defineProperty(this,E,{value:w}),Object.defineProperty(this,f,{value:A}),Object.defineProperty(this,g,{value:b}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=null,(0,n._)(this,l)[l]=!1,(0,n._)(this,u)[u]=null,(0,n._)(this,d)[d]=null,(0,n._)(this,p)[p]=!1,(0,n._)(this,h)[h]=!1,(0,n._)(this,_)[_]=new r.Emitter,(0,n._)(this,c)[c]=e.logger??null,this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,(0,n._)(this,g)[g](),e?.url&&(this.setUrl(e.url),this.preparing?.then((()=>{this.audioElement.load()}))),(0,n._)(this,c)[c]?.debug("HLSAudioNode created with options:",e)}}async function v(e){(0,n._)(this,f)[f]();const t=this.audioElement.firstElementChild;t.src=e,t.type="application/vnd.apple.mpegurl",this.audioElement.load()}async function w(e){const t=await async function(){return(await o.e(45458).then(o.bind(o,164945))).default}();(0,n._)(this,f)[f]();const i=new t({debug:!1,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});i.on(t.Events.BUFFER_EOS,(()=>{(0,n._)(this,l)[l]=!0})),i.on(t.Events.ERROR,((e,o)=>{o.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(i.stopLoad(),i.startLoad());const n={type:o.type,details:o.details,url:o.frag&&o.frag.url||o.context&&o.context.url,code:o.networkDetails?o.networkDetails.status:0};if(o.fatal)throw n})),i.loadSource(e),i.attachMedia(this.audioElement),(0,n._)(this,u)[u]=i}function A(){(0,n._)(this,u)[u]&&(0,n._)(this,u)[u].destroy(),(0,n._)(this,u)[u]=null}function b(){this.audioElement.addEventListener("play",(()=>{(0,n._)(this,p)[p]=!0,(0,n._)(this,h)[h]=!1,(0,n._)(this,_)[_].emit("play")})),this.audioElement.addEventListener("pause",(()=>{(0,n._)(this,p)[p]=!1,(0,n._)(this,h)[h]=!0,(0,n._)(this,_)[_].emit("pause")})),this.audioElement.addEventListener("ended",(()=>{(0,n._)(this,p)[p]=!1,(0,n._)(this,h)[h]=!1,(0,n._)(this,_)[_].emit("stop")})),this.audioElement.addEventListener("progress",(()=>{if(!(0,n._)(this,u)[u]){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&((0,n._)(this,l)[l]=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{(0,n._)(this,_)[_].emit("progress",this.currentProgress)})),this.audioElement.addEventListener("error",(e=>{(0,n._)(this,_)[_].emit("error",e.error)}))}const T="function"==typeof window.MediaSource},54011:(e,t,o)=>{"use strict";o.d(t,{HTMLAudioPlayer:()=>k});var n=o(434518),i=o(763812),r=o(463300),s=o(610778),a=o(815152),_=o(374756),c=o(919225),l=(0,i._)("_context"),u=(0,i._)("_logger"),d=(0,i._)("_emitter"),p=(0,i._)("_currentNode"),h=(0,i._)("_nextNode"),m=(0,i._)("_audio"),E=(0,i._)("_progress"),f=(0,i._)("_freqUpdateInterval"),g=(0,i._)("_fadeVolumeInterval"),y=(0,i._)("_fadeVolumeWorker"),v=(0,i._)("_setNodeVolume"),w=(0,i._)("_handleNodeProgressUpdate"),A=(0,i._)("_handleNodeError"),b=(0,i._)("_createNode"),T=(0,i._)("_updateProgress"),I=(0,i._)("_updateVolume"),P=(0,i._)("_fadeVolume"),C=(0,i._)("_startFrequencyAnalise"),S=(0,i._)("_stopFrequencyAnalise"),O=(0,i._)("_setFadeVolumeInterval"),M=(0,i._)("_clearFadeVolumeInterval"),D=(0,i._)("_setupWorkerFadeVolumeInterval"),L=(0,i._)("_setupDefaultFadeVolumeInterval");class k{get events(){return(0,n._)(this,d)[d].listenable}get audio(){return(0,n._)(this,m)[m]}get playing(){return(0,n._)(this,p)[p].playing&&(0,n._)(this,p)[p].url!==a.SILENCE_AUDIO_URL}get paused(){return(0,n._)(this,p)[p].paused&&(0,n._)(this,p)[p].url!==a.SILENCE_AUDIO_URL}get volume(){return(0,n._)(this,p)[p].volume}get progress(){return(0,n._)(this,E)[E]}async play(e){this.audio&&await this.stop(),e.url===(0,n._)(this,h)[h].url&&([(0,n._)(this,p)[p],(0,n._)(this,h)[h]]=[(0,n._)(this,h)[h],(0,n._)(this,p)[p]]),(0,n._)(this,C)[C]();try{return await(0,n._)(this,p)[p].play(e.url),(0,n._)(this,m)[m]=e,(0,n._)(this,d)[d].emit("play",e),(0,n._)(this,u)[u].info("Audio playback started",{audio:e}),!0}catch(t){return(0,n._)(this,u)[u].error("Failed to start audio playback",{audio:e,error:t}),!1}}async pause(){const{audio:e,playing:t}=this;if($(e),!t)return(0,n._)(this,u)[u].warn("Player is not in playing state",{audio:e}),!1;try{return(0,n._)(this,p)[p].pause(),(0,n._)(this,m)[m]=e,(0,n._)(this,d)[d].emit("pause",e),(0,n._)(this,u)[u].info("Audio playback paused",{audio:e}),!0}catch(t){return(0,n._)(this,u)[u].error("Failed to pause audio playback",{audio:e,error:t}),!1}}async resume(){const{audio:e,paused:t}=this;if($(e),!t)return(0,n._)(this,u)[u].warn("Player is not in paused state",{audio:e}),!1;try{return await(0,n._)(this,p)[p].play(),(0,n._)(this,m)[m]=e,(0,n._)(this,d)[d].emit("resume",e),(0,n._)(this,u)[u].info("Audio playback resumed",{audio:e}),!0}catch(t){return(0,n._)(this,u)[u].error("Failed to resume audio playback",{audio:e,error:t}),!1}}async stop(){(0,n._)(this,S)[S]();const{audio:e}=this;$(e),(0,n._)(this,m)[m]=null,(0,n._)(this,T)[T](0),(0,n._)(this,d)[d].emit("stop",e),(0,n._)(this,u)[u].info("Audio playback stopped",{audio:e})}seek(e){const t=(0,n._)(this,p)[p];(0,n._)(this,p)[p].duration>0&&(0,n._)(this,p)[p].url!==a.SILENCE_AUDIO_URL?(0,n._)(this,p)[p].currentTime=(0,n._)(this,p)[p].duration*e:(0,n._)(this,u)[u].debug("Audio is not ready yet",{audio:t}),(0,n._)(this,T)[T](e),(0,n._)(this,d)[d].emit("seek",e),(0,n._)(this,u)[u].debug("Seeking audio to progress",{progress:e})}async setVolume(e,t){return t?.fadeTime?(0,n._)(this,P)[P](e,t.fadeTime):(0,n._)(this,I)[I](e)}async prefetch(e){if((0,n._)(this,h)[h]?.url!==e)try{(0,n._)(this,h)[h].setUrl(e),await(0,n._)(this,h)[h].preparing,(0,n._)(this,u)[u].debug("Audio prefetching completed",{url:e})}catch(t){(0,n._)(this,u)[u].error("Failed to prefetch audio",{url:e,error:t})}}constructor(e){Object.defineProperty(this,v,{value:R}),Object.defineProperty(this,w,{value:N}),Object.defineProperty(this,A,{value:B}),Object.defineProperty(this,b,{value:x}),Object.defineProperty(this,T,{value:U}),Object.defineProperty(this,I,{value:F}),Object.defineProperty(this,P,{value:W}),Object.defineProperty(this,C,{value:K}),Object.defineProperty(this,S,{value:V}),Object.defineProperty(this,O,{value:H}),Object.defineProperty(this,M,{value:j}),Object.defineProperty(this,D,{value:G}),Object.defineProperty(this,L,{value:q}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,n._)(this,m)[m]=null,(0,n._)(this,E)[E]=0,(0,n._)(this,f)[f]=null,(0,n._)(this,g)[g]=null,(0,n._)(this,y)[y]=null,(0,n._)(this,l)[l]=e,(0,n._)(this,u)[u]=e.logger.child({extra:{module:"HTMLAudioPlayer",instance:this}}),(0,n._)(this,d)[d]=new c.Emitter,(0,n._)(this,p)[p]=(0,n._)(this,b)[b](),(0,n._)(this,h)[h]=(0,n._)(this,b)[b]()}}function R(e){(0,n._)(this,p)[p].volume=e}function N(e){(0,n._)(this,p)[p].url!==a.SILENCE_AUDIO_URL&&(0,n._)(this,T)[T](e)}function B(e){(0,n._)(this,u)[u].error("Audio node error",{error:e})}function x(){const e=new _.HTMLAudioNode({volume:1,logger:(0,n._)(this,u)[u]});return e.events.on("progress",(t=>{e===(0,n._)(this,p)[p]&&(0,n._)(this,w)[w](t)})),e.events.on("error",(t=>{e===(0,n._)(this,p)[p]&&(0,n._)(this,A)[A](t)})),e}function U(e){return(0,n._)(this,d)[d].emit("progress",e),(0,n._)(this,u)[u].debug("Progress changed",{progress:e}),e}function F(e){return(0,n._)(this,v)[v](e),(0,n._)(this,d)[d].emit("volumeChanged",e),(0,n._)(this,u)[u].debug("Volume changed",{volume:e}),e}async function W(e,t){e=Math.max(0,Math.min(1,e));const o=(0,n._)(this,p)[p];let i=0;if(t){const n=e-o.volume;i=n/(t/20||1)}else i=e<o.volume?a.FADE_OUT_STEP:a.FADE_IN_STEP;if(Math.abs(e-o.volume)<=a.VOLUME_EPSILON)return(0,n._)(this,O)[O](),e;let r=o.volume;return(0,n._)(this,O)[O]((()=>{if(!t&&i>0&&(i*=a.FADE_IN_ACCELERATION),r+=i,i<0?r<=e:r>=e)return(0,n._)(this,I)[I](e),void(0,n._)(this,O)[O]();this.setVolume(r)})),(0,n._)(this,u)[u].debug("Fading audio volume",{targetVolume:e,fadeTime:t}),e}function K(){(0,n._)(this,S)[S]();let e,t,o,i=a.INITIAL_FRAME_COUNTER;(0,n._)(this,f)[f]=setInterval((()=>{this.paused?e={amplitude:0,pitch:0,modulation:0,harmonics:0}:(i++,i>a.ANALYSIS_FRAME_SIZE&&(i=0,t=o,o=Y(),t||(t=Y())),t&&o&&(e={amplitude:(0,s.linearInterpolation)(i,t.amplitude,o.amplitude,a.ANALYSIS_FRAME_SIZE),pitch:(0,s.linearInterpolation)(i,t.pitch,o.pitch,a.ANALYSIS_FRAME_SIZE),modulation:(0,s.linearInterpolation)(i,t.modulation,o.modulation,a.ANALYSIS_FRAME_SIZE),harmonics:(0,s.linearInterpolation)(i,t.harmonics,o.harmonics,a.ANALYSIS_FRAME_SIZE)})),e&&(0,n._)(this,d)[d].emit("frequency",e)}),a.ANALYSIS_UPDATE_INTERVAL)}function V(){(0,n._)(this,f)[f]&&clearInterval((0,n._)(this,f)[f]),(0,n._)(this,d)[d].emit("frequency",{amplitude:0,pitch:0,modulation:0,harmonics:0})}function H(e){(0,n._)(this,M)[M](),e&&((0,n._)(this,y)[y]?(0,n._)(this,D)[D](e):(0,n._)(this,L)[L](e))}function j(){(0,n._)(this,y)[y]&&((0,n._)(this,y)[y].terminate(),(0,n._)(this,y)[y]=null),(0,n._)(this,g)[g]&&clearInterval((0,n._)(this,g)[g])}function G(e){const t=new Blob(["\n        var interval;\n        onmessage = function(e) {\n          clearInterval(interval);\n          if (e.data == 'start') {\n            interval = setInterval(function() { postMessage({}); }, 20);\n          }\n        }\n      "]);try{(0,n._)(this,y)[y]=new Worker(window.URL.createObjectURL(t)),(0,n._)(this,y)[y].onmessage=e,(0,n._)(this,y)[y].postMessage("start")}catch(t){(0,n._)(this,u)[u].warn("Web worker not supported for fade volume interval, falling back to default interval",{error:t}),(0,n._)(this,L)[L](e)}}function q(e){(0,n._)(this,g)[g]=setInterval(e,a.FADE_INTERVAL_DURATION)}function $(e){if(!e)throw new Error("Playback process not found")}function Y(){return{amplitude:(0,r.calcRandomNumber)(.7,1),pitch:(0,r.calcRandomNumber)(.55,.8),modulation:(0,r.calcRandomNumber)(.3,.55),harmonics:(0,r.calcRandomNumber)(.03,.45)}}},815152:(e,t,o)=>{"use strict";o.d(t,{ANALYSIS_FRAME_SIZE:()=>n,ANALYSIS_UPDATE_INTERVAL:()=>i,FADE_INTERVAL_DURATION:()=>c,FADE_IN_ACCELERATION:()=>s,FADE_IN_STEP:()=>_,FADE_OUT_STEP:()=>a,INITIAL_FRAME_COUNTER:()=>r,SHOULD_USE_NATIVE_HLS:()=>f,SILENCE_AUDIO_URL:()=>u,VOLUME_EPSILON:()=>l});const n=3,i=50,r=999,s=1.35,a=-.06,_=.001,c=60,l=.001,u="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",d=window.navigator.userAgent.toLowerCase(),p=(d.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[\/: ]([\d.]+)/)||[0,"0"])[1],h=/edge/i.test(d)&&!/opera/i.test(d),m=!/chrome/i.test(d)&&/webkit|safari|khtml/i.test(d),E=parseInt(p?.split(".")?.[0]),f=(m||h&&E>11&&E<78)&&"function"==typeof window.MediaSource},463300:(e,t,o)=>{"use strict";function n(e,t){return Math.random()*(t-e)+e}o.d(t,{calcRandomNumber:()=>n})},610778:(e,t,o)=>{"use strict";function n(e,t,o,n){return o*(e/n)+t}o.d(t,{linearInterpolation:()=>n})},208407:(e,t,o)=>{"use strict";function n(e){try{return e.play()||Promise.resolve()}catch(e){return Promise.reject(e)}}o.d(t,{wrapAudioPlay:()=>n})},723837:(e,t,o)=>{"use strict";o.d(t,{BrowserNativeAudioPlayerFactory:()=>a});var n=o(331635),i=o(127126),r=o(900768),s=o(54011);let a=class extends r.NativeAudioPlayerFactory{create(e){return new s.HTMLAudioPlayer(e)}};a=(0,n.__decorate)([i.scope.platform()],a)},757602:(e,t,o)=>{"use strict";o.d(t,{registerBrowserPlugins:()=>r});var n=o(900768),i=o(723837);function r(e){e.replace(n.NativeAudioPlayerFactory,i.BrowserNativeAudioPlayerFactory)}},555282:(e,t,o)=>{"use strict";o.d(t,{AudioList:()=>_});var n=o(434518),i=o(763812),r=o(306198),s=o(605204),a=(0,i._)("_ensureFetchable");class _{fetchAt(e,t){return(0,n._)(this,a)[a]().fetchAt(e,t)}fetchNext(e){return(0,n._)(this,a)[a]().fetchNext(e)}async ensureAt(e){const t=this.ensureAbsIndex(e);let o=this.audioAt(t);return o||this.fetchAt(t,{prefetch:!0})}ensureAbsIndex(e){return(0,r.ensureAudioListAbsIndex)(this,e)}get maxIndex(){return(0,s.getAudioListMaxIndex)(this)}constructor(){Object.defineProperty(this,a,{value:c})}}function c(){const{fetchable:e}=this;if(!e)throw new Error("AudioListFetchable not implemented");return e}},306198:(e,t,o)=>{"use strict";o.d(t,{ensureAudioListAbsIndex:()=>r});var n=o(415096),i=o(458820);function r(e,t){const o=(0,n.indexAbs)(e.length,t);if(!(0,i.isValidAudioListAbsIndex)(e,o))throw new Error("Index is out of range");return o}},605204:(e,t,o)=>{"use strict";function n(e){const t=e.length;return e.infinite?t:t-1}o.d(t,{getAudioListMaxIndex:()=>n})},458820:(e,t,o)=>{"use strict";o.d(t,{isValidAudioListAbsIndex:()=>i});var n=o(605204);function i(e,t){return t>=0&&t<=(0,n.getAudioListMaxIndex)(e)}},900768:(e,t,o)=>{"use strict";o.d(t,{NativeAudioPlayerFactory:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.platform({abstract:!0})],r)},5780:(e,t,o)=>{"use strict";o.d(t,{JoinScreenMarkup:()=>r});var n=o(474848),i=o(556117);const r=({isAnonym:e,header:t,members:o,input:r,buttons:s,options:a})=>(0,n.jsxs)("div",{className:(0,i.classNames)("JoinScreen",{"JoinScreen--anonym":e}),children:[t,(0,n.jsx)("div",{className:"JoinScreen__members",children:o}),(0,n.jsxs)("footer",{className:"JoinScreen__footer",children:[r&&(0,n.jsx)("div",{className:"JoinScreen__input-wrap",children:r}),s]}),a&&(0,n.jsx)("div",{className:"JoinScreen__options",children:a})]})},965776:(e,t,o)=>{"use strict";var n,i,r,s,a,_,c;o.d(t,{CallStatFailReason:()=>r,CallStatMuteType:()=>_,CallStatReachedType:()=>n,CallStatResult:()=>i,CallStatSource:()=>s,ClickHouseEventType:()=>a,EScreenSharingReason:()=>c,actionProductionStatCallEventType:()=>l}),function(e){e.AUDIO="ok_audio",e.AUDIO_TO_VIDEO="ok_video",e.VIDEO="ok_started_as_video",e.GROUP_AUDIO="group_audio",e.GROUP_AUDIO_TO_VIDEO="group_video",e.GROUP_VIDEO="group_started_as_video"}(n||(n={})),function(e){e.SUCCESS="success",e.FAIL="fail"}(i||(i={})),function(e){e.REMOTE_NO_CONNECT="push_not_delivered",e.REMOTE_FAILED_ACCEPT="cant_connect",e.REMOTE_DECLINE="declined_remote",e.LOCAL_DECLINE="declined_local",e.REMOTE_TIMEOUT="declined_timeout",e.REMOTE_BUSY="busy",e.CONNECTION_LOST="lost_connection"}(r||(r={})),function(e){e.CONVO_HEADER="im_header",e.CONVO_SNIPPET="im_message",e.CONVO_LIST="im_create",e.CONVO_JOIN_SNIPPET="im_join_message",e.CONVO_JOIN_HEADER="im_join_header",e.CONVO_JOIN_BANNER="im_join_header",e.FRIENDS_LIST="friends_list",e.LINK_JOIN_SNIPPET="join_deeplink",e.LINK_JOIN_PAGE="join_deeplink",e.PROFILE="profile",e.WIDGET="im_widget",e.FAST_CHAT="fast_chat",e.HISTORY="history",e.HISTORY_FRIENDS_LIST="history_friends_list",e.HISTORY_CREATE="history_create",e.LINK="link",e.STANDALONE="standalone",e.MINI_APP="mini_app",e.FC_HEADER="fast_chat_header",e.FC_PROFILE="fast_chat_profile",e.FC_MESSAGE_PROFILE="fast_chat_message_profile",e.FC_CREATE="fast_chat_create",e.FC_MESSAGE="fast_chat_message",e.FC_JOIN_POPUP="fast_chat_join_popup",e.FC_JOIN_BANNER="fast_chat_join_banner",e.FC_JOIN="fast_chat_join",e.IM_HEADER="im_header",e.IM_PROFILE="im_profile",e.IM_MESSAGE_PROFILE="im_message_profile",e.IM_CREATE="im_create",e.IM_MESSAGE="im_message",e.IM_JOIN_POPUP="im_join_popup",e.IM_JOIN_BANNER="im_join_banner",e.IM_JOIN="im_join",e.VKME_HEADER="vkme_header",e.VKME_PROFILE="vkme_profile",e.VKME_MESSAGE_PROFILE="vkme_message_profile",e.VKME_CREATE="vkme_create",e.VKME_MESSAGE="vkme_message",e.VKME_JOIN_POPUP="vkme_join_popup",e.VKME_JOIN_BANNER="vkme_join_banner",e.VKME_JOIN="vkme_join",e.VKME_CHANNEL_ACTION_BUTTON="vkme_channel_action_button",e.MESSENGER_UNHANDLED_SOURCE="messenger_unhandled_source"}(s||(s={})),function(e){e.OUTGOING_CALL_STARTED_VIDEO="OutgoingCallStartedVideo",e.OUTGOING_CALL_STARTED_AUDIO="OutgoingCallStartedAudio",e.OUTGOING_CALL_ADD_PARTICIPANTS_SENT="OutgoingCallAddParticipantsSent",e.OUTGOING_CALL_REMOTE_RINGING="OutgoingCallRemoteRinging",e.OUTGOING_CALL_ACCEPTED_REMOTELY="OutgoingCallAcceptedRemotely",e.OUTGOING_CALL_FAILED="OutgoingCallFailed",e.OUTGOING_CALL_COMPLETED="OutgoingCallCompleted",e.INCOMING_CALL_RECEIVED="IncomingCallReceived",e.INCOMING_CALL_ACCEPTED="IncomingCallAccepted",e.INCOMING_CALL_FAILED="IncomingCallFailed",e.CALL_DECLINED_OR_HANGED_LOCALLY="CallDeclinedOrHangedLocally",e.CALL_DECLINED_OR_HANGED_REMOTELY="CallDeclinedOrHangedRemotely",e.CALL_CONNECTED="CallConnected",e.CALL_DISCONNECTED="CallDisconnected",e.VIDEO_ENABLED="VideoEnabled",e.VIDEO_DISABLED="VideoDisabled",e.RELAY_CONNECTION_ESTABLISHED="RelayConnectionEstablished",e.USER_FEEDBACK_RECEIVED="UserFeedbackReceived",e.SYSTEM_STAT="SystemStat",e.GROUP_CALL_JOINED="GroupCallJoined",e.GROUP_CALL_JOIN_FAILED="GroupCallJoinFailed",e.HAND_RAISED="HandRaised",e.HAND_LOWERED="HandLowered",e.SCREEN_SHARING_STARTED="ScreenSharingStarted",e.SCREEN_SHARING_STOPPED="ScreenSharingStopped",e.AUDIO_SHARING_STARTED="AudioSharingStarted",e.ALL_MICS_DISABLED="AllMicsDisabled",e.MIC_OFF_WHILE_TALKING_ALERT="MicOffWhileTalkingAlert",e.MIC_OFF_WHILE_TALKING_ENABLE_CLICK="MicOffWhileTalkingEnableClick",e.VIDEO_DISABLED_DUE_TO_BAD_CONNECTION_ALERT="VideoDisabledDueToBadConnectionAlert",e.ALL_MICS_AND_VIDEO_DISABLED="AllMicsAndVideoDisabled",e.USER_MICS_AND_VIDEO_DISABLED="UserMicsAndVideoDisabled",e.ASK_ALL_TO_UNMUTE="AskAllToUnmute",e.ASK_USER_TO_UNMUTE="AskUserToUnmute",e.ASSIGN_ADMIN="AssignAdmin",e.RETRIEVE_ADMIN="RetrieveAdmin",e.ADMIN_PIN="AdminPin",e.ADMIN_UNPIN="AdminUnpin",e.VIRTUAL_BACKGROUND_SELECTED="VirtualBackgroundSelected",e.VIRTUAL_BACKGROUND_DISABLED="VirtualBackgroundDisabled",e.CUSTOM_VIRTUAL_BACKGROUND_SELECTED="CustomVirtualBackgroundSelected",e.CUSTOM_VIRTUAL_BACKGROUND_ADDED="CustomVirtualBackgroundAdded",e.CUSTOM_VIRTUAL_BACKGROUND_DELETED="CustomVirtualBackgroundDeleted",e.CUSTOM_VIRTUAL_BACKGROUND_DISABLED="CustomVirtualBackgroundDisabled",e.CALL_SCHEDULED="CallScheduled",e.SCHEDULED_CALL_EDITED="ScheduledCallEdited",e.SCHEDULED_CALL_LIVE_STARTED="ScheduledCallLiveStarted",e.REACTION_ENABLED="ReactionEnabled",e.REACTION_DISABLED="ReactionDisabled",e.REACTION_SENT="ReactionSent",e.CALL_WATCH_TOGETHER_CLICK="CallWatchTogetherClick",e.CALL_WATCH_TOGETHER_STARTED="CallWatchTogetherStarted",e.CALL_WATCH_TOGETHER_STOPPED="CallWatchTogetherStopped",e.SESSION_ROOMS_ASK_FOR_HELP="SessionRoomsAskForHelp",e.SESSION_ROOMS_USER_MOVED="SessionRoomsUserMoved",e.SESSION_ROOMS_USER_LEFT="SessionRoomsUserLeft",e.SESSION_ROOMS_AUTO_ALLOCATION="SessionRoomsAutoAllocation",e.SESSION_ROOMS_MANUAL_ALLOCATION="SessionRoomsManualAllocation",e.SESSION_ROOMS_OPENED="SessionRoomsOpened",e.SESSION_ROOMS_CLOSED="SessionRoomsClosed",e.SKIP_DESKTOP_JOIN_SCREEN="SkipDesktopJoinScreen",e.CALL_VMOJI_CLICK="CallVmojiClick",e.CALL_VMOJI_START_FAILED="CallVmojiStartFailed",e.CALL_VMOJI_STARTED="CallVmojiStarted",e.CALL_VMOJI_STOPPED="CallVmojiStopped",e.CALL_VMOJI_BENCHMARK="CallVmojiBenchmark",e.MIC_ENABLED="MicEnabled",e.MIC_DISABLED="MicDisabled",e.OPEN_CHAT="OpenChat",e.NAME_CHANGED_BY_USER="NameChangedByUser",e.NAME_CHANGED_BY_ANONYM="NameChangedByAnonym",e.NAME_CHANGED_BY_ADMIN="NameChangedByAdmin",e.NAME_CHANGED_BY_COMMUNITY="NameChangedByCommunity",e.TRANSCRIPTION_STARTED="TranscriptionStarted",e.TRANSCRIPTION_STOPPED="TranscriptionStopped",e.SCREEN_SHARE_NOT_VISIBLE="ScreenShareNotVisible",e.CALL_COLLAPSED="CallCollapsed",e.CALL_MISSED_NOTIFICATION="CallMissedNotification",e.SCREEN_ZOOMED="ScreenZoomed",e.WHITE_BOARD_STARTED="WhiteBoardStarted",e.ONLINE_TRANSCRIPTION_STARTED="OnlineTranscriptionStarted",e.ONLINE_TRANSCRIPTION_STOPPED="OnlineTranscriptionStopped",e.WAITING_ROOM_DISABLED="WaitingRoomDisabled",e.WAITING_ROOM_ENABLED="WaitingRoomEnabled",e.CALL_STREAMING_CLICK="CallStreamingClick",e.CALL_STREAMING_START_FAILED="CallStreamingStartFailed",e.CALL_STREAMING_STARTED="CallStreamingStarted",e.CALL_STREAMING_STOPPED="CallStreamingStopped",e.CALL_RECORDING_CLICK="CallRecordingClick",e.CALL_RECORDING_START_FAILED="CallRecordingStartFailed",e.CALL_RECORDING_STARTED="CallRecordingStarted",e.CALL_RECORDING_STOPPED="CallRecordingStopped",e.CURRENT_USER_BAD_CONNECTION_ALERT="CurrentUserBadConnectionAlert",e.DOWNLOAD_PARTICIPANTS_LIST_CLICK="DownloadParticipantsListClick",e.CONTACT_JOINED="ContactJoined",e.CONTACT_DEANONIMIZED="ContactDeanonimized",e.VIDEO_SUSPEND_MODE="VideoSuspendMode",e.CALL_PREVIEW_CAMERA_ENABLED="CallPreviewCameraEnabled",e.CALL_PREVIEW_MIC_ENABLED="CallPreviewMicEnabled",e.CALL_PREVIEW_CAMERA_DISABLED="CallPreviewCameraDisabled",e.CALL_PREVIEW_MIC_DISABLED="CallPreviewMicDisabled",e.CALL_PREVIEW_DOWNLOAD_APP_CLICK="CallPreviewDownloadAppClick",e.CALL_PREVIEW_DESKTOP_APP_JOIN_CLICK="CallPreviewDesktopAppJoinClick",e.CALL_PREVIEW_DEVICE_CHANGE_CAM_CLICK="CallPreviewDeviceChangeCamClick",e.CALL_PREVIEW_DEVICE_CHANGE_MIC_CLICK="CallPreviewDeviceChangeMicClick",e.CALL_PREVIEW_MODAL_CLOSED="CallPreviewModalClosed",e.CALL_PREVIEW_SKIP_JOIN_SCREEN_CLICK="CallPreviewSkipDesktopJoinScreenClick"}(a||(a={})),function(e){e[e.ONCE=0]="ONCE",e[e.PERMANENT=1]="PERMANENT"}(_||(_={})),function(e){e.HDScreenSharing="HDScreenSharing",e.AudioScreenSharing="AudioScreenSharing",e.FastScreenSharing="FastScreenSharing",e.FastAudioScreenSharing="FastAudioScreenSharing"}(c||(c={}));const l="type_voip_call_item"},374445:(e,t,o)=>{"use strict";o.d(t,{rootContainer:()=>l});var n=o(540944),i=o(951454),r=o(30234),s=o(476141),a=o(81674),_=o(766819);class c{resolve(e){const t=(0,s.subscribe)(this.handleConstruction),o=this.container.resolve(e);return t(),o}getConstructorScope(e){return _.constructorScope in e?e[_.constructorScope]:null}replace(e,t){const o=this.getConstructorScope(t);if(o!==this.getConstructorScope(e))throw new Error("token и constructor должны иметь одинаковый scope");this.container.register(e,t,{lifecycle:o?(0,i.mapScopeToTsyringeLifecycleType)(o):n.Lifecycle.Transient})}isolate(){this.isIsolated=!0,Array.from(s.globalScopeRegistrations.values()).forEach((e=>this.container.registerSingleton(e)))}async destroy(){if(!this.parent)throw new Error("Cannot destroy root container!");Array.from(this.instances.values()).forEach((e=>{(0,r.isDestroyable)(e)&&e[_.destroy]()})),await this.container.dispose(),this.parent.children.delete(this.name)}child(e,t){if(this.children.has(e))throw new Error(`Container child with same name "${e}" already exists!`);const o=new c(this,e);return this.parent&&this.children.set(e,o),t&&o.isolate(),o}constructor(e,t){this.parent=e,this.name=t,this.isIsolated=!1,this.children=new Map,this.instances=new Map,this.handleConstruction=e=>{const{type:t,ctor:o,instance:n}=e;if(!(0,r.isDestroyable)(n))return;if(t===a.scopes.GLOBAL&&this.isIsolated||t===a.scopes.CONTAINER||t===a.scopes.TRANSIENT||!this.parent){const{name:e}=o;this.instances.set(e,n)}else this.parent?.handleConstruction(e)},this.parent?this.container=this.parent.container.createChildContainer():(this.container=n.container,this.isIsolated=!0)}}const l=new c(null,"root")},10065:(e,t,o)=>{"use strict";o.d(t,{scope:()=>r});var n=o(951454),i=o(81674);const r={container:(e={})=>(0,n.scoped)(i.scopes.CONTAINER,e),global:(e={})=>(0,n.scoped)(i.scopes.GLOBAL,e),platform:(e={})=>(0,n.scoped)(i.scopes.PLATFORM,e),transient:(e={})=>(0,n.scoped)(i.scopes.TRANSIENT,e)}},127126:(e,t,o)=>{"use strict";o.d(t,{ChildDIProvider:()=>s.ChildDIProvider,DIProvider:()=>s.DIProvider,createPageProvider:()=>s.createPageProvider,createProvider:()=>s.createProvider,createWidget:()=>s.createWidget,destroy:()=>n.destroy,init:()=>n.init,rootContainer:()=>r.rootContainer,scope:()=>i.scope,update:()=>n.update,useContainer:()=>s.useContainer});o(238630),o(904107);var n=o(766819),i=o(10065),r=o(374445),s=o(315219)},951454:(e,t,o)=>{"use strict";o.d(t,{mapScopeToTsyringeLifecycleType:()=>a,scoped:()=>s});var n=o(540944),i=o(476141),r=o(81674);const s=(e,t={})=>o=>{const s=(0,i.constructorWrapper)(e,o,{abstract:t.abstract});switch(e){case r.scopes.CONTAINER:(0,n.scoped)(n.Lifecycle.ContainerScoped)(s);break;case r.scopes.GLOBAL:i.globalScopeRegistrations.add(s),(0,n.singleton)()(s);break;case r.scopes.PLATFORM:(0,n.singleton)()(s);break;case r.scopes.TRANSIENT:(0,n.injectable)()(s)}return s};function a(e){switch(e){case"GLOBAL":case"PLATFORM":return n.Lifecycle.Singleton;case"CONTAINER":return n.Lifecycle.ContainerScoped;case"TRANSIENT":return n.Lifecycle.Transient}throw new Error("Unknown scope")}},30234:(e,t,o)=>{"use strict";o.d(t,{isDestroyable:()=>i,isInitable:()=>s,isUpdatable:()=>r});var n=o(766819);const i=e=>e&&"function"==typeof e[n.destroy],r=e=>e&&"function"==typeof e[n.update],s=e=>e&&"function"==typeof e[n.init]},476141:(e,t,o)=>{"use strict";o.d(t,{constructorWrapper:()=>a,globalScopeRegistrations:()=>i,subscribe:()=>s});var n=o(766819);const i=new Set,r=new Set,s=e=>(r.add(e),()=>r.delete(e)),a=(e,t,o)=>{const i=new Proxy(t,{construct(t,n){if(o?.abstract)throw new Error(`Cannot instantiate abstract class ${t.toString()}`);const i=new t(...n);var s;return s={type:e,instance:i,ctor:t},r.forEach((e=>e(s))),i}});return t[n.constructorScope]=e,Reflect.defineMetadata("design:paramtypes",Reflect.getMetadata("design:paramtypes",t)||[],i),i}},81674:(e,t,o)=>{"use strict";o.d(t,{scopes:()=>n});const n={CONTAINER:"CONTAINER",GLOBAL:"GLOBAL",PLATFORM:"PLATFORM",TRANSIENT:"TRANSIENT"}},953459:(e,t,o)=>{"use strict";o.d(t,{useMemoizeProps:()=>r,usePostponedEffect:()=>s});var n=o(296540);function i(e,t){const o=Object.entries(e),n=Object.entries(t);return o.length===n.length&&o.every((([e,o])=>Object.is(o,t[e])))}function r(e,t=i){const o=(0,n.useRef)(void 0),r=(0,n.useRef)(o.current);return void 0!==r.current&&t(r.current,e)||(o.current=e),r.current=e,[o.current]}function s(e,t){const o=(0,n.useRef)(!0);(0,n.useEffect)((()=>{if(!o.current)return e();o.current=!1}),t)}},278644:(e,t,o)=>{"use strict";o.d(t,{ChildDIProvider:()=>c,DIProvider:()=>_,useContainer:()=>a});var n=o(474848),i=o(296540),r=o(374445);const s=(0,i.createContext)(r.rootContainer),a=()=>(0,i.useContext)(s),_=({instance:e=r.rootContainer,children:t})=>(0,n.jsx)(s.Provider,{value:e,children:t}),c=({children:e,name:t,isolated:o})=>{const s=a()||r.rootContainer,[c]=(0,i.useState)((()=>s.child(t,o)));return(0,i.useEffect)((()=>()=>{c.destroy()}),[]),(0,n.jsx)(_,{instance:c,children:e})}},315219:(e,t,o)=>{"use strict";o.d(t,{ChildDIProvider:()=>s.ChildDIProvider,DIProvider:()=>s.DIProvider,createPageProvider:()=>i.createPageProvider,createProvider:()=>n.createProvider,createWidget:()=>r.createWidget,useContainer:()=>s.useContainer});var n=o(956814),i=o(782432),r=o(911483),s=o(278644)},956814:(e,t,o)=>{"use strict";o.d(t,{createProvider:()=>c});var n=o(474848),i=o(296540),r=o(766819),s=o(30234),a=o(278644),_=o(953459);const c=e=>{const t=(0,i.createContext)({});return{Provider:o=>{const c=(0,a.useContainer)(),{children:l,...u}=o,[d]=(0,i.useState)((()=>{const t=c.resolve(e);return(0,s.isInitable)(t)&&t[r.init](u),t}));return(0,_.usePostponedEffect)((()=>{(0,s.isUpdatable)(d)&&d[r.update](u)}),(0,_.useMemoizeProps)(u)),(0,i.useEffect)((()=>()=>{(0,s.isDestroyable)(d)&&d[r.destroy]()}),[]),(0,n.jsx)(t.Provider,{value:d,children:l})},useModel:()=>{const o=(0,i.useContext)(t);if(!o)throw new Error(`The "useModel" hook expects an instance of ${e.name}, but it looks like no context is provided.`);return o}}}},782432:(e,t,o)=>{"use strict";o.d(t,{createPageProvider:()=>s});var n=o(474848),i=o(278644),r=o(956814);const s=e=>{const{useModel:t,Provider:o}=(0,r.createProvider)(e);return{useModel:t,Provider:t=>(0,n.jsx)(i.ChildDIProvider,{name:t.name??e.name,children:(0,n.jsx)(o,{...t})})}}},911483:(e,t,o)=>{"use strict";o.d(t,{createWidget:()=>i});var n=o(474848);const i=(e,t)=>function(o){return(0,n.jsx)(e,{...o,children:(0,n.jsx)(t,{children:o.children})})}},766819:(e,t,o)=>{"use strict";o.d(t,{constructorScope:()=>s,destroy:()=>i,init:()=>n,update:()=>r});const n=Symbol("init"),i=Symbol("destroy"),r=Symbol("update"),s=Symbol("constructorScope")},904107:(e,t,o)=>{"use strict";o(766819)},163633:(e,t,o)=>{"use strict";o.d(t,{Video:()=>r});var n=o(327813),i=o(643010);class r{static createRawId(e){return(0,i.getIdentityRawId)(e)}get rawId(){const{id:e,owner_id:t}=this.data;return r.createRawId({id:e,ownerId:t})}get data(){return this._data}get owner(){return this.ownerProvider?.getOwner(this._data.owner_id)}constructor(e,t){this._data=e,this.ownerProvider=t,(0,n.makeAutoObservable)(this,{},{autoBind:!0})}}},716707:(e,t,o)=>{"use strict";o.d(t,{logError:()=>i});var n=o(149396);function i(e,{breadcrumb:t,environment:o,hasDummyStacktrace:i}={}){const r=(0,n.getGlobalObject)().__SENTRY__?.hub;if(r)return i&&e.stack&&delete e.stack,r.captureException(e,{captureContext:e=>(o&&e.setTags({module:o}),t&&e.addBreadcrumb({message:t.message,category:"custom",data:t.data}),e)})}},149396:(e,t,o)=>{"use strict";function n(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}o.d(t,{getGlobalObject:()=>n})},75312:(e,t,o)=>{"use strict";o.d(t,{ApiPrefetch:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.global()],r)},795624:(e,t,o)=>{"use strict";o.d(t,{AuthService:()=>c});var n,i,r=o(331635),s=o(942451),a=o(327813),_=o(127126);let c=(i=n=class{get userId(){return this._userId}ensureUserId(){if(!this.userId)throw new Error("AuthService:not authorized user!");return this.userId}setUserId(e){this._userId=e}constructor(){this._userId=null,(0,a.makeAutoObservable)(this)}},n.ensure=(0,s.makeSharedState)("plugins/AuthService",(()=>new i),{version:1}),n);c=i=(0,r.__decorate)([_.scope.global(),(0,r.__metadata)("design:paramtypes",[])],c)},572466:(e,t,o)=>{"use strict";o.d(t,{EmitterFactory:()=>l});var n,i=o(434518),r=o(763812),s=o(331635),a=o(127126),_=o(919225),c=o(460480);let l=(n=(0,r._)("_logger"),class{create(e={}){return new _.Emitter({catchListener:e=>{if(!(e instanceof Error))throw e;(0,i._)(this,n)[n].log(e)},...e})}constructor(e){Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=e}});l=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:paramtypes",[c.ErrorLogger])],l)},460480:(e,t,o)=>{"use strict";o.d(t,{ErrorLogger:()=>r});var n=o(331635),i=o(127126);let r=class{init(e){if(!this.isFirstInit)throw new Error("ErrorLogger: инит уже был вызван!");this.isFirstInit=!1,this._log=e}log(e){if(!this._log)throw new Error("ErrorLogger: произведите инициализацию");this._log(e)}constructor(){this.isFirstInit=!0}};r=(0,n.__decorate)([i.scope.global()],r)},177626:(e,t,o)=>{"use strict";o.d(t,{ExternalEvents:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.global({abstract:!0})],r)},594020:(e,t,o)=>{"use strict";o.d(t,{Langs:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.platform({abstract:!0})],r)},314710:(e,t,o)=>{"use strict";o.d(t,{MediaFocus:()=>E});var n=o(434518),i=o(763812),r=o(942451),s=o(103555),a=o(343505);const _=(0,r.makeSharedState)("media-focus",(()=>({instance:null})),{version:1});var c=(0,i._)("_mediaSessionController"),l=(0,i._)("_channels"),u=(0,i._)("_lastActiveChannel"),d=(0,i._)("_handleChannelStart"),p=(0,i._)("_handleChannelStop"),h=(0,i._)("_update"),m=(0,i._)("_updateMediaSession");class E{static ensure(){const e=_();return e.instance||(e.instance=new E),e.instance}createChannel(e){if((0,n._)(this,l)[l].has(e))throw new Error(`MediaFocusChannel id ${e} already registered`);const t=new s.MediaFocusChannel(e);return(0,n._)(this,l)[l].set(e,t),t.events.on("start",(()=>(0,n._)(this,d)[d](t))),t.events.on("stop",(()=>(0,n._)(this,p)[p](t))),(0,n._)(this,h)[h](),t}constructor(){Object.defineProperty(this,u,{get:f,set:void 0}),Object.defineProperty(this,h,{value:g}),Object.defineProperty(this,m,{value:y}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=new a.MediaSessionController,(0,n._)(this,l)[l]=new Map,(0,n._)(this,d)[d]=e=>{(0,n._)(this,l)[l].get(e.id)===e&&(0,n._)(this,h)[h]()},(0,n._)(this,p)[p]=e=>{(0,n._)(this,l)[l].get(e.id)===e&&(0,n._)(this,h)[h]()}}}function f(){return[...(0,n._)(this,l)[l].values()].filter((e=>e.active)).sort(((e,t)=>t.activatedAt-e.activatedAt)).at(0)}function g(){(0,n._)(this,m)[m]()}function y(){const e=(0,n._)(this,c)[c],t=(0,n._)(this,l)[l].get("calls"),o=t?.active?t:(0,n._)(this,u)[u];o&&e.current!==o.mediaSession&&e.setCurrent(o.mediaSession)}},103555:(e,t,o)=>{"use strict";o.d(t,{MediaFocusChannel:()=>l});var n=o(434518),i=o(763812),r=o(919225),s=o(485526),a=(0,i._)("_emitter"),_=(0,i._)("_active"),c=(0,i._)("_activatedAt");class l{get events(){return(0,n._)(this,a)[a].listenable}get active(){return(0,n._)(this,_)[_]}get activatedAt(){return(0,n._)(this,c)[c]}start(){(0,n._)(this,_)[_]||((0,n._)(this,_)[_]=!0,(0,n._)(this,c)[c]=+new Date,(0,n._)(this,a)[a].emit("start"))}stop(){(0,n._)(this,_)[_]&&((0,n._)(this,_)[_]=!1,(0,n._)(this,a)[a].emit("stop"))}constructor(e){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,a)[a]=new r.Emitter,(0,n._)(this,_)[_]=!1,(0,n._)(this,c)[c]=0,this.mediaSession=new s.MediaSessionObject,this.id=e}}},343505:(e,t,o)=>{"use strict";o.d(t,{MediaSessionController:()=>u});var n=o(434518),i=o(763812),r=(0,i._)("_native"),s=(0,i._)("_supportedActions"),a=(0,i._)("_current"),_=(0,i._)("_setActionHandler"),c=(0,i._)("_applyNative"),l=(0,i._)("_handleChangeCurrentData");class u{get current(){return(0,n._)(this,a)[a]}setCurrent(e){(0,n._)(this,a)[a]?.events.off("change",(0,n._)(this,l)[l]),(0,n._)(this,a)[a]=e,e.events.on("change",(0,n._)(this,l)[l]),(0,n._)(this,c)[c](e)}constructor(){if(Object.defineProperty(this,_,{value:d}),Object.defineProperty(this,c,{value:p}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n._)(this,r)[r]=null,(0,n._)(this,s)[s]=["nexttrack","pause","play","previoustrack","seekbackward","seekforward","seekto","skipad","stop","hangup","enterpictureinpicture"],(0,n._)(this,a)[a]=null,(0,n._)(this,l)[l]=({diff:{metadata:e,playbackState:t,actionHandler:o,positionState:i,cameraActive:s,microphoneActive:a}})=>{const c=(0,n._)(this,r)[r];c&&(void 0!==e&&(c.metadata=e),t&&(c.playbackState=t),o&&(0,n._)(this,_)[_](o[0],o[1]),void 0!==i&&c.setPositionState(i??void 0),void 0!==s&&"setCameraActive"in c&&c.setCameraActive(s),void 0!==a&&"setMicrophoneActive"in c&&c.setMicrophoneActive(a))},"undefined"==typeof window||!("mediaSession"in window.navigator))return;const e=window.navigator.mediaSession;(0,n._)(this,r)[r]=e,"setCameraActive"in e&&(0,n._)(this,s)[s].push("togglecamera"),"setMicrophoneActive"in e&&(0,n._)(this,s)[s].push("togglemicrophone")}}function d(e,t){const o=(0,n._)(this,r)[r];if(o)try{o.setActionHandler(e,t)}catch(e){t&&console.error(e)}}function p(e){const t=(0,n._)(this,r)[r];if(t){t.metadata=e.metadata,t.playbackState=e.playbackState,t.setPositionState(e.positionState),"setCameraActive"in t&&t.setCameraActive(e.cameraActive),"setMicrophoneActive"in t&&t.setMicrophoneActive(e.microphoneActive);for(const t of(0,n._)(this,s)[s]){const o=e.actionHandlers.get(t)??null;(0,n._)(this,_)[_](t,o)}}}},485526:(e,t,o)=>{"use strict";o.d(t,{MediaSessionObject:()=>h});var n=o(434518),i=o(763812),r=o(919225),s=(0,i._)("_emitter"),a=(0,i._)("_actionHandlers"),_=(0,i._)("_positionState"),c=(0,i._)("_metadata"),l=(0,i._)("_playbackState"),u=(0,i._)("_cameraActive"),d=(0,i._)("_microphoneActive"),p=(0,i._)("_emitChange");class h{get events(){return(0,n._)(this,s)[s].listenable}get metadata(){return(0,n._)(this,c)[c]}set metadata(e){(0,n._)(this,c)[c]=e,(0,n._)(this,p)[p]({metadata:e})}get playbackState(){return(0,n._)(this,l)[l]}set playbackState(e){(0,n._)(this,l)[l]=e,(0,n._)(this,p)[p]({playbackState:e})}get actionHandlers(){return(0,n._)(this,a)[a]}get positionState(){return(0,n._)(this,_)[_]}get cameraActive(){return(0,n._)(this,u)[u]}get microphoneActive(){return(0,n._)(this,d)[d]}setPositionState(e){(0,n._)(this,_)[_]=e,(0,n._)(this,p)[p]({positionState:e})}setActionHandler(e,t){this.actionHandlers.set(e,t),(0,n._)(this,p)[p]({actionHandler:[e,t]})}setCameraActive(e){(0,n._)(this,u)[u]=e,(0,n._)(this,p)[p]({cameraActive:e})}setMicrophoneActive(e){(0,n._)(this,d)[d]=e,(0,n._)(this,p)[p]({microphoneActive:e})}constructor(){Object.defineProperty(this,p,{value:m}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,n._)(this,s)[s]=new r.Emitter,(0,n._)(this,a)[a]=new Map,(0,n._)(this,c)[c]=null,(0,n._)(this,l)[l]="none",(0,n._)(this,u)[u]=!1,(0,n._)(this,d)[d]=!1}}function m(e){(0,n._)(this,s)[s].emit("change",{diff:e})}},121092:(e,t,o)=>{"use strict";o.d(t,{MyTracker:()=>u});var n,i=o(434518),r=o(763812),s=o(331635),a=o(127126),_=o(795624),c=o(787945),l=o(561017);let u=(n=(0,r._)("_activityCounters"),class{ensureActivityCounter({counterId:e="2579437",activityId:t,timespentType:o="screen",strict:r=!0}){const s=`${e}/${t}`;let a=(0,i._)(this,n)[n].get(s);if(a&&a.timespentType!==o)throw new Error(`ActivityCounter ${s} already registered with another timespentType (created: ${a.timespentType}, given: ${o})`);return a||(a=new l.MyTrackerActivityCounter({tmr:this.tmr,authService:this.authService,counterId:e,activityId:t,timespentType:o,strict:r}),(0,i._)(this,n)[n].set(s,a)),a}constructor(e,t){Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=new Map,this.authService=e,this.tmr=t}});u=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:paramtypes",[_.AuthService,c.Tmr])],u)},561017:(e,t,o)=>{"use strict";o.d(t,{MyTrackerActivityCounter:()=>d});var n=o(434518),i=o(763812),r=(0,i._)("_authService"),s=(0,i._)("_tmr"),a=(0,i._)("_isActiveTimespent"),_=(0,i._)("_tmrStartTimespent"),c=(0,i._)("_tmrStopTimespent"),l=(0,i._)("_tmrIncrement"),u=(0,i._)("_userId");class d{get isActiveTimespent(){return(0,n._)(this,a)[a]}startTimespent(){if(this.isActiveTimespent){if(this.strict)throw new Error("ActivityCounter already started")}else(0,n._)(this,_)[_](),(0,n._)(this,a)[a]=!0}stopTimespent(){if(this.isActiveTimespent)(0,n._)(this,c)[c](),(0,n._)(this,a)[a]=!1;else if(this.strict)throw new Error("ActivityCounter is not started")}increment(){(0,n._)(this,l)[l]()}constructor({authService:e,tmr:t,counterId:o,activityId:i,timespentType:d,strict:f}){Object.defineProperty(this,_,{value:p}),Object.defineProperty(this,c,{value:h}),Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,u,{get:E,set:void 0}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),(0,n._)(this,a)[a]=!1,(0,n._)(this,r)[r]=e,(0,n._)(this,s)[s]=t,this.counterId=o,this.activityId=i,this.timespentType=d,this.strict=f}}function p(){(0,n._)(this,s)[s].push({id:this.counterId,type:"startTimespent",activity:this.activityId,userId:(0,n._)(this,u)[u],canUseInBackground:"service"===this.timespentType})}function h(){(0,n._)(this,s)[s].push({id:this.counterId,type:"stopTimespent",activity:this.activityId,userId:(0,n._)(this,u)[u],canUseInBackground:"service"===this.timespentType})}function m(){(0,n._)(this,s)[s].push({id:this.counterId,type:"incrementEventTimespent",activity:this.activityId,userId:(0,n._)(this,u)[u]})}function E(){return(0,n._)(this,r)[r].userId??0}},380719:(e,t,o)=>{"use strict";var n;o.d(t,{MyTrackerActivityId:()=>n}),function(e){e[e.MusicTrackListenedDAU=2]="MusicTrackListenedDAU",e[e.CommunitySubscribe=11]="CommunitySubscribe",e[e.MusicScreen=80]="MusicScreen",e[e.MusicListen=85]="MusicListen",e[e.MusicSnippetsListen=86]="MusicSnippetsListen",e[e.AudiobooksListen=87]="AudiobooksListen",e[e.PodcastsListen=88]="PodcastsListen",e[e.RadioListen=89]="RadioListen",e[e.PodcastEpisodeListenedDAU=92]="PodcastEpisodeListenedDAU",e[e.AudiobookListenedDAU=93]="AudiobookListenedDAU",e[e.RadiostationListenedDAU=94]="RadiostationListenedDAU",e[e.MusicSnippetListenedDAU=95]="MusicSnippetListenedDAU"}(n||(n={}))},97931:(e,t,o)=>{"use strict";o.d(t,{BrowserTmr:()=>s});var n=o(331635),i=o(127126),r=o(613464);let s=class{push(e){this.debugEnabled&&console.log("[tmr] push",e),this.tmrArray.push(e)}get debugEnabled(){return this.userEnv.partConfigEnabled("tmr_debug")}get tmrArray(){return window._tmr=window._tmr||[],window._tmr}constructor(e){this.userEnv=e}};s=(0,n.__decorate)([i.scope.platform(),(0,n.__metadata)("design:paramtypes",[r.UserEnv])],s)},787945:(e,t,o)=>{"use strict";o.d(t,{Tmr:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.platform({abstract:!0})],r)},865328:(e,t,o)=>{"use strict";o.d(t,{PrivacyLegacy:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.global()],r)},613464:(e,t,o)=>{"use strict";o.d(t,{UserEnv:()=>r});var n=o(331635),i=o(127126);let r=class{};r=(0,n.__decorate)([i.scope.global()],r)},455548:(e,t,o)=>{"use strict";o.d(t,{getLottieManager:()=>n});const n=(0,o(8520).asyncImportLoader)((async()=>{const{LottieManager:e}=await Promise.all([o.e(15582),o.e(23666)]).then(o.bind(o,441120));return e}))},609276:(e,t,o)=>{"use strict";o.d(t,{RouterContext:()=>i,useRouterContext:()=>r});var n=o(296540);const i=(0,n.createContext)(null);function r(){const e=(0,n.useContext)(i);if(!e)throw new Error("@vkontakte-internal/router: Empty RouterContext");return e}},287040:(e,t,o)=>{"use strict";o.d(t,{useLocation:()=>s});var n=o(296540),i=o(609276);function r(e,t){if(t)return{key:t.key,url:e.createHref(t)}}function s(){const{router:e}=(0,i.useRouterContext)();return(0,n.useMemo)((()=>{const{beforeHistoryLocation:t,location:o}=e;return{...o,from:r(e,t)}}),[e.location,e.historyLocations])}},242422:(e,t,o)=>{"use strict";o.d(t,{matcher:()=>a,useMatch:()=>_});var n=o(801290),i=o(287040);o(609276);const r={};function s(e,t={}){const o=function(e={}){const t=Object.keys(e).sort().map((t=>`${t}:${e[t]}`)).join();return r[t]||(r[t]={}),r[t]}(t);if(!o[e]){const i=[],r=(0,n.pathToRegexp)(e,i,t);o[e]={keys:i,regExp:r}}return o[e]}function a(e,t,{exact:o}={}){if("string"==typeof e||Array.isArray(e))for(let n of[e].flat()){const{regExp:e,keys:i}=s(n,{strict:!0,sensitive:!0,end:Boolean(o)}),r=e.exec(t);if(r)return[!0,Object.fromEntries(i.map((({name:e},t)=>[e,r[t+1]])))]}else{const{regExp:o}=e;if(new RegExp(o).exec(t))return[!0,{}]}return[!1,null]}const _=(e,t,o={})=>{const n=(0,i.useLocation)();return a(e,t??n.pathname+n.search,o)}},62119:(e,t,o)=>{"use strict";o.d(t,{useQuery:()=>i});var n=o(609276);function i(){const{router:e}=(0,n.useRouterContext)();return e.query}},196055:(e,t,o)=>{"use strict";o.d(t,{loadPrefetchCache:()=>c,setPrefetchCacheMissHandler:()=>s,updatePrefetchCache:()=>r});let n,i=null;function r(e){i=e}function s(e){n=e}let a=!1,_=new Set;function c(e,t,o){if(!i)return;const n=function(e,t,o,n){return e.findIndex((e=>e.method===t&&e.version===o&&l(n,e.request)))}(i,e,t,o);if(null==n||-1===n)return _.add(e),void(a=!0);const r=i[n];!function(e,t){if(!e||-1===t)return;e.splice(t,1)}(i,n);const s=r?.response,c=r?.error;if(c){const e=new Error("Api request failed.");throw e.type="api_error",e.error=c,e}return s}function l(e,t){return e===t||(!(!d(e)||!d(t))||!d(e)&&!d(t)&&(Array.isArray(e)&&"string"==typeof t?u(e,t.split(",")):"string"==typeof e&&Array.isArray(t)?u(e.split(","),t):Array.isArray(e)&&Array.isArray(t)?u(e,t):"object"==typeof e&&"object"==typeof t?function(e,t){const o=e,n=t,i=new Set([...Object.keys(o),...Object.keys(n)]);for(const e of i){if(!l(o[e],n[e]))return!1}return!0}(e,t):"number"==typeof e&&"string"==typeof t?e===Number.parseFloat(t):"string"==typeof e&&"number"==typeof t?Number.parseFloat(e)===t:"number"!=typeof e||1!==e&&0!==e||"boolean"!=typeof t?"boolean"==typeof e&&"number"==typeof t&&(1===t||0===t)&&e===Boolean(t):Boolean(e)===t))}function u(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!l(e[o],t[o]))return!1;return!0}function d(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||"object"==typeof e&&null!==e&&Object.values(e).every(d)}},439219:(e,t,o)=>{"use strict";o.d(t,{useClickOutsideListener:()=>i});var n=o(296540);function i(e,t){const o=(0,n.useRef)(null);return(0,n.useEffect)((()=>{const t=t=>{o.current&&(o.current.contains(t.target)||e(t))};return document.addEventListener("click",t,!0),()=>{document.removeEventListener("click",t,!0)}}),t),o}},711901:(e,t,o)=>{"use strict";o.d(t,{useExternRef:()=>i});var n=o(296540);function i(...e){const t=(0,n.useRef)(null);return(0,n.useMemo)((()=>({get current(){return t.current},set current(o){t.current=o,e.forEach((e=>{e&&function(e,t){t&&("function"==typeof t?t(e):t.current=e)}(o,e)}))}})),e)}},64640:(e,t,o)=>{"use strict";o.d(t,{useNumericVariableValue:()=>i});var n=o(765483);const i=(e,t)=>(0,n.useVariableValue)(e,t,(e=>parseInt(e)||0))},444701:(e,t,o)=>{"use strict";o.d(t,{useObjectMemo:()=>r});var n=o(296540),i=o(8520);const r=e=>{const[t,o]=(0,n.useState)(e);return(0,i.isEqual)(e,t)||o(e),t}},143926:(e,t,o)=>{"use strict";o.d(t,{usePatchChildrenRef:()=>s});var n=o(296540),i=o(711901);const r=e=>"string"==typeof e.type,s=e=>{const t=(0,n.isValidElement)(e)&&(r(e)?e.ref:e.props.getRootRef),o=(0,i.useExternRef)(t);return(0,n.useEffect)((()=>{o.current||console.error("Кажется, в children передан компонент, который не поддерживает свойство getRootRef. Мы не можем получить ссылку на корневой dom-элемент этого компонента")}),[e?.type,o]),[o,(0,n.isValidElement)(e)?(0,n.cloneElement)(e,{[r(e)?"ref":"getRootRef"]:o}):e]}},17764:(e,t,o)=>{"use strict";o.d(t,{useStableCallback:()=>i});var n=o(296540);function i(e){const t=(0,n.useRef)(e);return(0,n.useLayoutEffect)((()=>{t.current=e})),(0,n.useCallback)(((...e)=>t.current(...e)),[t])}},653540:(e,t,o)=>{"use strict";o.d(t,{useUpdateEffect:()=>i});var n=o(296540);function i(e,t){const o=(0,n.useRef)(!0);(0,n.useEffect)((()=>{o.current||e(),o.current=!1}),t)}},765483:(e,t,o)=>{"use strict";o.d(t,{useVariableValue:()=>i});var n=o(296540);const i=(e,t,o)=>(0,n.useMemo)((()=>o(getComputedStyle(e).getPropertyValue(t))),[])},958327:(e,t,o)=>{"use strict";o.d(t,{createAccountGetHelpHintsFx:()=>c,createAccountGetInfoFx:()=>r,createAccountGetPrivacySettingsFx:()=>d,createAccountGetProfileInfoFx:()=>_,createAccountHideHelpHintFx:()=>l,createAccountSetInfoFx:()=>s,createAccountShowHelpHintFx:()=>u,createAccountUnbanFx:()=>p});var n=o(32489),i=o(66044);const r=e=>(0,i.createApiEffect)("account.getInfo",e),s=e=>(0,n.attach)({effect:(0,i.createApiEffect)("account.setInfo",e),mapParams:({query:e,...t})=>({...t,query:{...e,value:a(e.value)}})});function a(e){return"boolean"==typeof e?e?"1":"0":"number"==typeof e?String(e):e}const _=e=>(0,i.createApiEffect)("account.getProfileInfo",e),c=e=>(0,i.createApiEffect)("account.getHelpHints",e),l=e=>(0,i.createApiEffect)("account.hideHelpHint",e),u=e=>(0,i.createApiEffect)("account.showHelpHint",e),d=e=>(0,i.createApiEffect)("account.getPrivacySettings",e),p=e=>(0,i.createApiEffect)("account.unban",e)},523430:(e,t,o)=>{"use strict";o.d(t,{createAudioAddDislikeFx:()=>g,createAudioAddFx:()=>l,createAudioAddToPlaylistFx:()=>A,createAudioCreatePlaylistFx:()=>p,createAudioDeleteFx:()=>u,createAudioDeletePlaylistFx:()=>h,createAudioFollowRadioStationFx:()=>v,createAudioGetAudioIdsBySourceFx:()=>s,createAudioGetAudioPreviewFx:()=>c,createAudioGetByIdFx:()=>i,createAudioGetFx:()=>a,createAudioGetPlaylistByIdFx:()=>r,createAudioGetSearchSuggestionsFx:()=>E,createAudioGetSnippetsFx:()=>m,createAudioGetStreamMixAudiosFx:()=>f,createAudioRemoveDislikeFx:()=>y,createAudioRemoveFromPlaylistFx:()=>b,createAudioRestoreFx:()=>d,createAudioSearchFx:()=>_,createAudioUnfollowRadioStationFx:()=>w});var n=o(66044);const i=e=>(0,n.createApiEffect)("audio.getById",e),r=e=>(0,n.createApiEffect)("audio.getPlaylistById",e),s=e=>(0,n.createApiEffect)("audio.getAudioIdsBySource",e),a=e=>(0,n.createApiEffect)("audio.get",e),_=e=>(0,n.createApiEffect)("audio.search",e),c=e=>(0,n.createApiEffect)("audio.getAudioPreviewUrl",e),l=e=>(0,n.createApiEffect)("audio.add",e),u=e=>(0,n.createApiEffect)("audio.delete",e),d=e=>(0,n.createApiEffect)("audio.restore",e),p=e=>(0,n.createApiEffect)("audio.createPlaylist",e),h=e=>(0,n.createApiEffect)("audio.deletePlaylist",e),m=e=>(0,n.createApiEffect)("audio.getSnippets",e),E=e=>(0,n.createApiEffect)("audio.getSearchSuggestions",e),f=e=>(0,n.createApiEffect)("audio.getStreamMixAudios",e),g=e=>(0,n.createApiEffect)("audio.addDislike",e),y=e=>(0,n.createApiEffect)("audio.removeDislike",e),v=e=>(0,n.createApiEffect)("audio.followRadioStation",e),w=e=>(0,n.createApiEffect)("audio.unfollowRadioStation",e),A=e=>(0,n.createApiEffect)("audio.addToPlaylist",e),b=e=>(0,n.createApiEffect)("audio.removeFromPlaylist",e)},668882:(e,t,o)=>{"use strict";o.d(t,{createFaveAddGroupFx:()=>_,createFaveAddPodcastEpisodeFx:()=>l,createFaveAddProductFx:()=>s,createFaveAddVideoFx:()=>i,createFaveRemoveGroupFx:()=>c,createFaveRemovePodcastEpisodeFx:()=>u,createFaveRemoveProductFx:()=>a,createFaveRemoveVideoFx:()=>r});var n=o(66044);const i=e=>(0,n.createApiEffect)("fave.addVideo",e),r=e=>(0,n.createApiEffect)("fave.removeVideo",e),s=e=>(0,n.createApiEffect)("fave.addProduct",e),a=e=>(0,n.createApiEffect)("fave.removeProduct",e),_=e=>(0,n.createApiEffect)("fave.addGroup",e),c=e=>(0,n.createApiEffect)("fave.removeGroup",e),l=e=>(0,n.createApiEffect)("fave.addPodcastEpisode",e),u=e=>(0,n.createApiEffect)("fave.removePodcastEpisode",e)},149183:(e,t,o)=>{"use strict";o.d(t,{useEntitiesStore:()=>i,useNotNullEntitiesStore:()=>r});var n=o(293721);const i=(e,t)=>(0,n.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>e[t],defaultValue:null}),r=(e,t)=>(0,n.useStoreMap)({store:e,keys:[t],fn:(e,[t])=>{const o=e[t];if(null==o)throw new Error("Empty value entity store");return o}})},826316:(e,t,o)=>{"use strict";o.d(t,{ensureAccountInfoService:()=>s});var n=o(32489),i=o(751230);let r;function s(){if(!r){const e=(0,n.createDomain)("global/account/info");r=(0,i.createAccountInfoService)({domain:e})}return r}},405139:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPlaylistsService:()=>s});var n=o(32489),i=o(942451),r=o(693826);const s=(0,i.makeSharedState)("global/audio/playlists",(()=>(0,r.createAudioPlaylistsService)({domain:(0,n.createDomain)("global/audio/playlists"),name:"global/audio/playlists"})),{version:1})},398565:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPreviewsService:()=>s});var n=o(32489),i=o(125731);let r;function s(){if(!r){const e=(0,n.createDomain)("global/audio/audioPreviews");r=(0,i.createAudioPreviewsService)({domain:e})}return r}},284353:(e,t,o)=>{"use strict";o.d(t,{ensureAudiosService:()=>s});var n=o(32489),i=o(269943);let r;function s(){if(!r){const e=(0,n.createDomain)("global/audio/audios");r=(0,i.createAudiosService)({domain:e})}return r}},611713:(e,t,o)=>{"use strict";o.d(t,{ensureGroupsMusicService:()=>s});var n=o(32489),i=o(942451),r=o(37512);const s=(0,i.makeSharedState)("global/audio/groupsMusic",(()=>(0,r.createGroupsMusicService)({domain:(0,n.createDomain)("global/audio/groupsMusic"),name:"global/audio/groupsMusic"})),{version:3})},23280:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioDislikesService:()=>s});var n=o(32489),i=o(942451),r=o(736446);const s=(0,i.makeSharedState)("global/audio/myDislikes",(()=>(0,r.createMyAudioDislikesService)({domain:(0,n.createDomain)("global/audio/myDislikes"),name:"global/audio/myDislikes"})),{version:1})},842225:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioPlaylistsService:()=>a});var n=o(32489),i=o(942451),r=o(25034),s=o(405139);const a=(0,i.makeSharedState)("global/audio/myPlaylists",(()=>(0,r.createMyAudioPlaylistsService)({config:{domain:(0,n.createDomain)("global/audio/myPlaylists"),name:"global/audio/myPlaylists"},audioPlaylistsService:(0,s.ensureAudioPlaylistsService)()})),{version:2})},515706:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioRadioStationsService:()=>s});var n=o(32489),i=o(942451),r=o(413618);const s=(0,i.makeSharedState)("global/audio/myRadioStations",(()=>(0,r.createMyAudioRadioStationsService)({domain:(0,n.createDomain)("global/audio/myRadioStations"),name:"global/audio/myRadioStations"})),{version:1})},332583:(e,t,o)=>{"use strict";o.d(t,{ensureMyMusicService:()=>s});var n=o(32489),i=o(942451),r=o(453888);const s=(0,i.makeSharedState)("global/audio/myMusic",(()=>(0,r.createMyMusicService)({domain:(0,n.createDomain)("global/audio/myMusic"),name:"global/audio/myMusic"})),{version:2})},401986:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPodcastsFaveService:()=>s});var n=o(32489),i=o(942451),r=o(499617);const s=(0,i.makeSharedState)("global/fave/audio/podcasts",(()=>(0,r.createAudioPodcastsFaveService)({domain:(0,n.createDomain)("global/fave/audio/podcasts"),name:"global/fave/audio/podcasts"})),{version:1})},741531:(e,t,o)=>{"use strict";o.d(t,{ensureAccountHelpHintsService:()=>l});var n=o(32489),i=o(942451),r=o(958327),s=o(94359),a=o(614117),_=o(492243),c=o(679005);const l=(0,i.makeSharedState)("global/account/helpHints",(()=>(e=>{const t=(0,s.getEffectorServiceDomain)(e),o=t.createStore({}),i=t.createStore({viewerId:0}),l=t.createEvent("helpHints/initialize"),u=t.createEvent("helpHints/reload"),d=t.createEvent("helpHints/logError"),p=t.createEvent("helpHints/hide"),h=t.createEvent("helpHints/show"),m=(0,r.createAccountGetHelpHintsFx)({domain:t});let E=null;const f=async()=>{const{items:e}=await m({query:{}});return e.reduce(((e,t)=>(e[t.id]=t,e)),{})},g=(0,n.attach)({name:"helpHints/getHelpHintsFx",source:o,effect:t.createEffect((e=>Object.keys(e).length?Promise.resolve(e):E||(E=f().finally((()=>{E=null})),E)))}),y=t.createEffect("helpHints/reloadHelpHintsFx");y.use((()=>f()));const v=(0,n.attach)({name:"helpHints/hideHelpHintFx",effect:(0,r.createAccountHideHelpHintFx)({domain:t}),mapParams:({hintId:e})=>({query:{hint_id:e}})}),w=(0,n.attach)({name:"helpHints/showHelpHintFx",effect:(0,r.createAccountShowHelpHintFx)({domain:t}),mapParams:e=>({query:{hint_id:e}})}),A=t.createEffect("helpHints/logErrorFx");return A.use((({error:e,logErrorFn:t})=>{let o=null,n=null;t?((0,a.isNetworkError)(e)?o=e.error:(0,_.isApiError)(e)?(o=new Error(e.type),n=e.error):o=e,o&&t(o,{environment:"global/account/helpHints",data:n})):console.error(e)})),(0,n.sample)({clock:l,target:i}),(0,n.sample)({clock:l,source:g.pending,filter:e=>!e,target:g}),(0,n.sample)({clock:u,target:y}),(0,n.sample)({clock:[g.doneData,y.doneData],target:o}),(0,n.sample)({clock:p,target:v}),(0,n.sample)({clock:p,source:o,filter:(e,{isOptimistic:t})=>Boolean(t),fn:(e,{hintId:t})=>(0,c.produce)(e,(e=>{delete e[t]})),target:o}),(0,n.sample)({clock:h,target:w}),(0,n.sample)({clock:v.done,source:o,filter:(e,{params:{isOptimistic:t}})=>!t,fn:(e,{params:{hintId:t}})=>(0,c.produce)(e,(e=>{delete e[t]})),target:o}),(0,n.sample)({clock:w.done,target:u}),(0,n.sample)({clock:d,source:i,fn:({logErrorFn:e},t)=>({error:t,logErrorFn:e}),target:A}),(0,n.sample)({clock:[g.failData,y.failData,w.failData,v.failData],target:d}),{initialize:l,canShow:e=>Boolean(o.getState()[e]),getHelpHintsFx:g,$helpHints:o,hideHelpHint:p,showHelpHint:h}})({domain:(0,n.createDomain)("global/account/helpHints"),name:"global/account/helpHints"})),{version:1})},751230:(e,t,o)=>{"use strict";o.d(t,{createAccountInfoService:()=>s});var n,i=o(32489),r=o(958327);!function(e){e[e.Pending=0]="Pending",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(n||(n={}));const s=({domain:e})=>{const t=e.createStore({}),o=e.createStore(n.Pending),s=(0,r.createAccountGetInfoFx)({domain:e}),a=(0,r.createAccountSetInfoFx)({domain:e}),_=e.createEffect((()=>s({query:{}})));o.on(s,((e,t)=>t.query.fields?e:e<=n.Pending?n.Initializing:void 0)).on(s.finally,((e,t)=>t.params.query.fields||"done"!==t.status?e:n.Initializing)),t.on(s.finally,((e,t)=>"done"===t.status?{...e,...t.result}:e)).on(a.done,((e,t)=>{const{result:o,params:{query:{name:n,value:i}}}=t;return o&&n in e?{...e,[n]:i}:e}));const c=e.createEvent();return(0,i.sample)({clock:c,source:o,filter:e=>e!==n.Initialized,target:_}),{$accountInfo:t,getInfoFx:s,setInfoFx:a,initEvent:c}}},580334:(e,t,o)=>{"use strict";function n({id:e,ownerId:t,accessKey:o}){return`${t}_${e}${o?`_${o}`:""}`}o.d(t,{getAudioAccessId:()=>n})},255053:(e,t,o)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}o.d(t,{getAudioFullId:()=>n})},647923:(e,t,o)=>{"use strict";function n(e){const t={id:e.id,ownerId:e.owner_id,accessKey:e.access_key,releaseAudioId:e.release_audio_id};return{...t,identity:t,title:e.title,author:a(e),artwork:s(e.album?.thumb),duration:e.duration,url:e.url||null,isExplicit:e.is_explicit}}function i(e){if(!e.track_code)throw new Error("track_code is not defined");return{...n(e),trackCode:e.track_code}}o.d(t,{mapAPIAudioArtistToAudioDataArtistInfo:()=>_,mapAPIAudioToAudioData:()=>n,mapAPIAudioToAudioDataAuthor:()=>a,mapAPIAudioToTrackedAudioData:()=>i});const r=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function s(e){const t=[];if(!e)return t;for(const[o,n]of r){const i=e[o];i&&t.push({src:i,size:n})}return t}function a(e){return{main:e?.main_artists?.map(c)??[],feat:e?.featured_artists?.map(c)??[],raw:e.artist}}function _(e){return{id:e.id,name:e.name}}function c(e){return{name:e.name}}},441914:(e,t,o)=>{"use strict";function n(e){const[t,o,n]=e.split("_");if(!o||!t)throw new Error(`Invalid audio_id: ${e}`);return{id:parseInt(o,10),ownerId:parseInt(t,10),accessKey:n}}o.d(t,{mapAPIRawIdToAudioIdentity:()=>n})},14308:(e,t,o)=>{"use strict";o.d(t,{mapAPIRawIdTrackedToTrackedAudioIdentity:()=>i});var n=o(441914);function i(e){return{...(0,n.mapAPIRawIdToAudioIdentity)(e.audio_id),trackCode:e.track_code}}},264544:(e,t,o)=>{"use strict";var n;o.d(t,{AudioType:()=>n}),function(e){e.MusicTrack="music_track",e.MusicSnippet="music_snippet",e.PodcastEpisode="podcast_episode",e.PodcastTrailer="podcast_trailer",e.Radio="radio"}(n||(n={}))},406245:(e,t,o)=>{"use strict";o.d(t,{mapAPIAudioToMusicAudioData:()=>r,mapAPIAudioToTrackedMusicAudioData:()=>s});var n=o(647923),i=o(281972);function r(e,t){return{...(0,n.mapAPIAudioToAudioData)(t),...a(e,t),...(0,i.mapAPIAudioToTrackedMusicAudioState)(t)}}function s(e,t){return{...(0,n.mapAPIAudioToTrackedAudioData)(t),...a(e,t),...(0,i.mapAPIAudioToTrackedMusicAudioState)(t)}}function a(e,t){return{type:e,hasLyrics:t.has_lyrics??!1,author:(o=t,{...(0,n.mapAPIAudioToAudioDataAuthor)(o),main:o?.main_artists?.map(_)??[],feat:o?.featured_artists?.map(_)??[]})};var o}function _(e){return{name:e.name,id:e.id}}},281972:(e,t,o)=>{"use strict";function n(e){return{disliked:e.dislike??!1}}o.d(t,{mapAPIAudioToTrackedMusicAudioState:()=>n})},303651:(e,t,o)=>{"use strict";function n({id:e,ownerId:t,podcastId:o}){return`${t}_${Number.isFinite(o)?o:e}`}o.d(t,{getPodcastAudioFullId:()=>n})},693826:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsService:()=>m});var n=o(32489),i=o(523430),r=o(991331),s=o(958955),a=o(918081),_=o(203619),c=o(14308),l=o(612934),u=o(716768),d=o(182008),p=o(719848),h=o(94359);function m(e){const t=(0,h.getEffectorServiceDomain)(e),o=(0,i.createAudioGetPlaylistByIdFx)({domain:t}),m=(0,i.createAudioGetAudioIdsBySourceFx)({domain:t}),E=(0,l.createAudioPlaylistsCreateFx)({domain:t}),f=(0,u.createAudioPlaylistsDeleteFx)({domain:t}),g=(0,d.createAddAudioFx)({domain:t}),y=(0,p.createDeleteAudioFx)({domain:t}),v=t.createStore({}),w=t.createStore({}),A=t.createEffect((async({id:e,ownerId:t})=>{const n=await o({query:{playlist_id:e,owner_id:t}});return(0,_.mapAPIPlaylistToAudioPlaylistData)(n)})),b=(0,n.attach)({source:v,async effect(e,t){const o=e[(0,r.getAudioPlaylistFullId)(t)];return o||A(t)}}),T=t.createEffect((async e=>(await m({query:{source:"playlist",entity_id:(0,r.getAudioPlaylistFullId)(e)}})).audios.map(c.mapAPIRawIdTrackedToTrackedAudioIdentity))),I=(0,n.attach)({source:w,async effect(e,t){const o=e[(0,r.getAudioPlaylistFullId)(t)];return o||T(t)}});return v.on(A.done,((e,{result:t})=>({...e,[(0,r.getAudioPlaylistFullId)(t)]:t}))),w.on(T.done,((e,{params:t,result:o})=>({...e,[(0,r.getAudioPlaylistFullId)(t)]:o}))),v.on(E.done,((e,{result:t})=>(0,s.addPairToMap)(e,{key:(0,r.getAudioPlaylistFullId)(t),value:t}))),v.on(f.done,((e,{params:t})=>(0,a.removePairFromMap)(e,(0,r.getAudioPlaylistFullId)({id:t.id,ownerId:t.ownerId})))),{$playlistDataEntities:v,$playlistAudioIdsEntities:w,createFx:E,deleteFx:f,addAudioFx:g,deleteAudioFx:y,fetchPlaylistFx:A,ensurePlaylistFx:b,fetchPlaylistAudioIdsFx:T,ensurePlaylistAudioIdsFx:I}}},182008:(e,t,o)=>{"use strict";o.d(t,{createAddAudioFx:()=>r});var n=o(523430),i=o(580334);function r({domain:e}){const t=(0,n.createAudioAddToPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:o,audioIdentity:n})=>{const r=await t({query:{owner_id:e,playlist_id:o,audio_ids:(0,i.getAudioAccessId)(n)}}),s=r?.[0]?.audio_id;if(!s)throw new Error("Error when trying to add audio to a playlist");return{id:s,ownerId:e}}))}},612934:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsCreateFx:()=>s});var n=o(523430),i=o(203619),r=o(255053);function s({domain:e}){const t=(0,n.createAudioCreatePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,audios:o,title:n,description:s})=>{const a=o.map(r.getAudioFullId).join(","),_=await t({query:{owner_id:e,audio_ids:a,title:n,description:s}});return(0,i.mapAPIPlaylistToAudioPlaylistData)(_)}))}},716768:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDeleteFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioDeletePlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,id:o})=>{await t({query:{owner_id:e,playlist_id:o}})}))}},719848:(e,t,o)=>{"use strict";o.d(t,{createDeleteAudioFx:()=>r});var n=o(523430),i=o(255053);function r({domain:e}){const t=(0,n.createAudioRemoveFromPlaylistFx)({domain:e});return e.createEffect((async({ownerId:e,playlistId:o,audioIdentity:n})=>{await t({query:{owner_id:e,playlist_id:o,audio_ids:(0,i.getAudioFullId)(n)}})}))}},125731:(e,t,o)=>{"use strict";o.d(t,{createAudioPreviewsService:()=>a});var n=o(32489),i=o(523430),r=o(431741),s=o(255053);function a({domain:e}){const t=(0,i.createAudioGetAudioPreviewFx)({domain:e}),o=e.createStore({}),a=e.createEffect((async({identity:e})=>{const o=await t({query:{audio_id:(0,s.getAudioFullId)(e),preview_type:"longtap"}});return(0,r.mapApiAudioPreviewToAudioPreviewData)(o)}));return(0,n.sample)({clock:a.done,source:o,fn:(e,{params:t,result:o})=>{const{id:n,ownerId:i}=t.identity,r=(0,s.getAudioFullId)({id:n,ownerId:i});return{...e,[r]:o}},target:o}),{fetchAudioPreviewFx:a,$audioPreviewEntities:o}}},249814:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixService:()=>i});var n=o(1674);function i(e){const t=e.createStore([]),o=(0,n.createAudioVkMixFetchNextFx)(e);return t.on(o.doneData,((e,t)=>t.length?[...e,...t]:e)),{$lists:t,fetchNextFx:o}}},1674:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixFetchNextFx:()=>i});var n=o(523430);function i(e){const t=(0,n.createAudioGetStreamMixAudiosFx)({domain:e});return e.createEffect((async({id:e,count:o=1,isSessionLaunched:n=!1,isSessionFeatureEnabled:i=!1})=>await t({query:{mix_id:e,count:o,...i?{append:n?1:0}:{}}})))}},269943:(e,t,o)=>{"use strict";o.d(t,{createAudiosService:()=>c});var n=o(32489),i=o(523430),r=o(580334),s=o(406245),a=o(264544),_=o(255053);function c({domain:e}){const t=(0,i.createAudioGetByIdFx)({domain:e}),o=(0,i.createAudioGetFx)({domain:e}),c=(0,i.createAudioSearchFx)({domain:e}),u=e.createStore({}),d=e.createEffect((async e=>{if(!e.length)return[];return(await t({query:{audios:e.map(r.getAudioAccessId).join(",")}})).map((e=>(0,s.mapAPIAudioToMusicAudioData)(a.AudioType.MusicTrack,e)))})),p=e.createEffect((async e=>{let t;t=e.q?await c({query:{owner_id:e.ownerId,count:e.count,offset:e.offset,q:e.q}}):await o({query:{owner_id:e.ownerId,count:e.count,offset:e.offset}});const n=t.items.map((e=>(0,s.mapAPIAudioToMusicAudioData)(a.AudioType.MusicTrack,e)));return{count:t.count,audios:n}})),h=(0,n.attach)({source:u,async effect(e,t){if(!t.length)return[];let o=[],n=[];for(const i of t){const t=e[(0,_.getAudioFullId)(i)];t?o.push(t):n.push(i)}if(!n.length)return o;const i=await d(n),r=l(i);o=[];for(const s of t){const a=(0,_.getAudioFullId)(s),c=r[a]??e[a];if(!c)throw console.error("AudioData not found in entities",{identity:s,fullId:a,audio:c,fetched:i,fetchedEntities:r,entities:e,identities:t,missing:n,result:o}),new Error("AudioData not found in entities");o.push(c)}return o}});return u.on(d.done,((e,{result:t})=>({...e,...l(t)}))),u.on(p.done,((e,{result:t})=>({...e,...l(t.audios)}))),{$audioEntities:u,fetchAudiosFx:d,ensureAudiosFx:h,searchAudiosFx:p}}function l(e){return e.reduce(((e,t)=>(e[(0,_.getAudioFullId)(t)]=t,e)),{})}},37512:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicService:()=>d});var n=o(32489),i=o(645074),r=o(632666),s=o(57082),a=o(817261),_=o(583768),c=o(94359),l=o(156693),u=o(248251);function d(e){const t=(0,c.getEffectorServiceDomain)(e),o=(0,i.createGroupsMusicAddFx)({domain:t}),d=(0,r.createGroupsMusicRestoreFx)({domain:t}),p=(0,s.createGroupsMusicDeleteFx)({domain:t}),{$addedIdentitiesMap:h,$removedIdentitiesMap:m,$identitiesMap:E,removeFromAllIdentitiesMaps:f,removedIdentitiesMapApi:g,addedIdentitiesMapApi:y}=(0,_.createIdentitiesMaps)({domain:t}),v=(0,n.attach)({source:(0,n.combine)({addedIdentitiesMap:h,removedIdentitiesMap:m}),mapParams:(e,t)=>({...e,...t}),effect:(0,n.createEffect)((async({groupId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:i})=>{let r,s;const _=(0,u.convertToGroupMusicId)(e);if(_===t.ownerId)r=t,s=(0,l.getGroupAudioFullId)({id:t.id,ownerId:_},_);else{const e=(0,l.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},_);if(!(e in n))return await o({trackedIdentity:t,groupId:_});if(r=n[e],s=(0,l.getGroupAudioFullId)({id:r.id,ownerId:_},_),!(s in i))return await o({trackedIdentity:t,groupId:_})}const c=(0,l.getGroupAudioFullId)({id:t.id,ownerId:t.ownerId},_);try{return await d({audioId:r.id,groupId:_}),{id:r.id,ownerId:_}}catch(e){const n=e;if(n?.error?.error_code===a.GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return f({addedGroupAudioFullId:c,removedGroupAudioFullId:s}),await o({trackedIdentity:t,groupId:_});throw n}}))});return(0,n.sample)({clock:v.done,source:h,filter:(e,{params:{groupId:t,trackedIdentity:o}})=>t===o.ownerId&&!((0,l.getGroupAudioFullId)(o,t)in e),fn:(e,{params:{groupId:t,trackedIdentity:o},result:n})=>({groupAudioFullId:(0,l.getGroupAudioFullId)(o,t),identity:n}),target:y.add}),(0,n.sample)({clock:o.done,fn:({params:{groupId:e,trackedIdentity:{id:t,ownerId:o}},result:n})=>{const i=(0,u.convertToGroupMusicId)(e);return{groupAudioFullId:(0,l.getGroupAudioFullId)({id:t,ownerId:o},i),identity:n}},target:y.add}),(0,n.sample)({clock:d.done,fn:({params:{groupId:e,audioId:t}})=>{const o=(0,u.convertToGroupMusicId)(e);return(0,l.getGroupAudioFullId)({id:t,ownerId:o},o)},target:g.remove}),(0,n.sample)({clock:p.done,fn:({params:{groupId:e,audioId:t}})=>{const o=(0,u.convertToGroupMusicId)(e);return(0,l.getGroupAudioFullId)({id:t,ownerId:o},o)},target:g.add}),{addFx:v,deleteFx:p,$identitiesMap:E}}},645074:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicAddFx:()=>s});var n=o(523430),i=o(847891),r=o(248251);function s({domain:e}){const t=(0,n.createAudioAddFx)({domain:e});return e.createEffect((async({trackedIdentity:e,groupId:o})=>{const{id:n,ownerId:s,accessKey:a,trackCode:_}=e,c=(0,r.convertToGroupMusicId)(o),l=await t({query:{audio_id:n,owner_id:s,access_key:a,track_code:_,group_id:i.Ranges.convertOwnerIdToGroupId(c)}}),u=l.items?.[0]?.new_audio_id;if(null==u)throw new Error("[GroupsMusicAddFx] addFx - missing audio ID in response from audio.add api method");return{id:u,ownerId:c}}))}},57082:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicDeleteFx:()=>r});var n=o(523430),i=o(248251);function r({domain:e}){const t=(0,n.createAudioDeleteFx)({domain:e});return e.createEffect((async({audioId:e,groupId:o})=>{await t({query:{audio_id:e,owner_id:(0,i.convertToGroupMusicId)(o)}})}))}},817261:(e,t,o)=>{"use strict";o.d(t,{GROUPS_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},632666:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicRestoreFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioRestoreFx)({domain:e});return e.createEffect((async({audioId:e,groupId:o})=>{await t({query:{audio_id:e,owner_id:o}})}))}},248251:(e,t,o)=>{"use strict";o.d(t,{convertToGroupMusicId:()=>i});var n=o(847891);function i(e){return n.Ranges.isGroupId(e)?e:n.Ranges.convertGroupIdToOwnerId(e)}},14846:(e,t,o)=>{"use strict";function n(e){return+e.split("_")?.[0]}o.d(t,{extractGroupIdFromGroupAudioFullId:()=>n})},156693:(e,t,o)=>{"use strict";o.d(t,{getGroupAudioFullId:()=>r});var n=o(255053),i=o(248251);function r({id:e,ownerId:t},o){return`${(0,i.convertToGroupMusicId)(o)}_${(0,n.getAudioFullId)({id:e,ownerId:t})}`}},583768:(e,t,o)=>{"use strict";o.d(t,{createIdentitiesMaps:()=>c});var n=o(32489),i=o(810780),r=o(958955),s=o(918081),a=o(156693),_=o(14846);const c=({domain:e})=>{const t=e.createStore({}),o=e.createStore({}),c=(0,n.createEvent)(),l=(0,n.combine)(t,o,((e,t)=>Object.entries(e).reduce(((e,[o,n])=>((0,a.getGroupAudioFullId)(n,(0,_.extractGroupIdFromGroupAudioFullId)(o))in t||(e[o]=n),e)),{}))),u=(0,n.createApi)(t,{add:(e,{groupAudioFullId:t,identity:o})=>(0,r.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)}),d=(0,n.createApi)(o,{add:(e,t)=>(0,r.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,s.removePairFromMap)(e,t)});return(0,n.sample)({clock:c,target:(0,i.spread)({targets:{addedGroupAudioFullId:u.remove,removedGroupAudioFullId:d.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:o,$identitiesMap:l,addedIdentitiesMapApi:u,removedIdentitiesMapApi:d,removeFromAllIdentitiesMaps:c}}},736446:(e,t,o)=>{"use strict";o.d(t,{createMyAudioDislikesService:()=>c});var n=o(94359),i=o(72491),r=o(977945),s=o(32489),a=o(255053),_=o(471027);function c(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.createAddFx)({domain:t}),c=(0,r.createRemoveFx)({domain:t}),{fullIdsMapApi:l,$fullIdsMap:u}=(0,_.createFullIdsMap)(t);return(0,s.sample)({clock:o.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:l.add}),(0,s.sample)({clock:c.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:l.remove}),{addFx:o,removeFx:c,$identitiesMap:u}}},72491:(e,t,o)=>{"use strict";o.d(t,{createAddFx:()=>r});var n=o(523430),i=o(255053);function r({domain:e}){const t=(0,n.createAudioAddDislikeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{audio_ids:(0,i.getAudioFullId)(e)}})}))}},977945:(e,t,o)=>{"use strict";o.d(t,{createRemoveFx:()=>r});var n=o(523430),i=o(255053);function r({domain:e}){const t=(0,n.createAudioRemoveDislikeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{audio_ids:(0,i.getAudioFullId)(e)}})}))}},25034:(e,t,o)=>{"use strict";o.d(t,{createMyAudioPlaylistsService:()=>_});var n=o(32489),i=o(94359),r=o(930996),s=o(348528),a=o(562984);function _({config:e,audioPlaylistsService:t}){const o=(0,i.getEffectorServiceDomain)(e),{$addedAudiosMap:_,addedAudiosMapApi:c}=(0,s.createAddedAudiosMap)(o),l=o.createEvent(),u=(0,n.restore)(l,null),d=o.createStore({},{updateFilter:(e,t)=>!(0,r.shallowEqual)(e,t),serialize:"ignore"}),p=(0,n.attach)({source:u,async effect(e,o){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To create a playlist, set the userId using setUserId.");return t.createFx({...o,ownerId:e})}}),h=(0,n.attach)({source:u,async effect(e,o){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete a playlist, set the userId using setUserId.");return t.deleteFx({...o,ownerId:e})}}),m=(0,n.attach)({source:u,async effect(e,o){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To add audio to playlist, set the userId using setUserId.");return t.addAudioFx({...o,ownerId:e})}}),E=(0,n.attach)({source:u,async effect(e,o){if(!e)throw new Error("[MyAudioPlaylistsService] UserId not set. To delete audio from playlist, set the userId using setUserId.");return t.deleteAudioFx({...o,ownerId:e})}});return(0,n.sample)({clock:(0,n.combine)({playlistDataEntities:t.$playlistDataEntities,userId:u}),fn:({playlistDataEntities:e,userId:t})=>t?Object.entries(e).reduce(((e,[o,n])=>(n.ownerId===t&&(e[o]=n),e)),{}):{},target:d}),(0,n.sample)({clock:m.done,source:u,fn:(e,{params:t,result:o})=>({originalPlaylistAudioFullId:(0,a.getPlaylistAudioFullId)({originalAudio:t.audioIdentity,playlist:{id:t.playlistId,ownerId:e}}),addedIdentity:o}),target:c.add}),(0,n.sample)({clock:E.done,source:u,fn:(e,{params:t})=>(0,a.getPlaylistAudioFullId)({originalAudio:t.originalAudioIdentity,playlist:{id:t.playlistId,ownerId:e}}),target:c.remove}),{createFx:p,deleteFx:h,addAudioFx:m,deleteAudioFx:E,setUserId:l,$myAudioPlaylistsIdentitiesMap:d,$addedAudiosMap:_}}},348528:(e,t,o)=>{"use strict";o.d(t,{createAddedAudiosMap:()=>s});var n=o(32489),i=o(958955),r=o(918081);function s(e){const t=e.createStore({});return{$addedAudiosMap:t,addedAudiosMapApi:(0,n.createApi)(t,{add:(e,{originalPlaylistAudioFullId:t,addedIdentity:o})=>(0,i.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},562984:(e,t,o)=>{"use strict";o.d(t,{getPlaylistAudioFullId:()=>r});var n=o(580334),i=o(991331);function r({playlist:e,originalAudio:t}){return`PLAYLIST_${(0,i.getAudioPlaylistFullId)(e)}AUDIO_${(0,n.getAudioAccessId)(t)}`}},413618:(e,t,o)=>{"use strict";o.d(t,{createMyAudioRadioStationsService:()=>c});var n=o(94359),i=o(872953),r=o(875291),s=o(32489),a=o(255053),_=o(471027);function c(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.createFollowFx)({domain:t}),c=(0,r.creatUnfollowFx)({domain:t}),{fullIdsMapApi:l,$fullIdsMap:u}=(0,_.createFullIdsMap)(t);return(0,s.sample)({clock:o.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:l.add}),(0,s.sample)({clock:c.done,fn:({params:{identity:e}})=>(0,a.getAudioFullId)(e),target:l.remove}),{followFx:o,unfollowFx:c,$identitiesMap:u}}},872953:(e,t,o)=>{"use strict";o.d(t,{createFollowFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioFollowRadioStationFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{station_id:e.id}})}))}},875291:(e,t,o)=>{"use strict";o.d(t,{creatUnfollowFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioUnfollowRadioStationFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{station_id:e.id}})}))}},453888:(e,t,o)=>{"use strict";o.d(t,{createMyMusicService:()=>u});var n=o(32489),i=o(884100),r=o(609812),s=o(494604),a=o(845231),_=o(255053),c=o(637382),l=o(94359);function u(e){const t=(0,l.getEffectorServiceDomain)(e),o=(0,i.createAddFx)({domain:t}),u=(0,r.createRestoreFx)({domain:t}),d=(0,s.createDeleteFx)({domain:t}),{$addedIdentitiesMap:p,$removedIdentitiesMap:h,$identitiesMap:m,addedIdentitiesMapApi:E,removedIdentitiesMapApi:f,addToStore:g,removeFromStore:y,removeFromAllIdentitiesMaps:v}=(0,c.createIdentitiesMaps)({domain:t}),w=(0,n.attach)({source:(0,n.combine)({addedIdentitiesMap:p,removedIdentitiesMap:h}),mapParams:(e,t)=>({...e,...t}),effect:(0,n.createEffect)((async({userId:e,trackedIdentity:t,addedIdentitiesMap:n,removedIdentitiesMap:i})=>{let r,s;if(e===t.ownerId)r=t,s=(0,_.getAudioFullId)({id:t.id,ownerId:e});else{const a=(0,_.getAudioFullId)({id:t.id,ownerId:t.ownerId});if(!(a in n))return await o({trackedIdentity:t,userId:e});if(r=n[a],s=(0,_.getAudioFullId)({id:r.id,ownerId:e}),!(s in i))return await o({trackedIdentity:t,userId:e})}const c=(0,_.getAudioFullId)({id:t.id,ownerId:t.ownerId});try{return await u({identity:{id:r.id,ownerId:e}}),{id:r.id,ownerId:e}}catch(n){const i=n;if(i?.error?.error_code===a.MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE)return v({addedFullId:c,removedFullId:s}),await o({trackedIdentity:t,userId:e});throw i}}))});return(0,n.sample)({clock:w.done,source:p,filter:(e,{params:{userId:t,trackedIdentity:o}})=>t===o.ownerId&&!((0,_.getAudioFullId)(o)in e),fn:(e,{params:{trackedIdentity:t},result:o})=>({fullId:(0,_.getAudioFullId)(t),identity:o}),target:E.add}),(0,n.sample)({clock:o.done,fn:({params:{trackedIdentity:{id:e,ownerId:t}},result:o})=>({fullId:(0,_.getAudioFullId)({id:e,ownerId:t}),identity:o}),target:E.add}),(0,n.sample)({clock:u.done,fn:({params:{identity:e}})=>(0,_.getAudioFullId)(e),target:f.remove}),(0,n.sample)({clock:d.done,fn:({params:{identity:e}})=>(0,_.getAudioFullId)(e),target:f.add}),{addFx:w,deleteFx:d,addToStore:g,removeFromStore:y,$identitiesMap:m}}},884100:(e,t,o)=>{"use strict";o.d(t,{createAddFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioAddFx)({domain:e});return e.createEffect((async({trackedIdentity:e,userId:o})=>{const{id:n,ownerId:i,accessKey:r,trackCode:s,ref:a}=e,_=await t({query:{audio_id:n,owner_id:i,access_key:r,track_code:s,ref:a}}),c=_.items?.[0]?.new_audio_id;if(null==c)throw new Error("[MyMusicService] addFx - missing audio ID in response from audio.add api method");return{id:c,ownerId:o}}))}},494604:(e,t,o)=>{"use strict";o.d(t,{createDeleteFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioDeleteFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:o,ownerId:n}=e;await t({query:{audio_id:o,owner_id:n}})}))}},845231:(e,t,o)=>{"use strict";o.d(t,{MY_MUSIC_RESTORE_FX_EXPIRED_ERROR_CODE:()=>n});const n=15},609812:(e,t,o)=>{"use strict";o.d(t,{createRestoreFx:()=>i});var n=o(523430);function i({domain:e}){const t=(0,n.createAudioRestoreFx)({domain:e});return e.createEffect((async({identity:e})=>{const{id:o,ownerId:n}=e;await t({query:{audio_id:o,owner_id:n}})}))}},637382:(e,t,o)=>{"use strict";o.d(t,{createIdentitiesMaps:()=>_});var n=o(32489),i=o(255053),r=o(810780),s=o(958955),a=o(918081);const _=({domain:e})=>{const t=e.createStore({}),o=e.createStore({}),_=(0,n.createEvent)(),c=(0,n.createEvent)(),l=(0,n.createEvent)(),u=(0,n.combine)(t,o,((e,t)=>Object.entries(e).reduce(((e,[o,n])=>((0,i.getAudioFullId)(n)in t||(e[o]=n),e)),{}))),d=(0,n.createApi)(t,{add:(e,{fullId:t,identity:o})=>(0,s.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)}),p=(0,n.createApi)(o,{add:(e,t)=>(0,s.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,a.removePairFromMap)(e,t)});return(0,n.sample)({clock:_,source:t,fn:(e,{oldIdentity:t,newIdentity:o})=>{const n=(0,i.getAudioFullId)(t),r=(0,i.getAudioFullId)(o);return{addToStoreParams:{identity:o,fullId:n},removeFromStoreFullId:e[n]?(0,i.getAudioFullId)(e[n]):r}},target:(0,r.spread)({targets:{addToStoreParams:d.add,removeFromStoreFullId:p.remove}})}),(0,n.sample)({clock:c,filter:({newIdentity:e})=>Boolean(e),target:(0,r.spread)({targets:{oldIdentity:d.remove.prepend((e=>(0,i.getAudioFullId)(e))),newIdentity:p.remove.prepend((e=>(0,i.getAudioFullId)(e)))}})}),(0,n.sample)({clock:l,target:(0,r.spread)({targets:{addedFullId:d.remove,removedFullId:p.remove}})}),{$addedIdentitiesMap:t,$removedIdentitiesMap:o,$identitiesMap:u,addedIdentitiesMapApi:d,removedIdentitiesMapApi:p,addToStore:_,removeFromStore:c,removeFromAllIdentitiesMaps:l}}},471027:(e,t,o)=>{"use strict";o.d(t,{createFullIdsMap:()=>s});var n=o(32489),i=o(958955),r=o(918081);function s(e){const t=e.createStore({});return{$fullIdsMap:t,fullIdsMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,i.addPairToMap)(e,{key:t,value:!0}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},958955:(e,t,o)=>{"use strict";function n(e,t){return t.key in e?e:{...e,[t.key]:t.value}}o.d(t,{addPairToMap:()=>n})},991331:(e,t,o)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}o.d(t,{getAudioPlaylistFullId:()=>n})},918081:(e,t,o)=>{"use strict";function n(e,t){if(!(t in e))return e;const{[t]:o,...n}=e;return n}o.d(t,{removePairFromMap:()=>n})},203619:(e,t,o)=>{"use strict";function n(e){return{id:e.id,ownerId:e.owner_id,title:e.title,description:e.description,length:e.count}}o.d(t,{mapAPIPlaylistToAudioPlaylistData:()=>n})},431741:(e,t,o)=>{"use strict";o.d(t,{mapApiAudioPreviewToAudioPreviewData:()=>n});const n=e=>{const{url:t,clip_from:o,clip_to:n}=e;return{url:t||"",clip:{from:o||0,to:n||0}}}},499617:(e,t,o)=>{"use strict";o.d(t,{createAudioPodcastsFaveService:()=>c});var n=o(94359),i=o(360301),r=o(487641),s=o(32489),a=o(471027),_=o(303651);function c(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.createAddFx)({domain:t}),c=(0,r.createDeleteFx)({domain:t}),{fullIdsMapApi:l,$fullIdsMap:u}=(0,a.createFullIdsMap)(t);return(0,s.sample)({clock:o.done,fn:({params:{identity:e}})=>(0,_.getPodcastAudioFullId)(e),target:l.add}),(0,s.sample)({clock:c.done,fn:({params:{identity:e}})=>(0,_.getPodcastAudioFullId)(e),target:l.remove}),{addFx:o,deleteFx:c,$identitiesMap:u}}},360301:(e,t,o)=>{"use strict";o.d(t,{createAddFx:()=>i});var n=o(668882);function i({domain:e}){const t=(0,n.createFaveAddPodcastEpisodeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{owner_id:e.ownerId,episode_id:e.podcastId}})}))}},487641:(e,t,o)=>{"use strict";o.d(t,{createDeleteFx:()=>i});var n=o(668882);function i({domain:e}){const t=(0,n.createFaveRemovePodcastEpisodeFx)({domain:e});return e.createEffect((async({identity:e})=>{await t({query:{owner_id:e.ownerId,episode_id:e.podcastId}})}))}},66044:(e,t,o)=>{"use strict";o.d(t,{createApiEffect:()=>s});var n=o(933052),i=o(196055),r=o(853883);const s=(e,{domain:t,usePrefetch:o})=>t.createEffect((({query:t,controller:s,config:a,options:_})=>{const c=s?.signal;if(o){const o=(0,i.loadPrefetchCache)(e,r.API_VERSION,t);if(o)return Promise.resolve(o)}return(0,n.api)(e,t,a,{signal:c,..._})}))},492243:(e,t,o)=>{"use strict";o.d(t,{isApiError:()=>n});const n=e=>!!e&&"type"in e&&"api_error"===e.type},614117:(e,t,o)=>{"use strict";o.d(t,{isNetworkError:()=>n});const n=e=>"network_error"===e?.type},165753:(e,t,o)=>{"use strict";var n;o.d(t,{AvailableHelpHints:()=>n}),function(e){e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_PROFILE="mini_apps:button_mvk_profile",e.ACCOUNT_HINT_MINI_APPS_BUTTON_MVK_APP_MENU="mini_apps:button_mvk_app_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU="mini_apps:counter_toggle_in_action_menu",e.ACCOUNT_HINT_MINI_APPS_COUNTER_TOGGLE_IN_ACTION_MENU_INTRO="mini_apps:counter_toggle_in_action_menu_intro",e.ACCOUNT_HINT_MINI_APPS_OPEN_CATALOG_WITH_BADGES="mini_apps:open_catalog_with_badges",e.ACCOUNT_HINT_MINI_APPS_CATALOG_SECTION_WITH_BADGES="mini_apps:catalog_section_with_badges",e.ACCOUNT_HINT_SUPERAPP_RECOMMEND_ACTION_IN_MENU="superapp:recommend_action_in_menu",e.ACCOUNT_HINT_SUPERAPP_SHOW_RECOMMEND_ACTION="superapp:show_recommend_action",e.ACCOUNT_HINT_MINI_APPS_NAV_BUTTONS_THIRD_PARTY_BUTTONS="mini_apps:nav_buttons_third_party_buttons",e.ACCOUNT_HINT_POSTING_EDITOR_ONLINE_BOOKING="posting:editor_online_booking",e.ACCOUNT_HINT_PROFILE_SERVICES_MENU_BANNER="profile:services_menu_banner",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING="profile:services_onboarding",e.ACCOUNT_HINT_MVK_PWA_TABBAR="mvk:pwa_tabbar",e.ACCOUNT_HINT_SUPERAPP_MVK_SHOWCASE="superapp:mvk_showcase",e.ACCOUNT_HINT_IM_INTEGRATION_APPS_TOOLTIP_ON_PICKER="superapp:im_integration_apps_tooltip_on_picker",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_APPS_BANNER="superapp:im_integration_picker_apps_banner",e.ACCOUNT_HINT_IM_INTEGRATION_PICKER_GAMES_BANNER="superapp:im_integration_picker_games_banner",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_FORCIBLY_ENABLED_ONBOARDING="friends:followers_mode_forcibly_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_CAN_BE_ENABLED_ONBOARDING="friends:followers_mode_can_be_enabled_onboarding",e.ACCOUNT_HINT_FRIENDS_FOLLOWERS_MODE_ABOUT_MODAL_IMAGES="friends:followers_mode_about_modal_images",e.ACCOUNT_HINT_IM_INTEGRATION_CATALOG_ONBOARDING="superapp:im_integration_catalog_onboarding",e.ACCOUNT_HINT_PROFILE_PASSKEY_ONBOARDING_WEB="profile:passkey_onboarding_web",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_VIDEO_ONBOARDING="video:interactive_video_onboarding",e.ACCOUNT_HINT_VIDEO_INTERACTIVE_INTERACTIVE_TIME_INDICATOR="video:interactive_time_indicator",e.ACCOUNT_HINT_CLIPS_WEB_UPLOAD_VIDEO_AS_CLIP="clips:upload_video_as_clip_web",e.AUTHOR_LIKE_ONBOARDING_HINT="feed:author_like_onboarding",e.GROUP_LIKE_ONBOARDING_HINT="feed:group_like_onboarding",e.ACCOUNT_HINT_COMMUNITY_REVIEW_TOOLTIP_MVK="community:review:tooltip_mvk",e.ACCOUNT_HINT_GROUPS_EDIT_MARKET_EXTRACTED_SETTINGS_HINT="groups:edit:market_extracted_settings_checkbox_hint",e.ACCOUNT_HINT_GROUPS_MAIN_MARKET_ACTION_EXTRACTED_SETTINGS_HINT="groups:main:market_action_extracted_settings_hint",e.ACCOUNT_HINT_VIDEO_PIN="video:pin",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_BUTTON="video:watch_later_button",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_ACTION="video:watch_later_action",e.ACCOUNT_HINT_VIDEO_WATCH_LATER_MENU="video:watch_later_menu",e.ACCOUNT_HINT_VIDEO_GROUP_CROP_COVER="video:group_crop_cover",e.ACCOUNT_HINT_VIDEO_MULTIPLE_VOLUME="video:multiple_volume",e.ACCOUNT_HINT_VIDEO_SUBTITLES_KAZ_LANG="video:subtitles_kaz_lang",e.ACCOUNT_HINT_MVK_VIDEO_FILTERS="mvk:video_filters",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_MVK="profile:photo_flow_onboarding_banner_profile_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_MVK="profile:photo_flow_onboarding_banner_show_all_mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__MVK="profile:photo_flow_onboarding_banner_photo__mvk",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_MVK="profile:photo_flow_onboarding_banner_mobile_question_mvk",e.ACCOUNT_HINT_PROFILE_OWNER_CONTENT_TABS_SETTINGS="profile:redesign_owner_content_tabs_settings",e.ACCOUNT_HINT_PROFILE_SERVICES_ONBOARDING_WEB="profile:services_onboarding_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PROFILE_WEB="profile:photo_flow_onboarding_banner_profile_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_SHOW_ALL_WEB="profile:photo_flow_onboarding_banner_show_all_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_PHOTO__WEB="profile:photo_flow_onboarding_banner_photo__web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_BANNER_MOBILE_QUESTION_WEB="profile:photo_flow_onboarding_banner_mobile_question_web",e.ACCOUNT_HINT_PROFILE_PHOTO_FLOW_ONBOARDING_TOOLTIP_MOVE_PHOTO="profile:photo_flow_onboarding_tooltip_move_photo",e.ACCOUNT_HINT_ARTICLES_MOBILE_EDITOR="articles:mobile_editor",e.ACCOUNT_HINT_ADSEDIT_SITE_REMOVAL_POPUP="adsedit:site_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_REMOVAL_POPUP="adsedit:community_removal_popup",e.ACCOUNT_HINT_ADSEDIT_COMMUNITY_AND_SITE_REMOVAL_POPUP="adsedit:community_and_site_removal_popup",e.ACCOUNT_HINT_STICKERS_UGC_SETTINGS_UNSEEN="stickers:ugc_settings_unseen",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_PRESENT_MINIAPP_MODAL="audio_studio:show_present_miniapp_modal",e.ACCOUNT_HINT_AUDIO_STUDIO_SHOW_ANNUAL_RESULT_BANNER="audio_studio:show_annual_result_banner",e.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB="audio:longtap_preview_web",e.ACCOUNT_HINT_BANNED_RESET_SESSIONS="banned:can_not_reset_sessions",e.ACCOUNT_HINT_CLIPS_FORCE_UPLOAD_VIDEO_AS_CLIP="clips:force_upload_video_as_clip",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP="posting:editor_photo_attachements_crop",e.ACCOUNT_HINT_POSTING_EDITOR_PHOTO_ATTACHMENTS_CROP_ZOOM="posting:editor_photo_attachements_crop_zoom",e.ACCOUNT_HINT_SMB_YCLIENTS_ONLINE_BOOKING="smb:yclients:online_booking",e.UNBAN_SECURITY_RECOMMENDATION_HINT="feed:after_auth:unban_security_recommendation",e.ACCOUNT_HINT_SETTINGS_BOOKING="smb:yclients:group_settings_online_booking",e.ACCOUNT_HINT_VIDEO_ATTACH_SHORT_VIDEO="video:attach_short_video"}(n||(n={}))},919225:(e,t,o)=>{"use strict";o.d(t,{Emitter:()=>a});var n=o(434518),i=o(763812),r=(0,i._)("_catchListener"),s=(0,i._)("_listeners");class a{emit(e,...t){const o=(0,n._)(this,r)[r],i=(0,n._)(this,s)[s].get(e);if(!i||!i.length)return!1;for(const e of[...i])try{e(...t)}catch(e){if(!o)throw e;o(e)}return!0}on(e,t){return this.listenable.on(e,t),this}once(e,t){return this.listenable.once(e,t),this}off(e,t){return this.listenable.off(e,t),this}constructor({catchListener:e}={}){Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),(0,n._)(this,s)[s]=new Map,(0,n._)(this,r)[r]=e,this.listenable=new u((0,n._)(this,s)[s])}}var _=(0,i._)("_listeners"),c=(0,i._)("_wrapListener"),l=(0,i._)("_ensureListeners");class u{on(e,t){return(0,n._)(this,l)[l](e).push((0,n._)(this,c)[c](e,t,!1)),this}once(e,t){return(0,n._)(this,l)[l](e).push((0,n._)(this,c)[c](e,t,!0)),this}off(e,t){let o=(0,n._)(this,_)[_].get(e);if(!o)return this;for(let e=o.length-1;e>=0;e--){if(o[e].fn===t){o.splice(e,1);break}}return this}constructor(e){Object.defineProperty(this,c,{value:d}),Object.defineProperty(this,l,{value:p}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,n._)(this,_)[_]=e}}function d(e,t,o){let n=!1;const i=(...i)=>{o&&n||(o&&this.off(e,t),n=!0,t(...i))};return i.fn=t,i}function p(e){let t=(0,n._)(this,_)[_].get(e);return t||(t=[],(0,n._)(this,_)[_].set(e,t)),t}},530040:(e,t,o)=>{"use strict";o.d(t,{allowLinkOnclickWebAttrs:()=>i,isAllowLinkOnclickWebForLink:()=>r});const n="data-allow-link-onclick-web",i={[n]:1};function r(e){return!!(e&&e instanceof HTMLElement)&&e.hasAttribute(n)}},823085:(e,t,o)=>{"use strict";function n(e){let t=e.length;for(;t>0;){const o=Math.floor(Math.random()*t);t--;const n=e[t];e[t]=e[o],e[o]=n}return e}o.d(t,{shuffle:()=>n})},819952:(e,t,o)=>{"use strict";function n(e){e.preventDefault(),e.stopPropagation()}o.d(t,{cancelEvent:()=>n})},331313:(e,t,o)=>{"use strict";o.d(t,{expectNever:()=>n});const n=e=>{throw new TypeError(`Unexpected value: ${e}`)}},674508:(e,t,o)=>{"use strict";o.d(t,{formatCount:()=>n});const n=(e,t)=>{const o=t?.separator||".",n=t?.maximumFractionDigits??1,i=t?.roundingMode||void 0,r=t?.kLimit||1e3,s=t?.mLimit||1e6,a=t?.bLimit||1e9,_=window.langConfig?.locale||"ru",c=(e,t)=>{"floor"===i&&(e=Math.floor(e*Math.pow(10,n))/Math.pow(10,n));let r=e.toFixed(n);return Number(r).toLocaleString(_).replace(/\./,o)+t};if(e>-r&&e<r)return e.toLocaleString(_);const l=e/a;if(l>=1||l<=-1)return c(e/1e9,"B");const u=e/s;if(u>=1||u<=-1)return c(e/1e6,"M");const d=e/r;return d>=1||d<=-1?c(e/1e3,"K"):String(e)}},184698:(e,t,o)=>{"use strict";o.d(t,{getCommunityCoverGradient:()=>n});const n=(e="#CFD9E9")=>`radial-gradient(88.27% 156.47% at 6.53% 87.17%, ${e} 0%, ${e}45 100%)`},94359:(e,t,o)=>{"use strict";o.d(t,{getEffectorServiceDomain:()=>r});var n=o(32489),i=o(418562);const r=e=>{const t=e?.name||(0,i.default)();return e?.domain?e.domain.createDomain(t):(0,n.createDomain)(t)}},418778:(e,t,o)=>{"use strict";function n(e){let t=0;for(;e;)t+=e.offsetTop,e=i(e.offsetParent)?e.offsetParent:null;return t}function i(e){return!!e&&"offsetHeight"in e}o.d(t,{getOffsetTop:()=>n})},415096:(e,t,o)=>{"use strict";function n(e,t){return t<0?e+t:t}o.d(t,{indexAbs:()=>n})},998510:(e,t,o)=>{"use strict";function n(e){return/^-?\d+$/.test(e)}o.d(t,{isIntAsString:()=>n})},760325:(e,t,o)=>{"use strict";function n(e){return"number"==typeof e&&!Number.isNaN(e)}o.d(t,{isNumber:()=>n})},112268:(e,t,o)=>{"use strict";o.d(t,{joinFullId:()=>n,joinRawId:()=>i});const n=(e,t)=>`${e}_${t}`,i=({ownerId:e,itemId:t,externalId:o})=>[e,t,o].filter(Boolean).join("_")},653054:(e,t,o)=>{"use strict";o.d(t,{lazyModule:()=>_});var n=o(474848),i=o(296540);function r(e){console.error(e)}const s=()=>(0,n.jsx)("h2",{children:"Loading..."}),a=()=>(0,n.jsx)("h2",{children:"Cannot load module..."});function _({loader:e,name:t}){const o=({loading:o=(0,n.jsx)(s,{}),loadingError:_=(0,n.jsx)(a,{}),...l})=>{const[u,d]=(0,i.useState)(!1),p=(0,i.useMemo)((()=>(0,i.lazy)((()=>e().then((e=>({default:e})),(e=>(r(e),d(!0),{default:()=>null})))))),[e]);return(0,n.jsx)(c,{fallback:_,moduleName:t,children:u?_:(0,n.jsx)(i.Suspense,{fallback:o,children:(0,n.jsx)(p,{...l})})})};return o.displayName=`lazyModule(${t})`,o}class c extends i.Component{componentDidCatch(e){r(e),this.setState({hasError:!0})}render(){const{fallback:e,children:t}=this.props,{hasError:o}=this.state;return o?e:t}constructor(){super(...arguments),this.state={hasError:!1}}}},159824:(e,t,o)=>{"use strict";o.d(t,{getOwnerFullName:()=>a,getOwnerHref:()=>s,getOwnerShortName:()=>_,isOwnerGroup:()=>r,isOwnerUser:()=>i});var n=o(451694);const i=e=>!!e&&"first_name"in e,r=e=>!!e&&"name"in e;function s(e,t=!1){let o="/";return e&&(r(e)?o+=e.screen_name||`club${e.id}`:o+=e.screen_name||e.domain||`id${e.id}`),t?window.location.origin+o:o}function a(e){let t="";return e?(e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim()}`),e.maiden_name&&e.sex===n.BaseSexEnumNames.FEMALE&&(t+=` (${e.maiden_name.trim()})`),t):t}function _(e){let t="";return e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim().slice(0,1)}.`),t}},177293:(e,t,o)=>{"use strict";function n(e){e.offsetHeight}o.d(t,{reflow:()=>n})},930996:(e,t,o)=>{"use strict";function n(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(let n=0;n<o.length;n++)if(!Object.prototype.hasOwnProperty.call(t,o[n])||e[o[n]]!==t[o[n]])return!1;return!0}o.d(t,{shallowEqual:()=>n})},942451:(e,t,o)=>{"use strict";o.d(t,{makeSharedState:()=>a});const n="__SHARED_STATE_KEY";(()=>{const e=self.hasOwnProperty(n)?self[n]:Object.create(null);Object.defineProperty(self,n,{configurable:!0,value:e})})();const i=()=>self[n],r=e=>i()[e],s=(e,t)=>{i()[e]=t};function a(e,t,o){const n=function(e,t){let o=e.replace(/[^a-zA-Z0-9-]/gi,"_").toLowerCase();0!==t&&(o+=`__${t}`);return o}(e,o.version);return n in i()||s(n,t()),()=>r(n)}},962954:(e,t,o)=>{"use strict";o.d(t,{OwnedIdentity:()=>r});var n=o(470297),i=o(643010);class r{static fromRawId(e){const t=(0,n.parseRawId)(e);return new r(t)}get rawId(){return(0,i.getIdentityRawId)(this)}get accessRawId(){return(0,i.getIdentityAccessRawId)(this)}get fullId(){return this.rawId}constructor(e){this.id=e.id,this.ownerId=e.ownerId,this.accessKey=e.accessKey}}},643010:(e,t,o)=>{"use strict";function n({id:e,ownerId:t}){return`${t}_${e}`}function i(e){const{accessKey:t}=e,o=n(e);return t?`${o}_${t}`:o}o.d(t,{getIdentityAccessRawId:()=>i,getIdentityRawId:()=>n})},470297:(e,t,o)=>{"use strict";o.d(t,{parseRawId:()=>i});var n=o(8520);function i(e){const t=e.split("_"),o=t[0]&&parseInt(t[0],10),i=t[1]&&parseInt(t[1],10);if(!(0,n.isNumber)(i)||!(0,n.isNumber)(o))throw new Error(`Invalid rawId: ${e}`);return{id:i,ownerId:o,accessKey:t[2]}}},847891:(e,t,o)=>{"use strict";o.d(t,{Ranges:()=>i});var n=o(393150);const i=Object.freeze({getAutotestGroupIdRand:()=>a(n.RANGES_IDS.AUTOTEST_GROUP_ID_MIN,n.RANGES_IDS.AUTOTEST_GROUP_ID_MAX),isAutotestGroup:e=>e>=n.RANGES_IDS.AUTOTEST_GROUP_ID_MIN&&e<=n.RANGES_IDS.AUTOTEST_GROUP_ID_MAX,isGroupId:e=>e<=n.RANGES_IDS.GROUPS_UPPER_BOUND&&e>n.RANGES_IDS.GROUPS_LOWER_BOUND,isUserId:e=>e>=n.RANGES_IDS.USERS_LOWER_BOUND&&e<n.RANGES_IDS.USERS_UPPER_BOUND||e>=n.RANGES_IDS.USERS_LOWER_BOUND_LONG&&e<n.RANGES_IDS.USERS_UPPER_BOUND_LONG,isUserIdTransitional(e){i.isUserId(e);const t=r(e,0,n.RANGES_IDS.CONTACTS_UPPER_BOUND);return t},isRealOwner:e=>i.isGroupId(e)||i.isUserId(e),isAudioOwner:e=>i.isRealOwner(e)||i.isUMA(e)||i.isFakeWallAudioOwner(e),isPlaylistOwner:e=>i.isRealOwner(e)||i.isUMA(e)||i.isChatOrChannelPeer(e),isOfficialPlaylist:e=>i.isUMAReleaseOwner(e)||i.isUMAAlbumOwner(e),isFakeWallAudioOwner:e=>s(e,n.RANGES_IDS.AUDIO_FAKE_WALL_OWNER_MIN,n.RANGES_IDS.AUDIO_FAKE_WALL_OWNER_MAX),isUMA:e=>i.isUMAReleaseOwner(e)||i.isUMAAlbumOwner(e),isUMAAlbumOwner:e=>s(e,n.RANGES_IDS.AUDIO_FAKE_UMA_ALBUM_OWNER_MIN,n.RANGES_IDS.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX),getUMAAlbumOwnerByShift:e=>n.RANGES_IDS.AUDIO_FAKE_UMA_ALBUM_OWNER_MAX-Math.abs(e%n.RANGES_IDS.AUDIO_FAKE_UMA_OWNERS_COUNT),isUMAReleaseOwner:e=>s(e,n.RANGES_IDS.AUDIO_FAKE_UMA_RELEASE_OWNER_MIN,n.RANGES_IDS.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX),getUMAReleaseOwnerByShift:e=>n.RANGES_IDS.AUDIO_FAKE_UMA_RELEASE_OWNER_MAX-Math.abs(e%n.RANGES_IDS.AUDIO_FAKE_UMA_OWNERS_COUNT),isEmailId:e=>e<n.RANGES_IDS.EMAIL_UPPER_BOUND,isOwnerId:e=>e>=n.RANGES_IDS.USERS_LOWER_BOUND?i.isUserId(e):i.isGroupId(e),isContactId:e=>e>=n.RANGES_IDS.CONTACTS_LOWER_BOUND&&e<n.RANGES_IDS.CONTACTS_UPPER_BOUND,convertContactIdToPeerId:e=>e+n.RANGES_IDS.USERS_UPPER_BOUND,convertPeerIdToContactId:e=>e-n.RANGES_IDS.USERS_UPPER_BOUND,isChatOrChannelPeer:e=>e>=n.RANGES_IDS.CHAT_OR_CHANNEL_LOWER_BOUND&&e<=n.RANGES_IDS.CHAT_OR_CHANNEL_UPPER_BOUND,isChatId:e=>e>n.RANGES_IDS.MIN_CHAT_ID&&e<=n.RANGES_IDS.MAX_CHAT_ID,convertChatPeerIdToChatId:e=>e-n.RANGES_IDS.CONTACTS_UPPER_BOUND,convertChatIdToChatPeerId:e=>e+n.RANGES_IDS.CONTACTS_UPPER_BOUND,isAppDomain:e=>e>=n.RANGES_IDS.APP_LOWER_BOUND&&e<n.RANGES_IDS.APP_UPPER_BOUND,convertPeerIdToAppId:e=>-e+n.RANGES_IDS.APP_UPPER_BOUND,convertAppIdToPeerId:e=>n.RANGES_IDS.APP_UPPER_BOUND-e,isUnauthLongId:e=>s(e,n.RANGES_IDS.UNAUTH_LONG_ID_MIN,n.RANGES_IDS.UNAUTH_LONG_ID_MAX),isUnauthLongIdOld:e=>s(e,n.RANGES_IDS.UNAUTH_LONG_ID_MIN_OLD,n.RANGES_IDS.UNAUTH_LONG_ID_MAX_OLD),isMarusyaUploadOwner:e=>n.RANGES_IDS.MARUSYA_UPLOAD_OWNER_MIN<=e&&e<=n.RANGES_IDS.MARUSYA_UPLOAD_OWNER_MAX,getRandomMarusyaUploadOwnerId:()=>a(n.RANGES_IDS.MARUSYA_UPLOAD_OWNER_MIN,n.RANGES_IDS.MARUSYA_UPLOAD_OWNER_MAX),isFakeDocOwner:e=>s(e,n.RANGES_IDS.FAKE_DOC_OWNER_MIN,n.RANGES_IDS.FAKE_DOC_OWNER_MAX),getFirstFakeOwnerId:()=>n.RANGES_IDS.FAKE_DOC_OWNER_MIN,getRandomFirstFakeOwnerId:()=>a(n.RANGES_IDS.FAKE_DOC_OWNER_MIN,n.RANGES_IDS.FAKE_DOC_OWNER_MIN+64e3),getRandomFakeOwnerId:()=>n.RANGES_IDS.FAKE_DOC_OWNER_MIN+(Math.floor(Date.now()/1e3)/173+a(0,999))%64e3,isAdsVideoOwner:e=>s(e,n.RANGES_IDS.ADS_VIDEO_OWNER_MIN,n.RANGES_IDS.ADS_VIDEO_OWNER_MAX),getRandomAdsVideoOwner:()=>a(n.RANGES_IDS.ADS_VIDEO_OWNER_MIN,n.RANGES_IDS.ADS_VIDEO_OWNER_MAX),isAdsPhotoOwner:e=>s(e,n.RANGES_IDS.ADS_PHOTO_OWNER_MIN,n.RANGES_IDS.ADS_PHOTO_OWNER_MAX),getRandomAdsPhotoOwner:()=>a(n.RANGES_IDS.ADS_PHOTO_OWNER_MIN,n.RANGES_IDS.ADS_PHOTO_OWNER_MAX),isZeroOwner:e=>0===e,convertEmailIdToEmailPeerId:e=>i.isEmailId(e)?-e+n.RANGES_IDS.EMAIL_UPPER_BOUND:0,isZeroOwnerDeprecated:e=>!!e||i.isZeroOwner(e),isExternalUser:e=>r(e,n.RANGES_IDS.EMAIL_UPPER_BOUND,n.RANGES_IDS.EXTERNAL_USER_ID_OFFSET),isExternalUserDeprecated(e){i.isExternalUser(e);const t=r(e,n.RANGES_IDS.EMAIL_UPPER_BOUND,n.RANGES_IDS.APP_DOMAIN_ID_OFFSET);return t},isAnonymousCallPeerId:e=>e>=n.RANGES_IDS.CALLS_PEER_LOWER_BOUND&&e<n.RANGES_IDS.CALLS_PEER_UPPER_BOUND,isAnonymousUserPeerId:e=>e>=n.RANGES_IDS.ANONYMOUS_USER_PEER_ID_LOWER_BOUND&&e<n.RANGES_IDS.ANONYMOUS_USER_PEER_ID_UPPER_BOUND,getAnonymousCallUserByShift(e){const t=n.RANGES_IDS.CALLS_PEER_UPPER_BOUND-n.RANGES_IDS.CALLS_PEER_LOWER_BOUND,o=(e%t+t)%t;return n.RANGES_IDS.CALLS_PEER_UPPER_BOUND-1-o},isValidAliExpressOrderUserId:e=>!(e<n.RANGES_IDS.ALIEXPRESS_USER_ID_RANGE_START)&&!(e>n.RANGES_IDS.ALIEXPRESS_USER_ID_RANGE_START+n.RANGES_IDS.ALIEXPRESS_USER_ID_RANGE_LENGTH),generateAliexpressOrderUserId:()=>a(n.RANGES_IDS.ALIEXPRESS_USER_ID_RANGE_START,n.RANGES_IDS.ALIEXPRESS_USER_ID_RANGE_LENGTH),isADBot:e=>e>=n.RANGES_IDS.AD_BOT_ID_RANGE_START&&e<=n.RANGES_IDS.AD_BOT_ID_RANGE_END,getMarusiaAudioFakeId(e){const t=n.RANGES_IDS.MARUSIA_AUDIO_FAKE_ID_MAX-n.RANGES_IDS.MARUSIA_AUDIO_FAKE_ID_MIN;return n.RANGES_IDS.MARUSIA_AUDIO_FAKE_ID_MIN+e%t},isMarusiaAudioFakeId:e=>e>=n.RANGES_IDS.MARUSIA_AUDIO_FAKE_ID_MIN&&e<n.RANGES_IDS.MARUSIA_AUDIO_FAKE_ID_MAX,isOwnerIdTransitional:e=>e>n.RANGES_IDS.USERS_LOWER_BOUND?i.isUserIdTransitional(e):i.isGroupId(e),convertGroupIdToOwnerId:e=>-e,convertGroupIdToOwnerIdStrict:e=>-Math.abs(e),convertOwnerIdToGroupId:e=>Math.abs(e)});function r(e,t,o){return t<e&&e<o}function s(e,t,o){return t<=e&&e<=o}function a(e,t){return e+Math.floor(Math.random()*(t-e))}},393150:(e,t,o)=>{"use strict";o.d(t,{RANGES_IDS:()=>a});const n=1e8,i=5e16,r=2**56-1,s=2000000001,a=Object.freeze({MIN_CHAT_ID:0,MAX_CHAT_ID:n,UNAUTH_LONG_ID_SUBRANGE_WITH_DEVICE_ID_SIZE:i,UNAUTH_LONG_ID_SUBRANGE_WITHOUT_DEVICE_ID_SIZE:r,UNAUTH_LONG_ID_MIN:9e18,UNAUTH_LONG_ID_MAX:0x7e980f0d11490000,MARUSYA_UPLOAD_OWNER_MIN:593139650,MARUSYA_UPLOAD_OWNER_MAX:593139654,UNAUTH_LONG_ID_MIN_OLD:10000000001,UNAUTH_LONG_ID_MAX_OLD:11e10,FAKE_DOC_OWNER_MIN:2e9,FAKE_DOC_OWNER_MAX:2000063999,ADS_VIDEO_OWNER_MIN:16e6,ADS_VIDEO_OWNER_MAX:16000599,ADS_PHOTO_OWNER_MIN:1698e4,ADS_PHOTO_OWNER_MAX:16999999,AUDIO_FAKE_UMA_RELEASE_OWNER_MIN:-2002e6,AUDIO_FAKE_UMA_RELEASE_OWNER_MAX:-2001e6,AUDIO_FAKE_UMA_ALBUM_OWNER_MIN:-2000999999,AUDIO_FAKE_UMA_ALBUM_OWNER_MAX:-2e9,AUDIO_FAKE_UMA_OWNERS_COUNT:1e6,AUDIO_FAKE_WALL_OWNER_MIN:2e9,AUDIO_FAKE_WALL_OWNER_MAX:2000512e3,USERS_LOWER_BOUND:1,USERS_UPPER_BOUND:19e8,USERS_LOWER_BOUND_LONG:2e11,USERS_UPPER_BOUND_LONG:1e12,EMAIL_UPPER_BOUND:-2e9,CONTACTS_LOWER_BOUND:1900000001,CONTACTS_UPPER_BOUND:2e9,CALLS_PEER_LOWER_BOUND:-1899999999,CALLS_PEER_UPPER_BOUND:-189e7,ANONYMOUS_USER_PEER_ID_LOWER_BOUND:10000000001,ANONYMOUS_USER_PEER_ID_UPPER_BOUND:11e10,CHAT_OR_CHANNEL_LOWER_BOUND:s,CHAT_OR_CHANNEL_UPPER_BOUND:21e8,GROUPS_LOWER_BOUND:-1e9,GROUPS_UPPER_BOUND:-1,APP_LOWER_BOUND:-1999999999,APP_UPPER_BOUND:-1e9,ALIEXPRESS_USER_ID_RANGE_START:2e9,ALIEXPRESS_USER_ID_RANGE_LENGTH:150,AD_BOT_ID_RANGE_START:2e9,AD_BOT_ID_RANGE_END:2000064e3,MARUSIA_AUDIO_FAKE_ID_MIN:2000512001,MARUSIA_AUDIO_FAKE_ID_MAX:2000512051,AUTOTEST_GROUP_ID_MIN:216720807,AUTOTEST_GROUP_ID_MAX:216820807,EXTERNAL_USER_ID_OFFSET:-19e8,APP_DOMAIN_ID_OFFSET:-1e9})},853883:(e,t,o)=>{"use strict";o.d(t,{API_VERSION:()=>n});const n="5.235"},333258:(e,t,o)=>{"use strict";o.d(t,{AccountSecurityLevelEnumNames:()=>n});const n={NOTHING_TO_SAY:0,HAVE_ISSUES:1,HAVE_RECOMMENDATIONS:10,GOOD:20}},451694:(e,t,o)=>{"use strict";o.d(t,{BaseSexEnumNames:()=>n});const n={UNKNOWN:0,FEMALE:1,MALE:2}},203240:(e,t,o)=>{"use strict";o.d(t,{getFocusableElements:()=>i,setFocusIsNeed:()=>r});const n=["a[href]","area[href]",'input:not([disabled]):not([hidden]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([hidden]):not([aria-hidden])","textarea:not([disabled])","button:not([disabled])","iframe","audio","video","[contenteditable]",'[tabindex]:not([tabindex="-1"])'];function i(e=document){return Array.from(e.querySelectorAll(n.join())).filter((e=>null!==e.offsetParent)).filter((e=>-1!==e.tabIndex))}function r(e=document,t=[]){if(document.activeElement&&!t.includes(document.activeElement)&&e.contains(document.activeElement))return;const o=function(e=document,t=[]){return i(e).filter((e=>!t.includes(e)))[0]}(e,t);o&&o.focus()}},105352:(e,t,o)=>{"use strict";o.d(t,{API_VERSION:()=>p,VK_MVK_APP_ID:()=>m,VK_WEB_APP_ID:()=>h,initApi:()=>M});var n=o(803898),i=o(853883),r=o(708742),s=o(476726),a=o(388078),_=o(705744),c=o(568352),l=o(8520),u=o(196055),d=o(490712);const p=i.API_VERSION,h=6287487,m=7879029;let E=!1,f=!1,g=!1,y=!1;const v=(0,s.partConfigEnabled)("loginvk_use_mvk_client_id"),w="aR5NKGmm03GYrCiNKsaw",A="QbYic1K3lEV5kTGiqlq2",b=(0,_.isMvk)()&&v?m:h,T=(0,_.isMvk)()&&v?w:A,I=e=>{f||((0,r.setLoginConfig)({appId:h,...e}),f=!0)},P=(e,t,o,i)=>{if(!f)return Promise.reject(new Error("[VKJS][LOGIN]: login didn't init. Use setLoginConfig function"));let a;return a=(0,s.partConfigEnabled)("web_api_token_fetch_retry")?(0,n.retryFn)((()=>(0,r.login)(e,t,o,i)),2,(e=>[.25,.5][e-1]??.5))():(0,r.login)(e,t,o,i),a.then((e=>{if(Boolean(e.access_token)&&(y=!0),window.vk?.id&&!y&&console.error("[VKJS][LOGIN] Token request failed:",e),(0,s.partConfigEnabled)("act_a_check_after_web_token")&&Boolean(e.access_token))try{P("a_check",{access_token:e.access_token})}catch(e){console.error("[VKJS][LOGIN]: a_check act is failed")}return e})).catch((e=>{if(console.error("[VKJS][AUTH]:",e),"unauthorized"===e.error&&"login_error"===e.type){const e=(0,s.partConfigEnabled)("loginvk_unauthorized_force_logout");if(console.error(`[VKJS][AUTH]: logout ${e?"enabled":"disabled"} because `,"loginvk_unauthorized_force_logout = ",e),e)return(0,r.removeLoginCache)(),g=!0,y=!1,window.location.href=window.vk.logoutUrl,new Promise((()=>{}))}return{access_token:"",error:!0,...e}}))},C=(e=!1)=>window.vk?.id<=0&&(0,s.partConfigEnabled)("loginvk_api_use_anonymous_token")?P("get_anonym_token",{client_secret:T,client_id:b,scopes:"audio_anonymous,video_anonymous,photos_anonymous,profile_anonymous"},{},e):P("web_token",{},{},e),S=e=>{E?(0,r.setApiConfig)({...e}):((0,r.setApiConfig)({appId:h,version:p,onTokenExpired:()=>C(!0).then((({access_token:e})=>e||"")),grouping:a.Ranges.isUserId(window.vk?.id),formattedExecuteResponse:(0,s.partConfigEnabled)("vkid_api_formatted_execute_response"),...e}),E=!0)},O=(e,t,o,n={})=>{if(!E)return Promise.reject(new Error("[VKJS][API]: api didn't init. Use setApiConfig function"));let i=null;(0,s.partConfigEnabled)("send_stack_trace_request_api_error")&&"groups.getById"===e&&(i=new Error("request api error"));const a=()=>((e,t,o,n={})=>{if(!y)return Promise.reject(new Error("[VKJS][API]: missing access_token"));const i=y||(0,s.partConfigEnabled)("loginvk_api_use_anonymous_token")?t:{client_secret:T,...t};return(0,r.api)(e,i,o,n)})(e,t,o,n).then((e=>e),(e=>{throw i&&(e?.error?.error_msg&&(i.message=e.error.error_msg),(0,c.logError)(i,{breadcrumb:{data:e}})),e}));return g?a():C().then((e=>(g=!0,S({accessToken:e.access_token}),a())))},M=()=>{window.vkApi||(window.vkApi={api:O,login:P,setLoginConfig:I,setApiConfig:S,removeLoginCache:r.removeLoginCache}),(0,s.partConfigEnabled)("prefetch_cache_workspace")&&null!=window.cur?.apiPrefetchCache&&((0,u.setPrefetchCacheMissHandler)(((...e)=>(0,d.statlogsValueEvent)("api_prefetch_cache_miss",...e))),(0,u.updatePrefetchCache)((0,l.decodeHTMLEntitiesDeep)(window.cur.apiPrefetchCache)))}},793656:(e,t,o)=>{"use strict";o.d(t,{loadPrefetchCache:()=>d,startCacheMissLog:()=>p});var n=o(490712),i=o(8520),r=o(476726),s=o(196055),a=o(705744);let _,c=!1,l=!1,u=new Set;function d(e,t,o){_!==window.cur.apiPrefetchCache&&(_=(0,i.decodeHTMLEntitiesDeep)(window.cur.apiPrefetchCache),window.cur.apiPrefetchCache=_);const c=window.cur?.apiPrefetchCache?.findIndex((n=>n.method===e&&n.version===t&&h(o,n.request)));if(null==c||-1===c)return u.add(e),void(l=!0);const d=window.cur.apiPrefetchCache?.[c];!function(e,t){if(!e||-1===t)return;e.splice(t,1)}(window.cur.apiPrefetchCache,c);const p=d?.response,m=d?.error;if(m){const e=new Error("Api request failed.");throw e.type="api_error",e.error=m,e}if((0,r.partConfigEnabled)("prefetch_cache_workspace")){const i=(0,s.loadPrefetchCache)(e,t,o),r=JSON.stringify(i)===JSON.stringify(p),{module:_}=window.cur,c=(0,a.isMvk)()?"mvk":"web";(0,n.statlogsValueEvent)("tmp_stat",r,"workspace_prefetch_valid",e,_,c)}return p}function p(e){if(c)return()=>{};function t(...t){c&&(c=!1,l&&(0,n.statlogsValueEvent)("api_prefetch_cache_miss",e,...t))}return c=!0,l=!1,u.clear(),window.setTimeout((()=>{t()})),t}function h(e,t){return e===t||(!(!E(e)||!E(t))||!E(e)&&!E(t)&&(Array.isArray(e)&&"string"==typeof t?m(e,t.split(",")):"string"==typeof e&&Array.isArray(t)?m(e.split(","),t):Array.isArray(e)&&Array.isArray(t)?m(e,t):"object"==typeof e&&"object"==typeof t?function(e,t){const o=e,n=t,i=new Set([...Object.keys(o),...Object.keys(n)]);for(const e of i){if(!h(o[e],n[e]))return!1}return!0}(e,t):"number"==typeof e&&"string"==typeof t?e===Number.parseFloat(t):"string"==typeof e&&"number"==typeof t?Number.parseFloat(e)===t:"number"!=typeof e||1!==e&&0!==e||"boolean"!=typeof t?"boolean"==typeof e&&"number"==typeof t&&(1===t||0===t)&&e===Boolean(t):Boolean(e)===t))}function m(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!h(e[o],t[o]))return!1;return!0}function E(e){return null==e||""===e||Array.isArray(e)&&0===e.length||"object"==typeof e&&null!==e&&0===Object.keys(e).length||"object"==typeof e&&null!==e&&Object.values(e).every(E)}},933052:(e,t,o)=>{"use strict";o.d(t,{api:()=>u,apiWithPrefetch:()=>d,login:()=>p,removeLoginCache:()=>h,setApiConfig:()=>l,setLoginConfig:()=>c,upload:()=>m});var n=o(708742),i=o(853883),r=o(476726),s=o(793656),a=o(196055),_=o(490712);const c=e=>window.vkApi?window.vkApi.setLoginConfig(e):console.error("[VKJS]: setLoginConfig didn't allowed. Use makeAuthAndApiGlobal function"),l=e=>window.vkApi?window.vkApi.setApiConfig(e):console.error("[VKJS]: setApiConfig didn't allowed. Use makeAuthAndApiGlobal function"),u=(e,t,o,n={})=>window.vkApi?window.vkApi.api(e,t,o,n):Promise.reject(new Error("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function")),d=(e,t,o,n={})=>{if(!window.vkApi)return Promise.reject(new Error("[VKJS][API]: api didn't allowed. Use makeAuthAndApiGlobal function"));const c=o?.version??i.API_VERSION;try{const o=(0,s.loadPrefetchCache)(e,c,t);if((0,r.partConfigEnabled)("prefetch_cache_workspace")){const n=(0,a.loadPrefetchCache)(e,c,t),i=JSON.stringify(n)===JSON.stringify(o);(0,_.statlogsValueEvent)("tmp_stat",i,"workspace_prefetch_valid")}if(o)return Promise.resolve(o)}catch(e){return console.error(e),Promise.reject(e)}return window.vkApi.api(e,t,o,n)},p=(e,t,o,n)=>window.vkApi?window.vkApi.login(e,t,o,n):Promise.reject(new Error("[VKJS]: login didn't allowed. Use makeAuthAndApiGlobal function")),h=(e,t)=>window.vkApi?window.vkApi.removeLoginCache(e,t):console.error("[VKJS]: removeLoginCache didn't allowed. Use makeAuthAndApiGlobal function"),m=n.upload},206513:(e,t,o)=>{"use strict";function n(e,t="not null assertion failed"){if(null==e)throw new Error(t)}o.d(t,{assertNotNull:()=>n})},778419:(e,t,o)=>{"use strict";o.d(t,{AudioHlsNode:()=>d});var n=o(761396),i=o(493810),r=o(243113),s=o(812140),a=o(826046),_=o(723919),c=o(72882),l=o(250682),u=o(476726);class d{get isFullyLoaded(){return this.fullyLoaded}get error(){return this.audioElement.error||null}get played(){return this.audioElement.played}get src(){return this.url}get hls(){return this.hlsInstance||null}get duration(){return isFinite(this.audioElement.duration)?this.audioElement.duration:0}get readyState(){return this.audioElement.readyState}get currentTime(){return this.audioElement.currentTime}set currentTime(e){this.audioElement.currentTime=e}get volume(){return this.audioElement.volume}set volume(e){this.audioElement.volume=e}set playbackRate(e){this.audioElement.playbackRate=e}get currentProgress(){return isNaN(this.audioElement.duration)?0:Math.max(0,Math.min(1,this.audioElement.currentTime/this.audioElement.duration))}get currentBuffered(){return this.audioElement.buffered.length?Math.min(1,this.audioElement.buffered.end(0)/this.audioElement.duration):0}play(){return(0,c.wrapAudioPlay)(this.audioElement).catch((e=>{switch(e.code){case e.NOT_SUPPORTED_ERR:case e.ABORT_ERR:break;default:throw e}}))}pause(){this.audioElement.pause()}addEventListeners(e){this.audioElement.addEventListener("pause",(()=>e.onPause())),this.audioElement.addEventListener("play",(()=>e.onPlay())),this.audioElement.addEventListener("progress",(()=>{if(e.onBufferUpdate(),!this.hlsInstance){const e=this.audioElement.buffered;e.length&&Math.abs(e.end(e.length-1)-this.audioElement.duration)<1&&(this.fullyLoaded=!0)}})),this.audioElement.addEventListener("timeupdate",(()=>{e.onProgressUpdate&&e.onProgressUpdate()})),this.audioElement.addEventListener("ended",(()=>{e.onEnd&&e.onEnd()})),this.onFail=e.onFail||(()=>{}),this.audioElement.addEventListener("error",(()=>{this.onFail()})),this.audioElement.addEventListener("canplay",(()=>{e.onCanPlay&&e.onCanPlay()})),this.audioElement.addEventListener("durationchange",(()=>{e.onDurationChange&&e.onDurationChange()}))}static isHlsUrl(e){const t=(0,i.audioUnmaskSource)(e).includes(".m3u8");if(!(0,n.isAudioPWAFeature)())return t;const o=(0,s.checkIsDownloadedUrl)(e);return t||o}setUrl(e){if(this.url=e,d.isHlsUrl(this.url)&&!d.shouldUseNativeHls()&&"function"==typeof window.MediaSource)return this.initHls(this.url).catch((()=>this.onFail()));this.hlsInstance&&this.hlsInstance.destroy();const t=this.audioElement.firstElementChild;return t.src=this.url,d.isHlsUrl(this.url)?t.type="application/vnd.apple.mpegurl":(0,u.partConfigEnabled)("music_clear_media_type")&&t.removeAttribute("type"),this.audioElement.load(),Promise.resolve()}static shouldUseNativeHls(){const[e]=window.browser.version.split("."),t=parseInt(e);return window.browser.safari||window.browser.msie_edge&&t>11&&t<78}initHls(e){return d.loadHls().then((({default:t})=>new Promise((o=>{let n=!1;const i=!!l.ls.get("_audio_hls_debug");this.hlsInstance&&this.hlsInstance.destroy();const s=new t({debug:i,maxBufferHole:3,nudgeOffset:.5,nudgeMaxRetry:5,maxFragLookUpTolerance:.2});s.on(t.Events.BUFFER_EOS,(()=>this.fullyLoaded=!0)),s.on(t.Events.ERROR,((e,o)=>{(i||o.fatal)&&console.log("audio hls error",e,o),o.details===t.ErrorDetails.BUFFER_STALLED_ERROR&&(n=!0,s.stopLoad(),s.startLoad()),o.fatal&&this.onFail({type:o.type,details:o.details,url:o.frag&&o.frag.url||o.context&&o.context.url,code:o.networkDetails?o.networkDetails.status:0})})),s.on(t.Events.FRAG_BUFFERED,((e,t)=>{const o=(0,r.getCurrentAudio)(),i={owner_id:o.ownerId,audio_id:o.id,fragment_id:t.frag.sn.toString(),fragment_duration:Math.ceil(1e3*t.frag.duration).toString(),time_to_first_byte:Math.ceil(t.stats.loading.first-t.stats.loading.start).toString(),time_to_first_frame:Math.ceil(t.stats.loading.end-t.stats.loading.start).toString(),buffering_time:Math.ceil(t.stats.buffering.end-t.stats.buffering.start).toString(),http_request_host:new URL(t.frag.baseurl).host};n&&(n=!1,this.audioNetworkStatCollector.logEvent({...i,event_type:a.AudioNetworkType.FRAGMENT_STALLED},_.default.getConnectionType(),_.default.getConnectionEffectiveType())),this.audioNetworkStatCollector.logEvent({...i,event_type:a.AudioNetworkType.FRAGMENT_LOADED},_.default.getConnectionType(),_.default.getConnectionEffectiveType())})),s.loadSource(e),s.attachMedia(this.audioElement),this.hlsInstance=s,o()}))))}static loadHls(){return o.e(45458).then(o.bind(o,164945))}constructor(e,t){this.fullyLoaded=!1,this.url="",this.audioElement=new Audio,this.audioElement.appendChild(document.createElement("source")),this.audioElement.crossOrigin="anonymous",this.audioElement.preload="auto",this.volume=e.volume,this.addEventListeners(e),t&&this.setUrl(t).then((()=>{this.audioElement.load()}));const o=new a.NetworkStatCollector;this.audioNetworkStatCollector=new a.AudioNetworkStatCollector(o)}}},609116:(e,t,o)=>{"use strict";o.d(t,{AudioMediaSession:()=>c});var n=o(514640),i=o(735477),r=o(944762),s=o(8520),a=o(490712),_=o(269315);class c{init(){this.mediaSession&&(this.player.subscribe(n.AudioPlayerEventType.PLAY,this.handlePlay),this.player.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlaylistChange))}async updateMediaSessionControls(){const{mediaSession:e}=this;if(e)if(this.player.ads?.isActive)e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause),e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null),e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null);else{e.setActionHandler("play",this.play),e.setActionHandler("pause",this.pause);const t=this.player.getCurrentAudio();if(this.player.isPlaying()?(e.setActionHandler("seekbackward",this.seekBackward),e.setActionHandler("seekforward",this.seekForward)):(e.setActionHandler("seekbackward",null),e.setActionHandler("seekforward",null)),t&&!(0,r.isPodcast)(t))try{const[t,o]=await this.getPrevAndNextAudio();t?e.setActionHandler("previoustrack",this.previousTrack):e.setActionHandler("previoustrack",null),o?e.setActionHandler("nexttrack",this.nextTrack):e.setActionHandler("nexttrack",null)}catch(t){e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}else e.setActionHandler("previoustrack",null),e.setActionHandler("nexttrack",null)}}getPrevAndNextAudio(){return Promise.all([this.player.getPrevAudio().catch((()=>null)),this.player.getNextAudio().catch((()=>null))])}constructor(e,t){this.handlePlay=()=>{const{mediaSession:e}=this;if(!e)return;const t=this.player.getCurrentAudio(),o=(0,i.audioTupleToAudioObject)(t);if(!o)return;const n=(0,s.decodeHTMLEntities)(o.title+(o.subTitle?` (${o.subTitle})`:"")).replace(/<[^>]*>?/gm,""),r=(0,s.decodeHTMLEntities)(o.performer||"").replace(/<[^>]*>?/gm,""),a=this.player.getCurrentPlaylist(),c=a?(0,s.decodeHTMLEntities)(a.getTitle&&a.getTitle()||"").replace(/<[^>]*>?/gm,""):"",l=o.coverUrl_p||o.coverUrl_l,u=l?[{sizes:"160x160",src:l}]:[];this.updateMediaSessionControls(),(0,_.updateMediaSessionMetadata)({title:n,artist:r,album:c,artwork:u},e)},this.handlePlaylistChange=()=>{this.player&&!this.player.getCurrentAudio()&&(0,_.clear)()},this.play=()=>{this.player.play(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","play")},this.pause=()=>{this.player.pause(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","pause")},this.previousTrack=()=>{this.player.prev(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","previous_track")},this.nextTrack=()=>{this.player.next(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","next_track")},this.seekBackward=()=>{const e=(0,i.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,o=(this.player.getCurrentProgress()||0)*t,n=Math.max(0,(o-10)/t);n>0?this.player.seek(n):this.player.prev(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","seek_backward")},this.seekForward=()=>{const e=(0,i.audioTupleToAudioObject)(this.player.getCurrentAudio()),t=e?.duration||0,o=(this.player.getCurrentProgress()||0)*t,n=Math.min(1,(o+10)/t);n<1?this.player.seek(n):this.player.next(),(0,a.statlogsValueEvent)("global_media_controls","audio_player","seek_forward")},this.player=e,this.mediaSession=t??_.DEFAULT_MEDIA_SESSION}}},514640:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPlayerEventType:()=>n,events:()=>i}),function(e){e.CURRENT_CHANGED="curr",e.PLAY="start",e.PLAY_REQUESTED="request_play",e.IMPL_PLAY="impl_play",e.PAUSE="pause",e.STOP="stop",e.UPDATE="update",e.LOADED="loaded",e.ENDED="ended",e.FAILED="failed",e.BUFFERED="buffered",e.PROGRESS="progress",e.VOLUME="volume",e.PLAYLIST_CHANGED="plchange",e.PLAYLIST_CLEAR_REQUESTED="playlist_clear_requested",e.PLAYLIST_CLEARED="playlist_cleared",e.ADDED="added",e.REMOVED="removed",e.FREQ_UPDATE="freq",e.SEEK="seek",e.PLAY_NEXT="play_next",e.AD_READY="ad_ready",e.AD_DEINITED="ad_deinit",e.AD_STARTED="ad_started",e.AD_COMPLETED="ad_completed",e.PLAYER_IS_AD_CHANGED="player_is_ad_changed",e.PLAYER_IS_PLAYING_CHANGED="player_is_playing_changed",e.START_LOADING="start_load",e.CAN_PLAY="actual_start",e.SELECT="select",e.DESELECT="deselect",e.EMPTY_PLAYLIST="empty_playlist",e.NOT_FOUND_PLAYLIST="not_found_playlist",e.INIT="init",e.REQUEST_EXPANDED="request_expanded",e.PLAYLIST_START_LOADING="playlist_start_loading",e.MUSIC_AUDIOS_ADD="music_audios_add",e.MUSIC_AUDIOS_DELETE="music_audios_delete",e.MUSIC_PLAYLISTS_ADD="music_playlists_add",e.MUSIC_OWNERS_FOLLOW="music_owners_follow",e.MUSIC_OWNERS_UNFOLLOW="music_owners_unfollow",e.CURATOR_FOLLOW="curator_follow",e.CURATOR_UNFOLLOW="curator_unfollow",e.RADIOSTATION_FOLLOW="radiostation_follow",e.RADIOSTATION_UNFOLLOW="radiostation_unfollow",e.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE="current_radiostation_update",e.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE="current_audio_dislike_status_update",e.AUDIO_RESTORE_BY_DISLIKE_ACTION="audio_restore_by_dislike_action",e.AUDIO_DELETE_BY_DISLIKE_ACTION="audio_delete_by_dislike_action",e.PLACEHOLDER_REMOVE="placeholder_remove",e.PLAY_TRACK_FROM_AUTOPLAY="play_track_from_autoplay",e.CLEAN_AUTOPLAY_QUEUE="clean_autoplay_queue",e.PLAY_PREVIEW="play_preview",e.STOP_PREVIEW="stop_preview",e.END_PREVIEW="end_preview",e.PROGRESS_PREVIEW="progress_preview",e.PREVIEW_BUFFERED="preview_buffered",e.PLAY_SNIPPET="play_snippet",e.STOP_SNIPPET="stop_snippet",e.PROGRESS_SNIPPET="progress_snippet",e.SNIPPET_BUFFERED="snippet_buffered",e.SNIPPET_PLAYER_STATE_CHANGED="snippet_player_state_changed",e.SNIPPET_PLAYER_FAIL="snippet_player_fail",e.SNIPPET_PLAYER_PLAY_NEXT_SNIPPET="snippet_player_play_next_snippet",e.SNIPPET_PLAYER_PLAY_PREV_SNIPPET="snippet_player_play_prev_snippet",e.SNIPPET_PLAYER_SNIPPET_PLAYING_END="snippet_player_snippet_playing_end",e.SNIPPET_PLAYER_CHANGE_SOURCE="snippet_player_change_source",e.SNIPPET_PLAYER_PAUSED_BY_INCOMING_CALL="snippet_player_paused_by_incoming_call",e.SNIPPET_PLAYER_PAUSED_BY_VISIBILITY="snippet_player_paused_by_visibility"}(n||(n={}));const i=n},121775:(e,t,o)=>{"use strict";o.d(t,{AudioMixPlaylist:()=>h,PLAYLIST_CONTEXT_VKMIX:()=>u,PLAYLIST_TYPE_VKMIX:()=>l});var n=o(434518),i=o(763812),r=o(406245),s=o(264544),a=o(555282),_=o(722239),c=o(476726);const l="vkmix",u="vkmix:vk_mix";var d=(0,i._)("_items"),p=(0,i._)("_isSessionLaunched");class h extends a.AudioList{get isSessionLaunched(){return(0,n._)(this,p)[p]}get infinite(){return!0}get items(){return(0,n._)(this,d)[d]}get length(){return this.items.length}audioAt(e){return this.items.at(e)}async fetchAt(e,{range:t=0}={}){const o=this.ensureAbsIndex(e),n=this.audioAt(o),i=o+t+1-this.length;if(n&&i<=0)return n;const[r]=await this.fetchNext(i);if(!r)throw new Error("fetchNext have not return audios");return r}async fetchNext(e=1){const t=(0,c.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{id:o,isSessionLaunched:n}=this,i=(await this.service.fetchNextFx({id:o,count:e,isSessionLaunched:n,isSessionFeatureEnabled:t})).map((e=>function(e){return{mediaMetadata:{},...(0,r.mapAPIAudioToMusicAudioData)(s.AudioType.MusicTrack,e),apiAudio:e}}(e)));return this.items.push(...i),i}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");(0,n._)(this,p)[p]=!0}breakSession(){this.items.length=0,(0,n._)(this,p)[p]=!1}constructor({id:e,title:t,items:o=[],context:i}){super(),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,p)[p]=!1,this.fetchable=null,this.service=(0,_.createAudioVkMixPlaylistService)(),(0,n._)(this,d)[d]=[...o],this.type=l,this.title=t,this.id=e,this.context=i}}},722239:(e,t,o)=>{"use strict";o.d(t,{createAudioVkMixPlaylistService:()=>r});var n=o(32489),i=o(249814);function r(){const e=(0,n.createDomain)("audio/playlist/vkmix"),{$lists:t,fetchNextFx:o}=(0,i.createAudioVkMixService)(e);return{$lists:t,$loading:o.pending,fetchNextFx:o}}},539217:(e,t,o)=>{"use strict";o.d(t,{AudioMixPlaylist:()=>n.AudioMixPlaylist,PLAYLIST_CONTEXT_VKMIX:()=>n.PLAYLIST_CONTEXT_VKMIX,PLAYLIST_TYPE_VKMIX:()=>n.PLAYLIST_TYPE_VKMIX});var n=o(121775)},280357:(e,t,o)=>{"use strict";o.d(t,{AudioStats:()=>j,SUBTYPE_OFF:()=>B,SUBTYPE_ON:()=>N,SUBTYPE_PLAYLIST:()=>F,SUBTYPE_UPLOAD:()=>R,TYPE_ADDED:()=>d,TYPE_BROADCASTING:()=>A,TYPE_REMOVED:()=>p,TYPE_SHARE_AUDIO:()=>E,TYPE_SHOW_ALBUM:()=>m});var n=o(888610),i=o(248782),r=o(490712),s=o(418562),a=o(250682),_=o(970577),c=o(581903),l=o(476726),u=o(695290);const d="added",p="removed",h="recommendation_removed",m="show_album",E="share_audio",f="start",g="stop",y="volume",v="rewind",w="play_further",A="broadcast",b="curator",T="default",I="next_track",P="prev_track",C="auto",S="interruption",O="continue_from_pause",M="new",D="close_app",L="queue",k="pause",R="upload",N="on",B="off",x="follow",U="unfollow",F="playlist",W="session_end",K={[f]:1,[g]:2,[y]:3,[v]:4,[w]:5,[d]:6,[p]:7,[h]:8,[m]:9,[E]:10,[A]:11,[b]:12,[u.RADIO_STATION_EVENT_ITEM]:13},V={[T]:1,[I]:2,[P]:3,[C]:4,[S]:5,[O]:6,[M]:7,[D]:8,[L]:9,[k]:10,[R]:11,[N]:12,[B]:13,[x]:14,[U]:15},H="audio_unique_unauth_id";class j{listenOnBeforeUnload(){window.addEvent(window,"beforeunload",this.onPageClose)}stopListenOnBeforeUnload(){window.removeEvent(window,"beforeunload",this.onPageClose)}logEvent(e){return this.actionStatCollector.logEvent(e)}canOperate(){return null!==this.playerAdapter&&!(this.playerAdapter.isPodcast()||this.playerAdapter.isExternalStream()||this.playerAdapter.isAdPlaying()||this.playerAdapter.isMarusiaTrack())}getCurrentAudioParams(){if(!this.playerAdapter)return{};const e=this.currentAudioId||this.playerAdapter.getAudioId();if(e){const[t,o]=e.split("_");return{ownerId:t,audioId:o,trackCode:this.currentAudioTrackCode||this.playerAdapter.getAudioTrackCode()}}return{}}getEnvParams(){if(this.playerAdapter)return{state:this.playerAdapter.getState(),context:this.playerAdapter.getContext(),ref:window.cur&&window.vk.widget?String(window.cur.widgetReferrer||"").substring(0,20):""}}getListenedTime(){return this.playerAdapter&&Math.round(this.playerAdapter.getListenedTime())||0}getPlaySubtype(){if(!this.playerAdapter)return"";if(this.playerAdapter.isAutoPlayed())return C;const e=this.playerAdapter.getSequence();if(e)return e>0?I:P;const t=this.pausedAudioId,o=this.playerAdapter.getAudioId();return t&&o===t?O:M}onRadioOn(e){(0,l.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:u.RADIO_STATION_EVENT_ITEM,[u.RADIO_STATION_EVENT_ITEM]:{event_type:N,radio_station_id:e.id,track_code:e.trackCode}}):this.sendAudioEvent({type:u.RADIO_STATION_EVENT_ITEM,subtype:N,playlistId:e.id,trackCode:e.trackCode})}onRadioOff(e){(0,l.partConfigEnabled)("audioRadioActionStatCollectorEnabled")?this.actionStatCollector.logEvent({type:u.RADIO_STATION_EVENT_ITEM,[u.RADIO_STATION_EVENT_ITEM]:{event_type:B,radio_station_id:e.id,duration:this.getListenedTime(),track_code:e.trackCode}}):this.sendAudioEvent({type:u.RADIO_STATION_EVENT_ITEM,subtype:B,playlistId:e.id,listened:this.getListenedTime(),trackCode:e.trackCode})}onTrackSwitch(e,t){if(!e||!this.playerAdapter)return;let o=M;const n=this.playerAdapter.getSequence(),[i,r]=e.fullId.split("_");this.playerAdapter.isAutoPlayed()?o=C:n&&(o=n>0?I:P),this.sendCurrentAudioEvent({type:g,subtype:o,position:this.currentPosition,listened:this.currentListened,trackCode:e.trackCode,playlistId:t,ownerId:Number(i),audioId:Number(r)}),this.wasEnded=!0,this.collectListenedData(e),this.collectListenedDataSwitch();const s=this.listenedData;this.listenedData=null,this.sendListenedData(s)}onPageClose(){this.playerAdapter&&this.playerAdapter.isPlaying()&&(this.sendCurrentAudioEvent({type:g,subtype:D}),this.sendListenedData())}collectListenedDataSwitch(){if(this.listenedData){if(this.listenedData.end_stream_reason===W||!this.playerAdapter)return;const e=this.playerAdapter.isAutoPlayed(),t=this.getListenedTime(),o=this.playerAdapter.getSequence();let n=null;o&&!e?n=o>0?"next_btn":"prev":this.playlistChanged&&(n="playlist_change"),!n&&e&&(n="playlist_next"),this.listenedData.end_stream_reason=n||"new",t&&(this.listenedData.listened=t)}}collectListenedData(e=null){const t=e||this.currentAudio;if(!this.canOperate()||!t||!this.playerAdapter)return null;const o=t.fullId,n=t.trackCode||this.playerAdapter.getAudioTrackCode(),i=this.getListenedTime(),r=t.urlHash;if(r||console.log("no url hash"),!i||!r)return null;let s={audio_id:o,listened:i,context:this.playerAdapter.getContext(),hash:r};return window.cur&&window.vk.widget&&(s.ref=window.cur.widgetReferrer||""),this.playerAdapter.hasSearchParams()&&(s.search_params=JSON.stringify(this.playerAdapter.getSearchParams())),this.playerAdapter.hasPlaylist()&&(this.playerAdapter.isRealPlaylist()&&(s.playlist_id=this.playerAdapter.getPlaylistId()),this.playerAdapter.isShuffledPlaylist()&&(s.shuffled=1)),n&&(s.track_code=n),this.playerAdapter.isRepeatCurrentAudio()?s.repeat="one":this.playerAdapter.isRepeatAll()&&(s.repeat="all"),this.playerAdapter.isAutoPlayed()&&(s.auto=1),this.playerAdapter.hasPrevAudio()&&(s.prev_audio_id=this.playerAdapter.getPrevAudioId()),this.playerAdapter.hasPrevPlaylist()&&this.playerAdapter.isRealPrevPlaylist()&&(s.prev_playlist_id=this.playerAdapter.getPrevPlaylistId()),this.playerAdapter.isPlaying()||(s.end_stream_reason="stop_btn"),s.state=document.hidden?"background":"app",this.listenedData=s,this.sendListenedDataDelayed(1e4,s),s}sendListenedData(e=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout);const t=e||this.listenedData;this.listenedData=null,t&&t.listened&&this.playerAdapter&&(this.uniqueUserId&&(t.unique_id=this.uniqueUserId),this.playerAdapter.sendListenedData(t))}sendListenedDataDelayed(e=0,t=null){null!==this.sendTimeout&&clearTimeout(this.sendTimeout),this.sendTimeout=setTimeout((()=>this.sendListenedData(t)),e)}serializeEvent(e){const t=[K[e.type],V[e.subtype],1];return e.audioId?t.push(e.ownerId+"_"+e.audioId):t.push(0),e.trackCode?t.push(e.trackCode):t.push(0),e.state?t.push(e.state):t.push(n.UNKNOWN_STATE),e.ref?t.push(e.ref):t.push(""),e.context?t.push(e.context):t.push("other"),e.volume||0===e.volume?t.push(e.volume):t.push(this.playerAdapter&&this.playerAdapter.getVolume()),e.position||0===e.position?t.push(e.position):t.push(this.playerAdapter&&this.playerAdapter.getProgressInSeconds()),e.shuffle?t.push(e.shuffle?1:0):t.push(0),e.repeat?t.push(e.repeat):t.push(0),e.listened?t.push(Math.max(e.listened,0)):t.push(0),e.playlistId?t.push(e.playlistId):t.push(""),e.targetOwnerId?t.push(e.targetOwnerId):t.push(0),this.uniqueUserId?t.push(this.uniqueUserId):t.push(""),e.positionTo?t.push(e.positionTo):t.push(null),t}sendEvent(e){this.debug&&(console.log("[audio stats event]",e.type,e.subtype,e),window._statForTest||(window._statForTest=[]),window._statForTest.push(e)),(0,r.statlogsValueEvent)("audio_sts",...this.serializeEvent(e))}sendCurrentAudioEvent(e){if(!this.playerAdapter)return;const t=this.playerAdapter.isRepeatCurrentAudio()?1:this.playerAdapter.isRepeatAll()?2:0;this.sendEvent({shuffle:this.playerAdapter.isShuffledPlaylist(),repeat:t,volume:this.playerAdapter.getVolume(),position:this.playerAdapter.getProgressInSeconds(),listened:this.getListenedTime(),playlistId:this.playerAdapter.getPlaylistId(),...this.getEnvParams(),...this.getCurrentAudioParams(),...e})}sendAudioEvent(e){const t={...e,...this.getEnvParams()};!window.vk.id&&this.uniqueUserId&&(t.uniqueUnauthId=this.uniqueUserId),this.sendEvent(t)}destroy(){this.playerAdapter.events.off("play",this.handlePlay).off("pause",this.handlePause).off("stop",this.handlePause).off("progress",this.handleProgress).off("volume",this.handleVolume).off("seekLegacy",this.handleSeek).off("playlistChanged",this.handlePlaylistChanged).off("ended",this.handleEnded).off("playNext",this.handlePlayNext).off("adCompleted",this.handleAdCompleted),this.stopListenOnBeforeUnload(),this.listenedData=null,null!==this.sendTimeout&&clearTimeout(this.sendTimeout)}constructor(e){if(this.handlePlay=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOn(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void _.marusiaAudioStats.onPlay(this.playerAdapter);if(!this.canOperate())return;const e=this.playerAdapter.getAudio();if(!e)return;const t=e.fullId,o=this.currentAudioId===t||!this.currentAudioId,n=this.currentAudioId!==this.pausedAudioId;let i=this.playerAdapter.getListenedTime();!o&&n&&this.onTrackSwitch(this.currentAudio,this.currentPlaylistId),this.playedTime=Date.now(),this.currentAudioId=t,this.currentAudio=e,this.currentAudioTrackCode=this.playerAdapter.getAudioTrackCode(),this.currentPlaylistId=this.playerAdapter.getPlaylistId(),this.wasEnded||this.playerAdapter.hasPrevAudio()&&(!this.pausedAudioId||this.playerAdapter.isAutoPlayed())?(this.currentPosition=0,i=0):this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=i,this.sendCurrentAudioEvent({type:f,subtype:this.getPlaySubtype(),position:this.currentPosition,listened:i}),this.pausedAudioId=null,this.playlistChanged=!1,this.wasEnded=!1,this.listenOnBeforeUnload()},this.handlePause=()=>{if(!this.playerAdapter)return;if(this.playerAdapter.isRadio()&&!this.playerAdapter.isMarusiaTrack())return void this.onRadioOff(this.playerAdapter.getAudio());if(this.playerAdapter.isMarusiaTrack())return void _.marusiaAudioStats.onPause(this.playerAdapter);const e=this.playerAdapter.getAudioId();if(!this.canOperate()||!e)return;const t=this.collectListenedData();this.sendListenedDataDelayed(1e3,t),setTimeout((()=>{if(this.currentAudio&&e!==this.currentAudio.fullId)return;if(Date.now()-this.playedTime<150)return;if(!this.playerAdapter)return;this.pausedAudioId=e;const t=this.playerAdapter.getPausedBy();this.sendCurrentAudioEvent({type:g,subtype:t?t===L?L:S:k})}),100),this.stopListenOnBeforeUnload()},this.handleProgress=()=>{this.playerAdapter&&(this.playerAdapter.getProgress()<.01||!this.playerAdapter.isPlaying()||(this.currentPosition=this.playerAdapter.getProgressInSeconds(),this.currentListened=this.playerAdapter.getListenedTime(),!this.pausedAudioId&&Date.now()-this.playedTime>150&&this.collectListenedData(),this.adsCompleted&&(this.sendCurrentAudioEvent({type:f,subtype:this.getPlaySubtype(),position:this.currentPosition}),this.adsCompleted=!1)))},this.handleVolume=(0,i.debounce)((()=>{this.canOperate()&&this.sendCurrentAudioEvent({type:y,subtype:T})}),300),this.handleSeek=()=>{if(!this.canOperate()||!this.playerAdapter)return;const e={position:this.currentPosition,positionTo:this.playerAdapter.getProgressInSeconds()};e.position!==e.positionTo&&this.sendCurrentAudioEvent({type:v,subtype:T,...e})},this.handlePlaylistChanged=()=>{this.canOperate()&&(this.playlistChanged=!0)},this.handleEnded=()=>{this.listenedData&&this.playerAdapter.isLastTrack()&&(this.listenedData.end_stream_reason=W),this.wasEnded=!0,this.playerAdapter.isRepeatCurrentAudio()?(this.sendCurrentAudioEvent({type:g,subtype:C}),this.collectListenedData(),this.sendListenedData()):this.sendListenedDataDelayed(150)},this.handlePlayNext=({audioFullId:e})=>{if(!this.canOperate()||!e)return;const[t,o]=e.split("_");this.sendAudioEvent({type:w,subtype:T,ownerId:Number(t),audioId:Number(o)})},this.handleAdCompleted=()=>{this.adsCompleted=!0},this.handleBroadcastStatusToggled=({status:e,targetOwnerId:t})=>{this.sendCurrentAudioEvent({type:A,subtype:e?N:B,targetOwnerId:t.toString()})},this.playerAdapter=e,this.listenedData=null,this.sendTimeout=null,this.currentAudioId=null,this.currentAudio=null,this.currentAudioTrackCode=null,this.pausedAudioId=null,this.playlistChanged=!1,this.currentPosition=0,this.currentListened=0,this.playedTime=0,this.adsCompleted=!1,this.wasEnded=!1,window.vk.id)this.uniqueUserId=null;else{const e=a.ls.get(H);e?this.uniqueUserId=e:(this.uniqueUserId=(0,s.default)(),a.ls.set(H,this.uniqueUserId))}this.debug=e.isDebug(),this.playerAdapter.events.on("play",this.handlePlay).on("pause",this.handlePause).on("stop",this.handlePause).on("progress",this.handleProgress).on("volume",this.handleVolume).on("seekLegacy",this.handleSeek).on("playlistChanged",this.handlePlaylistChanged).on("ended",this.handleEnded).on("playNext",this.handlePlayNext).on("adCompleted",this.handleAdCompleted).on("broadcastStatusToggled",this.handleBroadcastStatusToggled),this.onPageClose=this.onPageClose.bind(this),this.productionStatCollector=new c.ProductionStatCollector,this.actionStatCollector=new c.ActionStatCollector(this.productionStatCollector)}}},769981:(e,t,o)=>{"use strict";o.d(t,{AudioStatsPlayerAdapter:()=>a,FULL_SCREEN_STATE:()=>s,UNKNOWN_STATE:()=>r});var n=o(514640),i=o(122611);const r=0,s=2;class a{destory(){this.unlistenPlayer()}get events(){return this.emitter.listenable}getPausedBy(){return null}getState(){return document.hidden?1:3}getProgress(){return this.player.playerGetProgress()}getProgressInSeconds(){return this.player.getProgressInSeconds()}getVolume(){return this.player.getVolume()}getAudioId(){return this.player.getAudioId()}getAudio(){return this.player.getAudio()}getAudioTrackCode(){return this.player.getAudioTrackCode()}getPrevAudioId(){return this.player.getPrevAudioId()}getPrevPlaylistId(){return this.player.getPrevPlaylistId()}getPlaylistId(){return this.player.getPlaylistId()}getContext(){return this.player.getContext()}getSequence(){return this.player.getSequence()}getType(){return this.player.getType()}getListenedTime(){return isNaN(this.player.getListenedTime())?0:Math.round(this.player.getListenedTime())}getSearchParams(){return this.player.getSearchParams()}isPlaying(){return this.player.isPlaying()}isPaused(){return this.player.isPaused()}isAutoPlayed(){return this.player.isAutoPlayed()}isRepeatCurrentAudio(){return this.player.isRepeatCurrentAudio()}isRepeatAll(){return this.player.isRepeatAll()}isShuffledPlaylist(){return this.player.isShuffledPlaylist()}isRealPlaylist(){return this.player.isRealPlaylist()}isRealPrevPlaylist(){return this.player.isRealPrevPlaylist()}isPodcast(){return this.player.isPodcast()}isExternalStream(){return this.player.isExternalStream()}isRadio(){return this.player.isRadio()}isMarusiaTrack(){return this.player.isMarusiaTrack()}isAdPlaying(){return this.player.ads.isActive}isLastTrack(){return this.player.isLastTrack()}getTrackPosition(){return this.player.getTrackPosition()}hasPrevAudio(){return this.player.hasPrevAudio()}hasPrevPlaylist(){return this.player.hasPrevPlaylist()}hasPlaylist(){return this.player.hasPlaylist()}hasSearchParams(){return this.player.hasSearchParams()}isDebug(){return!1}sendListenedData(e){return this.player.sendListenedData(e)}getPlaylistQueue(){return null}getCurrentAudio(){return this.player.getCurrentAudioData()}getPlayingAudio(){return this.isPlaying()||this.isPaused()?this.getCurrentAudio():null}listenPlayer(){this.player.subscribe(n.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.subscribe(n.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.subscribe(n.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.subscribe(n.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.subscribe(n.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.subscribe(n.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.subscribe(n.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.subscribe(n.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.subscribe(n.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.on&&(e.on("playAudio",this.handlePlayerPlayMarked),e.on("pauseAudio",this.handlePlayerPauseMarked),e.on("stopAudio",this.handlePlayerStopMarked),e.on("playAdv",this.handlePlayerPlayAdv),e.on("pauseAdv",this.handlePlayerPauseAdv),e.on("stopAdv",this.handlePlayerStopAdv),e.on("seek",this.handlePlayerSeek),e.on("stateRestore",this.handlePlayerStateRestore),e.on("broadcastStatusToggled",this.handlePlayerBroadcastStatusToggled))}unlistenPlayer(){this.player.unsubscribe(n.AudioPlayerEventType.PLAY,this.handlePlayerPlay),this.player.unsubscribe(n.AudioPlayerEventType.PAUSE,this.handlePlayerPause),this.player.unsubscribe(n.AudioPlayerEventType.STOP,this.handlePlayerStop),this.player.unsubscribe(n.AudioPlayerEventType.PROGRESS,this.handlePlayerProgress),this.player.unsubscribe(n.AudioPlayerEventType.VOLUME,this.handlePlayerVolume),this.player.unsubscribe(n.AudioPlayerEventType.SEEK,this.handlePlayerSeekLegacy),this.player.unsubscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,this.handlePlayerPlaylistChanged),this.player.unsubscribe(n.AudioPlayerEventType.ENDED,this.handlePlayerEnded),this.player.unsubscribe(n.AudioPlayerEventType.PLAY_NEXT,this.handlePlayerPlayNext),this.player.unsubscribe(n.AudioPlayerEventType.AD_COMPLETED,this.handlePlayerAdCompleted);const e=this.player.nextEvents;e?.off&&(e.off("playAudio",this.handlePlayerPlayMarked),e.off("pauseAudio",this.handlePlayerPauseMarked),e.off("stopAudio",this.handlePlayerStopMarked),e.off("playAdv",this.handlePlayerPlayAdv),e.off("pauseAdv",this.handlePlayerPauseAdv),e.off("stopAdv",this.handlePlayerStopAdv),e.off("seek",this.handlePlayerSeek),e.off("stateRestore",this.handlePlayerStateRestore))}constructor(e,t){this.emitterFactory=t,this.emitter=this.emitterFactory.create(),this.handlePlayerPlay=()=>{this.emitter.emit("play")},this.handlePlayerPlayMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;d(t),function(e){if(!_.includes(e))throw new Error(`Invalid play reason: ${e}`)}(o),p(n),this.emitter.emit("playAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerPause=()=>{this.emitter.emit("pause")},this.handlePlayerPauseMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;d(t),function(e){if(!c.includes(e))throw new Error(`Invalid pause reason: ${e}`)}(o),p(n),this.emitter.emit("pauseAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerStop=()=>{this.emitter.emit("stop")},this.handlePlayerStopMarked=e=>{const{audio:t,reason:o,progressTime:n}=e;d(t),function(e){if(!l.includes(e))throw new Error(`Invalid stop reason: ${e}`)}(o),p(n),this.emitter.emit("stopAudio",{audio:t,reason:o,progressTime:n})},this.handlePlayerProgress=()=>{this.emitter.emit("progress")},this.handlePlayerVolume=()=>{this.emitter.emit("volume")},this.handlePlayerSeekLegacy=()=>{this.emitter.emit("seekLegacy")},this.handlePlayerSeek=e=>{const{audio:t,reason:o,progressTime:n,fromTime:i}=e;d(t),function(e){if(!u.includes(e))throw new Error(`Invalid seek reason: ${e}`)}(o),p(n),p(i),this.emitter.emit("seek",{audio:t,reason:o,progressTime:n,fromTime:i})},this.handlePlayerPlaylistChanged=()=>{this.emitter.emit("playlistChanged")},this.handlePlayerEnded=()=>{this.emitter.emit("ended")},this.handlePlayerPlayNext=(e,t)=>{this.emitter.emit("playNext",{currentAudio:e,audioFullId:t})},this.handlePlayerAdCompleted=()=>{this.emitter.emit("adCompleted")},this.handlePlayerPlayAdv=e=>{this.emitter.emit("playAdv",e)},this.handlePlayerPauseAdv=e=>{this.emitter.emit("pauseAdv",e)},this.handlePlayerStopAdv=e=>{this.emitter.emit("stopAdv",e)},this.handlePlayerStateRestore=e=>{const{audio:t,progressTime:o}=e;t&&d(t),p(o),this.emitter.emit("stateRestore",{audio:t,progressTime:o})},this.handlePlayerBroadcastStatusToggled=e=>{this.emitter.emit("broadcastStatusToggled",e)},this.player=e,this.listenPlayer()}}const _=Object.values(i.AudioPlayerPlayAudioEventReason),c=Object.values(i.AudioPlayerPauseAudioEventReason),l=Object.values(i.AudioPlayerStopAudioEventReason),u=Object.values(i.AudioPlayerSeekEventReason);function d(e){if(!e||"object"!=typeof e)throw new Error(`Invalid TrackedAudioData: ${e}`);if(!Number.isFinite(e.id))throw new Error(`Invalid TrackedAudioData (id is not finite): ${e.id}`);if(!Number.isFinite(e.ownerId))throw new Error(`Invalid TrackedAudioData (ownerId is not finite): ${e.ownerId}`);if("string"!=typeof e.trackCode)throw new Error("Invalid TrackedAudioData (trackCode is not string): "+typeof e.trackCode)}function p(e){if("number"!=typeof e)throw new Error(`Value is not number (given: ${typeof e})`)}},888610:(e,t,o)=>{"use strict";o.d(t,{AudioStatsPlayerAdapter:()=>n.AudioStatsPlayerAdapter,FULL_SCREEN_STATE:()=>n.FULL_SCREEN_STATE,UNKNOWN_STATE:()=>n.UNKNOWN_STATE});var n=o(769981)},625330:(e,t,o)=>{"use strict";o.d(t,{AudioTaskManager:()=>r,TaskName:()=>n});var n,i=o(836901);!function(e){e.URL="url",e.PLAYBACK_RATE="playback_rate",e.DELAY="delay",e.SEEK="seek",e.PAUSE="pause",e.PLAY="play",e.VOL_SET="vol_set",e.VOL_UP="vol_up",e.VOL_DOWN="vol_down"}(n||(n={}));class r{newTask(e,t){let o,n;const i=new Promise(((e,t)=>{o=e,n=t}));return this.tasks.push({name:e,fn:()=>t().then(o).catch(n),id:`${e}_${this.taskIDCounter++}`}),this.doTasks(),i}clearAllTasks(){this.taskAbort=this.taskInProgress,this.taskInProgress=null,this.tasks=[]}clearTask(e){this.tasks=this.tasks||[],this.tasks=this.tasks.filter((t=>t.name!==e))}doTasks(){if(this.taskInProgress)return;const e=this.tasks.shift();e&&(this.taskInProgress=e.id,this.ensureImplReady().then((()=>e.fn())).then((()=>{this.taskAbort!==e.id?(this.taskInProgress=null,this.doTasks()):this.taskAbort=null})))}ensureImplReady(){return new Promise((e=>this.impl.onReady(e)))}delay(e){return this.newTask("delay",(()=>new Promise((t=>(0,i.setWorkerTimeout)(t,e)))))}setUrl(e){return this.newTask("url",(()=>new Promise((t=>this.impl.setUrl(e,t)))))}seekImmediate(e){this.impl.seek(e)}seek(e){return this.clearTask("seek"),this.newTask("seek",(()=>new Promise((t=>{this.seekImmediate(e),t()}))))}pause(){return this.newTask("pause",(()=>new Promise((e=>{this.impl.pause(),e()}))))}play(){return window.browser.safari&&this.impl.play(),this.newTask("play",(()=>new Promise(((e,t)=>{this.impl.play().then(e).catch(t)}))))}setVolume(e,t,o=null){if(t){const t=e?"vol_up":"vol_down";return this.newTask(t,(()=>new Promise((t=>this.impl.fadeVolume(e,o,(()=>t()))))))}return this.newTask("vol_set",(()=>new Promise((t=>{this.impl.setVolume(e),t()}))))}updatePlaybackRate(e){return this.newTask("playback_rate",(()=>new Promise((t=>{this.impl.setPlaybackRate(e),t()}))))}constructor(e){this.impl=e,this.taskIDCounter=1,this.tasks=[],this.taskInProgress=null,this.taskAbort=null}}},78362:(e,t,o)=>{"use strict";o.d(t,{AutoplayQueue:()=>c});var n=o(8520),i=o(59052),r=o(514640),s=o(365224),a=o(486848),_=o(712982);class c{get list(){return this._list}get length(){return this._list.length}get enabled(){return this.service.$enabled.getState()}hasSource(e){const t=(0,_.clearObject)({...e,offset:void 0});return this.sources.some((e=>(0,n.isEqual)(t,(0,_.clearObject)({...e,offset:void 0}))))}setSource(e){this.hasSource(e)||(this.sources=[(0,_.clearObject)(e)],this.nextFrom=null,this._list=[],this.hasMore=!0,this.fetchNextAudios())}async fetchNextAudios(){try{const e=this.nextFrom??this.sources[0];if(!e)return[];const t=await this.fetchService.getAutoplayAudioIdsBySource(e);if(!t)return[];const{next_from:o,audios:n}=t;if(this.nextFrom=o,this.hasSource(o)||this.sources.push(o),!n||!n.length)return this.hasMore=!1,[];const r=n.map((e=>e.audio_raw_id)).join(","),a=await this.fetchService.reloadAudios(r),_=this.getCurrentQueueAudioIds(),c=a.map(((e,t)=>(e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY]=n[t]?.access_key||"",e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TRACK_CODE]=n[t]?.track_code||"",e[i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_CONTEXT]="autoplay",e))).filter((e=>!_.some((t=>t.includes((0,s.getAudioFullId)(e))))));return this._list.push(...c),c}catch(e){console.log(e)}}async getNextAudios(e=0){const t=Math.min(e+10,this._list.length);if(e>this._list.length-1){const t=await this.fetchNextAudios();return t&&t.length>0?this.getNextAudios(e):[]}return this._list.slice(e,t)}getAudioById(e){return this._list.find((t=>e.includes((0,s.getAudioFullId)(t))))}indexOf(e){const t=(0,s.getAudioFullId)(e);return this._list.findIndex((e=>(0,s.getAudioFullId)(e)===t))}spliceHead(e){return this._list.splice(0,e+1)}clean(){this._list=[],this.sources=[],this.nextFrom=null,this.hasMore=!1,this.eventBus.emit(r.AudioPlayerEventType.CLEAN_AUTOPLAY_QUEUE)}constructor(e,t,o){this._list=[],this.sources=[],this.nextFrom=null,this.service=(0,a.ensureAutoplayService)(),this.hasMore=!0,this.fetchService=e,this.getCurrentQueueAudioIds=o,this.eventBus=t,this.service.init()}}},561418:(e,t,o)=>{"use strict";o.d(t,{EventBus:()=>n});class n{subscribe(e,t){return Array.isArray(e)&&e.forEach((e=>this.subscribe(e,t))),this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:()=>this.unsubscribe(e,t)}}unsubscribe(e,t){if(this.subscriptions[e]){const o=this.subscriptions[e].indexOf(t);o>=0&&this.subscriptions[e].splice(o,1)}}emit(e,...t){this.precheck&&!this.precheck(e,...t)||(this.onAnyCallBack&&setTimeout((()=>this.onAnyCallBack(e,...t))),this.subscriptions[e]&&this.subscriptions[e].forEach((e=>setTimeout((()=>e(...t))))))}constructor(){this.subscriptions={}}}},522766:(e,t,o)=>{"use strict";var n,i;o.d(t,{PlaylistSourceType:()=>n,isAutoplayEnabledForPlaylist:()=>s}),function(e){e.CATALOG="catalog",e.MESSAGE="im",e.FEED="feed",e.WALL="wall",e.ALBUM="album",e.CURATOR="curator",e.PLAYLIST="playlist",e.VKMIX="vkmix"}(n||(n={})),function(e){e.TYPE_CURRENT="current",e.TYPE_PLAYLIST="playlist",e.TYPE_MY="my",e.TYPE_ALBUM="album",e.TYPE_TEMP="temp",e.TYPE_RECOM="recoms",e.TYPE_SEARCH="search",e.TYPE_LIVE="live",e.TYPE_WALL="wall",e.TYPE_RECENT="recent",e.TYPE_RADIO="radio",e.TYPE_ARTICLE_TTS="article_tts"}(i||(i={}));const r=["radio","article_tts"],s=e=>!r.includes(e.getType())},260007:(e,t,o)=>{"use strict";o.d(t,{PlaylistQueue:()=>M});var n=o(327813),i=o(8520),r=o(476726),s=o(7144),a=o(57599),_=o(59052),c=o(735477),l=o(78362),u=o(514640),d=o(522766),p=o(632371),h=o(213347),m=o(805854),E=o(705744),f=o(365224),g=o(668592),y=o(746964);const{AUDIO_ITEM_INDEX_OWNER_ID:v,AUDIO_ITEM_INDEX_TRACK_CODE:w,AUDIO_ITEM_INDEX_ID:A,AUDIO_QUEUE_MAX_AUDIOS_COUNT:b,AUDIO_ITEM_INDEX_URL:T,AUDIO_ITEM_INDEX_TITLE:I,AUDIO_ITEM_INDEX_PERFORMER:P,AUDIO_ITEM_INDEX_EXTRA:C,AUDIO_ITEM_ACCESS_KEY:S,AUDIO_ITEM_INDEX_CONTEXT:O}=_.AUDIO_PLAYER_ENUMS;class M{get isAutoplayEnabled(){return this._autoplayQueue?.enabled??!1}get list(){return this._list}get shuffled(){return this._shuffled}get eventBus(){return this._eventBus}get source(){return this._source}get autoplayQueue(){return this.isAutoplaySupported?this._autoplayQueue:null}setSortedQueue(e,t){Array.isArray(e)&&(this._shuffled=!1,this._list=[],this.originalList=[],this.addToList(e),t&&this.setSource(t))}async setSortedQueueByPlaylist(e){return this.clean(),this.addPlaylist(e)}setSource(e){this._source=e}setAutoplaySourceFromPlaylist(e){if(!this.isAutoplaySupported)return;const t=(0,p.getPlaylistRawSource)(e),o=(0,m.getAutoplayPlaylistSource)(t);this.setAutoplaySource(o)}setAutoplaySource(e){this._autoplayQueue?.setSource({...e,offset:0})}getAudioIds(e){return"string"==typeof e?e.split("_"):"object"!=typeof e||Array.isArray(e)?[e[v],e[A]]:[e.ownerId,e.id]}compareAudiosIds(e,t){return!(!Array.isArray(e)||e.length<2||!t)&&(e[0]==t[v]&&e[1]==t[A])}fetchAudios(e){let t=e;return Array.isArray(t)&&(t=t.join(",")),this.fetchService.reloadAudios(t)}findAndFetchEmptyAudiosFrom(e){const t=[],o=[],n=this._list;let i=e+b;i=i<n.length?i:n.length-1;for(let r=e;r<=i;r++){const e=n[r];if(this.isEmptyAudio(e)&&e){const n=`${e[v]}_${e[A]}_${e[S]}`;t.push(n),o.push(r)}}return t.length<1?Promise.resolve(!0):this.fetchAudios(t).then((e=>!!e&&(o.forEach(((t,o)=>{if(e[o]){const i=(0,g.getAudioExtra)(e[o]);if(i){const r=(0,g.getAudioExtra)(n[t]);if(r){const t=(0,y.mergeAudioExtra)(r,i);t&&(e[o][C]=t)}else e[o][C]=n[t][C]}else e[o][C]=n[t][C];e[o][w]=n[t][w],n[t]=e[o]}})),!0))).catch((()=>!1))}getAudio(e){if(!e)return Promise.resolve(null);let t=null,o=null;const n=this.getAudioIds(e);return this._list.find(((e,i)=>!!this.compareAudiosIds(n,e)&&(o=i,t=e,!0))),t&&null!==o?this.isEmptyAudio(t)?this.findAndFetchEmptyAudiosFrom(o).then((e=>e&&null!==o?Promise.resolve(this._list[o]):Promise.resolve(null))).catch((()=>Promise.resolve(null))):Promise.resolve(t):Promise.resolve(null)}async getFirstAudio(e){const t=await this.getAudioAt(0);return t&&e&&(0,c.audioTupleToAudioObject)(t).isClaimed?this.getNextAudio(t,{repeat:!1,ignoreClaimed:e}):t}async getLastAudio(e){const t=this.length-1;if(t<0)return null;const o=await this.getAudioAt(t);return o&&e&&(0,c.audioTupleToAudioObject)(o).isClaimed?this.getPrevAudio(o,{repeat:!1,ignoreClaimed:e}):o}async getPrevAudio(e,t={}){const{ignoreClaimed:o}=t,n=this.indexOfAudio(e);if(n<0)return null;const i=n-1;if(i<0)return t.repeat?this.getLastAudio(o):null;const r=await this.getAudioAt(i);return r&&o&&(0,c.audioTupleToAudioObject)(r).isClaimed?this.getPrevAudio(r,t):r}async getNextAudio(e,t={}){const{autoplayQueue:o}=this,{ignoreClaimed:n}=t,i=this.indexOfAudio(e);if(i<0)return null;const r=i+1;if(r>=this.length){if(t.repeat)return this.getFirstAudio(n);if(o?.enabled){const e=o.list;if(e.length>0)return e[0]}return null}const s=await this.getAudioAt(r);return s&&n&&(0,c.audioTupleToAudioObject)(s).isClaimed?this.getNextAudio(s,t):s}indexOfAudio(e){if(!e)return-1;let t=this.getAudioIds(e);return this._list?this._list.findIndex((e=>this.compareAudiosIds(t,e))):-1}getAudioAt(e){return!Array.isArray(this._list)||this._list.length<=e?Promise.resolve(null):e<0?this.findAndFetchEmptyAudiosFrom(0).then((()=>this._list[0])):this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list[e]))}async getPrevAndNextAudios(e){if(!e)return[null,null];let t=null,o=null;const n=this._list.findIndex((t=>t[w]===e[w]));let i=n-1,r=n+1;if(i>=0&&(t=this._list[i]),r<this._list.length&&(o=this._list[r]),t&&this.isEmptyAudio(t)||o&&this.isEmptyAudio(o))try{await this.findAndFetchEmptyAudiosFrom(i>0?i:n)}catch(e){}return[t,o]}getAudios(e,t){return Number.isInteger(e)&&Number.isInteger(t)?(e<0&&(e=0),e>this._list.length?Promise.resolve(null):(t-e>b&&(t=e+b),t>this._list.length&&(t=this._list.length),this.findAndFetchEmptyAudiosFrom(e).then((()=>this._list.slice(e,t+1))))):Promise.resolve(null)}removeAudio(e){let t=this.indexOfAudio(e);return t>=0?(this._list.splice(t,1),t):-1}addToList(e,t,o){const n=this._list;let i=e;void 0!==t||o?i.forEach((e=>{const t=this.indexOfAudio(e);t>=0&&n.splice(t,1)})):i=i.filter((e=>-1===this.indexOfAudio(e))),i.forEach((e=>{null===e[C]&&(e[C]="[]"),e[I]=(0,s.clean)((0,s.replaceEntities)(e[I]).replace(/(<em>|<\/em>)/g,"")),e[P]=(0,s.clean)((0,s.replaceEntities)(e[P]).replace(/(<em>|<\/em>)/g,""))})),void 0===t?(this.shuffled&&this.originalList.push(...i),n.push(...i)):(this.shuffled&&this.originalList.push(...i),n.splice(t,0,...i))}addAudio(e,t){this.isArrayOfAudioTuples(e)?this.addToList(e,t):e?.length&&this.addToList([e],t)}isArrayOfAudioTuples(e){return Array.isArray(e)&&Array.isArray(e[0])}addEmptyAudios(e){const t=e.map((e=>{const{audio_raw_id:t,access_key:o,track_code:n}=e,[i,r]=t.split("_"),s=[];return s[v]=i,s[A]=r,s[S]=o,s[w]=n,s}));this.addToList(t,void 0,!0)}async addNoConsecutivePlaylist(e,t){const o=(0,p.getPlaylistRawSource)(e),n=(0,h.getPlaylistSource)(o),i=(0,m.getAutoplayPlaylistSource)(o,(0,f.getAudioFullId)(t));return"autoplay"===t[O]||this._autoplayQueue?.hasSource(i)||(this.setSource(n),this.setAutoplaySource(i),this._list=[],this.addToList([t])),!0}async addPlaylist(e){if(this.isAutoplayEnabledForPlaylist=(0,d.isAutoplayEnabledForPlaylist)(e),!this.isAutoplayEnabledForPlaylist){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}const{isAutoplaySupported:t}=this,o=(0,p.getPlaylistRawSource)(e),n=(0,h.getPlaylistSource)(o);if((0,i.isEqual)(n,this._source)){if(t&&this.length){const e=(0,m.getAutoplayPlaylistSource)(o);this.setAutoplaySource(e)}return!0}if(this.setSource(n),n.source===d.PlaylistSourceType.VKMIX){this.clean();const t=e.getAudiosList();return this.addToList(t),this._autoplayQueue?.clean(),!0}if(e.isLive()||e?.isLoadable())return this._autoplayQueue?.clean(),!0;if(t){const t=(0,m.getAutoplayPlaylistSource)(o);if(!this._source)return!1;try{const{audioIds:o}=await this.fetchService.getAudioIdsBySource(n);if(!Array.isArray(o)||0===o.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(o),this.setAutoplaySource(t),!0}catch{return!1}}try{const t=await e.getAudioIds();if(!Array.isArray(t)||0===t.length){const t=e.getAudiosList();return this.addToList(t),!0}return this.addEmptyAudios(t),!0}catch{return!1}}moveAudio(e,t){let o=this._list.splice(e,1);e<t&&(t-=1),this._list.splice(t,0,o[0])}clean(){this._list=[],this.originalList=[],this._shuffled=!1,this._source=null}moveAudioAtFirstPosition(e){let t=this.indexOfAudio(e);-1!==t?(this._list.splice(t,1),this._list.unshift(e)):this._list.unshift(e)}removeSortedList(){this.originalList&&(this._list=[].concat(this.originalList)),this._shuffled=!1}get length(){return this.list.length}isEmpty(){return!this.length}shuffle(e,t){if(!(e&&this.shuffled||!e&&!this.shuffled)){if(e){const[e]=this._list;this.originalList=[...this._list],this._list=function(e){let t=e.length;for(;t>0;){const o=Math.floor(Math.random()*t);t--;const n=e[t];e[t]=e[o],e[o]=n}return e}([...this._list]),!t&&e&&this.moveAudioAtFirstPosition(e),this._shuffled=!0}else this._list=[...this.originalList],this._shuffled=!1;return!0}}resetShuffle(){this.shuffle(!1)}constructor(e,t){if(this._autoplayQueue=null,this.isAutoplaySupported=(0,r.partConfigEnabled)("autoplay_web")&&!(0,E.isMvk)(),this.isEmptyAudio=e=>!(e&&(e[T]||(0,a.isClaimedAudio)(e))),M.instance)return M.instance;if(this.fetchService=e,this._list=[],this.originalList=[],this._source=null,this._shuffled=!1,this._eventBus=t,this.isAutoplaySupported){const o=new l.AutoplayQueue(e,t,(()=>this._list.map(f.getAudioFullId)));this._autoplayQueue=o,this.isAutoplayEnabledForPlaylist=!0,this._eventBus.subscribe(u.AudioPlayerEventType.PLAY_TRACK_FROM_AUTOPLAY,(e=>{const t=o.indexOf(e);if(t>=0){const e=o.spliceHead(t);this.addToList(e)}}))}M.instance=this,(0,r.partConfigEnabled)("audio_mobx")&&(0,n.makeObservable)(this,{_list:n.observable,_shuffled:n.observable,setSortedQueue:n.action,setSortedQueueByPlaylist:n.action,shuffle:n.action,resetShuffle:n.action,clean:n.action,removeAudio:n.action,addPlaylist:n.action,moveAudio:n.action,removeSortedList:n.action})}}},624107:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectController:()=>_});var n,i=o(640434),r=o(587382),s=o(509744);let a;!function(e){e.Opened="opened",e.Closed="closed"}(n||(n={}));class _{static get(){if(!a)throw new Error("SpecialProjectController must be initialized.");return a}static init(e){if(!e)throw new Error("SpecialProjectController must be initialized with showModal.");return a||(a=new _(e),a)}showModal(e,t){this.showCurrentModal&&this.showCurrentModal(t,this.tryToSendCloseReason(e))}constructor(e){this.projects={},this.statCollector=null,this.wasProjectShown=e=>!!this.projects[e],this.tryModal=async(e,t)=>{if(!this.wasProjectShown(e))try{const o=await this.getSpecialProject(e);this.showModal(e,o),this.statCollector?.open(+e,t)}catch(e){}finally{this.projects[e]="opened"}},this.tryToSendCloseReason=e=>t=>{"closed"!==this.projects[e]&&(this.consumeSpecialProject(e,t),this.statCollector?.close(),this.projects[e]="closed")},this.getSpecialProject=async e=>{const t=await(0,i.getSpecialProject)({special_project_id:e});return(0,s.mapSpecialProjectData)(t)},this.consumeSpecialProject=(e,t)=>(0,i.consumeSpecialProject)({special_project_id:e,reason:t}),this.statCollector=new r.SpecialProjectStatCollector,this.showCurrentModal=e}}},587382:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectStatCollector:()=>r});var n=o(695290),i=o(581903);class r{open(e,t){if(this.openedModal)throw new Error("Modal must be closed before opening");this.openedModal={id:e,trackCode:t,startView:this.productCollector.getCurrentTime()}}close(){const{openedModal:e}=this;if(!e)throw new Error("Modal must be open before closing");this.sendView(e),this.openedModal=null}sendView(e){const t={end_view:this.productCollector.getCurrentTime(),start_view:e.startView,type:n.ViewProductionStatEventTypes.TYPE_CATALOG_SPECIAL_PROJECT_ITEM},o={type:n.EventItemType.AUDIO_SPECIAL_PROGECT_MODAL,id:e.id,track_code:e.trackCode};this.viewCollector.logEvent(t,o)}constructor(){this.openedModal=null,this.productCollector=new i.ProductionStatCollector,this.viewCollector=new i.ViewStatCollector(this.productCollector)}}},102629:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectHeader:()=>c});var n=o(474848),i=o(296540),r=o(414698),s=o(8520),a=o(627338);const _=e=>{const[t]=e.filter((e=>!!e&&!!e.url)).map((e=>e.url));return t},c=(0,i.memo)((({style:e,image:t=[],className:o,backgroundImage:i=[]})=>{const c=_(i),l=_(t);return(0,n.jsx)("div",{className:(0,s.classNames)(a.default.root,o,{[a.default.singleImage]:"image"===e}),style:{backgroundImage:`url(${"avatar"===e?c:l})`},children:"avatar"===e&&(0,n.jsx)(r.Avatar,{src:l,size:72})})}))},509744:(e,t,o)=>{"use strict";o.d(t,{mapSpecialProjectData:()=>n});const n=e=>({...e,backgroundImage:e.background_image})},804179:(e,t,o)=>{"use strict";function n(e){const t=e?.options;if(!t)return[];const o=[];for(const e of t)switch(e.type){case"copy":{const{name:t,copyText:n}=e;if(!t||!n)break;const i=()=>{navigator.clipboard.writeText(n)};o.push({type:"action",label:t,action:i});break}case"default":{const{name:t,clickLink:n}=e;if(!t)break;if(n){o.push({type:"link",label:t,href:n});break}break}}return o}o.d(t,{makeChoicesFromAdman:()=>n})},981188:(e,t,o)=>{"use strict";o.d(t,{makeAudioAdFromAdman:()=>i});var n=o(804179);function i(e){return{id:e.banner_id,choices:(0,n.makeChoicesFromAdman)(e.adChoices)}}},542703:(e,t,o)=>{"use strict";function n(e){return new Promise(((t,o)=>{window.ajax.post("al_audio.php",{act:"get_lyrics",aid:e.audio_id},{onDone:t,onFail:e=>(o(e),!0)})}))}o.d(t,{getLyrics:()=>n})},640434:(e,t,o)=>{"use strict";o.d(t,{consumeSpecialProject:()=>r,getSpecialProject:()=>i});var n=o(385608);const i=(0,n.createMethod)("audio.getSpecialProject"),r=(0,n.createMethod)("audio.consumeSpecialProject")},385608:(e,t,o)=>{"use strict";o.d(t,{createMethod:()=>i});var n=o(933052);function i(e){return t=>(0,n.api)(e,t)}},59052:(e,t,o)=>{"use strict";var n,i;o.d(t,{AUDIO_PLAYER_ENUMS:()=>r,AudioPlaylistContext:()=>s,EAudioFlagBit:()=>i,EAudioTupleIndex:()=>n}),function(e){e[e.ID=0]="ID",e[e.OWNER_ID=1]="OWNER_ID",e[e.URL=2]="URL",e[e.TITLE=3]="TITLE",e[e.PERFORMER=4]="PERFORMER",e[e.DURATION=5]="DURATION",e[e.ALBUM_ID=6]="ALBUM_ID",e[e.AUTHOR_LINK=8]="AUTHOR_LINK",e[e.LYRICS=9]="LYRICS",e[e.FLAGS=10]="FLAGS",e[e.CONTEXT=11]="CONTEXT",e[e.EXTRA=12]="EXTRA",e[e.HASHES=13]="HASHES",e[e.COVER_URL=14]="COVER_URL",e[e.ADS=15]="ADS",e[e.SUBTITLE=16]="SUBTITLE",e[e.MAIN_ARTISTS=17]="MAIN_ARTISTS",e[e.FEAT_ARTISTS=18]="FEAT_ARTISTS",e[e.ALBUM=19]="ALBUM",e[e.TRACK_CODE=20]="TRACK_CODE",e[e.RESTRICTION=21]="RESTRICTION",e[e.ALBUM_PART=22]="ALBUM_PART",e[e.ACCESS_KEY=24]="ACCESS_KEY",e[e.CHART_INFO=25]="CHART_INFO",e[e.TRACK_PAGE_ID=26]="TRACK_PAGE_ID",e[e.IS_ORIGINAL_SOUND=27]="IS_ORIGINAL_SOUND",e[e.ADMIN_URL=28]="ADMIN_URL",e[e.UMA_QUERY_URL=29]="UMA_QUERY_URL"}(n||(n={})),function(e){e[e.HAS_LYRICS=1]="HAS_LYRICS",e[e.CAN_ADD=2]="CAN_ADD",e[e.CLAIMED=4]="CLAIMED",e[e.QUEUE=8]="QUEUE",e[e.HQ=16]="HQ",e[e.LONG_PERFORMER=32]="LONG_PERFORMER",e[e.UMA=128]="UMA",e[e.REPLACEABLE=512]="REPLACEABLE",e[e.EXPLICIT=1024]="EXPLICIT",e[e.SHOW_INFO=8192]="SHOW_INFO"}(i||(i={}));const r={AUDIO_ITEM_INDEX_ID:0,AUDIO_ITEM_INDEX_OWNER_ID:1,AUDIO_ITEM_INDEX_URL:2,AUDIO_ITEM_INDEX_TITLE:3,AUDIO_ITEM_INDEX_PERFORMER:4,AUDIO_ITEM_INDEX_DURATION:5,AUDIO_ITEM_INDEX_ALBUM_ID:6,AUDIO_ITEM_INDEX_AUTHOR_LINK:8,AUDIO_ITEM_INDEX_LYRICS:9,AUDIO_ITEM_INDEX_FLAGS:10,AUDIO_ITEM_INDEX_CONTEXT:11,AUDIO_ITEM_INDEX_EXTRA:12,AUDIO_ITEM_INDEX_HASHES:13,AUDIO_ITEM_INDEX_COVER_URL:14,AUDIO_ITEM_INDEX_ADS:15,AUDIO_ITEM_INDEX_SUBTITLE:16,AUDIO_ITEM_INDEX_MAIN_ARTISTS:17,AUDIO_ITEM_INDEX_FEAT_ARTISTS:18,AUDIO_ITEM_INDEX_ALBUM:19,AUDIO_ITEM_INDEX_TRACK_CODE:20,AUDIO_ITEM_INDEX_RESTRICTION:21,AUDIO_ITEM_INDEX_ALBUM_PART:22,AUDIO_ITEM_ACCESS_KEY:24,AUDIO_ITEM_CHART_INFO_INDEX:25,AUDIO_ITEM_INDEX_TRACK_PAGE_ID:26,AUDIO_ITEM_INDEX_IS_ORIGINAL_SOUND:27,AUDIO_ITEM_INDEX_ADMIN_URL:28,AUDIO_ITEM_INDEX_UMA_QUERY_URL:29,AUDIO_ITEM_HAS_LYRICS_BIT:1,AUDIO_ITEM_CAN_ADD_BIT:2,AUDIO_ITEM_CLAIMED_BIT:4,AUDIO_ITEM_QUEUE_BIT:8,AUDIO_ITEM_HQ_BIT:16,AUDIO_ITEM_LONG_PERFORMER_BIT:32,AUDIO_ITEM_UMA_BIT:128,AUDIO_ITEM_REPLACEABLE:512,AUDIO_ITEM_EXPLICIT_BIT:1024,AUDIO_ITEM_SHOW_INFO_BIT:8192,AUDIO_ENOUGH_LOCAL_SEARCH_RESULTS:500,AUDIO_RECOMS_TYPE_LISTENED:"recoms6",AUDIO_PLAYING_CLS:"audio_row__playing",AUDIO_CURRENT_CLS:"audio_row__current",AUDIO_DURATION_CLS:"audio_row__duration",AUDIO_LAYER_HEIGHT:550,AUDIO_LAYER_MIN_WIDTH:400,AUDIO_LAYER_MAX_WIDTH:1e3,AUDIO_HQ_LABEL_CLS:"audio_hq_label_show",AUDIO_MAX_AUDIOS_IN_SNIPPET:5,AUDIO_ROW_COVER_SIZE:40,AUDIO_ROW_PLAY_SIZE:24,AUDIO_ROW_ACTION_ROW_ITEM:'<button class="audio_row__more_action audio_row__more_action_%0% _audio_row__more_action_%0% %3%">%2%</button>',AUDIO_QUEUE_MAX_AUDIOS_COUNT:35,LOG_LS_KEY:"audiolog",ONBOARDING_ARTISTS_LS_KEY:"artists_onboarding",AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY:"audio_recoms_onboarding_need_skip"};var s;!function(e){e.USER_WALL="user_wall",e.GROUP_WALL="group_wall",e.WALL="wall",e.FEED="feed"}(s||(s={}))},895749:(e,t,o)=>{"use strict";o.d(t,{parseAudioPlaylistIdentityFromHref:()=>n.parseAudioPlaylistIdentityFromHref,setAudioLastListRefCookie:()=>i.setAudioLastListRefCookie,setAudioLastListRefCookieDebounced:()=>i.setAudioLastListRefCookieDebounced});var n=o(618275),i=o(291244)},618275:(e,t,o)=>{"use strict";o.d(t,{parseAudioPlaylistIdentityFromHref:()=>r});var n=o(962954);const i=/\/music\/(playlist|album)\/(-?\d+_\d+)/i;function r(e){if(!e)return;const t=e.match(i);if(!t)return;const{2:o}=t;if(o)try{return n.OwnedIdentity.fromRawId(o)}catch{return}}},291244:(e,t,o)=>{"use strict";o.d(t,{setAudioLastListRefCookie:()=>c,setAudioLastListRefCookieDebounced:()=>l});var n=o(8520),i=o(643010),r=o(772546),s=o(476726);const a="remixaudio_last_list_ref",_=1/24/60;function c({ref:e,list:t}){if(!(0,s.partConfigEnabled)("audio_player_stats_ref_web"))return;const o=JSON.stringify({list_id:(0,i.getIdentityRawId)(t),ref:e});(0,r.setCookie)(a,o,_)}const l=(0,n.debounce)(c,50)},486848:(e,t,o)=>{"use strict";o.d(t,{ensureAutoplayService:()=>a});var n=o(32489),i=o(826316),r=o(476726);let s;function a(){return s||(s=function(){const e=(0,n.createDomain)("audio/autoplay"),t=(0,i.ensureAccountInfoService)(),{$accountInfo:o,setInfoFx:s}=t,a=(0,r.partConfigEnabled)("autoplay_web_toggle"),_=e.createStore(a),c=e.createStore(!1),l=e.createEffect((e=>s({query:{name:"audio_autoplay",value:e}})));return{$toggleSupported:_,$enabled:c,setEnabledFx:l,init:function(){_.on(o,((e,{audio_autoplay:t})=>a&&void 0!==t)),(0,n.sample)({source:{accountInfo:o,toggleSupported:_},fn:({accountInfo:e,toggleSupported:t})=>!t||(e.audio_autoplay??!1),target:c}),t.initEvent()}}}()),s}},812140:(e,t,o)=>{"use strict";o.d(t,{checkIsDownloadedUrl:()=>i});var n=o(493810);function i(e){return(0,n.audioUnmaskSource)(e).includes("blob:http")}},712982:(e,t,o)=>{"use strict";o.d(t,{clearObject:()=>r});var n=o(596034),i=o(269592);function r(e){return(0,n.default)(e,i.default)}},287013:(e,t,o)=>{"use strict";o.d(t,{decodeHTML:()=>r});var n=o(8520);const i={"amp;":"&","#38;":"&","lt;":"<","#60;":"<","gt;":">","#62;":">","apos;":"'","#39;":"'","quot;":'"',"#34;":'"',"copy;":"©"};function r(e){return(0,n.decodeHTMLEntities)(e,i)}},668592:(e,t,o)=>{"use strict";o.d(t,{getAudioExtra:()=>r});var n=o(7144),i=o(59052);function r(e){if(!e)return null;let t;if((0,n.isObject)(e)){t=e.extra}else{t=e[i.EAudioTupleIndex.EXTRA]}if((0,n.isObject)(t))return t;try{return JSON.parse(t||"{}")}catch(e){return null}}},365224:(e,t,o)=>{"use strict";o.d(t,{getAudioFullId:()=>i});var n=o(59052);const i=e=>e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[n.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]},805854:(e,t,o)=>{"use strict";o.d(t,{getAutoplayPlaylistSource:()=>n});const n=(e,t="")=>{const{entity_id:o,...n}=e;return{...n,audio_id:t}}},243113:(e,t,o)=>{"use strict";o.d(t,{getCurrentAudio:()=>r});var n=o(735477),i=o(705744);function r(){const e={id:0,ownerId:0};try{return(0,i.isMvk)()?window.audio.getCurrent()||e:(0,n.audioTupleToAudioObject)(window.getAudioPlayer().getCurrentAudio())||e}catch(t){return e}}},632371:(e,t,o)=>{"use strict";o.d(t,{getPlaylistRawSource:()=>i});var n=o(522766);const i=e=>{const t=e.getContext(),o=e.getBlockId(),i=e.getFullId();if(o)return{source:n.PlaylistSourceType.CATALOG,section_id:o,entity_id:o,playlist_id:i};if(e.getType()===n.PlaylistSourceType.CURATOR)return{source:n.PlaylistSourceType.CURATOR,section_id:o,entity_id:o,playlist_id:i};const{sourceType:r,id:s}=(e=>{if(e){const[t,o]=e.split(":");return{sourceType:t,id:o}}return{sourceType:"",id:""}})(t);if(r.includes("wall"))return{source:n.PlaylistSourceType.WALL,entity_id:s,owner_id:s};switch(r){case n.PlaylistSourceType.CATALOG:return{source:n.PlaylistSourceType.CATALOG,section_id:s,entity_id:s,playlist_id:i,block_id:o};case n.PlaylistSourceType.MESSAGE:return{source:n.PlaylistSourceType.MESSAGE,entity_id:`_${s}`};case n.PlaylistSourceType.FEED:return{source:n.PlaylistSourceType.FEED,entity_id:s,owner_id:s};case n.PlaylistSourceType.ALBUM:return{source:n.PlaylistSourceType.ALBUM,entity_id:s};case n.PlaylistSourceType.VKMIX:return{source:n.PlaylistSourceType.VKMIX,entity_id:s};default:return{source:n.PlaylistSourceType.PLAYLIST,entity_id:i,playlist_id:i}}}},213347:(e,t,o)=>{"use strict";o.d(t,{getPlaylistSource:()=>i});var n=o(522766);const i=e=>{let t;return t=e.source===n.PlaylistSourceType.CATALOG&&!1===e.block_id?{source:n.PlaylistSourceType.PLAYLIST,entity_id:e.playlist_id}:{source:e.source||"",entity_id:e.entity_id||""},t}},777725:(e,t,o)=>{"use strict";o.d(t,{getSpecialProjectId:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return t?.specialProjectId??null}},668089:(e,t,o)=>{"use strict";o.d(t,{isArticleTts:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.articleTts}},761396:(e,t,o)=>{"use strict";o.d(t,{isAudioPWAFeature:()=>i});var n=o(476726);function i(){return(0,n.partConfigEnabled)("mvk_music_pwa")}},57599:(e,t,o)=>{"use strict";o.d(t,{isClaimedAudio:()=>r});var n=o(735477),i=o(59052);function r(e){return!!e&&!!((e=(0,n.audioTupleToAudioObject)(e)).flags&i.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_CLAIMED_BIT)}},866953:(e,t,o)=>{"use strict";o.d(t,{isExternalStream:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.externalStream}},339330:(e,t,o)=>{"use strict";o.d(t,{isMarusiaTale:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.marusiaTale}},950911:(e,t,o)=>{"use strict";o.d(t,{isMarusiaTrack:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.voiceAssistant}},391111:(e,t,o)=>{"use strict";o.d(t,{isRadio:()=>i});var n=o(668592);function i(e){const t=(0,n.getAudioExtra)(e);return!!t&&!!t.radio}},746964:(e,t,o)=>{"use strict";function n(e,t){return e&&t?{...e,...t}:null}o.d(t,{mergeAudioExtra:()=>n})},244579:(e,t,o)=>{"use strict";o.d(t,{mergeAudioTupleWithoutContext:()=>i});var n=o(59052);function i(e,t){const o=[...e];return Object.assign(o,t),o[n.EAudioTupleIndex.CONTEXT]=e[n.EAudioTupleIndex.CONTEXT],o}},504952:(e,t,o)=>{"use strict";o.d(t,{AudioLyricsProvider:()=>l});var n=o(678751),i=o(969621),r=o(542703),s=o(651927),a=o(735477),_=o(955107),c=o(271034);class l{get(e){return this.lyrics.get(e)||{status:c.EAudioLyricsStatus.Pending}}listen(e,t){return this.eventEmitter.on(e,t),()=>{this.eventEmitter.off(e,t)}}setLoading(e){const t={status:c.EAudioLyricsStatus.Loading};this.lyrics.set(e,t),this.eventEmitter.emit(e,t)}setLoaded(e,t){const o={status:c.EAudioLyricsStatus.Loaded,data:t};this.lyrics.set(e,o),this.eventEmitter.emit(e,o)}setError(e,t){const o={status:c.EAudioLyricsStatus.Error,errorMessage:t};this.lyrics.set(e,o),this.eventEmitter.emit(e,o)}constructor(){this.lyrics=new Map,this.eventEmitter=new n.default,this.fetch=(0,i.dedupeAsyncCallback)((async e=>{const t=(0,a.audioTupleToAudioObject)(e),{fullId:o,hasLyrics:n}=t;try{const e=this.lyrics.get(o);if(e&&e.status===c.EAudioLyricsStatus.Loaded)return e.data||null;if(!n)return this.setLoaded(o,null),null;this.setLoading(o);const t=await(0,r.getLyrics)({audio_id:o}),i=(0,_.mapLyricsResponse)(t);return this.setLoaded(o,i),i}catch(e){throw this.setError(o,e.message||"unknown"),e}}),(e=>(0,s.getAudioTupleFullId)(e)))}}},955107:(e,t,o)=>{"use strict";o.d(t,{mapLyricsResponse:()=>i});var n=o(287013);function i(e){if(Array.isArray(e))return null;const{credits:t,lyrics:o}=e;if(!o)return null;const{text:i,timestamps:r,ugc:s}=o||{},a={};return r&&(a.karaoke=function(e){return e.map((e=>{const{line:t,...o}=e;return t?{...o,text:(0,n.decodeHTML)(t)}:o}))}(r)),i&&(a.static=i.map((e=>({text:(0,n.decodeHTML)(e)})))),s&&(a.ugc=s.map((e=>({text:(0,n.decodeHTML)(e)})))),a.karaoke?.length||a.static?.length||a.ugc?.length?{lines:a,credits:t&&(0,n.decodeHTML)(t)}:null}},271034:(e,t,o)=>{"use strict";var n;o.d(t,{EAudioLyricsStatus:()=>n}),function(e){e[e.Pending=0]="Pending",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.Error=3]="Error"}(n||(n={}))},735477:(e,t,o)=>{"use strict";o.d(t,{audioTupleToAudioObject:()=>l});var n=o(7144),i=o(59052),r=o(694581),s=o(651927),a=o(476726),_=o(391111);const c=Symbol("audioObjectSymbol");function l(e){if(!e)return null;if("string"==typeof e)return{id:e};if(!Array.isArray(e))return e.__audioObject!==c&&console.warn("audioTupleToAudioObject get audio object that not marked as audioObjectSymbol",{audio:e}),e;const t=e[i.EAudioTupleIndex.FLAGS],o=(e[i.EAudioTupleIndex.HASHES]||"").split("/"),l=(e[i.EAudioTupleIndex.COVER_URL]||"").split(/(,(?!\d))/g).filter((e=>","!==e));return l.length<2&&(0,_.isRadio)(e)&&l.push(e[i.EAudioTupleIndex.COVER_URL],e[i.EAudioTupleIndex.COVER_URL]),{id:(0,n.intval)(e[i.EAudioTupleIndex.ID]),owner_id:(0,n.intval)(e[i.EAudioTupleIndex.OWNER_ID]),ownerId:e[i.EAudioTupleIndex.OWNER_ID],fullId:(0,s.getAudioTupleFullId)(e),title:e[i.EAudioTupleIndex.TITLE]||"",subTitle:e[i.EAudioTupleIndex.SUBTITLE],performer:(0,r.getAudioPerformers)(e,!1),mainArtists:e[i.EAudioTupleIndex.MAIN_ARTISTS],featArtists:e[i.EAudioTupleIndex.FEAT_ARTISTS],authorLink:e[i.EAudioTupleIndex.AUTHOR_LINK],duration:(0,n.intval)(e[i.EAudioTupleIndex.DURATION]),lyrics:e[i.EAudioTupleIndex.LYRICS],url:e[i.EAudioTupleIndex.URL],context:e[i.EAudioTupleIndex.CONTEXT],extra:e[i.EAudioTupleIndex.EXTRA],accessKey:e[i.EAudioTupleIndex.ACCESS_KEY],addHash:o[0]||"",editHash:o[1]||"",actionHash:o[2]||"",deleteHash:o[3]||"",replaceHash:o[4]||"",urlHash:o[5]||"",restoreHash:o[6]||"",canEdit:!!o[1],canDelete:o[3]===e[i.EAudioTupleIndex.ACCESS_KEY]?window.vk.id===e[i.EAudioTupleIndex.OWNER_ID]:Boolean(o[3]),flags:t,isOriginalSound:e[i.EAudioTupleIndex.IS_ORIGINAL_SOUND],hasLyrics:!!(t&i.EAudioFlagBit.HAS_LYRICS),isLongPerformer:!!(t&i.EAudioFlagBit.LONG_PERFORMER),isClaimed:!!(t&i.EAudioFlagBit.CLAIMED),isFromQueue:!!(t&i.EAudioFlagBit.QUEUE),isExplicit:!!(t&i.EAudioFlagBit.EXPLICIT),isUMA:!!(t&i.EAudioFlagBit.UMA),isReplaceable:!!(t&i.EAudioFlagBit.REPLACEABLE),canAdd:!!(t&i.EAudioFlagBit.CAN_ADD),showInfo:!!(t&i.EAudioFlagBit.SHOW_INFO),coverUrl_s:(0,a.partConfigEnabled)("audio_longtap_web")?l[1]:l[0],coverUrl_p:l[1],coverUrl_l:l[0],hasTrackPage:!!e[i.EAudioTupleIndex.TRACK_PAGE_ID],trackPageId:e[i.EAudioTupleIndex.TRACK_PAGE_ID],ads:e[i.EAudioTupleIndex.ADS],album:e[i.EAudioTupleIndex.ALBUM],albumId:(0,n.intval)(e[i.EAudioTupleIndex.ALBUM_ID]),albumPart:(0,n.intval)(e[i.EAudioTupleIndex.ALBUM_PART]),trackCode:e[i.EAudioTupleIndex.TRACK_CODE],restrictionStatus:e[i.EAudioTupleIndex.RESTRICTION],chartInfo:e[i.EAudioTupleIndex.CHART_INFO],adminUrl:e[i.EAudioTupleIndex.ADMIN_URL]||"",umaQueryUrl:e[i.EAudioTupleIndex.UMA_QUERY_URL]||"",__audioObject:c}}},651927:(e,t,o)=>{"use strict";o.d(t,{getAudioTupleFullId:()=>i});var n=o(59052);function i(e){return`${e[n.EAudioTupleIndex.OWNER_ID]}_${e[n.EAudioTupleIndex.ID]}`}},188143:(e,t,o)=>{"use strict";o.d(t,{toTrackedAudioData:()=>n.toTrackedAudioData});var n=o(373890);o(190228)},373890:(e,t,o)=>{"use strict";o.d(t,{toTrackedAudioData:()=>s});var n=o(264544),i=o(735477),r=o(668592);function s(e){if(!e||"object"!=typeof e)return;const t=Array.isArray(e)?(0,i.audioTupleToAudioObject)(e):e;return t?function(e){const t=e.extra??"{}",o="string"==typeof t?JSON.parse(t):t,i={id:e.id,ownerId:e.ownerId,accessKey:e.accessKey};let s={...i,identity:i,title:e.title,author:{raw:e.performer,main:[],feat:[]},url:e.url,duration:e.duration,isExplicit:e.isExplicit,trackCode:e.trackCode??"",artwork:[]};if(o.podcast)return{...s,type:n.AudioType.PodcastEpisode,podcastId:s.ownerId};if(o.radio)return{...s,type:n.AudioType.Radio};return{...s,type:n.AudioType.MusicTrack,hasLyrics:e.hasLyrics??!1,disliked:(0,r.getAudioExtra)(e)?.dislike??!1}}(t):void 0}},190228:(e,t,o)=>{"use strict";o(441914),o(59052)},902614:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitch:()=>u});var n=o(434518),i=o(763812),r=o(942451),s=o(572466),a=o(122611),_=o(7263);const c=(0,r.makeSharedState)("audio-players-switch",(()=>({instance:null})),{version:4});var l=(0,i._)("_resume");class u{static ensure(e){const t=c();return t.instance||(t.instance=new u(e.resolve(s.EmitterFactory))),t.instance}connect(e){const t=new _.AudioPlayersSwitchChannel(e,this.emitterFactory),o=this.handlePlay.bind(this,t),n=this.handleStop.bind(this,t);t.events.on("play",o),t.events.on("stop",n);return{emit:t.emitter.emit.bind(t.emitter),disconnect:()=>{t.events.off("play",o),t.events.off("stop",n),this.activeChannel===t&&(this.activeChannel=null)}}}resume(e={reason:a.AudioPlayerPlayAudioEventReason.Unknown}){return(0,n._)(this,l)[l]({...e,reason:e.reason??a.AudioPlayerPlayAudioEventReason.Unknown})}autoResume(e){(0,n._)(this,l)[l]({...e,reason:a.AudioPlayerPlayAudioEventReason.ChannelAutoResume})}pause(e={}){this.activeChannel&&!this.activeChannel.state.isPaused&&(e.initiatedByCalls?this.activeChannel.pauseByCalls(e):this.activeChannel.pause(e))}stop(e={}){this.activeChannel&&(this.activeChannel.stop(e),this.activeChannel=null)}handlePlay(e){e!==this.activeChannel&&this.activeChannel?.state.isPlaying&&this.activeChannel.pause({}),this.activeChannel=e}handleStop(e){e===this.activeChannel&&(this.activeChannel=null)}constructor(e){Object.defineProperty(this,l,{value:d}),this.emitterFactory=e,this.activeChannel=null}}function d(e){!this.activeChannel||this.activeChannel.state.isPlaying||e.initiatedByCalls&&!this.activeChannel.state.isPausedByCalls||this.activeChannel.resume(e)}},7263:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitchChannel:()=>c});var n=o(434518),i=o(763812),r=(0,i._)("_connectEvents"),s=(0,i._)("_handlePlay"),a=(0,i._)("_handlePause"),_=(0,i._)("_handleStop");class c{get events(){return this.emitter.listenable}get state(){return this._state}set state(e){this._state={...this._state,...e},(this._state.isPlaying||this._state.isPaused||this._state.isPausedByCalls)&&(this._state.isIdle=!1)}pauseByCalls(e){this.state={isPausedByCalls:!0},this.pause(e)}constructor(e,t){Object.defineProperty(this,r,{value:l}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this.emitterFactory=t,this._state={isIdle:!0,isPlaying:!1,isPaused:!1,isPausedByCalls:!1},this.emitter=this.emitterFactory.create(),(0,n._)(this,s)[s]=()=>{this.state={isPlaying:!0,isPaused:!1,isPausedByCalls:!1}},(0,n._)(this,a)[a]=()=>{this.state={isPlaying:!1,isPaused:!0}},(0,n._)(this,_)[_]=()=>{this.state={isPlaying:!1,isPaused:!1,isPausedByCalls:!1}},this.resume=e.resume,this.pause=e.pause,this.stop=e.stop,(0,n._)(this,r)[r]()}}function l(){const{events:e}=this;e.on("play",(0,n._)(this,s)[s]),e.on("pause",(0,n._)(this,a)[a]),e.on("stop",(0,n._)(this,_)[_])}},157928:(e,t,o)=>{"use strict";o.d(t,{AudioPlayersSwitch:()=>n.AudioPlayersSwitch});var n=o(902614)},398128:(e,t,o)=>{"use strict";o.d(t,{QueueListener:()=>n});class n{constructor(e){this.queueHandler=e}}},311006:(e,t,o)=>{"use strict";var n,i,r,s;o.d(t,{AudioPlayerPauseAudioEventReason:()=>i,AudioPlayerPlayAudioEventReason:()=>n,AudioPlayerSeekEventReason:()=>s,AudioPlayerStopAudioEventReason:()=>r}),function(e){e.PlayButton="PLAY_BUTTON",e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.NextMediaSession="NEXT_MEDIA_SESSION",e.PrevMediaSession="PREV_MEDIA_SESSION",e.MixAndPlayButton="MIX_AND_PLAY_BUTTON",e.ListButton="LIST_BUTTON",e.AudioButton="AUDIO_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.QueueContinuationAfterError="QUEUE_CONTINUATION_AFTER_ERROR",e.Autoplay="AUTOPLAY",e.Repeat="REPEAT",e.Voice="VOICE",e.NextVoice="NEXT_VOICE",e.PrevVoice="PREV_VOICE",e.ChannelAutoResume="CHANNEL_AUTO_RESUME",e.Unknown="UNKNOWN"}(n||(n={})),function(e){e.PauseButton="PAUSE_BUTTON",e.MediaSession="MEDIA_SESSION",e.ChannelAutoPause="CHANNEL_AUTO_PAUSE",e.Voice="VOICE",e.Paywall="PAYWALL",e.Unknown="UNKNOWN"}(i||(i={})),function(e){e.NextButton="NEXT_BUTTON",e.PrevButton="PREV_BUTTON",e.QueueContinuation="QUEUE_CONTINUATION",e.Adv="ADV",e.Repeat="REPEAT",e.ChangeQueue="CHANGE_QUEUE",e.Clear="CLEAR",e.Error="ERROR",e.Unknown="UNKNOWN"}(r||(r={})),function(e){e.SliderForward="SLIDER_FORWARD",e.SliderBack="SLIDER_BACK",e.TapForward="TAP_FORWARD",e.TapBack="TAP_BACK",e.DoubleTapForward="DOUBLE_TAP_FORWARD",e.DoubleTapBack="DOUBLE_TAP_BACK",e.Unknown="UNKNOWN"}(s||(s={}))},953872:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerEventEmitter:()=>i});var n=o(572466);function i(e){return e.resolve(n.EmitterFactory).create()}},37380:(e,t,o)=>{"use strict";o.d(t,{getStopReasonForPlayReason:()=>i});var n=o(311006);function i(e){switch(e){case n.AudioPlayerPlayAudioEventReason.QueueContinuation:return n.AudioPlayerStopAudioEventReason.QueueContinuation;case n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError:return n.AudioPlayerStopAudioEventReason.Error;case n.AudioPlayerPlayAudioEventReason.NextButton:case n.AudioPlayerPlayAudioEventReason.NextMediaSession:case n.AudioPlayerPlayAudioEventReason.NextVoice:return n.AudioPlayerStopAudioEventReason.NextButton;case n.AudioPlayerPlayAudioEventReason.PrevButton:case n.AudioPlayerPlayAudioEventReason.PrevMediaSession:case n.AudioPlayerPlayAudioEventReason.PrevVoice:return n.AudioPlayerStopAudioEventReason.PrevButton;case n.AudioPlayerPlayAudioEventReason.MixAndPlayButton:case n.AudioPlayerPlayAudioEventReason.ListButton:case n.AudioPlayerPlayAudioEventReason.AudioButton:case n.AudioPlayerPlayAudioEventReason.Voice:return n.AudioPlayerStopAudioEventReason.ChangeQueue;case n.AudioPlayerPlayAudioEventReason.Repeat:return n.AudioPlayerStopAudioEventReason.Repeat;case n.AudioPlayerPlayAudioEventReason.Unknown:return n.AudioPlayerStopAudioEventReason.Unknown;default:return}}},460017:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerEventEmitter:()=>n.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>i.getStopReasonForPlayReason});var n=o(953872),i=o(37380)},122611:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerPauseAudioEventReason:()=>n.AudioPlayerPauseAudioEventReason,AudioPlayerPlayAudioEventReason:()=>n.AudioPlayerPlayAudioEventReason,AudioPlayerSeekEventReason:()=>n.AudioPlayerSeekEventReason,AudioPlayerStopAudioEventReason:()=>n.AudioPlayerStopAudioEventReason,createAudioPlayerEventEmitter:()=>i.createAudioPlayerEventEmitter,getStopReasonForPlayReason:()=>i.getStopReasonForPlayReason});var n=o(311006),i=o(460017)},135401:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsListener:()=>P});var n=o(434518),i=o(763812),r=o(264544),s=o(504831),a=o(134292),_=o(419822),c=(0,i._)("_stats"),l=(0,i._)("_handlePlayAudio"),u=(0,i._)("_handlePlayAdv"),d=(0,i._)("_handlePauseAudio"),p=(0,i._)("_handlePauseAdv"),h=(0,i._)("_handleStopAudio"),m=(0,i._)("_handleStopAdv"),E=(0,i._)("_handleSeek"),f=(0,i._)("_handleStateRestore"),g=(0,i._)("_handlePageClose"),y=(0,i._)("_makeAdvEventData"),v=(0,i._)("_makeAudioEventData"),w=(0,i._)("_makeEventData"),A=(0,i._)("_canOperate"),b=(0,i._)("_getPlayedTime"),T=(0,i._)("_handleRadioHeartbeat"),I=(0,i._)("_radioHeartbeat");class P{destroy(){window.removeEventListener("beforeunload",(0,n._)(this,g)[g]),this.playerAdapter.events.off("playAudio",(0,n._)(this,l)[l]).off("pauseAudio",(0,n._)(this,d)[d]).off("stopAudio",(0,n._)(this,h)[h]).off("playAdv",(0,n._)(this,u)[u]).off("pauseAdv",(0,n._)(this,p)[p]).off("stopAdv",(0,n._)(this,m)[m]).off("seek",(0,n._)(this,E)[E]).off("stateRestore",(0,n._)(this,f)[f])}constructor(e){Object.defineProperty(this,y,{value:C}),Object.defineProperty(this,v,{value:S}),Object.defineProperty(this,w,{value:O}),Object.defineProperty(this,A,{value:M}),Object.defineProperty(this,b,{value:D}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),this.playerAdapter=e,(0,n._)(this,c)[c]=new s.AudioPlayerStatsCollector,(0,n._)(this,l)[l]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,v)[v](t,o);(0,n._)(this,c)[c].play((0,a.mapPlayReasonToSubtype)(e),i),t.type===r.AudioType.Radio&&(0,n._)(this,I)[I].start(t)},(0,n._)(this,u)[u]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,y)[y](t,o);(0,n._)(this,c)[c].play((0,a.mapPlayReasonToSubtype)(e),i)},(0,n._)(this,d)[d]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,v)[v](t,o);(0,n._)(this,c)[c].pause((0,a.mapPauseReasonToSubtype)(e),i),t.type===r.AudioType.Radio&&(0,n._)(this,I)[I].stop(t)},(0,n._)(this,p)[p]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,y)[y](t,o);(0,n._)(this,c)[c].pause((0,a.mapPauseReasonToSubtype)(e),i)},(0,n._)(this,h)[h]=({reason:e,audio:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,v)[v](t,o);(0,n._)(this,c)[c].end((0,a.mapStopReasonToSubtype)(e),i),t.type===r.AudioType.Radio&&(0,n._)(this,I)[I].stop(t)},(0,n._)(this,m)[m]=({reason:e,advId:t,progressTime:o})=>{if(!(0,n._)(this,A)[A]())return;const i=(0,n._)(this,y)[y](t,o);(0,n._)(this,c)[c].end((0,a.mapStopReasonToSubtype)(e),i)},(0,n._)(this,E)[E]=({reason:e,audio:t,progressTime:o,fromTime:i})=>{if(!(0,n._)(this,A)[A]())return;const r=(0,n._)(this,v)[v](t,i);(0,n._)(this,c)[c].pause((0,a.mapSeekPauseReasonToSubtype)(e),r);const s=(0,n._)(this,v)[v](t,o);(0,n._)(this,c)[c].play((0,a.mapSeekPlayReasonToSubtype)(e),s)},(0,n._)(this,f)[f]=({audio:e,progressTime:t})=>{if(!e||!(0,n._)(this,A)[A]())return;const o=(0,n._)(this,v)[v](e,t);(0,n._)(this,c)[c].pause(s.PauseEventSubtype.StateRestore,o),(0,n._)(this,I)[I].clear()},(0,n._)(this,g)[g]=()=>{const e=this.playerAdapter.getPlayingAudio();if(!e||!(0,n._)(this,A)[A]())return;const t=(0,n._)(this,v)[v](e,(0,n._)(this,b)[b]());(0,n._)(this,c)[c].end(s.StopEventSubtype.Close,t),(0,n._)(this,I)[I].clear()},(0,n._)(this,T)[T]=e=>{const t=(0,n._)(this,v)[v](e,(0,n._)(this,b)[b]());(0,n._)(this,c)[c].play(s.PlayEventSubtype.Heartbeat,t)},(0,n._)(this,I)[I]=new _.AudioHeartbeatTimer({ms:1e4,onBeat:(0,n._)(this,T)[T]}),this.playerAdapter=e,window.addEventListener("beforeunload",(0,n._)(this,g)[g]),this.playerAdapter.events.on("playAudio",(0,n._)(this,l)[l]).on("pauseAudio",(0,n._)(this,d)[d]).on("stopAudio",(0,n._)(this,h)[h]).on("playAdv",(0,n._)(this,u)[u]).on("pauseAdv",(0,n._)(this,p)[p]).on("stopAdv",(0,n._)(this,m)[m]).on("seek",(0,n._)(this,E)[E]).on("stateRestore",(0,n._)(this,f)[f])}}function C(e,t){const o=(0,s.makeAdvListeningData)(e),i=Math.round(t/1e3);return{...(0,n._)(this,w)[w](),timeline:i,trackCode:"",...o}}function S(e,t){const o=(0,a.mapAudioDataToListeningData)(e),i=Math.round(t/1e3);return{...(0,n._)(this,w)[w](),trackCode:e.trackCode,timeline:i,...o}}function O(){return{shuffle:Boolean(this.playerAdapter.isShuffledPlaylist()),repeatMode:this.playerAdapter.isRepeatCurrentAudio()?s.RepeatMode.One:this.playerAdapter.isRepeatAll()?s.RepeatMode.All:s.RepeatMode.Off,volume:this.playerAdapter.getVolume(),speed:100,streamingType:s.StreamingType.Online,playerInitId:null,layer:!0,autorecoms:!0}}function M(){return!this.playerAdapter.isMarusiaTrack()}function D(){return 1e3*Math.round(this.playerAdapter.getListenedTime())||0}},926374:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsCollector:()=>h});var n=o(434518),i=o(763812),r=o(581903),s=o(476726),a=o(613100),_=o(705684),c=o(300760),l=(0,i._)("_eventTimelines"),u=(0,i._)("_actionCollector"),d=(0,i._)("_log"),p=(0,i._)("_debug");class h{play(e,t){(0,n._)(this,d)[d]({category:a.EventCategory.Play,type:a.PlayEventType.Start,subtype:e},t)}pause(e,t){(0,n._)(this,d)[d]({category:a.EventCategory.Stop,type:a.StopEventType.Pause,subtype:e},t)}end(e,t){(0,n._)(this,d)[d]({category:a.EventCategory.Stop,type:a.StopEventType.End,subtype:e},t)}constructor(){Object.defineProperty(this,d,{value:m}),Object.defineProperty(this,p,{get:E,set:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=new Map,(0,n._)(this,u)[u]=new r.ActionStatCollector(new r.ProductionStatCollector)}}function m(e,t){const o=(0,c.getEventDataKey)(t),i=(0,_.makeEventItem)(e,t,(0,n._)(this,l)[l].get(o)??0);if((0,n._)(this,u)[u].logEvent({type:a.EVENT_ITEM_TYPE,[a.EVENT_ITEM_TYPE]:i}),(0,n._)(this,p)[p]){const e=i.event.type,t=i.event[e];console.log(`event_category: ${e};\nevent_type: ${t.type};\nevent_subtype: ${t.subtype}\n`,i)}e.category===a.EventCategory.Stop&&e.type===a.StopEventType.End?(0,n._)(this,l)[l].delete(o):(0,n._)(this,l)[l].set(o,t.timeline)}function E(){return(0,s.partConfigEnabled)("audio_player_stats_debug")}},845434:(e,t,o)=>{"use strict";var n,i,r,s,a,_,c,l;o.d(t,{ListeningType:()=>n,MusicContentType:()=>i,PauseEventSubtype:()=>c,PlayEventSubtype:()=>_,PodcastContentType:()=>r,RepeatMode:()=>s,StopEventSubtype:()=>l,StreamingType:()=>a}),function(e){e.Music="type_audio_audio_listening_item",e.Podcast="type_audio_podcast_listening_item",e.Book="type_audio_book_listening_item",e.Adv="type_audio_adv_listening_item",e.Radio="type_audio_radio_listening_item"}(n||(n={})),function(e){e.Track="music_track",e.Snippet="music_snippet"}(i||(i={})),function(e){e.Episode="podcast_episode",e.Trailer="podcast_trailer"}(r||(r={})),function(e){e.Off="off",e.One="one",e.All="all"}(s||(s={})),function(e){e.Online="online",e.OnlineCache="online_cache"}(a||(a={})),function(e){e.PlayButton="play_btn",e.NextButton="next_btn",e.PrevButton="prev_btn",e.NextMediaSession="next_by_system",e.PrevMediaSession="prev_by_system",e.MixAndPlayButton="mix_and_play_btn",e.FastplayListButton="fastplay_list_btn",e.FastplayAudioButton="fastplay_audio_btn",e.QueueContinuation="autoplay",e.QueueContinuationAfterError="autoplay_error",e.Autoplay="autoplay",e.Repeat="repeat",e.Voice="voice",e.NextVoice="next_voice",e.PrevVoice="prev_voice",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.ChannelAutoResume="session_terminated_autostart",e.Heartbeat="heartbeat",e.Unknown="unhandled_on_client"}(_||(_={})),function(e){e.PauseButton="pause_btn",e.MediaSession="pause_by_system",e.ChannelAutoPause="session_terminated",e.PullSliderForward="pull_slider_forward",e.PullSliderBack="pull_slider_back",e.SeekTapForward="seek_tap_forward",e.SeekTapBack="seek_tap_back",e.NextDoubleTap="next_double_tap",e.PrevDoubleTap="prev_double_tap",e.Voice="voice",e.Paywall="paywall_pause",e.StateRestore="client_restore",e.Error="error",e.Unknown="unhandled_on_client"}(c||(c={})),function(e){e.NextButton="next",e.PrevButton="prev",e.Autoplay="autoplay",e.Adv="adv",e.Repeat="repeat",e.ChangeSource="change_source",e.Close="close",e.Error="error",e.Unknown="unhandled_on_client"}(l||(l={}))},480109:(e,t,o)=>{"use strict";o.d(t,{makeAdvListeningData:()=>n.makeAdvListeningData});var n=o(587133)},587133:(e,t,o)=>{"use strict";o.d(t,{makeAdvListeningData:()=>i});var n=o(845434);function i(e){return{listeningType:n.ListeningType.Adv,contentType:"audio_adv",advId:e}}},504831:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerStatsCollector:()=>n.AudioPlayerStatsCollector,ListeningType:()=>i.ListeningType,MusicContentType:()=>i.MusicContentType,PauseEventSubtype:()=>i.PauseEventSubtype,PlayEventSubtype:()=>i.PlayEventSubtype,PodcastContentType:()=>i.PodcastContentType,RepeatMode:()=>i.RepeatMode,StopEventSubtype:()=>i.StopEventSubtype,StreamingType:()=>i.StreamingType,makeAdvListeningData:()=>r.makeAdvListeningData});var n=o(926374),i=o(845434),r=o(480109)},613100:(e,t,o)=>{"use strict";o.d(t,{AppState:()=>p,AudioEventLayer:()=>l,Autorecoms:()=>d,EVENT_ITEM_TYPE:()=>s,EventCategory:()=>a,PLAYER_INIT_ID:()=>r,PlayEventType:()=>_,Shuffle:()=>u,StopEventType:()=>c});var n=o(418562),i=o(623702);const r=(()=>{const e="AUDIO_PLAYER_INIT_ID",t=(0,i.getSessionStorage)();let o=t.getItem(e);return o||(o=(0,n.default)(),t.setItem(e,o)),o})(),s="type_audio_listening_item";var a,_,c,l,u,d,p;!function(e){e.Play="play",e.Stop="stop"}(a||(a={})),function(e){e.Start="start"}(_||(_={})),function(e){e.Pause="pause",e.End="end"}(c||(c={})),function(e){e.Not="not",e.Layer="layer"}(l||(l={})),function(e){e.Off="off",e.On="on"}(u||(u={})),function(e){e.Off="off",e.On="on"}(d||(d={})),function(e){e.Active="active",e.Inactive="inactive"}(p||(p={}))},300760:(e,t,o)=>{"use strict";o.d(t,{getEventDataKey:()=>i});var n=o(845434);function i(e){return`${function(e){switch(e.listeningType){case n.ListeningType.Music:{const{contentType:t,audioId:o,ownerId:n}=e;return`${t}/${n}_${o}`}case n.ListeningType.Adv:{const{contentType:t,advId:o}=e;return`${t}/${o}`}case n.ListeningType.Podcast:{const{contentType:t,podcastId:o,ownerId:n,episodeId:i}=e;return`${t}/${n}_${o}_${i}`}case n.ListeningType.Book:{const{contentType:t,bookId:o,chapterId:n}=e;return`${t}/${o}${n?"_":""}${n}`}case n.ListeningType.Radio:{const{contentType:t,radioId:o}=e;return`${t}/${o}`}}}(e)}/${e.trackCode}`}},705684:(e,t,o)=>{"use strict";o.d(t,{makeEventItem:()=>n.makeEventItem});o(594945);var n=o(559993)},559993:(e,t,o)=>{"use strict";o.d(t,{makeEventItem:()=>s});var n=o(476726),i=o(613100),r=o(594945);function s(e,t,o){const n=a();return{event:function({category:e,type:t,subtype:o}){const n={type:e};return{[e]:{type:t,subtype:o},...n}}(e),client_time:n,client_server_time:_(n),layer:t.layer?i.AudioEventLayer.Layer:i.AudioEventLayer.Not,autorecoms:t.autorecoms?i.Autorecoms.On:i.Autorecoms.Off,track_code:t.trackCode,timeline:t.timeline,timeline_from:o,player_init_id:i.PLAYER_INIT_ID,volume:t.volume,speed:t.speed,shuffle:t.shuffle?i.Shuffle.On:i.Shuffle.Off,app_state:document.hidden?i.AppState.Inactive:i.AppState.Active,streaming_type:t.streamingType,repeat_mode:t.repeatMode,...(0,r.mapListeningData)(t)}}function a(){return Math.floor(Date.now()/1e3)}function _(e=a()){return e-(Number.isFinite(window.vk?.dt)?window.vk.dt:(0,n.calculateTimeOffsets)())}},594945:(e,t,o)=>{"use strict";o.d(t,{mapListeningData:()=>i});var n=o(845434);function i(e){switch(e.listeningType){case n.ListeningType.Music:return function({listeningType:e,...t}){return{listening_type:e,[e]:{audio_id:t.audioId,audio_owner_id:t.ownerId,content_type:t.contentType}}}(e);case n.ListeningType.Podcast:return function({listeningType:e,...t}){return{listening_type:e,[e]:{podcast_id:t.podcastId,podcast_owner_id:t.ownerId,episode_id:t.episodeId,podcast_authors_ids:t.authorIds,content_type:t.contentType}}}(e);case n.ListeningType.Book:return function({listeningType:e,...t}){return{listening_type:e,[e]:{book_id:t.bookId,chapter_id:t.chapterId,content_type:"audiobook_chapter"}}}(e);case n.ListeningType.Radio:return function({listeningType:e,...t}){return{listening_type:e,[e]:{radio_id:t.radioId,content_type:"radio"}}}(e);case n.ListeningType.Adv:return function({listeningType:e,...t}){return{listening_type:e,[e]:{adv_id:t.advId,content_type:"audio_adv"}}}(e)}}},382399:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerMyTrackerListener:()=>n.AudioPlayerMyTrackerListener,AudioPlayerStatsListener:()=>i.AudioPlayerStatsListener});var n=o(247034),i=o(135401)},419822:(e,t,o)=>{"use strict";o.d(t,{AudioHeartbeatTimer:()=>d});var n=o(434518),i=o(763812),r=o(255053),s=(0,i._)("_ms"),a=(0,i._)("_onBeat"),_=(0,i._)("_interval"),c=(0,i._)("_currentAudio"),l=(0,i._)("_clearInterval"),u=(0,i._)("_isActive");class d{start(e){if((0,n._)(this,u)[u])throw new Error("HeartbeatTimer is already started");const t=(0,n._)(this,a)[a];(0,n._)(this,l)[l](),(0,n._)(this,c)[c]=e,(0,n._)(this,_)[_]=setInterval((()=>{t(e)}),(0,n._)(this,s)[s])}stop(e){if(!(0,n._)(this,u)[u])throw new Error("HeartbeatTimer is not started");const t=(0,n._)(this,c)[c]&&(0,r.getAudioFullId)((0,n._)(this,c)[c]);if((0,r.getAudioFullId)(e)!==t)throw new Error("Trying to pause another audio");(0,n._)(this,l)[l](),(0,n._)(this,c)[c]=null}clear(){(0,n._)(this,l)[l](),(0,n._)(this,c)[c]=null}constructor(e){Object.defineProperty(this,l,{value:p}),Object.defineProperty(this,u,{get:h,set:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,_)[_]=null,(0,n._)(this,c)[c]=null,(0,n._)(this,s)[s]=e.ms,(0,n._)(this,a)[a]=e.onBeat}}function p(){null!=(0,n._)(this,_)[_]&&(clearInterval((0,n._)(this,_)[_]),(0,n._)(this,_)[_]=null)}function h(){return null!=(0,n._)(this,_)[_]}},134292:(e,t,o)=>{"use strict";o.d(t,{mapAudioDataToListeningData:()=>n.mapAudioDataToListeningData,mapPauseReasonToSubtype:()=>i.mapPauseReasonToSubtype,mapPlayReasonToSubtype:()=>i.mapPlayReasonToSubtype,mapSeekPauseReasonToSubtype:()=>i.mapSeekPauseReasonToSubtype,mapSeekPlayReasonToSubtype:()=>i.mapSeekPlayReasonToSubtype,mapStopReasonToSubtype:()=>i.mapStopReasonToSubtype});var n=o(922926),i=o(826725)},922926:(e,t,o)=>{"use strict";o.d(t,{mapAudioDataToListeningData:()=>a});var n=o(264544),i=o(504831);const r={[n.AudioType.MusicTrack]:i.MusicContentType.Track,[n.AudioType.MusicSnippet]:i.MusicContentType.Snippet},s={[n.AudioType.PodcastTrailer]:i.PodcastContentType.Trailer,[n.AudioType.PodcastEpisode]:i.PodcastContentType.Episode};function a(e){const{id:t,ownerId:o,type:a}=e;switch(a){case n.AudioType.MusicTrack:case n.AudioType.MusicSnippet:return{listeningType:i.ListeningType.Music,contentType:r[a],audioId:t,ownerId:o};case n.AudioType.PodcastEpisode:case n.AudioType.PodcastTrailer:return{listeningType:i.ListeningType.Podcast,contentType:s[a],episodeId:t,ownerId:o,podcastId:e.podcastId};case n.AudioType.Radio:return{listeningType:i.ListeningType.Radio,contentType:"radio",radioId:t}}}},826725:(e,t,o)=>{"use strict";o.d(t,{mapPauseReasonToSubtype:()=>u,mapPlayReasonToSubtype:()=>l,mapSeekPauseReasonToSubtype:()=>p,mapSeekPlayReasonToSubtype:()=>h,mapStopReasonToSubtype:()=>d});var n=o(122611),i=o(504831);const r={[n.AudioPlayerPlayAudioEventReason.PlayButton]:i.PlayEventSubtype.PlayButton,[n.AudioPlayerPlayAudioEventReason.NextButton]:i.PlayEventSubtype.NextButton,[n.AudioPlayerPlayAudioEventReason.PrevButton]:i.PlayEventSubtype.PrevButton,[n.AudioPlayerPlayAudioEventReason.NextMediaSession]:i.PlayEventSubtype.NextMediaSession,[n.AudioPlayerPlayAudioEventReason.PrevMediaSession]:i.PlayEventSubtype.PrevMediaSession,[n.AudioPlayerPlayAudioEventReason.MixAndPlayButton]:i.PlayEventSubtype.MixAndPlayButton,[n.AudioPlayerPlayAudioEventReason.ListButton]:i.PlayEventSubtype.FastplayListButton,[n.AudioPlayerPlayAudioEventReason.AudioButton]:i.PlayEventSubtype.FastplayAudioButton,[n.AudioPlayerPlayAudioEventReason.QueueContinuation]:i.PlayEventSubtype.QueueContinuation,[n.AudioPlayerPlayAudioEventReason.QueueContinuationAfterError]:i.PlayEventSubtype.QueueContinuationAfterError,[n.AudioPlayerPlayAudioEventReason.Autoplay]:i.PlayEventSubtype.Autoplay,[n.AudioPlayerPlayAudioEventReason.Repeat]:i.PlayEventSubtype.Repeat,[n.AudioPlayerPlayAudioEventReason.Voice]:i.PlayEventSubtype.Voice,[n.AudioPlayerPlayAudioEventReason.NextVoice]:i.PlayEventSubtype.NextVoice,[n.AudioPlayerPlayAudioEventReason.PrevVoice]:i.PlayEventSubtype.PrevVoice,[n.AudioPlayerPlayAudioEventReason.ChannelAutoResume]:i.PlayEventSubtype.ChannelAutoResume,[n.AudioPlayerPlayAudioEventReason.Unknown]:i.PlayEventSubtype.Unknown},s={[n.AudioPlayerPauseAudioEventReason.PauseButton]:i.PauseEventSubtype.PauseButton,[n.AudioPlayerPauseAudioEventReason.MediaSession]:i.PauseEventSubtype.MediaSession,[n.AudioPlayerPauseAudioEventReason.ChannelAutoPause]:i.PauseEventSubtype.ChannelAutoPause,[n.AudioPlayerPauseAudioEventReason.Voice]:i.PauseEventSubtype.Voice,[n.AudioPlayerPauseAudioEventReason.Paywall]:i.PauseEventSubtype.Paywall,[n.AudioPlayerPauseAudioEventReason.Unknown]:i.PauseEventSubtype.Unknown},a={[n.AudioPlayerStopAudioEventReason.NextButton]:i.StopEventSubtype.NextButton,[n.AudioPlayerStopAudioEventReason.PrevButton]:i.StopEventSubtype.PrevButton,[n.AudioPlayerStopAudioEventReason.QueueContinuation]:i.StopEventSubtype.Autoplay,[n.AudioPlayerStopAudioEventReason.Adv]:i.StopEventSubtype.Adv,[n.AudioPlayerStopAudioEventReason.Repeat]:i.StopEventSubtype.Repeat,[n.AudioPlayerStopAudioEventReason.ChangeQueue]:i.StopEventSubtype.ChangeSource,[n.AudioPlayerStopAudioEventReason.Clear]:i.StopEventSubtype.Close,[n.AudioPlayerStopAudioEventReason.Error]:i.StopEventSubtype.Error,[n.AudioPlayerStopAudioEventReason.Unknown]:i.StopEventSubtype.Unknown},_={[n.AudioPlayerSeekEventReason.SliderForward]:i.PauseEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:i.PauseEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:i.PauseEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:i.PauseEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:i.PauseEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:i.PauseEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:i.PauseEventSubtype.Unknown},c={[n.AudioPlayerSeekEventReason.SliderForward]:i.PlayEventSubtype.PullSliderForward,[n.AudioPlayerSeekEventReason.SliderBack]:i.PlayEventSubtype.PullSliderBack,[n.AudioPlayerSeekEventReason.TapForward]:i.PlayEventSubtype.SeekTapForward,[n.AudioPlayerSeekEventReason.TapBack]:i.PlayEventSubtype.SeekTapBack,[n.AudioPlayerSeekEventReason.DoubleTapForward]:i.PlayEventSubtype.NextDoubleTap,[n.AudioPlayerSeekEventReason.DoubleTapBack]:i.PlayEventSubtype.PrevDoubleTap,[n.AudioPlayerSeekEventReason.Unknown]:i.PlayEventSubtype.Unknown};function l(e){return r[e??n.AudioPlayerPlayAudioEventReason.Unknown]}function u(e){return s[e??n.AudioPlayerPauseAudioEventReason.Unknown]}function d(e){return a[e??n.AudioPlayerStopAudioEventReason.Unknown]}function p(e){return _[e??n.AudioPlayerPauseAudioEventReason.Unknown]}function h(e){return c[e??n.AudioPlayerPauseAudioEventReason.Unknown]}},49444:(e,t,o)=>{"use strict";o.d(t,{AudioListenedDAUCounter:()=>p});var n=o(434518),i=o(763812);var r=(0,i._)("_onReach"),s=(0,i._)("_startedAt"),a=(0,i._)("_timeout"),_=(0,i._)("_listenedTime"),c=(0,i._)("_reached"),l=(0,i._)("_reach"),u=(0,i._)("_clear"),d=(0,i._)("_clearTimeout");class p{start(){(0,n._)(this,c)[c]||this.started||((0,n._)(this,s)[s]=Date.now(),(0,n._)(this,a)[a]=setTimeout((()=>{(0,n._)(this,l)[l](),(0,n._)(this,a)[a]=null}),3e4-(0,n._)(this,_)[_]))}pause(){this.started&&((0,n._)(this,d)[d](),(0,n._)(this,_)[_]+=Date.now()-(0,n._)(this,s)[s],(0,n._)(this,_)[_]>=3e4&&(0,n._)(this,l)[l]())}reset(){this.pause(),(0,n._)(this,u)[u]()}get started(){return null!==(0,n._)(this,a)[a]}constructor(e){Object.defineProperty(this,l,{value:h}),Object.defineProperty(this,u,{value:m}),Object.defineProperty(this,d,{value:E}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,s)[s]=-1,(0,n._)(this,a)[a]=null,(0,n._)(this,_)[_]=0,(0,n._)(this,c)[c]=!1,(0,n._)(this,r)[r]=e}}function h(){(0,n._)(this,c)[c]=!0,(0,n._)(this,r)[r]()}function m(){(0,n._)(this,d)[d](),(0,n._)(this,s)[s]=-1,(0,n._)(this,_)[_]=0,(0,n._)(this,c)[c]=!1}function E(){const e=(0,n._)(this,a)[a];e&&(clearTimeout(e),(0,n._)(this,a)[a]=null)}},34838:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerActivityCounter:()=>f});var n=o(434518),i=o(763812),r=o(255053),s=o(476726),a=o(131139),_=o(49444),c=(0,i._)("_type"),l=(0,i._)("_timespent"),u=(0,i._)("_dau"),d=(0,i._)("_listenedCounter"),p=(0,i._)("_currentAudio"),h=(0,i._)("_debug"),m=(0,i._)("_logDebug"),E=(0,i._)("_isCurrentAudio");class f{get isActiveTimespent(){return(0,n._)(this,l)[l].isActiveTimespent}start(e){(0,n._)(this,E)[E](e)||((0,n._)(this,p)[p]=e,(0,n._)(this,d)[d].reset()),(0,n._)(this,m)[m](`start ${(0,r.getAudioFullId)(e.identity)}`),(0,n._)(this,d)[d].start(),(0,n._)(this,l)[l].startTimespent()}pause(e){(0,n._)(this,E)[E](e)&&(0,n._)(this,d)[d].pause(),(0,n._)(this,l)[l].stopTimespent(),(0,n._)(this,m)[m](`pause ${(0,r.getAudioFullId)(e.identity)}`)}stop(e){(0,n._)(this,E)[E](e)&&(0,n._)(this,d)[d].reset(),(0,n._)(this,l)[l].stopTimespent(),(0,n._)(this,m)[m](`stop ${(0,r.getAudioFullId)(e.identity)}`)}constructor({myTracker:e,type:t,strict:o}){Object.defineProperty(this,h,{get:g,set:void 0}),Object.defineProperty(this,m,{value:y}),Object.defineProperty(this,E,{value:v}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n._)(this,d)[d]=new _.AudioListenedDAUCounter((()=>{(0,n._)(this,u)[u].increment(),(0,n._)(this,m)[m]("increment")})),(0,n._)(this,p)[p]=null,(0,n._)(this,c)[c]=t,(0,n._)(this,l)[l]=w(e,a.TIMESPENT_ACTIVITY_MAP[t],o),(0,n._)(this,u)[u]=w(e,a.DAU_ACTIVITY_MAP[t],o)}}function g(){return(0,s.partConfigEnabled)("audio_player_stats_debug")}function y(e){(0,n._)(this,h)[h]&&console.log(`[AudioPlayerActivityCounter][${(0,n._)(this,c)[c]}] ${e}`)}function v(e){const t=(0,n._)(this,p)[p];return!!t&&(0,r.getAudioFullId)(e.identity)===(0,r.getAudioFullId)(t.identity)}function w(e,t,o){return e.ensureActivityCounter({activityId:t,timespentType:"service",strict:o})}},176123:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerMyTrackerListener:()=>h});var n=o(434518),i=o(763812),r=o(131139),s=o(34838),a=(0,i._)("_player"),_=(0,i._)("_counters"),c=(0,i._)("_handlePlayAudio"),l=(0,i._)("_handlePauseAudio"),u=(0,i._)("_handleStopAudio"),d=(0,i._)("_getCounter"),p=(0,i._)("_canOperate");class h{destroy(){(0,n._)(this,a)[a].events.off("playAudio",(0,n._)(this,c)[c]).off("pauseAudio",(0,n._)(this,l)[l]).off("stopAudio",(0,n._)(this,u)[u])}constructor(e,t){Object.defineProperty(this,d,{value:m}),Object.defineProperty(this,p,{value:E}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=e=>{if(!(0,n._)(this,p)[p]())return;const{audio:t}=e;(0,n._)(this,d)[d](t.type).start(t)},(0,n._)(this,l)[l]=e=>{if(!(0,n._)(this,p)[p]())return;const{audio:t}=e;(0,n._)(this,d)[d](t.type).pause(t)},(0,n._)(this,u)[u]=e=>{if(!(0,n._)(this,p)[p]())return;const{audio:t}=e;(0,n._)(this,d)[d](t.type).stop(t)},(0,n._)(this,a)[a]=e,(0,n._)(this,_)[_]=function(e){const t=t=>new s.AudioPlayerActivityCounter({myTracker:e,type:t,strict:!1});return{[r.AudioPlayerActivityCounterType.Music]:t(r.AudioPlayerActivityCounterType.Music),[r.AudioPlayerActivityCounterType.MusicSnippets]:t(r.AudioPlayerActivityCounterType.MusicSnippets),[r.AudioPlayerActivityCounterType.Podcasts]:t(r.AudioPlayerActivityCounterType.Podcasts),[r.AudioPlayerActivityCounterType.Audiobooks]:t(r.AudioPlayerActivityCounterType.Audiobooks),[r.AudioPlayerActivityCounterType.Radio]:t(r.AudioPlayerActivityCounterType.Radio)}}(t),(0,n._)(this,a)[a].events.on("playAudio",(0,n._)(this,c)[c]).on("pauseAudio",(0,n._)(this,l)[l]).on("stopAudio",(0,n._)(this,u)[u])}}function m(e){const t=r.AUDIO_TYPE_ACTIVITY_TYPE_MAP[e];return(0,n._)(this,_)[_][t]}function E(){return!(0,n._)(this,a)[a].isMarusiaTrack()}},131139:(e,t,o)=>{"use strict";o.d(t,{AUDIO_TYPE_ACTIVITY_TYPE_MAP:()=>s,AudioPlayerActivityCounterType:()=>n,DAU_ACTIVITY_MAP:()=>_,TIMESPENT_ACTIVITY_MAP:()=>a});var n,i=o(380719),r=o(264544);!function(e){e.Music="music",e.MusicSnippets="music_snippets",e.Podcasts="podcasts",e.Audiobooks="audiobooks",e.Radio="radio"}(n||(n={}));const s={[r.AudioType.MusicTrack]:"music",[r.AudioType.MusicSnippet]:"music_snippets",[r.AudioType.PodcastEpisode]:"podcasts",[r.AudioType.PodcastTrailer]:"podcasts",[r.AudioType.Radio]:"radio"},a={music:i.MyTrackerActivityId.MusicListen,music_snippets:i.MyTrackerActivityId.MusicSnippetsListen,podcasts:i.MyTrackerActivityId.PodcastsListen,audiobooks:i.MyTrackerActivityId.AudiobooksListen,radio:i.MyTrackerActivityId.RadioListen},_={music:i.MyTrackerActivityId.MusicTrackListenedDAU,music_snippets:i.MyTrackerActivityId.MusicSnippetListenedDAU,podcasts:i.MyTrackerActivityId.PodcastEpisodeListenedDAU,audiobooks:i.MyTrackerActivityId.AudiobookListenedDAU,radio:i.MyTrackerActivityId.RadiostationListenedDAU}},247034:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerMyTrackerListener:()=>n.AudioPlayerMyTrackerListener});var n=o(176123)},596793:(e,t,o)=>{"use strict";function n(e){const t={};return e&&e.length&&e.filter((e=>!!e)).map((e=>e.queues&&e.queues[0])).forEach((e=>t[e.type]=e)),t}o.d(t,{unpackQueues:()=>n})},749613:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n,createCaptchaPopupService:()=>c});var n,i=o(32489),r=o(293721),s=o(418562),a=o(311606),_=o(884415);!function(e){e[e.IMAGE=0]="IMAGE",e[e.AUDIO=1]="AUDIO"}(n||(n={}));const c=()=>{const e=(0,r.createGate)(),t=(0,i.createEvent)(),o=(0,i.createEvent)(),n=(0,i.createEvent)(),c=(0,i.createEvent)(),l=(0,i.createEvent)(),u=(0,i.createEvent)(),d=(0,i.createEvent)(),p=(0,i.createEvent)(),h=(0,i.createEvent)(),m=(0,i.createEvent)(),E=(0,i.createEvent)();(0,i.forward)({from:e.close,to:E});const f=(0,i.createStore)("");f.on(e.open,((e,{captchaImage:t})=>t));const g=(0,i.createStore)("");g.on(e.open,((e,{captchaTrack:t})=>t));const y=(0,i.createStore)("");y.on(e.open,((e,{deviceId:t})=>t));const v=(0,i.createStore)(null);v.on(e.open,(()=>"CAPTCHA_MODAL_ACTIVE")),v.on(m,(()=>null));const w=(0,i.createStore)(null);w.on(e.open,((e,t)=>t.platform));const A=(0,i.createStore)("");A.reset(e.close),A.on(e.open,((e,{sid:t})=>t));const b=(0,i.createStore)("");b.reset(e.close),b.on([d,p],(()=>(0,s.default)()));const T=(0,i.createStore)(0);T.on(u,(e=>e+1)),T.reset(e.close);const I=(0,i.createStore)("");I.reset(e.close),I.on(t,((e,t)=>t));const P=(0,i.createStore)(!0);P.reset([e.close,u,d]),P.on(c,(()=>!0)),P.on(d,(()=>!0)),P.on(l,(()=>!1)),P.on(h,(()=>!1));const C=(0,i.createStore)(0);C.on(u,(e=>0===e?1:0));const S=(0,i.createStore)(!1);S.reset(e.close),S.on(o,(()=>!0)),S.on(n,(()=>!1));const O=(0,i.createStore)(!1);O.reset([e.close,u,d,p]),O.on(h,(()=>!0));const M=(0,i.createStore)("");M.reset([e.close,d]);const D=(0,i.createStore)(0);D.reset([e.close,E]),D.on([d,u],(()=>5));const{tick:L,isRunning:k}=(0,a.interval)({timeout:1e3,start:(0,i.merge)([d,u]),stop:E});D.on(L,(e=>e-1));const R=(0,i.createStore)(!1);R.reset(e.close);const N=(0,i.createStore)(!1);N.reset(e.close);const B=(0,i.createStore)(!0);B.reset(e.close),B.on(t,((e,t)=>""===t.trim()));const x=(0,i.createStore)(!0);return x.reset(e.close),x.on(u,(()=>!1)),(0,i.sample)({source:D,filter:e=>0===e,target:E}),(0,i.sample)({source:{isAudioPlaying:S,refreshCountdownRunning:k},fn:({isAudioPlaying:e,refreshCountdownRunning:t})=>e||t,target:[R,N]}),(0,i.sample)({clock:[e.open,p,u],source:{sid:A,hash:b,type:C,swapCount:T,platform:w,captchaImage:f,captchaTrack:g,deviceId:y,isFirst:x},fn:e=>(0,_.getCaptchaLink)(e),target:M}),(0,i.sample)({clock:d,source:{sid:A,hash:b,type:C,swapCount:T,platform:w,captchaImage:f,captchaTrack:g,deviceId:y},fn:e=>(0,_.getCaptchaLink)({...e,isRefresh:!0}),target:M}),{Gate:e,answerChanged:t,audioPlaying:o,audioPaused:n,captchaLoadingStarts:c,captchaLoadingEnds:l,captchaTypeToggled:u,captchaRefreshed:d,captchaReloaded:p,captchaLoadingErrorSet:h,closeCaptcha:m,$answer:I,$captchaLoading:P,$captchaType:C,$isAudioPlaying:S,$hasLoadCaptchaError:O,$captchaSrc:M,$refreshCountdown:D,$isRefreshButtonDisabled:R,$isCaptchaTypeToggleDisabled:N,$isSubmitButtonDisabled:B,$isCaptchaModalActive:v}}},161882:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n.CaptchaType,Platform:()=>i.Platform,createCaptchaPopupService:()=>n.createCaptchaPopupService});var n=o(749613),i=o(884415)},884415:(e,t,o)=>{"use strict";o.d(t,{Platform:()=>n,getCaptchaLink:()=>s});var n,i=o(749613),r=o(105352);!function(e){e[e.VK_WEB=0]="VK_WEB",e[e.VK_M_WEB=1]="VK_M_WEB"}(n||(n={}));const s=({sid:e,hash:t,type:o,isRefresh:n,swapCount:s,platform:a,isFirst:_,captchaImage:c,captchaTrack:l,deviceId:u})=>{const d=t?`&v=${t}`:"",p=n?"&refresh=1":"",h=!n&&s>0?"&swap_type=1":"",m=_?"&first=1":"";let E;switch(a){case 0:default:E=r.VK_WEB_APP_ID;break;case 1:E=r.VK_MVK_APP_ID}switch(o){case i.CaptchaType.IMAGE:{let t="";if(c){const e=new URLSearchParams(c);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${c}&s=1&width=400&resized=1`:`${c.replace("device_id=",`device_id=${u}`)}&s=1&width=400&resized=1`:`${c}&resized=1&width=400&app_id=${E}&device_id=${u}`}else t=`/captcha.php?sid=${e}&s=1&resized=1&width=400&app_id=${E}&device_id=${u}`;return`${t}${d}${p}${h}${m}`}case i.CaptchaType.AUDIO:{let t="";if(l){const e=new URLSearchParams(l);t=e.has("device_id")?e.has("device_id")&&e.get("device_id")?`${l}`:`${l.replace("device_id=",`device_id=${u}`)}`:`${l}&app_id=${E}&device_id=${u}`}else t=`/sound_captcha.php?act=get&captcha_sid=${e}&app_id=${E}&device_id=${u}`;return`${t}${d}${p}${h}${m}`}default:return""}}},793241:(e,t,o)=>{"use strict";o.d(t,{renderAvatarToString:()=>_});var n=o(474848),i=o(440961),r=o(280234),s=o(714209),a=o(29700);function _(e,t,o,_="",c,l,u,d,p,h){let m;c&&(m="online"),s.mobPlatforms[c]&&(m="online-mobile");const E=null!==o&&o?"a":"span",f=document.createElement(E);void 0!==l&&f.setAttribute("onclick",l),h&&f.classList.add("nft_avatar_wrap"),_&&(Array.isArray(_)?f.classList.add(..._):f.classList.add(_)),o&&(f.href=o),i.render((0,n.jsxs)(r.RichAvatar,{className:a.default.root,alt:p,src:e,size:t,nft:h,children:[u&&(0,n.jsx)(r.RichAvatar.Outline,{"data-outline-id":d,appearance:"accent"}),m&&(0,n.jsx)(r.RichAvatar.BadgeWithPreset,{preset:m})]}),f);const g=f.outerHTML;return i.unmountComponentAtNode(f),g}},312258:(e,t,o)=>{"use strict";var n,i,r;o.d(t,{ColorSchemeMode:()=>n,ColorSchemeName:()=>i,SchemeColors:()=>r}),function(e){e.Light="light",e.Dark="dark",e.Auto="auto"}(n||(n={})),function(e){e.Dark="space_gray",e.Light="bright_light",e.WebDark="vkcom_dark",e.WebLight="vkcom_light"}(i||(i={})),function(e){e.Dark="#222222",e.Light="#ffffff"}(r||(r={}))},889393:(e,t,o)=>{"use strict";o.d(t,{OUR_DOMAINS:()=>s,RE_DOMAIN_PATTERN:()=>_,TOP_DOMAINS:()=>i,VK_DOMAIN:()=>a});var n=o(705744);const i=[..."aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(","),..."бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(","),..."qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((e=>"xn--"+e))],r=n.VK_HOST_REGEX_GROUP_UNSAFE.source,s=new RegExp(`^([a-zA-Z0-9\\.\\_\\-]+\\.)?(${r}|vk\\.cc)$`),a=new RegExp(`^(?:https?:\\/\\/)?(?:${n.VK_SITES_REGEX_SOURCE_UNSAFE})?\\/([a-zA-Z0-9\\._]+)\\??$`),_="((?:[a-z0-9_]*[a-z0-9])?(?:(?:\\.[a-z](?:[a-z0-9_]+[a-z0-9])?)*\\.[a-z][a-z0-9_]{2,40}[a-z0-9])?)"},495917:(e,t,o)=>{"use strict";o.d(t,{EMAIL:()=>i});var n=o(678340);const i=new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+n.RE_URL_DOMAIN_NAME+n.RE_URL_DOMAIN_TOP+"))","ig")},487703:(e,t,o)=>{"use strict";o.d(t,{FREE_MENTION:()=>r,FREE_MENTION_LINK:()=>s,MENTION:()=>i});var n=o(705744);const i=/\[(id|club)(\d+)(?:\:([a-z0-9_\-]+))?\|([^\$]+?)\]/g,r=/\[([^\$\[\]]+?)\|([^\]]+?)\]/g,s=new RegExp(`\\[((?:https?:\\/\\/)?(?:(?:m\\.|dev\\.)?(?:${n.VK_HOST_REGEX_GROUP_UNSAFE.source}|vk\\.me))(?!\\/\\/)(?!\\/doc[\\d\\-])(?!\\/page[\\d\\-])(?!\\/away[\\.\\?])(?:\\/[-\\._~:\\/?#\\[\\]@!\\$&'\\(\\)\\*\\+,;=%.\\w]*)*)\\|([^\\]\\n\\t]*)\\]`)},827773:(e,t,o)=>{"use strict";o.d(t,{PLATFORM_MVK:()=>n});const n="mvk"},678340:(e,t,o)=>{"use strict";o.d(t,{RE_URL_DOMAIN_NAME:()=>i,RE_URL_DOMAIN_TOP:()=>r,RE_URL_PATTERN:()=>s});const n="\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј",i="((?:["+n+"\\—\\-\\_]+\\.){1,5})",r="([A-Za-zа-яА-Я\\-\\d]{2,22})",s="(https?:\\/\\/)?"+("("+i+r+"(?:\\:(\\d{2,5}))?)")+("(([\\/?#])(?:\\&amp;|\\&#\\d{2,6};|,[_%]|!|,*[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$.~=;:'ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯*]+|"+("(?:\\(|\\[)["+n+"\\d&#%;,]+(?:\\)|\\])")+"){0,200})?")},564955:(e,t,o)=>{"use strict";o.d(t,{TIMESPENT_SCREEN_COUNTER_IDS:()=>n,TIMESPENT_SERVICE_COUNTER_IDS:()=>i,TimespentCollector:()=>l,getScreenTimespentCollector:()=>u,getServiceTimespentCollector:()=>d});var n,i,r=o(380719),s=o(942451),a=o(346156),_=o(144770),c=o(581903);!function(e){e[e.FEED=5]="FEED",e[e.MESSENGER=7]="MESSENGER",e[e.MINI_APPS=75]="MINI_APPS",e[e.VIDEO_SHOWCASE_VIEW=63]="VIDEO_SHOWCASE_VIEW",e[e.VIDEO_VIEW=20]="VIDEO_VIEW",e[e.DATING=67]="DATING",e[e.SHORT_VIDEOS=3]="SHORT_VIDEOS",e[e.SHORT_VIDEOS_ENGAGEMENT_3_ITEMS=76]="SHORT_VIDEOS_ENGAGEMENT_3_ITEMS",e[e.AUDIO=r.MyTrackerActivityId.MusicScreen]="AUDIO"}(n||(n={})),function(e){e[e.MUSIC_ENGAGEMENT_30S=1]="MUSIC_ENGAGEMENT_30S",e[e.CALLS_IN_CALL=21]="CALLS_IN_CALL",e[e.VIDEO_VIEW_30S=77]="VIDEO_VIEW_30S"}(i||(i={}));class l{startVisibilityChangeListener(){document.addEventListener("visibilitychange",(()=>{document.hidden?this.onScreenHide():this.onScreenShow()}))}startPageCloseListener(){window.addEventListener("beforeunload",(()=>{this.active.forEach(((e,t)=>{this.finish(t)}))}))}get isDebug(){return!1}warn(...e){this.isDebug||console.warn("[MyTrackerTimespent]",...e)}onScreenHide(){if("service"===this.type)return;const e=Date.now();this.startData.forEach(((t,o)=>{const n=(this.timespent.get(o)??0)+(e-(t.span_ts??t.start_ts));this.timespent.set(o,n),this.startData.set(o,{...t,span_ts:Date.now()}),this.hideTimestamp=Date.now()}))}onScreenShow(){"service"!==this.type&&(this.hideTimestamp=null,this.startData.forEach(((e,t)=>{this.startData.set(t,{...e,span_ts:Date.now()})})))}start(e){this.active.has(e)?this.isDebug&&this.warn("Запись таймспента #%s уже началась. Проверьте механизм записи.",e):(this.active.add(e),this.startData.set(e,{...this.getCurrentTimingMetadata(),start_ts:Date.now()}),this.tmrTimespentUtils.tmrStartTimespent(e,"service"===this.type))}finish(e){if(!this.active.has(e))return void(this.isDebug&&this.warn("Не удалось завершить запись таймспента #%s. Проверьте механизм записи.",e));this.active.delete(e),this.tmrTimespentUtils.tmrFinishTimespent(e,"service"===this.type);const t=this.startData.get(e);if(!t)return;this.startData.delete(e);const o=t.span_ts??t.start_ts,n=this.hideTimestamp??Date.now(),i=n-o,r=(this.timespent.get(e)??0)+i;(0,_.saveStatlogEvents)({name:"tmp_tmr_timespent",value:r,keys:[this.type,e]}),this.collector.logEvent({activity_id:e,counter_id:this.counterId,start_time:Math.floor(o/1e3),end_time:Math.floor(n/1e3)}),this.timespent.delete(e)}getCurrentTimingMetadata(){return{module:window.cur?.module||"unknown",screen:window.cur?.screen||"unknown"}}constructor(e,t){this.active=new Set,this.startData=new Map,this.timespent=new Map,this.collector=new c.MTTimespentStatCollector,this.hideTimestamp=null,this.type=e;const{tmrFinishTimespent:o=a.tmrFinishTimespent,tmrStartTimespent:n=a.tmrStartTimespent}=t?(0,a.getCustomCounterIdTmrUtils)(t):{};this.tmrTimespentUtils={tmrFinishTimespent:o,tmrStartTimespent:n},this.counterId=parseInt(t??a.counterId),this.startVisibilityChangeListener(),this.startPageCloseListener()}}const u=(0,s.makeSharedState)("myTrackerScreenTimespentCollector",(()=>new l("screen")),{version:1}),d=(0,s.makeSharedState)("myTrackerServiceTimespentCollector",(()=>new l("service")),{version:1})},867461:(e,t,o)=>{"use strict";var n;o.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>n}),function(e){e[e.COMMUNITY_SUBSCRIBE=11]="COMMUNITY_SUBSCRIBE",e[e.POST_PUBLISH=13]="POST_PUBLISH",e[e.MESSAGE_SEND=26]="MESSAGE_SEND"}(n||(n={}))},141229:(e,t,o)=>{"use strict";o.r(t),o.d(t,{MY_TRACKER_COUNT_EVENT_IDS:()=>r.MY_TRACKER_COUNT_EVENT_IDS,TIMESPENT_SCREEN_COUNTER_IDS:()=>s.TIMESPENT_SCREEN_COUNTER_IDS,TIMESPENT_SERVICE_COUNTER_IDS:()=>s.TIMESPENT_SERVICE_COUNTER_IDS,TimespentCollector:()=>s.TimespentCollector,counterId:()=>n.counterId,getCustomCounterIdTmrUtils:()=>n.getCustomCounterIdTmrUtils,getScreenTimespentCollector:()=>s.getScreenTimespentCollector,getServiceTimespentCollector:()=>s.getServiceTimespentCollector,handleModuleChanged:()=>i.handleModuleChanged,tmrFinishTimespent:()=>n.tmrFinishTimespent,tmrPushRawEvent:()=>n.tmrPushRawEvent,tmrSendTimespentEvent:()=>n.tmrSendTimespentEvent,tmrStartTimespent:()=>n.tmrStartTimespent,tmrTrackCustomGoal:()=>n.tmrTrackCustomGoal,tmrTrackMiniAppClose:()=>n.tmrTrackMiniAppClose,tmrTrackMiniAppCustom:()=>n.tmrTrackMiniAppCustom,tmrTrackMiniAppEvent:()=>n.tmrTrackMiniAppEvent,tmrTrackMiniAppOpen:()=>n.tmrTrackMiniAppOpen,tmrTrackPage:()=>n.tmrTrackPage,tmrUpdateUserId:()=>n.tmrUpdateUserId});var n=o(346156),i=o(975149),r=o(867461),s=o(564955)},975149:(e,t,o)=>{"use strict";o.d(t,{handleModuleChanged:()=>s});var n=o(564955);const i={audio:n.TIMESPENT_SCREEN_COUNTER_IDS.AUDIO,feed:n.TIMESPENT_SCREEN_COUNTER_IDS.FEED,mini_apps_catalog:n.TIMESPENT_SCREEN_COUNTER_IDS.MINI_APPS,im:n.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER,mail:n.TIMESPENT_SCREEN_COUNTER_IDS.MESSENGER};let r="";function s(e){if(e===r)return;const t=(0,n.getScreenTimespentCollector)(),o=i[r];o&&t.finish(o),r=e;const s=i[e];s&&t.start(s)}},161448:(e,t,o)=>{"use strict";o.d(t,{CustomStatCollector:()=>r});var n=o(568352),i=o(144770);class r{getCurrentTime(e=!0){const t=Date.now().toString(10);return e?t+"000":t}getIntId(){return Math.floor(Math.random()*r.MAX_INT32)}getBaseEvent(){return{id:this.getIntId(),timestamp:this.getCurrentTime()}}logEvent(e){e.type&&e[e.type]?(0,i.saveCustomStats)(e):(0,n.logError)(new Error("CustomStatCollector: invalid event."))}}r.MAX_INT32=2147483647},325186:(e,t,o)=>{"use strict";o.d(t,{DevNullStatCollector:()=>i});var n=o(325698);class i{logEvent(e){const t={...this.customStatCollector.getBaseEvent(),type:n.CustomStatEventTypes.TYPE_DEV_NULL_ITEM,[n.CustomStatEventTypes.TYPE_DEV_NULL_ITEM]:e};this.customStatCollector.logEvent(t)}constructor(e){this.customStatCollector=e}}},850263:(e,t,o)=>{"use strict";o.d(t,{CustomStatCollector:()=>n.CustomStatCollector,DevNullStatCollector:()=>i.DevNullStatCollector});var n=o(161448),i=o(325186)},325698:(e,t,o)=>{"use strict";var n;o.d(t,{CustomStatEventTypes:()=>n}),function(e){e.TYPE_DEV_NULL_ITEM="type_dev_null_item"}(n||(n={}))},708953:(e,t,o)=>{"use strict";o.d(t,{DebugConfig:()=>r});var n=o(250682);const i={showBubble:!1,blinkOnPostTrack:!1,serverEvents:!1,statlogsWatch:[],productionStatsLogsImmediately:!1,serviceWorker:!1,forcePWA:"",printPerformanceMarks:!1};class r{static loadConfig(){this._config={...i,...JSON.parse(n.ls.get("debug-menu")||"{}")}}static addEmitter(e){this._debugEmitters.push(e)}static saveConfig(){n.ls.set("debug-menu",JSON.stringify(r.getConfig()))}static getConfig(){return r._config}static set(e,t){this._config[e]!==t&&(this._config[e]=t,this._debugEmitters.forEach((t=>t.emit("update",e))))}static get(e){return this._config[e]}}r._debugEmitters=[],r._config=i,r.loadConfig()},389416:(e,t,o)=>{"use strict";o.d(t,{ensureDIRootContainer:()=>w});var n=o(127126),i=o(594020),r=o(613464),s=o(865328),a=o(75312),_=o(787945),c=o(97931),l=o(177626),u=o(795624),d=o(460480),p=o(757602),h=o(568352),m=o(412357),E=o(804194),f=o(963683),g=o(770743),y=o(983908);let v=!1;function w(){return v||(n.rootContainer.replace(i.Langs,m.BrowserLangs),n.rootContainer.replace(r.UserEnv,E.BrowserUserEnv),n.rootContainer.replace(s.PrivacyLegacy,g.PrivacyLegacyImpl),n.rootContainer.replace(a.ApiPrefetch,f.BrowserApiPrefetch),n.rootContainer.replace(_.Tmr,c.BrowserTmr),n.rootContainer.replace(l.ExternalEvents,y.BrowserExternalEvents),(0,p.registerBrowserPlugins)(n.rootContainer),n.rootContainer.resolve(u.AuthService).setUserId(window.vk.id),n.rootContainer.resolve(d.ErrorLogger).init(h.logError),v=!0),n.rootContainer}},963683:(e,t,o)=>{"use strict";o.d(t,{BrowserApiPrefetch:()=>s});var n=o(331635),i=o(127126),r=o(793656);class s{loadPrefetchCache(e,t,o){return(0,r.loadPrefetchCache)(e,t,o)}}s=(0,n.__decorate)([i.scope.global()],s)},983908:(e,t,o)=>{"use strict";o.d(t,{BrowserExternalEvents:()=>a});var n=o(331635),i=o(127126),r=o(998510);const s="stories_seen";class a{subscribeToAllStoriesSeen(e){const t=({detail:t})=>{this.allStoriesSeenListener(t,e)};return window.addEventListener(s,t),()=>window.removeEventListener(s,t)}allStoriesSeenListener(e,t){e.forEach((({storyRawIdSet:e})=>{[...e.values()].forEach((e=>{const[o]=e.split("_"),n=(0,r.isIntAsString)(o)?Number(o):null;if(!n)return;const i=window.cur[`stories_list_owner_feed${n}`];if(!i)return;i.every((e=>e.items.every((({unread:e})=>!e))))&&t(n)}))}))}}a=(0,n.__decorate)([i.scope.global()],a)},412357:(e,t,o)=>{"use strict";o.d(t,{BrowserLangs:()=>s});var n=o(331635),i=o(127126),r=o(610989);class s{numeric(e,t,o){return(0,r.langNumeric)(e,t,o)}sex(e,t){return(0,r.langSex)(e,t)}date(e,t,o,n={}){return(0,r.langDate)(e,t,n.offset??0,o,n.onlyDate)}getLang(e,t=!1){return t?r.getLang(e,"raw"):r.getLang(e)}}s=(0,n.__decorate)([i.scope.platform()],s)},804194:(e,t,o)=>{"use strict";o.d(t,{BrowserUserEnv:()=>s});var n=o(331635),i=o(127126),r=o(476726);class s{partConfigEnabled(e){return(0,r.partConfigEnabled)(e)}}s=(0,n.__decorate)([i.scope.global()],s)},770743:(e,t,o)=>{"use strict";o.d(t,{PrivacyLegacyImpl:()=>r});var n=o(331635),i=o(127126);class r{setValue(e,t){const o=window.cur;o.privacy={...o.privacy||{}},window.Privacy?.setValue(e,t)}onPrivacyChanged(e){window.cur.onPrivacyChanged=e}chooseWithPrivSel({event:e,val:t,list:o,confirmed:n,privSel:i}){const r=window.cur;i&&(r.privSel=i),window.Privacy?.choose(e,t,o,n)}}r=(0,n.__decorate)([i.scope.global()],r)},527559:(e,t,o)=>{"use strict";o.d(t,{ensureDIRootContainer:()=>n.ensureDIRootContainer});var n=o(389416)},529397:(e,t,o)=>{"use strict";o.d(t,{logDonutEvent:()=>s});var n=o(922748),i=o(695290),r=o(614212);function s(e,t){const{type:o,type_property:s,params:a}=(0,r.parseJSON)(e);s===i.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM?n.donutStats.logEventAction({event_type:a.event_type,source:a.source,owner_id:a.owner_id}):t&&o===i.ProductionStatEventTypes.TYPE_NAVGO&&function(e,{params:t,typeProperty:o}){if(o===i.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM){const e=t.owner_id,o=t.track_code;if(!t||"number"!=typeof e||"string"!=typeof o)return;n.donutStats.logEventDescriptionClick({ownerId:e,trackCode:o})}}(0,{typeProperty:s,params:a})}},922748:(e,t,o)=>{"use strict";o.d(t,{donutStats:()=>a});var n=o(581903),i=o(695290),r=o(796044);class s{logEventAction(e){return this.actionStatCollector.logEvent(s.createDonutActionStatEvent(e))}logEventActionView(e){return this.logEventAction({...e,event_type:r.DonutActionEventType.PAYMENT_FORM})}logEventDescriptionClick(e){this.navStatCollector.logEvent({...s.createNavStatEventBase(),...s.createDescriptionClickStatEvent(e)})}static createDonutActionStatEvent(e){return{type:i.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM,[i.ActionProductionStatEventTypes.TYPE_DONUT_PAYMENT_ITEM]:e}}static createNavStatEventBase(){return{screen:"wall",subtype:i.NavigationProductionStatEventTypes.GO}}static createDescriptionClickStatEvent(e){return{item:s.processClickParamsToEventItem(e),type:i.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM,[i.NavigationProductionStatEventTypes.TYPE_DONUT_DESCRIPTION_NAV_ITEM]:{}}}static processClickParamsToEventItem(e){return{type:i.EventItemType.BROWSER,owner_id:e.ownerId,track_code:e.trackCode}}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.actionStatCollector=new n.ActionStatCollector(this.productionStatCollector),this.navStatCollector=new n.NavigationStatCollector(this.productionStatCollector)}}const a=new s},82575:(e,t,o)=>{"use strict";var n,i,r,s,a;o.d(t,{AddToCartEventType:()=>i,EventName:()=>a,EventType:()=>n,RemoveFromCartEventType:()=>r,Screen:()=>s}),function(e){e.TYPE_CLICK="type_market_click",e.TYPE_VIEW="type_market_view",e.TYPE_ACTION="type_market_action"}(n||(n={})),function(e){e.ADD_ITEM="add_item",e.SET_ITEM_AMOUNT="set_item_amount"}(i||(i={})),function(e){e.ALL="all",e.SET_ITEM_AMOUNT="set_item_amount"}(r||(r={})),function(e){e.MARKETPLACE_SEARCH="marketplace_search",e.MARKETPLACE_MAIN="marketplace_main",e.MARKETPLACE_SECTION="marketplace_section",e.MARKETPLACE_MY_ORDERS="marketplace_my_orders",e.MARKET_CART="market_cart",e.MARKET_ITEM="market_item",e.MARKET="market",e.GROUP_MENU="group_menu",e.FAVE_PRODUCTS="fave_products",e.MARKET_IM_CHAT="im_chat"}(s||(s={})),function(e){e.TRANSITION_TO_CARTS_LIST="type_marketplace_transition_to_carts_list_click",e.TRANSITION_TO_CHECKOUT="type_marketplace_transition_to_checkout_click_item",e.TRANSITION_TO_CART="type_marketplace_transition_to_cart_click",e.VIEW_ITEM="type_market_view_item",e.ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks",e.ADD_ITEM_TO_CART="type_add_item_to_cart",e.REMOVE_ITEM_FROM_CART="type_remove_item_from_cart_item",e.REMOVE_ITEM_FROM_BOOKMARKS="type_market_remove_item_from_bookmark"}(a||(a={}))},360306:(e,t,o)=>{"use strict";o.d(t,{AdminsClickAnalytics:()=>s});var n=o(847891),i=o(68360),r=o(309881);class s{logControlClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_ITEMS_CONTROL_CLICK,screen:e,id:t.id,itemType:t.itemType}})}logEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_END_EDIT_ITEM,screen:e,ownerId:t.ownerId,id:t.id,itemType:t.itemType,difference:t.difference,status:t.status,attachedPhotoCount:t.attachedPhotoCount}})}logModerationEditItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logModerationDeleteItemClick({screen:e,params:t}){this.collector.logEvent({params:{type:i.EventName.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK,screen:e,id:t.id,ownerId:t.ownerId,itemType:"market_item"}})}logImportsGoodsEvent({ownerId:e,eventName:t}){this.collector.logEvent({params:{type:t,screen:i.CustomScreen.MARKET_ITEMS,id:n.Ranges.convertOwnerIdToGroupId(e),ownerId:e,itemType:"market_item"}})}logAddItemGoodsEvent({id:e,eventName:t,screen:o}){this.collector.logEvent({params:{screen:o,type:t,id:n.Ranges.convertOwnerIdToGroupId(e),itemType:"market_item"}})}constructor(e=new r.ClickEventCollector){this.collector=e}}},309881:(e,t,o)=>{"use strict";o.d(t,{ClickEventCollector:()=>s});var n=o(581903),i=o(695290),r=o(68360);class s{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:i.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[i.ProductionStatEventTypes.TYPE_CLICK]:{item:{type:e.itemType,id:e.id,owner_id:e.ownerId,community_id:e.ownerId},type:r.EventType.TYPE_CLICK,[r.EventType.TYPE_CLICK]:{type:e.type,[e.type]:{changed_parameters:e.difference,attached_photo_count:e.attachedPhotoCount,status:e.status}}}}}constructor(e=new n.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},68360:(e,t,o)=>{"use strict";var n,i,r,s,a,_;o.d(t,{CustomScreen:()=>i,EventName:()=>_,EventType:()=>a,ItemTypes:()=>r,Section:()=>n,Statuses:()=>s}),function(e){e.AUTO="auto",e.SEARCH="search",e.MARKET="market",e.GROUP="group",e.MAIN="main"}(n||(n={})),function(e){e.MARKET_ITEM="market_item",e.MARKET_ITEMS="market_items",e.MARKET_ALBUMS="market_albums"}(i||(i={})),function(e){e.GROUP="group",e.MARKET_ITEM="market_item"}(r||(r={})),function(e){e.CANCEL_EDIT_ITEM="cancel_edit_item",e.CANCEL_CREATE_ITEM="cancel_create_item"}(s||(s={})),function(e){e.TYPE_CLICK="type_market_click"}(a||(a={})),function(e){e.TYPE_MARKET_ITEMS_CONTROL_CLICK="type_market_items_control_click",e.TYPE_MARKET_END_EDIT_ITEM="type_market_end_edit_item",e.TYPE_MARKET_MODERATION_EDIT_ITEM_CLICK="type_market_items_moderation_edit_click",e.TYPE_MARKET_MODERATION_DELETE_ITEM_CLICK="type_market_items_moderation_delete_click",e.TYPE_MARKET_IMPORT_GOODS="type_market_import_goods",e.TYPE_MARKET_IMPORT_GOODS_START="type_market_import_goods_start",e.TYPE_MARKET_IMPORT_GOODS_FAIL="type_market_import_goods_fail",e.TYPE_MARKET_TRANSITION_TO_IMPORT_GOODS="type_market_transition_to_import_goods",e.TYPE_MARKET_TRANSITION_TO_ADD_GOODS="type_market_transition_to_add_goods",e.TYPE_MARKET_TRANSITION_TO_MANUAL_ADD_GOODS="type_market_transition_to_manual_add_goods"}(_||(_={}))},654179:(e,t,o)=>{"use strict";o.d(t,{ClickAnalytics:()=>s});var n=o(82575),i=o(70933),r=o(391984);class s{logAddToBookmarksClick({screen:e,params:t,refSource:o,previousScreen:n,sourceUrl:r,trackCode:s}){this.collector.logEvent({params:{type:i.EventName.ADD_ITEM_TO_BOOKMARKS,screen:e,previous_screen:n,ref_source:o,item:{track_code:s},source_url:r,[i.EventName.ADD_ITEM_TO_BOOKMARKS]:t}})}logRemoveFromBookmarksClick({screen:e,params:t,refSource:o,previousScreen:n,sourceUrl:r,trackCode:s}){this.collector.logEvent({params:{type:i.EventName.REMOVE_ITEM_FROM_BOOKMARKS,screen:e,previous_screen:n,ref_source:o,source_url:r,item:{track_code:s},[i.EventName.REMOVE_ITEM_FROM_BOOKMARKS]:t}})}logTransitionToItemClick({screen:e,params:t,refSource:o}){const{source_url:n="",previous_screen:r,track_code:s,...a}=t;this.collector.logEvent({params:{type:i.EventName.TRANSITION_TO_ITEM,previous_screen:r,ref_source:o,source_url:n,screen:e,item:{track_code:s},[i.EventName.TRANSITION_TO_ITEM]:a}})}logTransitionToSimilarClick({screen:e,previousScreen:t,sourceUrl:o="",refSource:n,params:r}){this.collector.logEvent({params:{type:i.EventName.TRANSITION_TO_SIMILARS,previous_screen:t,screen:e,source_url:o,ref_source:n,[i.EventName.TRANSITION_TO_SIMILARS]:r||{}}})}logSendMessageToOwnerClick({screen:e,params:t,refSource:o,previousScreen:n}){this.collector.logEvent({params:{type:i.EventName.SEND_MESSAGE_TO_OWNER,ref_source:o,screen:e,previous_screen:n,[i.EventName.SEND_MESSAGE_TO_OWNER]:t}})}logTransitionToMarketClick({ownerId:e,screen:t,refSource:o,previousScreen:n}){this.collector.logEvent({params:{type:i.EventName.TRANSITION_TO_MARKET,screen:t,previous_screen:n,ref_source:o,item:{owner_id:e}}})}logMarketCtaButtonClick({itemId:e,ownerId:t,screen:o,refSource:n,previousScreen:r,params:s}){this.collector.logEvent({params:{type:i.EventName.CLICK_MARKET_CTA_BUTTON,screen:o,previous_screen:r,ref_source:n,item:{id:e,owner_id:t},[i.EventName.CLICK_MARKET_CTA_BUTTON]:s}})}logImagePaginationClick({item:e,item_media_idx:t,screen:o,traffic_source:n,ref_source:r,previous_screen:s}){this.collector.logEvent({params:{type:i.EventName.IMAGE_PAGINATION_CLICK,item:e,screen:o,previous_screen:s,ref_source:r,[i.EventName.IMAGE_PAGINATION_CLICK]:{item_media_idx:t,traffic_source:n}}})}logHideMarketItemClick({itemId:e,ownerId:t,screen:o,refSource:n,itemIdx:r,trackCode:s}){this.collector.logEvent({params:{type:i.EventName.HIDE_ITEM,screen:o,ref_source:n,item:{id:e,owner_id:t,track_code:s},[i.EventName.HIDE_ITEM]:{item_idx:r}}})}logOpenMarketplaceClick({screen:e,previousScreen:t,refSource:o}){this.collector.logEvent({params:{type:i.EventName.CLICK_OPEN_MARKETPLACE,screen:e,previous_screen:t,ref_source:o}})}logTransitionToCartsListClick({screen:e,previousScreen:t,refSource:o}){this.collector.logEvent({params:{type:i.EventName.TRANSITION_TO_CARTS_LIST,screen:e,previous_screen:t,ref_source:o,ref_screen:e}})}addItemToCart({screen:e,previousScreen:t,params:o}){this.collector.logEvent({params:{type:i.EventName.ADD_ITEM_TO_CART,screen:e,previous_screen:t,ref_screen:e,ref_source:i.RefSource.BOOKMARKS,[i.EventName.ADD_ITEM_TO_CART]:{event_type:n.AddToCartEventType.ADD_ITEM,...o}}})}constructor(e=new r.ClickEventCollector){this.collector=e}}},391984:(e,t,o)=>{"use strict";o.d(t,{ClickEventCollector:()=>a});var n=o(581903),i=o(695290),r=o(70933),s=o(487881);class a{logEvent({params:e}){const t=this.constructEvent({params:e});this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({params:e}){const t=this.statCollector.getBaseEvent();return{id:t.id,timestamp:t.timestamp,type:i.ProductionStatEventTypes.TYPE_CLICK,prev_nav_id:this.lastNavEventId,prev_event_id:t.prev_id||0,screen:e.screen,[i.ProductionStatEventTypes.TYPE_CLICK]:{item:{type:"market_item",..."item"in e?e.item:{}},type:r.EventType.TYPE_CLICK,[r.EventType.TYPE_CLICK]:(0,s.getValidatedParams)({...e,analytics_version:1})}}}constructor(e=new n.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},338148:(e,t,o)=>{"use strict";o.d(t,{adminsClickAnalytics:()=>a,clickAnalytics:()=>s,viewAnalytics:()=>_});var n=o(654179),i=o(360306),r=o(419628);const s=new n.ClickAnalytics,a=new i.AdminsClickAnalytics,_=new r.ViewAnalytics},70933:(e,t,o)=>{"use strict";var n,i,r,s,a;o.d(t,{CustomScreen:()=>i,EventName:()=>a,EventType:()=>s,RefSource:()=>r,Section:()=>n}),function(e){e.AUTO="auto",e.SEARCH="search",e.MARKET="market",e.GROUP="group"}(n||(n={})),function(e){e.MARKET_ITEM="market_item",e.MARKET_CARTS_LIST="market_carts_list",e.MARKET_CHECKOUT="market_checkout",e.FAVE_PRODUCTS="fave_products"}(i||(i={})),function(e){e.COMMUNITY_GOODS="community_goods",e.COMMUNITY_GROUP_GOODS="community_group_goods",e.COMMUNITY_SHOWCASE="community_showcase",e.SEARCH_GLOBAL="search_global",e.SEARCH_GOODS="search_goods",e.SEARCH_RECOMMENDATIONS="search_recommendations",e.SEARCH_RECOMMENDATIONS_WITH_GOODS="search_communities_with_goods",e.GLUBS="messages",e.POST="post",e.PHOTO="photo",e.VIDEO="video",e.STORIES="stories",e.CLIPS="clips",e.CART="cart",e.BOOKMARKS="bookmarks",e.MARKETPLACE="marketplace",e.VIDEO_CAROUSEL_ITEMS="video_carousel_items",e.ARTIST_GOODS="artist_goods",e.FEED_PORTLET_GOODS="feed_portlet_goods",e.OTHER="other",e.LINK="link"}(r||(r={})),function(e){e.TYPE_CLICK="type_market_click",e.TYPE_VIEW="type_market_view"}(s||(s={})),function(e){e.ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks",e.REMOVE_ITEM_FROM_BOOKMARKS="type_market_remove_item_from_bookmark",e.VIEW_ITEM="type_market_view_item",e.TRANSITION_TO_ITEM="type_market_transition_to_item",e.SEND_MESSAGE_TO_OWNER="type_market_send_message_to_owner_click",e.TRANSITION_TO_SIMILARS="type_market_transition_to_similars",e.TRANSITION_TO_MARKET="type_market_transition_to_market",e.CLICK_MARKET_CTA_BUTTON="type_market_cta_button_click",e.HIDE_ITEM="type_market_hide_item",e.CLICK_OPEN_MARKETPLACE="type_market_open_marketplace",e.TRANSITION_TO_CARTS_LIST="type_market_transition_to_carts_list",e.IMAGE_PAGINATION_CLICK="type_market_pagination_in_product_tile",e.ADD_ITEM_TO_CART="type_add_item_to_cart"}(a||(a={}))},419628:(e,t,o)=>{"use strict";o.d(t,{ViewAnalytics:()=>r});var n=o(70933),i=o(665147);class r{logMarketItemView({screen:e,previous_screen:t,params:o,view:i,ref_source:r,source_url:s,track_code:a}){this.collector.logEvent({screen:e,view:i,params:{type:n.EventName.VIEW_ITEM,previous_screen:t,ref_source:r,source_url:s,track_code:a,[n.EventName.VIEW_ITEM]:o}})}constructor(e=new i.ViewEventCollector){this.collector=e}}},665147:(e,t,o)=>{"use strict";o.d(t,{ViewEventCollector:()=>a});var n=o(581903),i=o(695290),r=o(487881),s=o(70933);class a{logEvent(e){const t=this.constructEvent(e);this.statCollector.logEvent(t),this.lastNavEventId=t.id}constructEvent({screen:e,view:t,params:o}){const n=this.statCollector.getBaseEvent();return{id:n.id,timestamp:n.timestamp,type:i.ProductionStatEventTypes.TYPE_VIEW,prev_nav_id:this.lastNavEventId,prev_event_id:n.prev_id||0,screen:e,[i.ProductionStatEventTypes.TYPE_VIEW]:{item:{type:"market_item"},start_view:t.start_view,end_view:t.end_view,type:s.EventType.TYPE_VIEW,[s.EventType.TYPE_VIEW]:{...(0,r.getValidatedParams)(o),analytics_version:1}}}}constructor(e=new n.ProductionStatCollector){this.statCollector=e,this.lastNavEventId=0}}},603540:(e,t,o)=>{"use strict";o.d(t,{clone:()=>n});const n=e=>{let t={};for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&("object"==typeof e[o]&&(t[o]=n(e[o])),t[o]=e[o]);return t}},487881:(e,t,o)=>{"use strict";o.d(t,{getValidatedParams:()=>r});var n=o(603540),i=o(388078);const r=e=>{const t=(0,n.clone)(e);for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if("autofill_info"===e&&Array.isArray(t[e]))continue;"object"!=typeof t[e]||Object.is(null,t[e])||(t[e]=r(t[e])),"owner_id"===e&&"number"==typeof t[e]&&i.Ranges.isUserId(t[e])&&(t[e]=-t[e]),"search_query_id"===e&&"number"!=typeof t[e]&&(t[e]=Number(t[e]??""))}return delete t.screen,t}},742023:(e,t,o)=>{"use strict";o.d(t,{classNames:()=>n.classNames});var n=o(8520)},912675:(e,t,o)=>{"use strict";o.d(t,{TaskQueue:()=>s});var n,i=o(402210),r=o.n(i);!function(e){e.EV_GC_START="ev_gc_start",e.EV_GC_END="ev_gc_end",e.EV_PAUSED="ev_paused",e.EV_RESTARTED="ev_restarted",e.EV_NEW_HANDLER="ev_new_handler",e.EV_RM_HANDLER="ev_rm_handler",e.EV_TASK_START="ev_task_start"}(n||(n={}));class s{get events(){return this._emitter}static migrate(e,t=(()=>{})){const o=new s(t);return o.pause(),e&&e.destroy&&e._handlers&&e._q&&(e.destroy(),Object.keys(e._handlers).forEach((t=>{const n=e._handlers[t];o.setHandler(t,n,n.once)})),e._q.forEach((e=>o.push(e)))),o.restart(),o}setupGc(e){this._gcTimer&&clearInterval(this._gcTimer),this._gcTimer=setInterval(this._gcTask.bind(this),e||s._gcDefaultInterval)}_next(e=!1){this._timer=setTimeout(this._processNext.bind(this),e?0:this._timerInterval)}_gcTask(){this.pause(),this._emitter.emit("ev_gc_start");const e=this._q.filter((e=>e.postponed));this._q=this._q.filter((e=>!e.postponed)),this._emitter.emit("ev_gc_end",e),this.restart()}_processNext(){const[e]=this._q.splice(0,1);if(!e)return void this.pause();const t=this._handlers[e.selector];if(t?.once&&this.removeHandler(e.selector),!t)return e.postponed||(e.postponed=!0),this._q.push(e),void(this._timer&&this._next());let o;this._emitter.emit("ev_task_start",e.selector),window._tqVerbose&&console.info("Running evbus task",e.selector);try{o=Promise.resolve(t(e))}catch(e){o=Promise.reject(e)}o.then((()=>{this._next(!0)}),(t=>{this._errorHandler&&this._errorHandler(e,t),this._next(!0)}))}constructor(e=(()=>{})){this._errorHandler=e,this._timerInterval=15,this._handlers=Object.create(null),this._emitter=new(r()),this._q=[],this.destroy=()=>{this.pause(),clearInterval(this._gcTimer)},this.pause=()=>{this._timer&&(clearTimeout(this._timer),this._timer=void 0,this._emitter.emit("ev_paused"))},this.restart=()=>{this._timer||(this._next(),this._emitter.emit("ev_restarted"))},this.push=e=>{this._q.push(e),this.restart()},this.setHandler=(e,t,o=!1)=>{t.once=o,this._handlers[e]=t,this._emitter.emit("ev_new_handler",e)},this.removeHandler=e=>{delete this._handlers[e],this._emitter.emit("ev_rm_handler",e)},this._next()}}s._gcDefaultInterval=5e3},823875:(e,t,o)=>{"use strict";o.d(t,{init:()=>n.init,processExecData:()=>i.processExecData,tq:()=>n.tq});var n=o(402953),i=o(672396)},402953:(e,t,o)=>{"use strict";o.d(t,{init:()=>l,tq:()=>d,tqi:()=>p,tqs:()=>h});var n=o(912675),i=o(672396),r=o(568352),s=o(434487);const a=(e,t)=>{const o={message:"Task execution error",data:{taskName:e.selector,type:void 0===e.payload.dataAttrs?"startup_task":"interactive_task",params:JSON.stringify(void 0===e.payload.dataAttrs?e.payload.data:e.payload.dataAttrs)}};(0,r.logError)(t,{environment:"task_queue",breadcrumb:o}),console.error(t)},_=()=>{if(!document.head)throw new Error("Document must be loaded before queue init");return document.head},c=e=>e((()=>{(0,i.unregisterGlobalTqHandlers)(document.body,_()._tqhl),_()._tqhl=(0,i.registerGlobalTqHandlers)(document.body)})),l=(e=s.onDomReady)=>{const t=_();_()._tq?(t._tqi=n.TaskQueue.migrate(t._tqi,a),t._tqs=n.TaskQueue.migrate(t._tqs,a),c(e)):(e=>{const t=_();t._tqs=new n.TaskQueue(a),t._tqi=new n.TaskQueue(a),c(e),t._tq={setInteractiveHandler:(e,o,n=!1)=>t._tqi.setHandler(e,o,n),setStartupHandler:(o,n,i=!1)=>{t._tqs.setHandler(o,n,i),e((()=>{t._tqs.setupGc(),t._tqs.restart()}))}},e((()=>{t._tqi.setupGc(),(0,i.initMutationObserver)(),(0,i.processTreeOfNodes)(document)}))})(e)},u=e=>()=>{const t=_();if(!t["_"+e])throw new Error(e+" not initialized");return t["_"+e]},d=u("tq"),p=u("tqi"),h=u("tqs")},672396:(e,t,o)=>{"use strict";o.d(t,{initMutationObserver:()=>d,processExecData:()=>_,processTreeOfNodes:()=>u,registerGlobalTqHandlers:()=>p,unregisterGlobalTqHandlers:()=>h});var n=o(402953),i=o(841691);const r={click:1,mouseover:1,mouseout:1,keyup:1,keydown:1,change:1,paste:1},s=["focus","mouseenter","mouseleave"],a=e=>t=>{if(t.type!==e||!t.target||!e)return;let o;if(o=t.target.nodeType===Node.TEXT_NODE?t.target.parentNode:t.target,(0,i.isReactHTMLElement)(o)||!o.dataset)return;let r=o.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`];if(!r){if("click"!==t.type)return;const n=o.closest("[data-task-click]");if(!n)return;o=n,r=n.dataset[`task${e.toUpperCase()[0]+e.slice(1)}`]}if(r){if(o.dataset.prevent&&t instanceof MouseEvent&&"A"===o.tagName){const e=o.hasAttribute("href"),n=t.ctrlKey||t.metaKey;if(e&&n)return}if((0,n.tqi)().push({selector:r,payload:{target:o,dataAttrs:o.dataset,event:t},postponed:!1,createTime:Date.now()}),o.dataset.prevent)return 2&Number(o.dataset.prevent)&&t.stopPropagation(),t.preventDefault(),!1}},_=(e,t)=>{let o={};try{o=JSON.parse(e)}catch(t){console.error("Failed to parse JSON: ",e)}for(let e in o)o.hasOwnProperty(e)&&(0,n.tqs)().push({selector:e,payload:{target:t,data:o[e]},postponed:!1,createTime:Date.now()})},c=e=>{if(e.matches("[data-exec]")){const t=e.dataset.exec||"{}";e.removeAttribute("data-exec"),_(t,e)}},l=e=>{for(const t of s){const o=`data-task-${t}`;if(e.hasAttribute(o)){const i=e.getAttribute(o)??"";e.removeAttribute(o),e.addEventListener(t,(t=>{const o=(0,n.tqi)()._handlers[i];Promise.resolve(null).then((()=>o?.({selector:i,payload:{dataAttrs:e.dataset,target:e,event:t},postponed:!1,createTime:Date.now()}))).catch((e=>console.error(e)))}),{passive:!0})}}},u=(e=document)=>{for(const t of e.querySelectorAll("[data-exec]"))(t instanceof HTMLElement||t instanceof SVGElement)&&c(t);for(const t of s)for(const o of e.querySelectorAll(`[data-task-${t}]`))(o instanceof HTMLElement||o instanceof SVGElement)&&l(o)},d=()=>{window._obs=new MutationObserver((function(e){for(let t of e)for(let e of t.addedNodes)(e instanceof HTMLElement||e instanceof SVGElement)&&(c(e),l(e),u(e))})),window._obs.observe(document,{subtree:!0,childList:!0,attributes:!0})},p=e=>{const t={};for(let o in r){if(!r.hasOwnProperty(o))continue;const n=a(o);e.addEventListener(o,n),t[o]=n}return t},h=(e,t)=>{for(let o in t)t.hasOwnProperty(o)&&e.removeEventListener(o,t[o])}},804794:(e,t,o)=>{"use strict";o.d(t,{FeedPostMenuStats:()=>r});var n=o(238527),i=o(695290);const r={sendDonut(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"send_donut"},{track_code:e,type:i.EventItemType.POST},t??void 0)},postStat(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"post_stat"},{track_code:e,type:i.EventItemType.POST},t??void 0)},editPost(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"edit_post"},{track_code:e,type:i.EventItemType.POST},t??void 0)},copyERID(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"copy_erid"},{track_code:e,type:i.EventItemType.ADS},t??void 0)},openAdvertiserInfo(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"open_advertiser_info"},{track_code:e,type:i.EventItemType.ADS},t??void 0)},deletePost(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"delete_post"},{track_code:e,type:i.EventItemType.POST},t??void 0)},closeComments(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"close_comments"},{track_code:e,type:i.EventItemType.POST},t??void 0)},openComments(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"open_comments"},{track_code:e,type:i.EventItemType.POST},t??void 0)},archivePost(e,t){e&&n.feedItemMenuActionCollector.logEvent({action:"archive_post"},{track_code:e,type:i.EventItemType.POST},t??void 0)},clickToDots(e,t,o=i.EventItemType.POST){e&&n.feedItemMenuActionCollector.logEvent({action:"click_to_dots"},{track_code:e,type:o},t??void 0)}}},71894:(e,t,o)=>{"use strict";o.d(t,{convertWebFeedRefToStatsScreen:()=>a,sendCarouselClickEvent:()=>r,sendFeedOpenAudioStats:()=>s});var n=o(782784),i=o(695290);function r(e,t,o){if(!t||!o)return;let r=null;1===e?r=i.EventItemType.CLICK_NEXT:-1===e?r=i.EventItemType.CLICK_PREVIOUS:0===e&&(r=i.EventItemType.CLICK_PRETTY_CARD),r&&n.feedInteractionItemStatCollector.logEvent({track_code:t,ref:o,item:i.FeedInteractionItemType.WALL_ITEM},r)}function s(e,t){e&&t&&n.feedInteractionItemStatCollector.logEvent({track_code:e,ref:t,item:i.FeedInteractionItemType.WALL_ITEM},i.EventItemType.OPEN_AUDIO)}function a(e){return["feed_news_top","feed_top"].includes(e)?"feed_top":["feed_news_recent","feed_recent","feed"].includes(e)?"feed_recent":["feed_recommended_top","feed_recommended_recent","feed_recommendations","feed_suggestions","recommended"].includes(e)?"feed_recommended":"other"}},309044:(e,t,o)=>{"use strict";o.d(t,{usePageBlockOffset:()=>i});var n=o(64640);const i=()=>(0,n.useNumericVariableValue)(document.body,"--page-block-offset")},699615:(e,t,o)=>{"use strict";o.d(t,{convertAttachesToPhpMedia:()=>m,convertKludgesToAttaches:()=>u,isEventForMarusia:()=>g,isMarusiaPeer:()=>h,isOnboardingFindFriendsLink:()=>f,isPinnedSortId:()=>E,isSupportAgentPeer:()=>p,isVkAdminPeer:()=>d});var n=o(7144),i=o(201193),r=o(705744),s=o(891911);function a(e,t=[]){const[o,n]=e.split("_");return[o,n,t]}function _(e,t,o=0,n=0){if(n>50)return[[],e.length];const i=[];let r="";for(;o<e.length;){const s=e[o];if("id"===s)r=t[o];else if(","===s&&r)i.push(a(r)),r="";else if("("===s){const[s,c]=_(e,t,o+1,n+1);o=c,i.push(a(r,s)),r=""}else if(")"===s)return""!==r&&i.push(a(r)),[i,o];o++}return r&&i.push(a(r)),[i,o]}let c={};function l(e){if(c[e])return c[e];const t=e?e.length:0,o=[],n=[];let i="";for(let r=0;r<t;r++){const t=e[r],s=t.charCodeAt(0);s>=48&&s<=57||"_"===t||"-"===t?i+=t:"("!==t&&")"!==t&&":"!==t&&","!==t||(""!==i&&(n.push(i),o.push("id"),i=""),n.push(t),o.push(t))}i.length>0&&(n.push(i),o.push("id"));const[r]=_(o,n);return Object.keys(c).length>300&&(c={}),c[e]=r,r}function u(e,t){const o=[];e.fwd_count?o.push({type:"mail",id:-t,object:{fwd_count:e.fwd_count}}):e.fwd&&o.push({type:"mail",id:-t,object:{fwd_count:l(e.fwd).length}});for(let t=1;e[`attach${t}_type`];++t)switch(e[`attach${t}_type`]){case"call":o.push({type:e[`attach${t}_type`],id:e[`attach${t}`],initiatorId:(0,n.intval)(e[`attach${t}_call_initiator_id`]),state:e[`attach${t}_call_state`],duration:(0,n.intval)(e[`attach${t}_call_duration`]),receiverId:(0,n.intval)(e[`attach${t}_call_receiver_id`])});break;case"doc":if("audiomsg"===e[`attach${t}_kind`]){const n=e.attachments?JSON.parse(e.attachments)[0]:{};o.push({type:e[`attach${t}_type`],kind:"audio_message",id:e[`attach${t}`],audio_message:n.audio_message});break}default:o.push({type:e[`attach${t}_type`],id:e[`attach${t}`],kind:e[`attach${t}_kind`],productId:e[`attach${t}_product_id`]})}return e.geo&&o.push({type:"geo",id:e.geo}),o}function d(e){return 100===e}function p(e){return 333===e}function h(e){return-194070336===e}function m(e){return e.map((e=>{const t="audiomsg"===e[2]?"audio_message":e[2];return`${e[0]}:${e[1]}:${t}`})).join(",")}function E(e){return e>0&&(e|i.PINNED_CONVERSATION_BIT_MASK)===i.PINNED_CONVERSATION_BIT_MASK}function f(e){return new RegExp(`(^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?${r.VK_SITE_REGEX_SOURCE_UNSAFE})?\\/onboarding_find_friends`).test(decodeURIComponent(e))}function g(e){return e.type===s.ADD_MESSAGE&&h(e.peerId)}},414299:(e,t,o)=>{"use strict";o.d(t,{getMessageFromTuple:()=>s,hasUserMentions:()=>a});var n=o(201683),i=o(699615),r=o(388078);const s=([e,t,o,s,a,_,c,l,u,d])=>{const p=Object.assign({},_||{},c||{});return Array.isArray(p.marked_users)&&(p.marked_users=p.marked_users.filter((e=>Object.values(n.MARKED_TYPE).includes(e[0])))),{messageId:e,flags:t,peerId:o,date:s,attaches:(0,i.convertKludgesToAttaches)(p,e),subject:p.title||"",text:a,kludges:p,randomId:l,userId:r.Ranges.isChatOrChannelPeer(o)?Number(p.from)||0:o,update_time:d,chat_local_id:u}};function a(e,t){return!!e.kludges&&(e.kludges.marked_users||[]).some((e=>{if(e[0]!==n.MARKED_TYPE.MENTIONS)return!1;switch(e[1]){case"all":return!0;case"online":return e[2].includes(t);default:return e[1].includes(t)}}))}},891911:(e,t,o)=>{"use strict";o.d(t,{ADD_MESSAGE:()=>l,CHANGE_PEER:()=>k,CHANGE_TAB:()=>R,CONVERSATION_UPDATED:()=>f,CONVO_MAJOR_ID_CHANGED:()=>G,CONVO_MINOR_ID_CHANGED:()=>q,DELETE_DIALOG:()=>x,EDIT_MESSAGE:()=>U,FAILED_MESSAGE:()=>N,FLAG_AUDIO_MESSAGE_LISTENED:()=>oe,FLAG_DELETED:()=>Z,FLAG_DELETE_BY_TTL:()=>ne,FLAG_HAS_REACTIONS:()=>ie,FLAG_HAS_REPLY:()=>te,FLAG_IMPORTANT:()=>Q,FLAG_OUTBOUND:()=>X,FLAG_SPAM:()=>J,FLAG_STEALTH:()=>ee,FOLDER_AD_TAG:()=>ae,FOLDER_HAS_BANNER:()=>se,FOLDER_IMPORTANT:()=>re,INVALIDATE_MESSAGE:()=>W,KEYBOARD_CALLBACK_RECEIVED:()=>b,MAIL_CHAT_UPDATE_TYPE_ADMIN_GRANTED:()=>_e,MAIL_CHAT_UPDATE_TYPE_ADMIN_KICKED:()=>he,MAIL_CHAT_UPDATE_TYPE_BANNER_CHANGED:()=>me,MAIL_CHAT_UPDATE_TYPE_BUSINESS_NOTIFY_DATA_CHANGED:()=>ye,MAIL_CHAT_UPDATE_TYPE_CALL_IN_PROGRESS_CHANGED:()=>ve,MAIL_CHAT_UPDATE_TYPE_CONTACT_CONVERTED:()=>ge,MAIL_CHAT_UPDATE_TYPE_FLAGS_CHANGED:()=>ce,MAIL_CHAT_UPDATE_TYPE_IS_NEW_CHANGED:()=>we,MAIL_CHAT_UPDATE_TYPE_KEYBOARD_CHANGED:()=>Ee,MAIL_CHAT_UPDATE_TYPE_MESSAGE_REQUEST_CHANGED:()=>fe,MAIL_CHAT_UPDATE_TYPE_PINNED:()=>le,MAIL_CHAT_UPDATE_TYPE_USER_JOINED:()=>ue,MAIL_CHAT_UPDATE_TYPE_USER_KICKED:()=>pe,MAIL_CHAT_UPDATE_TYPE_USER_LEFT:()=>de,MESSAGE_REQUEST_STATUS_ACCEPTED:()=>Ae,MESSAGE_REQUEST_STATUS_NEW:()=>Te,MESSAGE_REQUEST_STATUS_REJECTED:()=>be,MUTEX:()=>L,NOTIFY_SETTINGS_CHANGED:()=>A,PEER_PROFILE_TAGS_CHANGED_EVENT:()=>Y,PEER_TAGS_CHANGED_EVENT:()=>$,REACTION_CREATE_OR_EDIT_EVENT:()=>z,READ_INBOUND:()=>u,READ_INBOUND_BY_CMID:()=>p,READ_OUTBOUND:()=>d,READ_OUTBOUND_BY_CMID:()=>m,RECONNECTED:()=>H,RECONNECTING:()=>V,RECORDING_AUDIO:()=>y,REFRESH_LP_KEY:()=>O,REPLACE_DIRECTORIES:()=>P,REPLACE_FLAGS:()=>_,REPLACE_MESSAGE:()=>F,RESEND:()=>B,RESET_DIRECTORIES:()=>I,RESET_FLAGS:()=>c,RESET_PEER:()=>D,RESYNC:()=>S,SET_DIRECTORIES:()=>C,SET_FLAGS:()=>a,TRANSITION:()=>M,TYPING:()=>g,UNREAD_COUNT:()=>w,UNREAD_REACTIONS:()=>h,WAITING_FOR_RECONNECT:()=>K,constructEvent:()=>r,mutexEvent:()=>Me,readInboundByCmidEvent:()=>Se,readInboundEvent:()=>Ie,resetDirectoriesEvent:()=>Pe,resyncEvent:()=>Oe,setDirectoriesEvent:()=>Ce});var n=o(414299),i=o(7144);function r(e){switch(e[0]){case 0:return function([,e]){return{type:s,localId:e}}(e);case 1:return function([,e,t,o]){return{type:_,messageId:e,mask:t,peerId:o}}(e);case 2:return function([,e,t,o]){return{type:a,messageId:e,flags:t,peerId:o}}(e);case 3:return function([,e,t,o]){return{type:c,messageId:e,flags:t,peerId:o}}(e);case 4:return function([,e,t,o,i,r,s,a,_,c,u,d]){return{type:l,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(i),Number(r),s,a,_,c,u,d]),minorSortId:o}}(e);case 5:return function([,e,t,o,i,r,s,a,_,c,l]){return{type:U,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(o),Number(i),r,s,a,_,c,l])}}(e);case 6:return Ie(e);case 7:return function([,e,t,o]){return{type:d,peerId:e,upToId:t,unread:o}}(e);case 10:return Pe(e);case 11:return function([,e,t]){return{type:P,peerId:e,mask:t}}(e);case 12:return Ce(e);case 13:return function([,e,t,o]){return{type:x,peerId:e,localId:t,leaveChat:o}}(e);case 18:return function([,e,t,o,i,r,s,a,_,c,l]){return{type:F,...(0,n.getMessageFromTuple)([Number(e),Number(t),Number(o),Number(i),r,s,a,_,c,l])}}(e);case 19:return function([,e]){return{type:W,messageId:e}}(e);case 20:return function([,e,t]){return{type:G,peerId:e,majorId:t}}(e);case 21:return function([,e,t]){return{type:q,peerId:e,minorId:t}}(e);case 23:return function([,e,t]){return{type:$,peerId:e,peerTagsMask:t}}(e);case 51:return function([,e,t]){return{type:E,chatId:e,self:t}}(e);case 52:return function([,e,t,o]){return{type:f,peerId:t,updateType:e,updateArg:o}}(e);case 63:return function([,e,t,o,n]){return{type:g,peerId:e,userIds:t,totalCount:o,ts:n}}(e);case 64:return function([,e,t,o,n]){return{type:y,peerId:e,userIds:t,totalCount:o,ts:n}}(e);case 70:return function([,e,t]){return{type:v,userId:e,callId:t}}(e);case 80:return function([,e,t,o,n,i,r,s,a,_]){return{type:w,count:e,countNotMuted:t,showOnlyNotMuted:o,businessNotifyUnread:n,headerTotalUnread:i,headerNotMutedUnread:r,archiveUnreadCount:s,archiveUnreadUnmutedCount:a,archiveMentionsCount:_}}(e);case 114:return function([,e]){const{peer_id:t,sound:o,disabled_until:n}=e||{};return{type:A,peerId:t,sound:o,disabledUntil:n}}(e);case 115:return function([,e]){return{type:j,payload:e}}(e);case 119:return function([,e]){const{event_id:t,owner_id:o,peer_id:n,action:i}=e;return{type:b,event_id:t,owner_id:o,peer_id:n,action:i}}(e);case 120:return function([]){return{type:Y}}(e);case 601:return function([,e,...t]){const o=[],n=1===e?t.splice(2,1).pop():void 0,[i,r,s,...a]=t;for(let e=0;e<s;e++){const e=a.shift(),[t,n,,...i]=a.splice(0,e);o.push({reaction_id:t,count:n,...i?{user_ids:i}:void 0})}return{type:z,subtype:e,peerId:i,cmid:r,reactionsCount:s,reactionCounters:o,...n?{reactionId:n}:void 0}}(e);case 602:return function([,e,t,...o]){return{type:h,peerId:e,totalCount:t,cmids:o}}(e);case 10006:return Se(e);case 10007:return function([,e,t,o]){return{type:m,peerId:e,upToCmid:t,unread:o}}(e);case-1:return Oe();case-2:return function([,e,t]){return{type:O,key:e,url:t}}(e);case-3:return function([,e]){return{type:K,timeout:e}}(e);case-4:return{type:V};case-5:return{type:H};default:return function(e){return{type:T,params:e}}(e)}}const s="event_delete",a="event_set_flags",_="event_replace_flags",c="event_reset_flags",l="event_add_message",u="event_read_inbound",d="event_read_outbound",p="event_read_inbound_by_cmid",h="event_unread_reactions",m="event_read_outbound_by_cmid",E="event_chat_changed",f="event_chat_updated",g="event_typing",y="event_recoding_audio",v="event_video_call",w="event_unread_count",A="event_notify_settings_changed",b="event_keyboard_callback_received",T="event_empty",I="event_reset_directories",P="event_replace_directories",C="event_set_directories",S="event_resync",O="event_refresh_lp_key",M="transition_event",D="reset_peer",L="mutex",k="change_peer",R="event_change_tab",N="event_failed_message",B="event_resend",x="event_delete_dialog",U="event_edit_message",F="event_replace_message",W="event_invalidate_event",K="event_waiting_for_reconnect",V="event_reconnecting",H="event_reconnected",j="incoming_call",G="event_convo_major_id_changed",q="event_convo_minor_id_changed",$="peer_tags_changed",Y="peer_profile_tags_changed",z="reaction_create_or_edit",X=2,Q=8,J=64,Z=128,ee=65536,te=1<<21,oe=4096,ne=1<<22,ie=1<<24,re=1,se=8,ae=32768,_e=3,ce=4,le=5,ue=6,de=7,pe=8,he=9,me=10,Ee=11,fe=12,ge=13,ye=14,ve=19,we=22,Ae=1,be=2,Te=3;function Ie([,e,t,o]){return{type:u,peerId:e,upToId:t,unread:o}}function Pe([,e,t,o=!1]){return{type:I,peerId:e,mask:t,local:o}}function Ce([,e,t,o=!1]){return{type:C,peerId:e,mask:t,local:o}}function Se([,e,t,o]){return{type:p,peerId:e,upToCmid:t,unread:o}}function Oe(){return{type:S}}function Me([,e,t,o,n,r]){return{type:L,free:!!(0,i.intval)(e)||(0,i.intval)(n)===window.vk.id,resource:t,peerId:(0,i.intval)(o),who:(0,i.intval)(n),name:r}}},201683:(e,t,o)=>{"use strict";var n,i;o.d(t,{AttachmentType:()=>i,MARKED_TYPE:()=>n}),function(e){e[e.MENTIONS=1]="MENTIONS",e[e.CASPER=2]="CASPER"}(n||(n={})),function(e){e.REPLY="reply",e.DOCUMENT="doc",e.MAIL="mail",e.CALL="call",e.STICKER="sticker",e.UGC_STICKER="ugc_sticker"}(i||(i={}))},216147:(e,t,o)=>{"use strict";o.d(t,{ColorScheme:()=>_,ColorSchemeMode:()=>a.ColorSchemeMode,ColorSchemeName:()=>a.ColorSchemeName,colorScheme:()=>c});var n,i=o(772546),r=o(705744),s=o(490712),a=o(312258);!function(e){e.DARK="dark",e.LIGHT="light"}(n||(n={}));class _{init(e){if(this.isExecuted)return;if(this.schemesMap=e.schemesMap,this.setMode(e.mode),this.initSubscribers.forEach((e=>{e()})),(0,s.statlogsValueEvent)("web_dark_theme",this.getMode(),this.getScheme(),Number(this.isDarkScheme())),!_.isSchemesAutoSwitchingSupported())return;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{this.currentMode===a.ColorSchemeMode.Auto&&this.setScheme(e.matches)})),this.isExecuted=!0}setScheme(e){_.isSchemesSupported()&&(this.applyScheme(document.body,e?a.ColorSchemeName.Dark:a.ColorSchemeName.Light),this.currentIsDark=e,document.querySelector("meta[name=theme-color]")?.setAttribute("content",e?a.SchemeColors.Dark:a.SchemeColors.Light),document.querySelector("meta[name=color-scheme]")?.setAttribute("content",e?"dark":"light"),this.isSchemeSavingAllowed&&(0,i.setCookie)("remixdark_color_scheme",Number(e),365),this.subscribers.forEach((e=>{e()})))}static getAppearanceByScheme(){switch(document.body.getAttribute("scheme")){case a.ColorSchemeName.Dark:case a.ColorSchemeName.WebDark:return"dark"}return"light"}isDarkScheme(){return this.currentIsDark}getMode(){return this.currentMode}setMode(e){let t=!1;switch(e){case a.ColorSchemeMode.Light:t=!1;break;case a.ColorSchemeMode.Dark:t=!0;break;case a.ColorSchemeMode.Auto:if(_.isSchemesAutoSwitchingSupported()){t=window.matchMedia("(prefers-color-scheme: dark)").matches}else e=a.ColorSchemeMode.Light}this.currentMode=e,this.setScheme(t),this.isModeSavingAllowed&&(0,i.setCookie)("remixcolor_scheme_mode",e,365)}getScheme(){return(0,r.isMvk)()?this.getMVKScheme():this.getWebScheme()}getMVKScheme(){return this.isDarkScheme()?a.ColorSchemeName.Dark:a.ColorSchemeName.Light}getWebScheme(){return this.isDarkScheme()?a.ColorSchemeName.WebDark:a.ColorSchemeName.WebLight}applyScheme(e,t){const o=this.schemesMap?.[t]||t;e.setAttribute("scheme",o)}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>e!==t))}}onInit(e){return this.initSubscribers.push(e),()=>{this.initSubscribers=this.initSubscribers.filter((t=>e!==t))}}static isSchemesSupported(){return window.CSS&&CSS.supports&&CSS.supports("color","var(--custom-property)")}static isSchemesAutoSwitchingSupported(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme)").matches}constructor(){this.subscribers=[],this.initSubscribers=[],this.isExecuted=!1,this.isModeSavingAllowed=!0,this.isSchemeSavingAllowed=!0}}let c;c=window.colorScheme?window.colorScheme:new _,window.colorScheme=c,window.isSchemesSupported=_.isSchemesSupported.bind(null)},80505:(e,t,o)=>{"use strict";o.d(t,{processWaf:()=>h});var n=o(476726),i=o(705744);const r=429,s="429.html",a="X-WAF-Redirect",_="waf_ajax_request_enabled",c="mvk_waf_ajax_request_enabled";function l(){return(0,n.partConfigEnabled)((0,i.isMvk)()?c:_)}function u(e=""){return l()&&""!==e}let d=!1;function p(){d||(d=!0,location.reload())}function h(e){if(!l())return!1;let t=!1;if(e instanceof XMLHttpRequest){let o;try{o=e.getResponseHeader(a)}catch(e){}t=u(o||"")}else e&&(t=function(e){return l()&&e.status===r&&e.source===s}(e));return t&&p(),t}},507607:(e,t,o)=>{"use strict";o.d(t,{asyncComponent:()=>r});var n=o(296540),i=o(8520);function r(e,t){return(0,n.lazy)((()=>(0,i.asyncImportLoader)(e,3).then((e=>({default:t(e)})))))}},998355:(e,t,o)=>{"use strict";o.d(t,{prepareHref:()=>d,processNavigation:()=>u});var n=o(242422),i=o(705744),r=o(476726);function s(e,t){null===t&&(0,i.isMvk)()&&(t="m");const{protocol:o}=window.location;return`${o}//${[t,(0,i.getHostName)()].filter(Boolean).join(".")}/${e}`}function a(){const e=window.location.host.split(".");if(!(e.length<3||"m"===e[1]&&e.length>4||"m"!==e[1]&&e.length>3))return e[0]}function _(e){return(0,i.isMvk)()?`${e}.m`:e}function c(e){const t=a();return!(!t||(o=t,!(0,r.getConfigValue)("special_subdomains_groups")?.find((e=>e[1]===o))))&&(window.location.href=s(e),!0);var o}function l(e,t){const o=t.split("?")[0];for(let e of(0,r.getConfigValue)("special_subdomains_groups")??[]){const[,t,n]=e;if(o===n)return t}for(let[,o]of Object.entries(e)){const[e,i]=(0,n.matcher)(o,`/${t}`);if(e&&(i.ownerId||i.groupId||i.screenName))for(let e of(0,r.getConfigValue)("special_subdomains_groups")??[]){const[t,o,n]=e;if((i.ownerId?Number(i.ownerId):i.groupId?-Number(i.groupId):void 0)===t||i.screenName===n)return o}}return null}function u(e,t){const o=l(e,t);return o?function(e,t){return a()!==e&&(window.location.href=s(t,_(e)),!0)}(o,t):c(t)}function d(e,t){const o=t.slice(1),n=l(e,o);return n?s(o,_(n)):t}},106149:(e,t,o)=>{"use strict";function n(e){return navigator.clipboard?function(e){return navigator.clipboard.writeText(e)}(e):(i(e),Promise.resolve())}function i(e){const t=document.createElement("input"),o=document.activeElement;t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),o.focus()}o.d(t,{_copyWithFakeElement:()=>i,copyToClipboard:()=>n})},178487:(e,t,o)=>{"use strict";function n(e,t){let o;e=Math.max(e,0);const n=Math.floor(e%60);o=n<10?"0"+n:n;const i=(e=Math.floor(e/60))%60;return o=i+":"+o,((e=Math.floor(e/60))>0||t)&&(i<10&&(o="0"+o),o=e+":"+o),o}o.d(t,{formatTime:()=>n})},969621:(e,t,o)=>{"use strict";o.d(t,{dedupeAsyncCallback:()=>i});var n=o(8520);function i(e,t=((...e)=>e)){const o=new Map;return(...i)=>{const r=t(...i);for(const[e,t]of o.entries())if((0,n.isEqual)(r,e))return t;const s=e(...i);return o.set(r,s),s.finally((()=>{o.delete(r)})),s}}},226095:(e,t,o)=>{"use strict";o.d(t,{createElementFromHTML:()=>r,emptyNode:()=>s,findChildOrSelf:()=>h,getElementOffset:()=>a,getElementSize:()=>l,getH:()=>g,getJsonDataValue:()=>u,getSize:()=>i,getViewportSize:()=>_,getW:()=>f,getXY:()=>m,hide:()=>v,isVisibleInViewPort:()=>c,setGlobalCustomProperty:()=>d,show:()=>y,triggerAnimationClass:()=>p});var n=o(714209);function i(e){return[e&&e.offsetWidth||0,e&&e.offsetHeight||0]}function r(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function s(e){if(e)for(;e.firstChild;)e.removeChild(e.firstChild)}function a(e){const t=e.getBoundingClientRect();return{left:t.left,top:t.top}}function _(){const{clientWidth:e,clientHeight:t}=document.documentElement;return{width:e,height:t}}function c(e,t=0){const o=e.getBoundingClientRect(),n=o.height*t,i=Math.max(document.documentElement.clientHeight,window.innerHeight);return o.bottom-n>0&&o.top-i+n<=0}function l(e){const{width:t,height:o}=e.getBoundingClientRect();return t&&o?{width:t,height:o}:{width:e.offsetWidth,height:e.offsetHeight}}const u=(e,t)=>{const o=e.getAttribute(t);if(o)try{return JSON.parse(o)}catch(e){return}},d=(e,t)=>{document.documentElement.style.setProperty(e,t)},p=(e,t,o)=>{e.classList.add(t),setTimeout((()=>{e.classList.remove(t)}),o)};function h(e,t){return e.matches(t)?e:e.querySelector(t)}function m(e){if(!e)return[0,0];const t=e.getBoundingClientRect();return[t.left+window.scrollX,t.top+window.scrollY]}const E=(e,t,o)=>{let n,i=[0,0];if(t&&e&&"border-box"===e.style.boxSizing&&(t=!1),e){function r(){e&&void 0!==e.getBoundingClientRect&&(n=function(e,t){let o;if(t&&"inline"===e?.style.display){const t=e.getClientRects();o=t&&t[0]||e.getBoundingClientRect()}else o=e?.getBoundingClientRect();return o}(e,o))&&void 0!==n.width?i=[n.width,n.height]:e&&(i=[e.offsetWidth,e.offsetHeight]),t&&i.forEach((t=>{(t?["Top","Bottom"]:["Left","Right"]).forEach((o=>{i[t]-=Number(e?.style[`padding${o}`])||0,i[t]-=Number(e?.style[`border${o}Width`])||0}))}))}if("none"===e.style.display){const s={position:"absolute",visibility:"hidden",display:"block"},a={},_=e.style.cssText.includes("!important")?e.style.cssText:"";Object.keys(s).forEach((t=>{const o=t;a[o]=e.style[t],e.style[o]=s[t]})),r(),Object.keys(s).forEach((t=>{e.style[t]=a[t]})),_&&(e.style.cssText=_)}else r()}return i};function f(e){return E(e)[0]}function g(e){return E(e)[1]}function y(...e){const t=e.length;if(t>1){for(let o=0;o<t;o++)y(e[o]);return}const o=e[0],i=o.olddisplay;if(o.style.display=i||"","none"!==o.style.display)return;const r=o.tagName.toLowerCase();let s="block";o.classList.contains("inline")||o.classList.contains("_inline")||o.classList.contains("_i")?s="inline":o.classList.contains("_inline_block")||o.classList.contains("_ib")?s="inline-block":o.classList.contains("_flex")?s="flex":"tr"!==r||n.browser.msie?"table"!==r||n.browser.msie||(s="table"):s="table-row",o.style.display=o.olddisplay=s}function v(...e){const t=e.length;if(t>1){for(let o=0;o<t;o++)v(e[o]);return}const o=e[0],n=o.style.display;o.olddisplay="none"!==n?n:"",o.style.display="none"}},539291:(e,t,o)=>{"use strict";o.d(t,{getBrowserFingerprint:()=>i});var n=o(772546);function i(){return(0,n.getCookie)("remixgp")}},421735:(e,t,o)=>{"use strict";o.d(t,{debugBufferLog:()=>l,logError:()=>a,logEvalError:()=>c,logUnknownError:()=>_});var n=o(476726),i=o(553493),r=o(65689),s=o(716707);function a(e,t={}){if(window?.Raven){const{breadcrumb:o,environment:n}=t;o&&window.Raven.captureBreadcrumb({message:o.message,category:r.customBreadcrumbCategory,data:o.data}),n?window.Raven.captureException(e,{environment:n}):window.Raven.captureException(e)}(0,n.partConfigEnabled)("eager_error_monitoring")?(0,s.logError)(e,t):(0,i.logError)(e,t)}function _(e){if(e instanceof Error)return void a(e);let t="unknown error";if("string"==typeof e&&(t=e),"object"==typeof e&&null!==e&&"message"in e){const{message:o}=e;"string"==typeof o&&(t=o)}a(new Error(t))}function c(e,t){t&&t.length>2e3&&(t=`${t.slice(0,1e3)}...${t.slice(-1e3)}`),e.message+=`: ${t}`,a(e)}function l(e){return a(e,{environment:"debugLog"})}},443151:(e,t,o)=>{"use strict";o.d(t,{isStuckError:()=>d,pruneRequestFromStuckErrors:()=>p});var n=o(476726),i=o(207102),r=o(33975);const s="mvk"===window.vk?.statsMeta?.platform&&(0,n.partConfigEnabled)("mute_mvk_err_peaks"),a=o(447201),_=10,c=s&&a(_),l=s&&a(_,5e3),u=({value:e,stacktrace:t,file:o,page:n})=>[e,t.join(""),o,n].join("_"),d=e=>{if(!s||!l||!c)return!1;const t=u(e);let[o,n]=[c.get(t)||0,l.get(t)||0];return c.set(t,++o),l.set(t,++n),n>=_||o>=50},p=s?e=>{const t=Date.now(),o="jsErrorLogs",n=(0,i.getWebStatsStringValue)(o,e);let s;if((n.match(new RegExp("},{","g"))?.length||0)<_)return e;try{s=JSON.parse(n)}catch(e){(0,r.logProcessingTime)(1,"dedupe-fail")}if(!s)return e;const a=Object.values(s.reduce(((e,t)=>{const o=u(t),n=e[o]||[];return{...e,[o]:n.length<_?n.concat(t):n}}),{})),c=e.replace(`"${o}":${n}`,`"${o}":${JSON.stringify([].concat.apply([],a))}`),l=Date.now()-t;return l>16&&(0,r.logProcessingTime)(l,"dedupe"),c}:e=>e},568352:(e,t,o)=>{"use strict";o.d(t,{debugBufferLog:()=>r.debugBufferLog,getRavenXhrTransport:()=>i.getRavenXhrTransport,logError:()=>r.logError,logEvalError:()=>r.logEvalError,prepareError:()=>n.prepareError});var n=o(948103),i=o(881192),r=o(421735)},948103:(e,t,o)=>{"use strict";function n(e,t){const o=e.exception&&e.exception.values[0]||{type:"Message",value:e.message+i(e),stacktrace:e.stacktrace||{frames:[]}};"Error"===o.type&&o.value.startsWith("Non-Error exception captured with keys:")&&(o.value+=i(e)),!o.value&&e.message&&(o.value=e.message);const{type:n,value:a,stacktrace:_}=o;let{origin:c,protocol:l,hostname:u,port:d,href:p}=window.location;d=d?`:${d}`:"",c=c||`${l}//${u}${d}`;const{environment:h,transaction:m,breadcrumbs:E,event_id:f}=e;let g;g=h||t(m,_,a);return{id:f,module:g,type:n,value:a,file:m,breadcrumbs:r(E),stacktrace:s(_,c),page:p,release:window.vk.rv,time:window.vk.ts+Math.floor(((new Date).getTime()-window.vk.started)/1e3)}}function i(e){return e.extra&&e.extra.__serialized__?"\n"+JSON.stringify(e.extra.__serialized__).slice(0,500):""}function r(e){if(!e||!e.values||0===e.values.length)return"";const{data:t,category:o,message:n}=e.values[0];if("xhr"===o){const{method:e,status_code:o,url:n}=t;return`${e}:${o}:${n}`}return"custom"===o?`${n}:${JSON.stringify(t)}`:""}function s(e,t){const o=[];return e.frames.forEach((function(e,n){0===n&&(e.filename.includes("raven_logger.js")||e.filename.includes("raven.js"))||o.push(`${e.filename.replace(t,"")}:${e.lineno}:${e.colno}:${e.function}`)})),o}o.d(t,{prepareError:()=>n})},881192:(e,t,o)=>{"use strict";o.d(t,{getRavenXhrTransport:()=>r});var n=o(144770),i=o(443151);const r=e=>t=>{const{data:o,onSuccess:r}=t,s=e(o);!(0,i.isStuckError)(s)&&(0,n.saveJsErrorLogs)(s),r()}},935682:(e,t,o)=>{"use strict";o.d(t,{LangReplace:()=>r});var n=o(474848),i=o(296540);function r({string:e,tokens:t}){const o=Object.keys(t).reduce(((e,o)=>{const r=t[o];return e.forEach(((t,s)=>{const a=function(e,t,o){if("string"!=typeof e)return[e];const r=`{${t}}`,s=e.split(r);return function(e,t,o){const r=e.length-1;return e.reduce(((e,s,a)=>{if(e.push(s),a!==r){const r=`${t}-${a}`;e.push((0,n.jsx)(i.Fragment,{children:o},r))}return e}),[])}(s,t,o)}(t,o,r);e.splice(s,1,...a)})),e}),[e]);return(0,n.jsx)(n.Fragment,{children:o})}},64542:(e,t,o)=>{"use strict";o.d(t,{LangReplace:()=>n.LangReplace});var n=o(935682)},610989:(e,t,o)=>{"use strict";o.r(t),o.d(t,{LangReplace:()=>n.LangReplace,getLang:()=>i.getLang,getShortDate:()=>i.getShortDate,getSmDate:()=>i.getSmDate,langDate:()=>i.langDate,langLink:()=>i.langLink,langNumeric:()=>i.langNumeric,langReplace:()=>i.langReplace,langReplacePrep:()=>i.langReplacePrep,langSex:()=>i.langSex,langStr:()=>i.langStr,langTag:()=>i.langTag,parseLatin:()=>i.parseLatin,useLangContext:()=>r.useLangContext});var n=o(64542),i=o(449060),r=o(447497)},447497:(e,t,o)=>{"use strict";o.d(t,{useLangContext:()=>r});var n=o(296540),i=o(449060);function r(){return(0,n.useMemo)((()=>({getLang:i.getLang,langDate:i.langDate,langSex:i.langSex,langNumeric:i.langNumeric})),[])}},449060:(e,t,o)=>{"use strict";o.d(t,{getLang:()=>s,getShortDate:()=>f,getSmDate:()=>E,langDate:()=>m,langLink:()=>p,langNumeric:()=>a,langReplace:()=>u,langReplacePrep:()=>h,langSex:()=>_,langStr:()=>c,langTag:()=>d,parseLatin:()=>g});var n=o(8520),i=o(476726),r=o(568352);function s(e,t,o){if(!e)return"...";try{const s=function(e){const t=window.cur&&window.cur.lang&&window.cur.lang[e]||window.lang&&window.lang[e]||window.langpack&&window.langpack[e]||window[e];return!t&&(0,i.partConfigEnabled)("log_get_lang_errors")&&(0,r.logError)(new ReferenceError(`No value for lang key "${e}" is specified`)),t}(e);if(!s){const t=e.split("_");return t.shift(),t.join(" ")}let _;if((0,n.isFunction)(s))_=String(s.apply(null,[...arguments]));else if(void 0===t&&!Array.isArray(s)||"raw"===t){if("string"!=typeof s)return(0,n.decodeHTMLEntitiesDeep)(s);_=s}else _=a(t,s,o);return(0,n.decodeHTMLEntities)(_)}catch(e){const t="getLang error: "+e.message+"("+[...arguments].join(", ")+")";return(0,i.partConfigEnabled)("log_get_lang_errors")&&(0,r.logError)(new ReferenceError(t)),console.error(t),"..."}}function a(e,t,o){const i=window.langConfig;if(!t||!i){if(!(0,n.isNumeric)(e)){const t=new Error("Non-numeric value passed to langNumeric");throw console.log(e,t),t}return String(e)}let r;Array.isArray(t)?(r=t[1],e!=Math.floor(e)?r=t[i.numRules.float]:(i.numRules.int||[]).some((o=>{if("*"===o[0])return r=t[o[2]],!0;const n=o[0]?e%o[0]:e;return Array.isArray(o[1])&&o[1].includes(n)?(r=t[o[2]],!0):void 0}))):r=t;let s=String(e);if(o){const e=s.split("."),t=[];for(let o=e[0].length-3;o>-3;o-=3)t.unshift(e[0].slice(o>0?o:0,o+3));e[0]=t.join(i.numDel),s=e.join(i.numDec)}return r=(r||"%s").replace("%s",s),r}function _(e,t){if(!Array.isArray(t))return t||"...";let o=t[1];const n=window.langConfig;return n?(n.sexRules&&n.sexRules.some((n=>"*"===n[0]||Number(e)===Number(n[0])&&t[n[1]]?(o=t[n[1]],!0):void 0)),o):o}function c(e,...t){let o=String(e);for(let e=0;e<t.length;e+=2){if(null==t[e])continue;const n=String(t[e]).startsWith("%")?t[e]:"{"+t[e]+"}";o=o.replace(n,t[e+1])}return o}const l=e=>{const t=Object.entries(e).map((([e,t])=>[e,(0,n.escape)(t)]));return Object.fromEntries(t)};function u(e,t,o={}){const n=o.escapeTokens?l(t):t;for(const t in n){if(!n.hasOwnProperty(t))continue;const o=`{${t}}`;e=e.replace(o,n[t])}return e}function d(e,t,o,n="tag"){return o=(o=o.replace(`{${n}}`,e)).replace(`{/${n}}`,t)}function p(e,t,o="link",n=""){return d(`<a href="${e}" ${n}>`,"</a>",t,o)}function h(e,t){if(!t)return e;const o=window.langConfig.prep;if(o.length){const n=o.map((t=>{const[o,n,i]=t,[r,s]=o.split(","),[a,_]=i.split(","),c=new RegExp(r).test(e),l=new RegExp(s).test(e);return c?[r,n,a]:!!l&&[s,n,_]})).filter((e=>!!e));if(2===n.length){const[o,i]=n,[r,s,a]=i;if(!s.split(",").find((e=>{const o=e.replace("*","");return o&&new RegExp(`^${o}`).test(t)}))){const[n,i,r]=o;if(i.split(",").find((e=>{const o=e.replace("*","");return o&&new RegExp(`^${o}`).test(t)})))return e.replace(n,r)}return e.replace(r,a)}}return e}function m(e,t,o,i,r,s){const{langConfig:a}=window;if(!e||!t)return"";let _;if(s||(s=""),"string"==typeof t&&(t=["",t,t,t,t]),"number"==typeof e?(e>2147483646e3&&(e=0),e+=o,_=new Date(e)):_=e,r)t=t[1];else{let e="";e=(0,n.isDateToday)(_)?t[3]:(0,n.isDateYesterday)(_)?t[2]:(0,n.isDateTomorrow)(_)?t[4]:t[1],!e&&t[1]&&(e=t[1]),t=e}let c="",l={hours:_.getHours(),minutes:_.getMinutes(),seconds:_.getSeconds(),day:_.getDate(),month:_.getMonth()+1,year:_.getFullYear()};switch(3===a.id&&(c=_.getHours()>11?"pm":"am",l.hours=_.getHours()%12==0?12:_.getHours()%12),a.id){case 1:switch(_.getHours()){case 11:t=t.replace(" о "," об ");break;case 0:t=t.replace(" о "," в ")}break;case 3:!(0,n.isDateToday)(_)||(0,n.isDateYesterday)(_)||(0,n.isDateTomorrow)(_)||(t=s+t);break;case 12:case 73:1==_.getHours()&&(t=t.replace(" &#224;s "," &#224; "))}return 68===a.id&&(l.year=l.year+543),t.replace("{hour}",l.hours.toString()).replace("{num_hour}",(0,n.leadingZero)(l.hours)).replace("{minute}",(0,n.leadingZero)(l.minutes)).replace("{day}",l.day.toString()).replace("{num_day}",(0,n.leadingZero)(l.day)).replace("{month}",i[l.month]).replace("{year}",l.year.toString()).replace("{short_year}",(l.year%100).toString()).replace("{second}",(0,n.leadingZero)(l.seconds)).replace("{am_pm}",c)}function E(e,t=0,o=!0){const n=new Date,i=n.getFullYear(),r=n.getMonth(),a=new Date(1e3*e),_=a.getFullYear(),c=a.getMonth();return m(1e3*e,s(_<i&&(r>1||c<9||i-_>=2)?"global_date":"global_short_date_time","raw"),t,s("months_sm_of","raw"),!o)}function f(e,t,o=!0,n=s("months_of","raw"),i){e*=1e3,t*=1e3;const r=Date.now(),a=new Date(r),_=new Date(e+t);return!i&&e>r&&e-r<864e5&&a.getDate()===_.getDate()?m(e,"{hour}:{minute} {am_pm}",t,[],!o):_.getFullYear()!==a.getFullYear()||e<r-157248e5?m(e,s("global_date","raw"),t,n,!o):m(e,s("global_short_date","raw"),t,n,!o)}function g(e){const t=["yo","zh","kh","ts","ch","sch","shch","sh","eh","yu","ya","YO","ZH","KH","TS","CH","SCH","SHCH","SH","EH","YU","YA","'"],o=["ё","ж","х","ц","ч","щ","щ","ш","э","ю","я","Ё","Ж","Х","Ц","Ч","Щ","Щ","Ш","Э","Ю","Я","ь"];let n=e;for(let e=0,i=t.length;e<i;e++)n=n.split(t[e]).join(o[e]);const i="abvgdezijklmnoprstufhcyABVGDEZIJKLMNOPRSTUFHCYёЁ";for(let e=0,t=48;e<t;e++)n=n.split(i.charAt(e)).join("абвгдезийклмнопрстуфхцыАБВГДЕЗИЙКЛМНОПРСТУФХЦЫеЕ".charAt(e));return n===e?null:n}},250682:(e,t,o)=>{"use strict";o.d(t,{ls:()=>_,multiAccountLs:()=>u});var n=o(623702);function i(){try{return void 0!==window.localStorage&&null!==window.localStorage&&void 0!==window.JSON}catch(e){return!1}}function r(e,t){if(void 0===e)return!1;a(e);try{return n.vkLocalStorage.setItem(e,JSON.stringify(t))}catch(e){return!1}}function s(e){if(void 0===e)return!1;try{return JSON.parse(n.vkLocalStorage.getItem(e))}catch(e){return!1}}function a(e){try{n.vkLocalStorage.removeItem(e)}catch(e){}}const _={checkVersion:i,remove:a,get:s,set:r},c=e=>void 0!==e?`${e}_@id:${window.vk.id}`:void 0,l=e=>(...t)=>{const[o,...n]=t,i=[c(o),...n];return e(...i)},u={checkVersion:i,remove:l(a),get:e=>{const t=l(s)(e);if(null===t){const t=s(e);if(null!==t)return u.set(e,t),a(e),t}return t},set:l(r)}},714707:(e,t,o)=>{"use strict";o.d(t,{NarrativeAnalyticEventType:()=>n,NarrativeAnalyticNavScreen:()=>i,sendNarrativeAnalytic:()=>a});var n,i,r=o(490712),s=o(476726);function a(e,t,o="other"){const n=t?.title||void 0,i=t?.customCover?0:t?.coverStoryId||0,a=t?.id||0,_=t?.ownerId||0,c=t?.stories?.map((e=>e.id)),l={event_type:e,nav_screen:o,narrative_owner_id:_,narrative_id:a,narrative_title:n,story_ids:c?.length?c:void 0,cover_story_id:i};(0,r.statlogsValueEvent)("narrative_product_analytic",l),(0,s.partConfigEnabled)("narratives_web_analytic_debug")&&console.log("-- narrative analytic",l)}!function(e){e.clickToAddToNarrative="click_to_add_to_narrative",e.addStoryToNarrative="add_story_to_narrative",e.openNarrativeList="open_narrative_list",e.close="close",e.changeSort="change_sort",e.publishNarrative="publish_narrative",e.createNarrative="create_narrative",e.deleteNarrative="delete_narrative",e.clickToEditNarrative="click_to_edit_narrative",e.editNarrative="edit_narrative",e.addToBookmarks="add_to_bookmarks",e.shareNarrative="share_narrative",e.seeMore="see_more",e.addToNarrativeFromActionSheet="add_to_narrative_from_action_sheet"}(n||(n={})),function(e){e.storyArchive="story_archive",e.storyViewer="story_viewer",e.profile="profile",e.feedBlock="narratives_feed_block",e.club="club",e.other="other"}(i||(i={}))},384676:(e,t,o)=>{"use strict";function n(){return location.hostname}o.d(t,{currentHostname:()=>n})},317809:(e,t,o)=>{"use strict";o.d(t,{isRelativeURL:()=>a,isSameSubdomainHostname:()=>_,isVKSiteURLAnySubdomainTarget:()=>u,isVKSiteURLForNav:()=>p,isVKSiteURLSameSubdomainTarget:()=>l});var n=o(705744),i=o(384676);const r=new RegExp(`^(([a-zA-Z0-9\\.\\_\\-]+)\\.)?(${n.VK_HOST_REGEX_UNSAFE.source})$`);function s(e){const t=e.match(r);if(!t)return;const[,,o,n]=t;return{baseDomain:n,subDomain:o}}function a(e){return!/^https?:\/\//i.test(e)}function _(e,t){return!(!n.VK_DOMAIN_REGEX.test(e)||!n.VK_DOMAIN_REGEX.test(t))&&function(e,t){const o=s(e)?.subDomain,n=s(t)?.subDomain;return o===n}(e,t)}function c(e,t){const o=h(e);return!!o&&(!(!t||!_(function(){const e=(0,i.currentHostname)(),t=s(e);if(!t)return e;return t.baseDomain}(),o.url.hostname))||_((0,i.currentHostname)(),o.url.hostname))}function l(e,t){return!!p(e)&&c(e,t)}function u(e){return p(e)}function d(e){const t=function(e){const t=h(e);if(t)return s(t.url.hostname)?.baseDomain}(e);return void 0!==t&&n.VK_POSSIBLE_SITE_HOSTS.includes(t)}function p(e){return d(e)}function h(e){if(n.VK_URL_REGEX_STRICT.test(e))try{return{url:new URL(e)}}catch(e){console.error(e)}}},171444:(e,t,o)=>{"use strict";function n(e){window.cur&&window.cur.destroy&&window.cur.destroy.push(e)}o.d(t,{pushNavDestroy:()=>n})},736852:(e,t,o)=>{"use strict";o.d(t,{isVKSiteURLForNav:()=>i.isVKSiteURLForNav,stripVKSiteURLOrigin:()=>_,toMaybeVKSiteURLRelativeName:()=>r,toMaybeVKSiteURLRelativePath:()=>s});var n=o(705744),i=(o(384676),o(317809));function r(e,t){return a(e,"",t)}function s(e,t){return a(e,"/",t)}function a(e,t,o={}){const{allowAnySubdomainAsCurrent:r=!1,allowWebBaseDomainAsCurrent:s=!1}=o,a=r?(0,i.isVKSiteURLAnySubdomainTarget)(e):(0,i.isVKSiteURLSameSubdomainTarget)(e,s);if(!((0,i.isRelativeURL)(e)||a))return e;const _=new RegExp(`(${n.VK_ORIGIN_PREFIX_REGEX.source})?/?`);return e.replace(new RegExp(_),t)}function _(e){return(0,i.isVKSiteURLForNav)(e)?s(e,{allowWebBaseDomainAsCurrent:!0}):e}},614212:(e,t,o)=>{"use strict";o.d(t,{parseJSON:()=>r});var n=o(568352),i=o(65689);function r(e){try{return JSON.parse(e)}catch(t){const o={environment:"parseJsonError",breadcrumb:{message:"Uncaught json parse error",data:{json:e},category:i.customBreadcrumbCategory}};return(0,n.logError)(t,o),{}}}},547754:(e,t,o)=>{"use strict";o.d(t,{logQuestionError:()=>n});const n=(0,o(953430).createSentryLogger)({debugPrefix:"[Questions Sentry Logger]"})},909075:(e,t,o)=>{"use strict";o.d(t,{QuestionsStatCollector:()=>_});var n=o(581903),i=o(695290),r=o(476726),s=o(789176),a=o(238540);class _{logClickEvent(e,t={}){const o={type:i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM,[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM]:{type:e,screen:t.navScreen||window.cur.module||""}};t.questionReceiverId&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_receiver_id=t.questionReceiverId),t.questionAuthorId&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_author_id=t.questionAuthorId),t.questionText&&(o[i.ClickProductionStatEventTypes.TYPE_QUESTION_ITEM].question_text=t.questionText);const n={type:i.EventItemType.QUESTION,id:t.questionId||0};(0,r.partConfigEnabled)("profile_questions_analytic_debug")&&console.log(`--${e}`,o,n),this.clickStatCollector.logEvent(o,n)}logOpeningEvent(e,t,o){let n;switch(t){case a.QuestionsBoxRef.STORY:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromStory:s.QuestionAnalyticEventType.openMyQuestionsFromStory;break;case a.QuestionsBoxRef.SNIPPET:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromSnippet:s.QuestionAnalyticEventType.openMyQuestionsFromSnippet;break;default:n=o===s.QuestionAnalyticBoxName.askQuestion?s.QuestionAnalyticEventType.openAskQuestionFromUrl:s.QuestionAnalyticEventType.openMyQuestionsFromUrl}const i={questionReceiverId:e};o===s.QuestionAnalyticBoxName.askQuestion&&(i.questionAuthorId=window.vk.id),this.logClickEvent(n,i)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.clickStatCollector=new n.ClickStatCollector(this.productionStatCollector)}}},731709:(e,t,o)=>{"use strict";o.d(t,{logQuestionsClickEvent:()=>i,logQuestionsOpeningEvent:()=>r});const n=new(o(909075).QuestionsStatCollector);function i(e,t={}){n.logClickEvent(e,t)}function r(e,t,o){n.logOpeningEvent(e,t,o)}},789176:(e,t,o)=>{"use strict";var n,i;o.d(t,{QuestionAnalyticBoxName:()=>i,QuestionAnalyticEventType:()=>n}),function(e){e.clickToQuestion="click_to_question",e.reply="reply",e.replyAgain="reply_again",e.sharing="sharing",e.shareToStory="share_to_story",e.shareToWall="share_to_wall",e.shareToGroup="share_to_group",e.shareToIm="share_to_im",e.copyLink="copy_link",e.openStory="open_story",e.callFriends="call_friends",e.openSettings="open_settings",e.openProfile="open_profile",e.block="block",e.unblock="unblock",e.deleteAllQuestions="delete_all_questions",e.delete="delete",e.cancelDelete="cancel_delete",e.cancelDeleteAllAuthorQuestions="cancel_delete_all_author_questions",e.cancelDeleteAllAnonymousQuestions="cancel_delete_all_anonymous_questions",e.next="next",e.close="close",e.clickToSend="click_to_send",e.sendQuestion="send_question",e.cancelSendQuestion="cancel_send_question",e.cancelWriteAnswer="cancel_write_answer",e.closeMyQuestions="close_my_questions",e.openMyQuestionsFromUrl="open_my_questions_from_url",e.openAskQuestionFromUrl="open_ask_question_from_url",e.openMyQuestionsFromSnippet="open_my_questions_from_snippet",e.openAskQuestionFromSnippet="open_ask_question_from_snippet",e.openMyQuestionsFromStory="open_my_questions_from_story",e.openAskQuestionFromStory="open_ask_question_from_story"}(n||(n={})),function(e){e[e.askQuestion=0]="askQuestion",e[e.myQuestions=1]="myQuestions"}(i||(i={}))},410796:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>n.createReactInitiator,createReactLazyInitiator:()=>n.createReactLazyInitiator});var n=o(299134)},299134:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>n.createReactInitiator,createReactLazyInitiator:()=>n.createReactLazyInitiator});var n=o(477266)},477266:(e,t,o)=>{"use strict";o.d(t,{createReactInitiator:()=>s,createReactLazyInitiator:()=>a});var n=o(474848),i=o(788744),r=o(476726);function s(e,t=null,o){const r=(0,i.createBasicReactInitiator)(t,o);return{...r,render:function(t){return r.render((0,n.jsx)(e,{...t}))}}}function a(e,t=null,o){const s=(0,i.createBasicReactInitiator)(t,o),a=!t;let _;return{...s,render:async function(o,i){const c=new Error("Async render error");if(!_){if(_=await e(),i?.abortSignal.aborted)return;const o=(0,r.partConfigEnabled)("react_lazy_initiator_abort_render"),n=Boolean("function"==typeof t?t():t);if(o&&!a&&!n)return void console.warn("Target container not found. Verify that it exists before render.")}return s.render((0,n.jsx)(_,{...o}),{asyncBaseError:c})}}}},788744:(e,t,o)=>{"use strict";o.d(t,{createBasicReactInitiator:()=>a});var n=o(440961),i=o(205338),r=o(171444),s=o(459438);function a(e=null,t={}){const{onRendered:o,onMounted:a,onUpdated:c,onUnmounted:l,destroyAfterNavigation:u=!0,useReact18Root:d}=t,p=!e;let h=null;function m(){if(e)return e;const t=(0,s.createReactContainer)();return document.body.appendChild(t),t}let E=null;if(d){const e=m();if("function"==typeof e)throw new Error("Function container getter is not allowed while using useReact18Root option");const t=_(e);E=(0,i.createRoot)(t)}function f(){if(!h)return!1;let e=!0;return E?E.unmount():e=n.unmountComponentAtNode(h),p&&h.remove(),h=null,l?.(e),e}return{render:function(e,t={}){let i=!1;try{h||(i=!0,h=_(m())),d?E?.render(e):n.render(e,h)}catch(e){throw t.asyncBaseError?new Error(e.message,{cause:t.asyncBaseError}):e}if(o?.(f),i){const e=h;u&&(0,r.pushNavDestroy)((()=>{e===h&&f()})),a?.(f)}else c?.(f)},unmount:f,getContainer:function(){return h},isMounted:function(){return!!h}}}function _(e){if("function"!=typeof e)return e;const t=e();if(!t)throw new Error("Target container not found. Verify that it exists before render.");return t}},459438:(e,t,o)=>{"use strict";function n(){const e=document.createElement("div");return e.id=`${i}_${r++}`,e}o.d(t,{createReactContainer:()=>n});const i=`rc_${(0,o(7144).srand)()}`;let r=0},432654:(e,t,o)=>{"use strict";o.d(t,{parseReactWikiLinks:()=>u});var n=o(474848),i=o(296540),r=o(765668),s=o(408063);const a={target:"_self",withVKUILink:!1,withNewRegex:!1,wrapAwayIfExternal:!1},_=new RegExp(`\\[?(${/(?:http(s)?:\/\/)/.source}?${/[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+/.source})${/(?:\|([\wёЁА-я ]{1,}))/.source}?\\]?`),c=new RegExp(`(${_.source}|${/\[(id|public|club|event)-?[\d]{1,}\|[\wёЁА-я ]{1,}\]/.source})`,"gi"),l=/^(http(s)?:\/\/)?vk.(com|ru)/gi;function u(e,t=a){const{target:o=a.target,withVKUILink:_=a.withVKUILink}=t,u=e.match(t.withNewRegex?c:/\[(.*?)\]/g),d=u?u.map((e=>e.replace(/\[|(.*?)\]/g,"$1"))):[];if(!u||!d.length)return(0,n.jsx)(i.Fragment,{children:e});const p=_?r.Link:"a",h=d.map(((e,i)=>{const[r,a]=e.split("|");let _=t.hrefMap?.[r]||(l.test(r)?r.replace(l,""):r);const c=t.onClickMap?.[r];return t.wrapAwayIfExternal&&(_=(0,s.wrapAwayIfExternal)(_)),(0,n.jsx)(p,{href:_,target:o,onClick:c,children:a||r},i)})),m=[];return u.forEach(((t,o)=>{const n=e.indexOf(t);m.push(e.substr(0,n)),m.push(h[o]),e=e.slice(n+t.length)})),m.push(e),(0,n.jsx)(i.Fragment,{children:m})}},381263:(e,t,o)=>{"use strict";function n(e,t){let o,n=t.timeout,i=t.onLoad,r=t.onError,s=document.createElement("script");if(s.addEventListener("load",a),s.addEventListener("readystatechange",a),s.addEventListener("error",_),t.attributes)for(const[e,o]of Object.entries(t.attributes))null==o||("boolean"==typeof o?s.toggleAttribute(e,o):s.setAttribute(e,o));function a(){s.readyState&&"loaded"!==s.readyState&&"complete"!==s.readyState||(c(),i&&i())}function _(){c(),r&&r()}function c(){clearTimeout(o),s.removeEventListener("load",a),s.removeEventListener("readystatechange",a),s.removeEventListener("error",_)}return s.src=e,document.head.appendChild(s),n&&(o=setTimeout(_,n)),{destroy:function(){c()}}}o.d(t,{loadScript:()=>n})},65689:(e,t,o)=>{"use strict";var n,i;o.d(t,{PROTECTED_MODULE_NAME_TAG:()=>r,customBreadcrumbCategory:()=>a,extensionPrefixes:()=>_,topErrorModuleName:()=>s}),function(e){e.SERVICE_WORKER="service_worker",e.EXTERNAL="external",e.UNKNOWN="unknown"}(n||(n={})),function(e){e.ERROR_OF_EXTENSION="ErrorOfExtension",e.KNOWN_ISSUE="KnownIssue"}(i||(i={}));const r="__protectedModuleName",s="genericVkError",a="custom",_=["chrome","moz","safari","safari-web"].map((e=>`${e}-extension://`))},553493:(e,t,o)=>{"use strict";o.d(t,{logError:()=>r});var n=o(705744),i=o(65689);function r(e,{breadcrumb:t,environment:o,hasDummyStacktrace:r}={}){const s=(0,n.getGlobalObject)(),a=s?.__SENTRY__?.hub;if("function"==typeof a?.captureException)return r&&"object"==typeof e&&e?.stack&&delete e.stack,a.captureException(e,{captureContext:e=>{const n=o||s.cur?.module;return n&&e.setTags({module:n,[i.PROTECTED_MODULE_NAME_TAG]:!0}),t&&e.addBreadcrumb({message:t.message,category:i.customBreadcrumbCategory,data:t.data}),e}})}},705744:(e,t,o)=>{"use strict";o.d(t,{VK_DOMAIN_REGEX:()=>u,VK_DOMAIN_REGEX_UNSAFE:()=>l,VK_HOST_REGEX_GROUP_UNSAFE:()=>c,VK_HOST_REGEX_UNSAFE:()=>_,VK_ORIGIN_PREFIX_REGEX:()=>p,VK_ORIGIN_REGEX_STRICT:()=>d,VK_POSSIBLE_SITE_HOSTS:()=>i,VK_SITES_REGEX_SOURCE_UNSAFE:()=>a,VK_SITE_REGEX_SOURCE_UNSAFE:()=>s,VK_URL_REGEX:()=>h,VK_URL_REGEX_STRICT:()=>m,getAverageRGB:()=>b,getGlobalObject:()=>y,getHostName:()=>g,getMediaBlob:()=>w,getVideoDuration:()=>v,isMvk:()=>E,isPWA:()=>f,loadFontFace:()=>P,loadFontFacePromise:()=>C,loadImage:()=>T,loadImages:()=>I,noop:()=>A});const n=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),i=["vk.com","vk.ru",g()].filter(((e,t,o)=>o.indexOf(e)===t)),r=i.concat(["vkontakte.ru","vk.me","userapi.com"]),s=n(g()),a=i.map(n).join("|"),_=new RegExp("("+r.map(n).join("|")+")"),c=new RegExp(r.map(n).join("|")),l=(new RegExp("^"+_.source+"$"),new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${_.source}`)),u=new RegExp("^"+l.source+"$"),d=(new RegExp(`^(https?:\\/\\/)?${l.source}$`),new RegExp(`^(https?:\\/\\/)${l.source}$`)),p=new RegExp(`^(https?:\\/\\/)${l.source}`),h=new RegExp(`^(https?:\\/\\/)?${l.source}($|\\/(.*))`),m=new RegExp(`^(https?:\\/\\/)${l.source}($|\\/(.*))`);function E(){return!!window.isMVK}function f(){return window.vk?.platform?.startsWith?.("pwa")}function g(){return y().vk?.__domain||"vk.com"}function y(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}function v(e=""){return new Promise(((t,o)=>{const n=document.createElement("video");n.addEventListener("loadedmetadata",(()=>t(n.duration)),{once:!0}),n.addEventListener("error",o,{once:!0}),n.crossOrigin="anonymous",n.preload="metadata",n.src=e}))}function w(e){return new Promise(((t,o)=>{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=()=>{if(404===n.response.status)return o();t(n.response)},n.onerror=o,n.send()}))}const A=()=>{};function b(e,t=0,o=0,n,i){const r={r:0,g:0,b:0};let s;n=n||e.canvas.width,i=i||e.canvas.height;try{s=e.getImageData(t,o,n,i)}catch(e){return r}let a=-4,_=0;for(;(a+=20)<s.data.length;)++_,r.r+=s.data[a],r.g+=s.data[a+1],r.b+=s.data[a+2];return r.r=~~(r.r/_),r.g=~~(r.g/_),r.b=~~(r.b/_),r}function T(e){return new Promise(((t,o)=>{const n=new Image;n.crossOrigin=e.startsWith("data:")?null:"Anonymous",n.onerror=()=>o(new Error(`Failed to load image's URL: ${e}`)),n.onload=()=>t(n),n.src=e}))}const I=e=>new Promise((t=>{const o=e.map((e=>T(e)));Promise.all(o).then((e=>t(e))).catch((()=>{}))}));function P(e,t){const o={normal:"400",500:"500",600:"600",bold:"700"},n={tolerance:2,delay:100,glyphs:"",success:function(){},error:function(){},timeout:5e3,weight:"400",style:"normal"},i={display:"block","font-size":"48px","line-height":"normal","font-variant":"normal","white-space":"nowrap",position:"absolute",visibility:"hidden",top:"-9999px",left:"-9999px",width:"auto",height:"auto",margin:"0",padding:"0"};let r,s,a,_,c,l,u;function d(e){let t=[];return each(e,(function(e,o){t.push(e+":"+o)})),t.join(";")}function p(e,t,o){return Math.abs(e.width-t.offsetWidth)>o||Math.abs(e.height-t.offsetHeight)>o}function h(){_||(utilsNode.appendChild(c),_=!0,a={sansSerif:{width:u.offsetWidth,height:u.offsetHeight},serif:{width:l.offsetWidth,height:l.offsetHeight}},u.style.fontFamily=`"${e}", sans-serif`,l.style.fontFamily=`"${e}", serif`),_&&a&&(p(a.sansSerif,u,t.tolerance)||p(a.serif,l,t.tolerance))?(c&&c.remove(),t.success()):(new Date).getTime()-s.getTime()>t.timeout?(c&&c.remove(),t.error()):!_&&"requestAnimationFrame"in window?window.requestAnimationFrame(h):window.setTimeout(h,t.delay)}for(let e in n)t.hasOwnProperty(e)||(t[e]=n[e]);i["font-weight"]=t.weight,i["font-style"]=t.style,!t.glyphs&&"fonts"in document?(t.timeout&&(r=setTimeout((function(){t.error()}),t.timeout)),function(n){each(document?.fonts,(function(i){i.family.toLowerCase()===e.toLowerCase()&&(o[i.weight]||i.weight)===""+t.weight&&i.style===t.style&&i.load().then((function(){t.success(),clearTimeout(n)}))}))}(r)):function(){const e="AxmTYklsjo190QW"+t.glyphs;s=new Date,c=document.createElement("div"),u=document.createElement("div"),u.innerHTML=e,l=document.createElement("div"),l.innerHTML=e,u.setAttribute("style",d(extend({"font-family":"sans-serif"},i))),l.setAttribute("style",d(extend({"font-family":"serif"},i))),c.appendChild(u),c.appendChild(l),h()}()}function C(e,t){return new Promise(((o,n)=>{P(e,{...t,glyphs:"",success(){const e=()=>{o(),t?.success&&t.success()};browser.safari?setTimeout(e,150):e()},error(){n(),t?.error&&t.error()}})}))}},623702:(e,t,o)=>{"use strict";o.d(t,{bestAvailableStorage:()=>E,getSessionStorage:()=>d,isStorageAvailable:()=>a,vkLocalStorage:()=>l,vkSessionStorage:()=>p});class n{setItem(e,t){this.data[e]=String(t)}removeItem(e){delete this.data[e]}clear(){this.data={}}get length(){return Object.keys(this.data).length}key(e){return Object.keys(this.data)[e]}constructor(){this.data={},this.getItem=e=>this.data.hasOwnProperty(e)?this.data[e]:null,this.keys=()=>Object.keys(this.data)}}const i="vk-ls-dummy",r=Math.random().toString(),s={localStorage:null,sessionStorage:null};function a(e){if(null===s[e])try{const t=window[e];t.setItem(i,r),s[e]=r===t.getItem(i),t.removeItem(i)}catch(t){s[e]=!1}return s[e]}let _;function c(){return _||(_=a("localStorage")?window.localStorage:new n,_)}const l={setItem:(e,t)=>c().setItem(e,t),getItem:e=>c().getItem(e),removeItem:e=>c().removeItem(e),clear:()=>c().clear(),length:()=>c().length,key:e=>c().key(e),keys(){const e=c();return e instanceof n?e.keys():Object.keys(e)},getPrefixedKeys:e=>l.keys().filter((t=>t.startsWith(e)))};let u;function d(){return u||(u=a("sessionStorage")?window.sessionStorage:new n,u)}const p={setItem:(e,t)=>d().setItem(e,t),getItem:e=>d().getItem(e),removeItem:e=>d().removeItem(e),clear:()=>d().clear(),length:()=>d().length,key:e=>d().key(e),keys(){const e=d();return e instanceof n?e.keys():Object.keys(e)},getPrefixedKeys:e=>p.keys().filter((t=>t.startsWith(e)))};let h;function m(){return h||(h=a("localStorage")?window.localStorage:a("sessionStorage")?window.sessionStorage:new n,h)}const E={setItem:(e,t)=>m().setItem(e,t),getItem:e=>m().getItem(e),removeItem:e=>m().removeItem(e),clear:()=>m().clear(),length:()=>m().length,key:e=>m().key(e),keys(){const e=m();return e instanceof n?e.keys():Object.keys(e)},getPrefixedKeys:e=>E.keys().filter((t=>t.startsWith(e)))}},456949:(e,t,o)=>{"use strict";o.d(t,{saveStats:()=>b});var n=o(207102),i=o(677276),r=o(33975),s=o(705744),a=o(263903),_=o(443151),c=o(476726),l=o(539291),u=o(713560);function d(){if(!(0,c.partConfigEnabled)("web_stats_reduce_debounce"))return!1;const e=window.vk?.started||Date.now();return Date.now()-e<=3e4}const p=()=>d()?1e3:1e4,h=()=>d()?5e3:2e4;let m,E=0;const f=()=>p()*E**.5,g=()=>!(Date.now()-(0,n.getLastSendTime)()>h()+f()),y=()=>Math.max(0,(0,n.getLastSendTime)()+(d()?2e3:2e4)-Date.now()),v=()=>{window.__isSendingWebStats||m||(m=window.setTimeout((()=>{const e=(0,n.getWebStatDataLs)();m=void 0,e.length>n.emptyStatsDataLs.length&&b(e)}),Math.max(Math.min(y(),p()),Math.max(0,(0,n.getLastSendTime)()+h()-Date.now()+f()))))},w=e=>{let t="";if((0,c.partConfigEnabled)("web_stats_device_id")){const e=new URLSearchParams,o=(0,l.getBrowserFingerprint)();o&&e.set("device_id",o),t=e.toString()}const o=`${window.vk.wsTransport}/web-stats/${window.vk.statsMeta.st?"s":"p"}${t&&`?${t}`}`,i=e.length>r.MAX_BODY_SIZE;let d=i?(0,u.getMaximumWebStats)(e):e,p=!1;if(!d)return window.__isSendingWebStats=!1,(0,n.clearLsData)();function h(t){const o=Date.now();window.__isSendingWebStats=!1,t<500&&(i&&200===t?Object.keys((0,n.getEmptyStatsData)()).forEach((e=>(0,a.pullFromWebStats)(e,d))):(0,n.clearLsData)(),E=0,p=!0),(i||400===t)&&(0,r.logProcessingTime)(Date.now()-o,`${i?"prune":"clean"}${400===t?"-fail":""}`,`${e.length>>>20}M ${d.length>>>20}M`),v()}function m(){const e=new XMLHttpRequest;e.withCredentials=o.includes(`tau.${(0,s.getHostName)()}`),e.onreadystatechange=()=>{e.readyState===XMLHttpRequest.DONE&&h(e.status)},e.onerror=()=>{window.__isSendingWebStats=!1,!p&&(0,n.clearLsData)()},e.open("POST",o,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(d)}d=(0,_.pruneRequestFromStuckErrors)((0,r.appendStatsMeta)(++E,d)),(0,r.canSendBeacon)()?(0,r.sendBeacon)(o,d).then((()=>h(200))).catch((()=>m())):m()},A=(e,t)=>{const o=t=>setTimeout((()=>e()),t);return t?.force?o(0):window.requestIdleCallback?window.requestIdleCallback((()=>o(p())),{timeout:p()/2}):o(p())};function b(e,t){const o=e.length>=r.MAX_BODY_SIZE,s=t?.force||o;if(e.length<=n.emptyStatsDataLs.length)(0,i.logWebStatsEvent)("WebStats empty data.","");else{if(!window.__isSendingWebStats)return s||m||!g()?(window.__isSendingWebStats=!0,A((()=>{const e=(0,n.getWebStatDataLs)();if(e.length>n.emptyStatsDataLs.length&&(s||!g()))return(0,n.setLastSendTime)(),w(e);clearTimeout(m),window.__isSendingWebStats=!1,m=void 0}),{...t,force:s})):((0,i.logWebStatsEvent)("WebStats delayed.",m),v());(0,i.logWebStatsEvent)("WebStats sending.",window.__isSendingWebStats)}}},713560:(e,t,o)=>{"use strict";o.d(t,{getMaximumWebStats:()=>r});var n=o(207102),i=o(33975);const r=e=>{const t=Date.now(),o=e=>`{${e?.map((([e,t])=>`"${e}":${t}`)).join(",")}}`,[r,s]=Object.keys((0,n.getEmptyStatsData)()).reduce(((t,o)=>{const i=(0,n.getWebStatsStringValue)(o,e);return"[]"===i?t:[...t,[o,i]]}),[]).sort((([,e],[,t])=>t.length-e.length)).reduce((([e,t],[n,r])=>{const s=[[n,r]];return r.length+o(e).length<i.MAX_BODY_SIZE?[e.concat(s),t]:[e,t.concat(s)]}),[[],[]]),a=o(r);if((0,i.logProcessingTime)(Date.now()-t,"chunk"),Date.now()-t<500&&s[0]&&a.length<.1*i.MAX_BODY_SIZE){const e=Date.now();try{const t=((e,t)=>{const[o,n]=t,r=`{"${o}":[${JSON.parse(n).reduce(((t,o,n)=>t.length<i.MAX_BODY_SIZE-e.length?`${t}${0===n?"":","}${JSON.stringify(o)}`:t),"")}]}`;return"{}"===e?r:(0,i.concatJSONS)(e,r)||e})(a,s.reverse()[0]);return(0,i.logProcessingTime)(Date.now()-e,"batch"),t}catch(t){return(0,i.logProcessingTime)(Date.now()-e,"batch-fail"),""}}return a}},144770:(e,t,o)=>{"use strict";o.d(t,{saveCustomStats:()=>n.saveCustomStats,saveJsErrorLogs:()=>n.saveJsErrorLogs,saveNetworkStats:()=>n.saveNetworkStats,saveProductionStats:()=>n.saveProductionStats,saveStatlogEvents:()=>n.saveStatlogEvents,writeAndSendWebStats:()=>n.writeAndSendWebStats});var n=o(263903)},33975:(e,t,o)=>{"use strict";o.d(t,{MAX_BODY_SIZE:()=>a,appendStatsMeta:()=>l,canSendBeacon:()=>p,concatJSONS:()=>c,logProcessingTime:()=>m,makeWebStatsRequest:()=>h,sendBeacon:()=>d});var n=o(490712),i=o(443151),r=o(705744),s=o(476726);const a=1.8*Math.pow(10,6),_=e=>e.startsWith("{")&&e.endsWith("}"),c=(e,t)=>[e,t].every(_)?`${e.slice(0,-1)},${t.substring(1)}`:"{}",l=(e,t)=>{const{id:o,statsMeta:{st:n,platform:i,...r}}=window.vk,{item_id:s,item_owner_id:a,item_type:l}=window.cur;return c(JSON.stringify({id:o,st:n,platform:i,attempt:e,signTime:r.time,sign:r.hash,...s&&{item_id:s},...l&&{item_type:l},...a&&{item_owner_id:a}}),_(t)?t:"{}")};function u(e,t){return new Promise(((o,n)=>{const i=new XMLHttpRequest;i.open("POST",e),e.includes(`tau.${(0,r.getHostName)()}`)&&(i.withCredentials=!0),i.onload=function(){return this.status>=200&&this.status<300?o(i.response):n({status:this.status,statusText:i.statusText})},i.onerror=function(){return n({status:this.status,statusText:i.statusText})},i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.send(t)}))}function d(e,t){try{if(!navigator.sendBeacon(e,t))return Promise.reject(new Error("Beacon not sent"))}catch(e){return Promise.reject(new Error("Beacon fail"))}return Promise.resolve()}function p(){return"sendBeacon"in navigator&&!window.vk.wsTransport.includes(`tau.${(0,r.getHostName)()}`)}const h=(e,t)=>(e=e||`${window.vk.wsTransport}/web-stats/${window.vk.statsMeta.st?"s":"p"}`,t=(0,i.pruneRequestFromStuckErrors)("string"==typeof t?t:JSON.stringify(t)),(0,s.partConfigEnabled)("web_stats_send_beacon")&&p()&&"sendBeacon"in navigator?d(e,t).catch((()=>u(e,t))):u(e,t));function m(e,t,o){(0,n.statlogsValueEvent)("web_stats_batching_time",e,window.vk.statsMeta.platform,t,o)}},263903:(e,t,o)=>{"use strict";o.d(t,{pullFromWebStats:()=>_,saveBenchmarkMainStats:()=>g,saveCustomStats:()=>h,saveJsErrorLogs:()=>l,saveNetworkStats:()=>p,saveProductionStats:()=>d,saveStatlogEvents:()=>u,saveStoryViewBaseStats:()=>m,saveStoryViewStats:()=>E,saveWebPerfStats:()=>f,writeAndSendWebStats:()=>c});var n=o(207102),i=o(677276),r=o(476726),s=o(456949),a=o(623702);const _=(e,t)=>{const o=(0,n.getWebStatsStringValue)(e,t);if("[]"!==o){const e=(0,n.getWebStatDataLs)().replace(o.slice(1,-1),"").replace(/\[\,/,"[");(0,n.writeLocked)((()=>a.vkLocalStorage.setItem(n.lsDataKey,e)))}},c=(e,t,o,r)=>{const _=((e,t)=>{const o=(0,n.getWebStatsStringValue)(e);return(0,n.getWebStatDataLs)().replace(`"${e}":${o}`,`"${e}":${o.replace(/]$/,`${"[]"===o?"":","}${JSON.stringify(t)}]`)}`)})(t,o);(0,n.writeLocked)((()=>{a.vkLocalStorage.setItem(n.lsDataKey,_),(0,s.saveStats)(_,r)})),(0,i.logWebStatsEvent)(e,o)},l=e=>c("saveJsErrorLogs","jsErrorLogs",e),u=({name:e,value:t,keys:o=[]})=>{const n=[Math.round(Number(Date.now())/1e3),e,t,...o];return(0,r.partConfigEnabled)("web_stats_transport_debugger")&&console.log("Data was transformed!"),c("saveStatlogEvents","statlogEvents",n)},d=(e,t)=>c("saveProductionStats","productionStats",e,t),p=e=>c("saveNetworkStats","networkStats",e),h=e=>c("saveCustomStats","customStats",e),m=e=>c("saveStoryViewStats","storyViewStats",e),E=e=>m(e),f=e=>c("saveWebPerfStats","webPerfStats",e),g=e=>c("saveBenchmarkMainStats","benchmarkMainStats",e)},677276:(e,t,o)=>{"use strict";o.d(t,{logWebStatsEvent:()=>i});var n=o(476726);function i(e,t){(0,n.partConfigEnabled)("web_stats_transport_debugger")&&console.log(`[new transport debug] ${e}`,t)}},207102:(e,t,o)=>{"use strict";o.d(t,{clearLsData:()=>h,emptyStatsDataLs:()=>l,getEmptyStatsData:()=>c,getLastSendTime:()=>E,getWebStatDataLs:()=>d,getWebStatsStringValue:()=>p,lsDataKey:()=>s,setLastSendTime:()=>m,writeLocked:()=>u});var n=o(623702),i=o(677276);const r=(0,o(705744).isMvk)()?"mvk":"web",s=`XHR_STATS_TRANSPORT_DATA_${r}`,a=`XHR_STATS_TRANSPORT_META_${r}`,_=`XHR_STATS_TRANSPORT_DATA_LOCK_${r}`,c=()=>({jsErrorLogs:[],statlogEvents:[],productionStats:[],storyViewStats:[],networkStats:[],customStats:[],webPerfStats:[],benchmarkMainStats:[]}),l=JSON.stringify(c());function u(e){if("locked"!==n.vkSessionStorage.getItem(_)){(0,i.logWebStatsEvent)("writeLocked","lock"),n.vkSessionStorage.setItem(_,"locked");try{e()}catch(e){}return(0,i.logWebStatsEvent)("writeLocked","free"),void n.vkSessionStorage.setItem(_,"free")}setTimeout((()=>u(e)),100)}const d=()=>n.vkLocalStorage.getItem(s)||l,p=(e,t=d())=>{const o=Object.keys(c()).filter((t=>t!==e)).join("|"),n=t?.match(new RegExp(`"${e}":(\\[.*?\\])(?:,"(${o})":\\[|}$)`))?.[1]||"";return(i=n).startsWith("[")&&i.endsWith("]")?n:"[]";var i};function h(e){e&&(0,i.logWebStatsEvent)("WebStats cleared. "+(e?"Reason: LS is broken.":""),e),u((()=>n.vkLocalStorage.setItem(s,"")))}function m(e=Number(new Date)){n.vkSessionStorage.setItem(a,e.toString())}function E(){return parseInt(`${n.vkSessionStorage.getItem(a)||0}`)}},375962:(e,t,o)=>{"use strict";o.d(t,{flushMarketEvents:()=>y,logMarketEvent:()=>g,logMarketEventNow:()=>f,onMarketItemCardOpen:()=>w,setStorageData:()=>v});var n=o(681029),i=o(827773),r=o(623702),s=o(843335),a=o(338148),_=o(581903),c=o(193270);const l="market_event_count",u="market_event_item_",d=20,p="al_market.php",h="market.php",m=22;function E(e,t,o,i){const s=window.MarketAnalyticsManager&&window.MarketAnalyticsManager.getHash();if(!s)return void(0,n.marketDebug)("warn","events","Hash error");const a=o.slice(0,10);let _=0;const c=r.vkLocalStorage.getItem(l);c&&(_=parseInt(c)),_>=d&&(y(e),_=0);const p=Date.now(),h=Math.floor(1e5*Math.random()),E=`${u}${h}_${p}_${t}`;a.unshift(p),a.unshift(t),a.push(s);let f=!1;const g=()=>{try{r.vkLocalStorage.setItem(E,JSON.stringify(a)),r.vkLocalStorage.setItem(l,String(++_))}catch(e){if(e.code!==m)throw e;f=!0,r.vkLocalStorage.removeItem(E),r.vkLocalStorage.removeItem(l)}};g();(i||f)&&y(e),f&&(g(),i&&y(e)),(0,n.marketDebug)("debug","event",t,...o)}function f(e,t,...o){E(e,t,o,!0)}function g(e,t,...o){E(e,t,o,!1)}function y(e){const t=[];for(let e=0;e<r.vkLocalStorage.length();++e){const o=r.vkLocalStorage.key(e);o&&0===o.lastIndexOf(u)&&t.push(o)}if(t.length<=0)return;r.vkLocalStorage.setItem(l,String(0));const o=[];let s="";t.forEach((e=>{const t=r.vkLocalStorage.getItem(e);if(r.vkLocalStorage.removeItem(e),t)try{const e=JSON.parse(t);s?e.pop():s=e.pop(),o.push(Object.values(e))}catch(e){(0,n.marketDebug)("error","event error","Unable to assemble events pack",e)}})),!s||o.length<1||(!window.MarketAnalyticsManager||window.MarketAnalyticsManager.isEnabled()?window.ajax.post(e===i.PLATFORM_MVK?h:p,{act:"log_events",hash:s,events:o},{onDone:()=>{(0,n.marketDebug)("warn","events sent",`${o.length} events sent`)}}):(0,n.marketDebug)("error","event error","analytics disabled"))}function v(e){(0,s.setStatData)({ref_source:e})}function w({refSource:e,itemIdx:t,screen:o,trackCode:n}){v(e),o&&(0,c.setCurrentScreen)(o);const i=new URLSearchParams(window.location.search).get("w")??"",[r,l]=i.slice(8).replace(/[^\d_]/g,"").split("_"),u=isNaN(Number(window.cur.query_id))?0:Number(window.cur.query_id);a.clickAnalytics.logTransitionToItemClick({screen:o||(0,s.getStatScreen)(),refSource:e,params:{owner_id:Number(r),item_id:Number(l),item_idx:t??0,previous_screen:(0,_.getScreen)()||void 0,search_query_id:u,track_code:n}})}},681029:(e,t,o)=>{"use strict";o.d(t,{isElementInViewport:()=>l,isElementVisible:()=>c,marketDebug:()=>_});var n=o(226095),i=o(476726),r=o(623702);const s="extended_client_logging",a="market_extended_client_logging";function _(e,t,...o){((0,i.partConfigEnabled)(s)||r.vkLocalStorage.getItem(a))&&("error"===e?console.error(`[market ${t}]: `,o):"warn"===e?console.warn(`[market ${t}]: `,o):"info"===e?console.info(`[market ${t}]: `,o):console.debug(`[market ${t}]: `,o))}function c(e){return"none"!==e.style?.display}function l(e,t=50,o=null,i){const r=o?o.left:0,s=o?o.top:0;let a=(0,n.getViewportSize)();const _=(0,n.getElementOffset)(e),c=(0,n.getElementSize)(e),l=c.width*t/100,u=c.height*t/100;if(i){if(i.width>a.width)return!1;if(i.height>a.height)return!1;a=i}return!(_.left+c.width<r+l)&&(!(_.left+l>a.width)&&(!(_.top+c.height<s+u)&&!(_.top+u>a.height)))}},843335:(e,t,o)=>{"use strict";o.d(t,{deleteStatDataKey:()=>a,deleteStatDataKeys:()=>_,getStatCity:()=>l,getStatData:()=>r,getStatRefScreen:()=>u,getStatScreen:()=>c,setStatData:()=>s});var n=o(623702);const i="market_stat_data";function r(){const e=n.vkSessionStorage.getItem(i);return e?JSON.parse(e):{}}function s(e){const t=r();n.vkSessionStorage.setItem(i,JSON.stringify({...t,...e}))}function a(e){const t=r();delete t[e],n.vkSessionStorage.setItem(i,JSON.stringify(t))}function _(e){const t=r();e.forEach((e=>{delete t[e]})),n.vkSessionStorage.setItem(i,JSON.stringify(t))}function c(){const{screen:e}=r();return e||window.cur.module}function l(){const{city:e}=r();return e}function u(){const{ref_screen:e}=r();return e}},782618:(e,t,o)=>{"use strict";o.d(t,{MarketItemsMapStats:()=>r});var n=o(695290),i=o(581903);class r{sendNavEvent(e){const t={type:n.NavigationProductionStatEventTypes.TYPE_SERVICES_MAP_NAVGO,screen:"uslugi",subtype:n.NavigationProductionStatEventTypes.GO,[n.NavigationProductionStatEventTypes.TYPE_SERVICES_MAP_NAVGO]:e};this.navigationStatCollector.logEvent(t)}sendActionEvent(e){const t={type:n.ActionProductionStatEventTypes.TYPE_SERVICES_MAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_SERVICES_MAP_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector),this.navigationStatCollector=new i.NavigationStatCollector(this.productionStatCollector)}}},970577:(e,t,o)=>{"use strict";o.d(t,{marusiaAudioStats:()=>_});var n=o(476726),i=o(668592),r=o(777892),s=o(190708);class a{startLoop(){this.stopLoop(),this.sendIsPlayingInterval=setInterval(this.sendTrackPlaying.bind(this),a.SEND_IS_PLAYING_INTERVAL),this.currentTrackStartPlayTimeMs=this.getCurrentTime()}getCurrentTime(){return(new Date).getTime()}stopLoop(){this.sendIsPlayingInterval&&(clearInterval(this.sendIsPlayingInterval),this.sendIsPlayingInterval=null),this.currentTrackStartPlayTimeMs=null}sendTrackPlaying(){if(!this.playerAdapter)return void this.stopLoop();if(!this.playerAdapter.isMarusiaTrack())return void this.stopLoop();const e=this.playerAdapter.getAudio();e?(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_PLAYING,s.ActivationSource.playback,e),this.sendPlayerStatusEvent("PLAY",e)):this.stopLoop()}sendPlayerStatusEvent(e,t){if(!this.playerAdapter||!this.currentTrackStartPlayTimeMs)return;const o=(0,i.getAudioExtra)(t)?.voiceAssistant;if(!o)return;const n=o.source?.url??t.url,r=o.source?.skill_name??a.GLOBAL,s={meta:{source:o.source,title:t.title,url:n},url:n,volume:this.playerAdapter.getVolume(),repeat:this.playerAdapter.isRepeatCurrentAudio(),state:e,updated:(new Date).getTime()/1e3,position:this.playerAdapter.getTrackPosition(),elapsed:this.playerAdapter.getProgressInSeconds(),duration:t.duration,created:this.currentTrackStartPlayTimeMs,skill:r,random:this.playerAdapter.isShuffledPlaylist()};this.api.sendPlayerStatus(r,s)}sendDeviceStatEvent(e,t,o){if(!o||!this.playerAdapter)return;const n=(0,i.getAudioExtra)(o)?.voiceAssistant;if(!n)return;const r={type:e,phrase_id:n.source?.phrase_id??"",timestamp:Math.round((new Date).getTime()/1e3),data:{track_id:n.track_id??"",position:this.playerAdapter.getProgress(),duration:this.playerAdapter.getAudio().duration,activated_by:t,source_type:n.source?.type??"",flags:n.flags??"",playback_duration:this.playerAdapter.getListenedTime(),audio_type:n.source?.media_type??""}};this.api.sendDeviceStat([r])}getActivatedBy(e,t){switch(e){case s.PlayerDeviceStatEventType.TRACK_STOP:return s.ActivationSource.os_system;case s.PlayerDeviceStatEventType.TRACK_START:case s.PlayerDeviceStatEventType.TRACK_RESUME:if(t.isAutoPlayed())return s.ActivationSource.playback;return t.getSequence()?s.ActivationSource.playback:s.ActivationSource.app_ui;default:return s.ActivationSource.os_system}}onPlay(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();if(!t)return;const o=t.fullId,i=this.currentAudioId===o;this.currentAudioId=o,!i&&this.currentAudio&&this.onEnded(e,this.currentAudio),this.currentAudio=t;const r=i?s.PlayerDeviceStatEventType.TRACK_RESUME:s.PlayerDeviceStatEventType.TRACK_START,a=e.isAutoPlayed()?s.ActivationSource.playback:s.ActivationSource.app_ui;this.sendDeviceStatEvent(r,a,t),this.sendPlayerStatusEvent("PLAY",t),this.startLoop()}onPause(e){if(!(0,n.partConfigEnabled)("marusia_web_music_stats"))return;this.playerAdapter=e;const t=this.playerAdapter.getAudio();t&&(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_PAUSE,s.ActivationSource.os_system,t),this.sendPlayerStatusEvent("PAUSE",t),this.stopLoop())}onEnded(e,t){(0,n.partConfigEnabled)("marusia_web_music_stats")&&(this.playerAdapter=e,t&&(this.sendDeviceStatEvent(s.PlayerDeviceStatEventType.TRACK_STOP,s.ActivationSource.os_system,t),this.sendPlayerStatusEvent("STOP",t),this.stopLoop()))}constructor(){this.api=new r.MarusiaSharedApi,this.sendIsPlayingInterval=null,this.playerAdapter=null,this.currentTrackStartPlayTimeMs=null,this.currentAudioId=null,this.currentAudio=null}}a.SEND_IS_PLAYING_INTERVAL=15e3,a.GLOBAL="__global__";const _=new a},777892:(e,t,o)=>{"use strict";o.d(t,{MarusiaSharedApi:()=>c});var n=o(933052),i=o(381081),r=o(223597),s=o(634180),a=o(231794);const _="https://vc.go.mail.ru";class c{generateDeviceId(){return(0,r.generateDeviceId)("vk_web",this.debug)}processBackendCommands(e,t){const o={phrase_id:e,command_ids:JSON.stringify(t)};return(0,n.api)("marusia.processCommands",o)}getSuggests(e){const t={has_unread_messages:Number(e)};return(0,n.api)("marusia.getSuggests",t)}getWebStatic(){return(0,n.api)("marusia.getWebStatic",{})}getWebSession(e){const t={device_id:e};return(0,n.api)("marusia.getWebSession",t)}revokeWebSession(e){const t={device_id:e};return(0,n.api)("marusia.revokeWebSession",t)}getLastMessageCommands(){return(0,n.api)("marusia.getLastMessageCommands",{})}sendStartSessionEvent(){return(0,n.api)("marusia.sendStartSessionEvent",{})}getOnboarding(){return(0,n.api)("marusia.getOnboarding",{})}async isBackendCommand(e){const t=(await this.getInitConfig()).marusiaBackendCommands?.commands;return!t||t.some((t=>"media"===e.type?"vk"===e.meta?.source?.type&&(e.type===t.type&&e.media_type===t.media_type):("playlist"!==e.type||"vk"===e.tracks[0]?.meta?.source?.type)&&e.type===t.type))}getInitConfig(){return null===this.initConfigCache&&(this.initConfigCache=(0,n.api)("marusia.getInitConfig",{device_id:this.generateDeviceId(),tts_type:"mp3"})),this.initConfigCache}sendMessage(e,t,o){return(0,n.api)("messages.send",{peer_id:e,random_id:Math.round(2147483647*Math.random()),payload:JSON.stringify(o),message:t})}reloadAudios(e){return Promise.resolve([])}getApiHost(){return this.getInitConfig().then((e=>e.marusiaServerType?e.marusiaServerType:{server_url:_,skill:""}))}async makeRequest(e,t={},o={}){const n=await(0,i.getSession)(this),r=await this.getApiHost(),a=r.server_url,c=this.generateDeviceId(),l=(await this.getInitConfig()).maskedChatId,u={...t,dialog_mode:"vk_bot",session_id:n.session_id,device_id:c,chat_id:":vk:chat:"+l};a!==_&&(u.skillserver_type=r.skill);const d=new URLSearchParams(u).toString();let p=!0,h=null;try{h=await fetch(`${a}/${e}?${d}`,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.session_secret}`},...o}),400===h.status&&(p=!1,h=null)}catch{}if(!p)return await(0,i.revokeSession)(this),this.makeRequest(e,t,o);if(!h)throw new Error(s.MarusiaError.API_ERROR);return h.json()}async getPreparedCapabilities(){const e=(await this.getInitConfig()).capabilities.capabilities2;let t={};return e&&(t=e.reduce(((e,t)=>({...e,[t.capability]:t.enabled})),{})),t}async getDefaultOptions(e){const t=await this.getPreparedCapabilities();return{body:JSON.stringify({...e,capabilities2:{capabilities:t}})}}async addChunk(e,t,o=!1,n,i){const r={last:o?1:0,phrase_id:e,chunk_num:t},s={signal:i,body:n};return(await this.makeRequest("phrase/add",r,s)).result}async createAsrPhrase(e,t){const o={};e&&(o.player_data=e);const n=await this.getDefaultOptions(o);return t&&(n.signal=t),this.makeRequest("phrase/create",{no_kw:1},n)}async phraseCreateText(e,t,o){const n={text:e,refuse_tts:1},i=t??{};o&&(i.player_data=o);const r=await this.getDefaultOptions(i);return this.makeRequest("phrase/create/text",n,r)}async phraseCreateEvent(e,t,o){const n={event:e,refuse_tts:1},i=t??{};o&&(i.player_data=o);const r=await this.getDefaultOptions(i);return this.makeRequest("phrase/create/event",n,r)}async getPhraseResult(e){const t={phrase_id:e,capabilities2:JSON.stringify({capabilities:await this.getPreparedCapabilities()})};return this.makeRequest("phrase/result",t,{method:"GET"})}async upgradeToken(e){const t={app_id:a.MARUSIA_APP_ID},o={body:JSON.stringify({phrase_info:e.phrase_info})};return this.makeRequest("account/vk/upgrade_token",t,o)}sendDeviceStat(e){const t={body:JSON.stringify({events:e})};return this.makeRequest("device/stat",{},t)}sendPlayerStatus(e,t){const o={as_global:1,skill_id:e},n={body:JSON.stringify(t)};return this.makeRequest("player/status",o,n)}skillList(e){const t={category:e,size:10,page:0,use_all_platforms:0};return this.makeRequest("skill_list",t,{method:"GET"})}skillListCategories(){return this.makeRequest("skill_list/categories",{add_featured:1,use_all_platforms:0},{method:"GET"})}constructor(e){this.debug=!1,this.initConfigCache=null,this.debug=!!e}}},143172:(e,t,o)=>{"use strict";o.d(t,{marusiaStats:()=>r});var n=o(581903),i=o(850263);const r=new class{logChatOpen(e){const t={type:n.NavigationProductionStatEventTypes.TYPE_MARUSIA_NAVGO,subtype:n.NavigationProductionStatEventTypes.GO,screen:"im",screen_prev:e};this.navStatCollector.logEvent(t)}logModuleLoadError(e){this.devNullStatCollector.logEvent({key:"marusia_web_load_error",value_str:e,value:window.vk?.statsMeta?.st?1:0})}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.navStatCollector=new n.NavigationStatCollector(this.productionStatCollector),this.devNullStatCollector=new i.DevNullStatCollector(new i.CustomStatCollector)}}},231794:(e,t,o)=>{"use strict";o.d(t,{MARUSIA_APP_ID:()=>n});const n=6463690},223597:(e,t,o)=>{"use strict";o.d(t,{generateDeviceId:()=>s});var n=o(8520),i=o(134015);const r="marusia-device-id";function s(e,t){let o=n.localStorage.getItem(r);if(!o){o=`:${t?"d":"c"}:${"chat"}:${e}:${(0,i.uuid)(32)}`,n.localStorage.setItem(r,o)}return o}},381081:(e,t,o)=>{"use strict";let n;o.d(t,{getSession:()=>r,revokeSession:()=>a});let i=3;async function r(e){if(!n){const t=e.generateDeviceId();n=e.getWebSession(t)}try{return await n}catch(t){if(console.error("get session error",t),i<3)return i+=1,s(),r(e);throw new Error("get session error")}}function s(){n=void 0}function a(e){return s(),e.revokeWebSession(e.generateDeviceId())}},634180:(e,t,o)=>{"use strict";var n,i;o.d(t,{CommunicationType:()=>n,MarusiaError:()=>i}),function(e){e.kws="kws",e.listen_command="listen_command",e.button="button",e.text="text",e.suggest="suggest",e.skill="skill",e.widget="widget",e.other="other"}(n||(n={})),function(e){e.HIDDEN="HIDDEN",e.BACKEND_COMMAND_TIMEOUT="BACKEND_COMMAND_TIMEOUT",e.USER_INTERRUPT="USER_INTERRUPT",e.ATTACH_LOAD_TIMEOUT="ATTACHES_LOAD_TIMEOUT",e.API_ERROR="API_ERROR"}(i||(i={}))},255944:(e,t,o)=>{"use strict";var n;o.d(t,{MarusiaMediaType:()=>n}),function(e){e[e.music=1]="music",e[e.radio=2]="radio",e[e.noise=3]="noise",e[e.tale=4]="tale",e[e.podcast=5]="podcast",e[e.books=6]="books",e[e.video=8]="video"}(n||(n={}))},190708:(e,t,o)=>{"use strict";var n,i;o.d(t,{ActivationSource:()=>i,PlayerDeviceStatEventType:()=>n}),function(e){e.TRACK_START="player.track_start",e.TRACK_STOP="player.track_stop",e.TRACK_RESUME="player.track_resume",e.TRACK_PAUSE="player.track_pause",e.TRACK_PLAYING="player.track_playing"}(n||(n={})),function(e){e.playback="playback",e.backend_new_media="backend_new_media",e.backend_controls="backend_controls",e.os_ui="os_ui",e.os_system="os_system",e.app_ui="app_ui",e.playback_limit="playback_limit"}(i||(i={}))},134015:(e,t,o)=>{"use strict";o.d(t,{MARUSIA_PEER_ID:()=>n,disableMarusiaTextInput:()=>a,enableMarusiaTextInput:()=>_,getSuggestContentForApi:()=>l,isPayloadForCommand:()=>r,isSuggestCommand:()=>s,parseBase64JSON:()=>c,replaceSpecialPhrases:()=>u,uuid:()=>i});o(255944),o(891911);const n=-194070336;function i(e=32){return[...Array(e).keys()].reduce((e=>`${e}${Math.floor(16*Math.random()).toString(16)}`),"")}function r(e,t){if(!e.voice_assistant)return!1;const o=e.voice_assistant;return!(o.phrase_id!==t.phraseId||(n=o.command_ids,i=t.commandIds,n.length!==i.length||!n.every((e=>i.includes(e)))));var n,i}function s(e){return["text_suggest","event_suggest","url_suggest"].includes(e.type)}function a(e){e.contentEditable="false",e.classList.add("im-chat-input--text_disabled")}function _(e){e.contentEditable="true",e.classList.remove("im-chat-input--text_disabled")}function c(e){let t=null;if(e)try{t=JSON.parse(atob(e))}catch(e){console.error("Failed to parse JSON")}return t}function l(e){let t="";return"event_suggest"===e.type&&(t=e.text),"text_suggest"===e.type&&(t=e.payload),u(t)}function u(e){return e.replace("#DISLIKE#","👎🏻").replace("#LIKE#","👍🏻")}},239170:(e,t,o)=>{"use strict";o.d(t,{ADBLOCK_CONFIG_KEY:()=>i,DEFAULT_ADBLOCK_STATS_COOLDOWN_MS:()=>n,URLS:()=>r});const n=864e5,i="unique_adblock_users",r=["https://tns-counter.ru","https://top-fwz1.mail.ru"]},997468:(e,t,o)=>{"use strict";var n;o.d(t,{METRICS_SCOPE:()=>n}),function(e){e.USER_INFO_STATS="USER_INFO_STATS",e.PERFORMANCE_STATS="PERFORMANCE_STATS",e.ADBLOCK_STATS="ADBLOCK_STATS",e.MODULE_NAVIGATION_STATS="MODULE_NAVIGATION_STATS",e.BROWSER_CERTIFICATE_SUPPORT="CERT_STATS",e.WASM_SUPPORT="WASM_STATS"}(n||(n={}))},390657:(e,t,o)=>{"use strict";o.d(t,{CooldownManager:()=>i});var n=o(623702);class i{getMetricsState(){const e=n.vkLocalStorage.getItem(this.storageName);return e?JSON.parse(e):{timestamps:{}}}getMetricName(e){if("number"==typeof this.cooldown)return e??"default";if(!e)throw new Error("The metric name is required for a complex cooldown configuration.");return e}getMetricTTL(e){return"number"==typeof this.cooldown?this.cooldown:this.cooldown[e]}checkMetricCooldown(e,t){return(!this.options.invalidationReasons?.dateChange||new Date(t).toDateString()===(new Date).toDateString())&&t+this.getMetricTTL(e)>Date.now()}isMetricOnCoolDown(e){const t=this.getMetricName(e),o=this.getMetricsState().timestamps[t]??0;return this.scheduleCleanOutdatedMetrics(),this.checkMetricCooldown(t,o)}updateMetricTimestamp(e){const t=this.getMetricName(e),o=this.getMetricsState();o.timestamps[t]=Date.now(),n.vkLocalStorage.setItem(this.storageName,JSON.stringify(o)),this.scheduleCleanOutdatedMetrics()}cleanOutdatedMetrics(){const e=this.getMetricsState(),t={...e};Object.entries(e.timestamps).forEach((([e,o])=>{this.checkMetricCooldown(e,o)||delete t.timestamps[e]})),n.vkLocalStorage.setItem(this.storageName,JSON.stringify(t))}scheduleCleanOutdatedMetrics(){this.options.cleanOutdatedMetrics&&!this.isOutdatedMetricsCleanScheduled&&(this.isOutdatedMetricsCleanScheduled=!0,requestIdleCallback((()=>{this.isOutdatedMetricsCleanScheduled=!1,this.cleanOutdatedMetrics()}),{timeout:5e3}))}constructor(e,t,o,n={}){this.id=e,this.scope=t,this.cooldown=o,this.options=n,this.isOutdatedMetricsCleanScheduled=!1,this.storageName=`@METRICS_${e||"GUEST"}_${t}`}}},291246:(e,t,o)=>{"use strict";var n=o(225007),i=o(32489);const r=(0,i.createEvent)(),s=(0,i.createEvent)();r.watch((()=>(0,n.handlePageLoaderShown)())),s.watch((()=>(0,n.handlePageLoadingFinish)()))},225007:(e,t,o)=>{"use strict";o.d(t,{handlePageLoaderShown:()=>p,handlePageLoadingFinish:()=>h,handlePageLoadingStart:()=>d});var n=o(826046),i=o(528405),r=o(476726),s=o(942451);o(291246);function a(){window.performance.clearMarks(i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START),window.performance.clearMeasures(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE)}const _={START:["START","LOADER_SHOWN","FINISH"],LOADER_SHOWN:["START","FINISH"],FINISH:["START"]},c=(...e)=>{try{return window.performance.measure(...e)}catch(e){0}};function l(){const e=new i.ModuleNavigationStatCollector(n.NetworkStatCollectorInstance);let t="FINISH";return{nextState:function(o){if("performance"in window&&"mark"in window.performance&&(0,r.partConfigEnabled)("measure_module_navigation_stats"))if(_[t].includes(o)){switch(o){case"START":a(),window.performance.mark(i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);break;case"LOADER_SHOWN":{const t=c(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE,i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);if(!t)return;e.logEvent({step:"loader_shown",value:Math.round(t.duration).toString()});break}case"FINISH":{const t=c(i.ModuleNavigationStatMarks.PERF_MEASURE_PAGE,i.ModuleNavigationStatMarks.PERF_MARK_PAGE_START);if(!t)return;e.logEvent({step:"page",value:Math.round(t.duration).toString()});break}}t=o}else console.error("Недопустимый переход %s -> %s",t,o)}}}const u=(0,s.makeSharedState)("module-navigation-stats",(()=>l()),{version:1});function d(){u().nextState("START")}function p(){u().nextState("LOADER_SHOWN")}function h(){u().nextState("FINISH")}},386231:(e,t,o)=>{"use strict";o.d(t,{initNavigationStats:()=>r});var n=o(975149),i=o(465094);const r=()=>{let e=!1;i.navigationStat.sendTabOpen(),(0,n.handleModuleChanged)(window.cur?.module||""),document.hidden||i.navigationStat.sendShow(),window.addEventListener("visibilitychange",(()=>{e||(document.hidden?i.navigationStat.sendHide():i.navigationStat.sendShow())})),window.addEventListener("beforeunload",(()=>{e=!0,document.hidden||i.navigationStat.sendHide(),i.navigationStat.sendTabClose()}))}},300189:(e,t,o)=>{"use strict";o.d(t,{createDebugConsole:()=>i,createStorageKey:()=>r});const n=(0,o(942451).makeSharedState)("debug-console-flags",(()=>({})),{version:0}),i=e=>new Proxy(console,{get(t,o,i){switch(o){case"debug":case"dir":case"error":case"info":case"log":case"table":case"trace":case"warn":{const i=t[o],r=window.nav?.objLoc?.[e]??n()[e];return r!==n()[e]&&(n()[e]=r),(...e)=>{r&&i.call(t,...e)}}default:return Reflect.get(t,o,i)}}}),r=({module:e,page:t,entity:o})=>[e,t,o].filter(Boolean).join("-")},178532:(e,t,o)=>{"use strict";o.d(t,{pruneOutdatedTimestamps:()=>a,shouldBeMeasured:()=>_});var n=o(623702),i=o(465094),r=o(8520);const s=["app","wall_donut","unknown","invite","wall_archive","support","helpdesk","abuse","noSpam","sf"],a=(e,t)=>{window.requestIdleCallback((()=>{let o={};try{o=JSON.parse(n.vkLocalStorage.getItem(e)||"{}")}catch(e){}const i=o.updatedAt;(0,r.isNumber)(i)&&Date.now()>i+t&&n.vkLocalStorage.removeItem(e)}),{timeout:5e3})},_=()=>{const e=i.navigationStat.getModule();return!s.includes(e)}},906868:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_WASM_SUPPORT_COOLDOWN_MS:()=>n,WASM_SUPPORT_CONFIG_KEY:()=>i});const n=864e5,i="users_wasm_support"},465094:(e,t,o)=>{"use strict";o.d(t,{navigationStat:()=>r});var n=o(553785);const i=new(o(441480).ProductionStatCollector),r=new n.NavigationStatCollector(i)},216708:(e,t,o)=>{"use strict";o.d(t,{AudioNetworkStatCollector:()=>i});var n=o(761895);class i{logEvent(e,t,o){const i={network_type:t,network_effective_type:o,type:n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM,[n.NetworkStatEventTypes.TYPE_NETWORK_AUDIO_ITEM]:e};this.networkStatCollector.logEvent(i)}constructor(e){this.networkStatCollector=e}}},826046:(e,t,o)=>{"use strict";o.d(t,{AudioNetworkStatCollector:()=>i.AudioNetworkStatCollector,AudioNetworkType:()=>r.AudioNetworkType,NetworkStatCollector:()=>n.NetworkStatCollector,NetworkStatCollectorInstance:()=>n.NetworkStatCollectorInstance});var n=o(63640),i=o(216708),r=o(761895)},528405:(e,t,o)=>{"use strict";o.d(t,{ModuleNavigationStatCollector:()=>l,ModuleNavigationStatMarks:()=>c});var n=o(997468),i=o(390657),r=o(761895),s=o(723919),a=o(465094),_=o(178532);const c={PERF_MARK_PAGE_START:"__navpagemark",PERF_MEASURE_PAGE:"__navpagemeasure",PERF_MEASURE_LOADER_SHOWN:"__navloadershownmeasure"};class l{makeCooldownKey(e){return[e.screen,e.step].join("_")}logEvent(e){const t=s.default.getConnectionEffectiveType(),o=a.navigationStat.getModule(),n={module:o,screen:a.navigationStat.getScreen("")||o,...e},i=this.makeCooldownKey(n);if(n.value&&(0,_.shouldBeMeasured)()&&!this.cooldownManager.isMetricOnCoolDown(i))return this.cooldownManager.updateMetricTimestamp(i),this.moduleNavigationStatCollector.logEvent({network_type:"UNKNOWN",network_effective_type:t,type:r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM,[r.NetworkStatEventTypes.TYPE_MODULE_NAVIGATION_STATS_ITEM]:n})}constructor(e){this.cooldownManager=new i.CooldownManager(window.vk?.id,n.METRICS_SCOPE.MODULE_NAVIGATION_STATS,288e5,{cleanOutdatedMetrics:!0}),this.moduleNavigationStatCollector=e}}},63640:(e,t,o)=>{"use strict";o.d(t,{NetworkStatCollector:()=>r,NetworkStatCollectorInstance:()=>s});var n=o(568352),i=o(144770);class r{logEvent(e){e.type&&e[e.type]?(0,i.saveNetworkStats)(e):(0,n.logError)(new Error("NetworkStatCollector: invalid event."))}}const s=new r},761895:(e,t,o)=>{"use strict";var n,i;o.d(t,{AudioNetworkType:()=>i,NetworkStatEventTypes:()=>n}),function(e){e.TYPE_NETWORK_AUDIO_ITEM="type_network_audio_item",e.TYPE_MODULE_NAVIGATION_STATS_ITEM="type_module_navigation_stats_item"}(n||(n={})),function(e){e.FRAGMENT_LOADED="fragment_loaded",e.FRAGMENT_STALLED="fragment_stalled"}(i||(i={}))},639313:(e,t,o)=>{"use strict";o.d(t,{ActionStatCollector:()=>i});var n=o(695290);class i{logEvent(e,t){const o={...this.productionStatCollector.getBaseEvent(),type:n.ProductionStatEventTypes.TYPE_ACTION,[n.ProductionStatEventTypes.TYPE_ACTION]:e};this.productionStatCollector.logEvent(o,t)}constructor(e){this.productionStatCollector=e}}},657789:(e,t,o)=>{"use strict";o.d(t,{AdMiniAppsEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={mini_app_id:e,event:t},i={type:n.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_AD_MINI_APPS_EVENT_ITEM]:o};this.actionStatCollector.logEvent(i)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},642806:(e,t,o)=>{"use strict";o.d(t,{BridgeEventStatsCollector:()=>_});var n=o(695290),i=o(581903),r=o(476726),s=o(609620),a=o(7144);class _{logEvent(e,t,o,i,_,c){const l={webview_url:e,mini_app_id:t,event:o,error:i};(0,r.partConfigEnabled)("mini_apps_send_session_uuid_bridge_events")&&(l.session_uuid=_),(0,r.partConfigEnabled)("mini_apps_bridge_stats_bridge_log_field")&&(0,a.isString)(c)&&(l.bridge_log=(0,s.default)(c,{length:this.BRIDGE_LOG_MAX_LENGTH}));const u={type:n.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_BRIDGE_EVENT_ITEM]:l};this.actionStatCollector.logEvent(u)}constructor(){this.BRIDGE_LOG_MAX_LENGTH=256,this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},229566:(e,t,o)=>{"use strict";o.d(t,{CommunityAppsCatalogActionEventCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t,o){const i={event:e};t&&(i.source=t),o&&(i.target=o);const r={type:n.ActionProductionStatEventTypes.TYPE_COMMUNITY_APPS_CATALOG_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_COMMUNITY_APPS_CATALOG_EVENT_ITEM]:i};this.actionStatCollector.logEvent(r)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},122223:(e,t,o)=>{"use strict";o.d(t,{EasterEggsItemStatCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t,o,i){const r={egg_id:e,egg_event_id:t,position_id:o,event_type:i},s={type:n.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM,[n.ActionProductionStatEventTypes.TYPE_EASTER_EGGS_ITEM]:r};this.actionStatCollector.logEvent(s)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},980715:(e,t,o)=>{"use strict";o.d(t,{GamesJsSDKEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={app_id:e,event_name:t},i={type:n.ActionProductionStatEventTypes.TYPE_GAMES_JS_SDK_ITEM,[n.ActionProductionStatEventTypes.TYPE_GAMES_JS_SDK_ITEM]:o};this.actionStatCollector.logEvent(i)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},954130:(e,t,o)=>{"use strict";o.d(t,{MarketingTransitionItemStatCollector:()=>s});var n=o(695290),i=o(581903),r=o(772546);class s{logEvent(e,t,o,i=""){const s={campaign:e,source:o,event:t,unauth_id:(0,r.getCookie)("remixstid")};i&&(s.url=i);const a={type:n.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM,[n.ActionProductionStatEventTypes.TYPE_MARKETING_TRANSITION_ITEM]:s};this.actionStatCollector.logEvent(a)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},622639:(e,t,o)=>{"use strict";o.d(t,{MiniAppsActionEventCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,{appId:t,navScreen:o,ref:i}){const r={type:n.ActionProductionStatEventTypes.TYPE_MINI_APPS_ACTION_ITEM,[n.ActionProductionStatEventTypes.TYPE_MINI_APPS_ACTION_ITEM]:{event_type:{event_type:e},mini_app_id:t,nav_screen:o,vk_ref:i}};this.actionStatCollector.logEvent(r,{force:!0})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},855132:(e,t,o)=>{"use strict";o.d(t,{PersonalDiscountEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ActionProductionStatEventTypes.TYPE_MINI_APPS_PERSONAL_DISCOUNT_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_MINI_APPS_PERSONAL_DISCOUNT_EVENT_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},16345:(e,t,o)=>{"use strict";o.d(t,{MTTimespentStatCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ActionProductionStatEventTypes.TYPE_MT_TIMESPENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_MT_TIMESPENT_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector)}}},833397:(e,t,o)=>{"use strict";o.d(t,{SnowballsEventsActionStatsCollector:()=>r});var n=o(581903),i=o(695290);class r{logEvent(e){const t={type:i.ActionProductionStatEventTypes.TYPE_SNOWBALLS_EVENTS_ITEM,[i.ActionProductionStatEventTypes.TYPE_SNOWBALLS_EVENTS_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new n.ProductionStatCollector,this.actionStatCollector=new n.ActionStatCollector(this.productionStatCollector)}}},810630:(e,t,o)=>{"use strict";o.d(t,{SurveyMiniAppsEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={mini_app_id:e,event:t},i={type:n.ActionProductionStatEventTypes.TYPE_SURVEY_MINI_APPS_EVENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_SURVEY_MINI_APPS_EVENT_ITEM]:o};this.actionStatCollector.logEvent(i)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},390317:(e,t,o)=>{"use strict";o.d(t,{TooltipStatCollector:()=>s});var n=o(695290),i=o(581903);const r="unknown";class s{logEvent(e,t,o){const i={action:e,hint_id:t,duration:o||0},r={...this.productionStatCollector.getBaseEvent(this.getScreen(this.getModule())),type:n.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM,[n.ActionProductionStatEventTypes.TYPE_UI_HINT_ITEM]:i};this.actionStatCollector.logEvent(r,{force:!0})}getModule(){return window.cur?.module??r}getScreen(e=r){return window.cur?.screen?window.cur.screen===r?e:window.cur.screen:e}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector)}}},101146:(e,t,o)=>{"use strict";o.d(t,{UnverifiedScreenEventCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={type:n.ActionProductionStatEventTypes.TYPE_UNVERIFIED_SCREEN_ITEM,[n.ActionProductionStatEventTypes.TYPE_UNVERIFIED_SCREEN_ITEM]:{event_type:{event_type:e},mini_app_id:t}};this.actionStatCollector.logEvent(o,{force:!0})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productStatCollector)}}},828674:(e,t,o)=>{"use strict";o.d(t,{VideoPublishStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ActionProductionStatEventTypes.TYPE_VIDEO_PUBLISH_ITEM,[n.ActionProductionStatEventTypes.TYPE_VIDEO_PUBLISH_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector)}}},392630:(e,t,o)=>{"use strict";o.d(t,{VideoUploadStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ActionProductionStatEventTypes.TYPE_VIDEO_UPLOAD_ITEM,[n.ActionProductionStatEventTypes.TYPE_VIDEO_UPLOAD_ITEM]:e};this.actionStatCollector.logEvent(t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector)}}},968083:(e,t,o)=>{"use strict";o.d(t,{VkConnectNavigationCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o=this.productionStatCollector.getBaseEvent(),i={...o,screen:"main",prev_nav_id:this.lastNavEventId,prev_event_id:o.prev_id||0,type:n.ProductionStatEventTypes.TYPE_ACTION,[n.ProductionStatEventTypes.TYPE_ACTION]:{type:n.ActionProductionStatEventTypes.TYPE_VK_CONNECT_NAVIGATION_ITEM,[n.ActionProductionStatEventTypes.TYPE_VK_CONNECT_NAVIGATION_ITEM]:e}};this.lastNavEventId=i.id,this.productionStatCollector.logEvent(i,t)}logServiceNavigationOpen(e){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_OPEN,fields:e})}logServiceNavigationClose(e){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_CLOSE,fields:e})}logServiceNavigationClick(e,t,o){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.SERVICE_NAVIGATION_CLICK,fields:[{name:e,str_value:t,int_value:o}]})}logAccountActionsOpen(e){const t={event_type:n.IVkConnectNavigationItemEventType.POPUP_OPEN};r.addFlowTypeIfFeatureExists(t,e),this.logEvent(t)}logAccountActionsClose(e){const t={event_type:n.IVkConnectNavigationItemEventType.POPUP_CLOSE};r.addFlowTypeIfFeatureExists(t,e),this.logEvent(t)}logAccountActionsEnterLk(e="account_actions",t){const o={event_type:n.IVkConnectNavigationItemEventType.CLICK_ENTER_LK,flow_service:e};r.addFlowTypeIfFeatureExists(o,t),this.logEvent(o)}logAccountActionsVkPay(e="account_actions"){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CLICK_VK_PAY,flow_service:e})}logAccountActionsVkCombo(e="account_actions"){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CLICK_VK_COMBO,flow_service:e})}logMultiAccountShown(){this.registrationItemStat.logEvent(n.RegistrationItemEventTypes.POPUP_OPEN,n.EventScreens.MAIN,n.EventScreens.MULTI_ACC_SWITCHER,{force:!0})}logTopNavElements(e){e.includes("settings")?this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CLICK_SETTINGS}):e.includes("support")?this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CLICK_SUPPORT}):e.includes("theme")&&this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CLICK_THEME})}logOnepassOnboardingShown(){this.registrationItemStat.logEvent(n.RegistrationItemEventTypes.SCREEN_PROCEED,n.EventScreens.NOWHERE,n.EventScreens.MEET_PASSKEY,{force:!0})}logOnepassOnboardingSkip(e){this.registrationItemStat.logEvent(n.RegistrationItemEventTypes.REFUSE_ONBOARDING_PASSKEY,e,void 0,{force:!0})}logOnepassOnboardingPlug(){this.registrationItemStat.logEvent(n.RegistrationItemEventTypes.SCREEN_PROCEED,n.EventScreens.CONNECT_PASSKEY,n.EventScreens.CONNECTED_KEYS,{force:!0})}logOnboardingChangePage(e,t){this.registrationItemStat.logEvent(n.RegistrationItemEventTypes.SCREEN_PROCEED,e,t,{force:!0})}logCancelOnExit(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.CANCEL_ON_EXIT})}logSaveLoginModalShow(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.SAVE_LOGIN_MODAL_SHOW})}logStartPhoneCUA(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.START_PHONE_CUA})}static addFlowTypeIfFeatureExists(e,t){t&&Object.assign(e,{flow_type:t})}logUnbanRecommendationModalShow(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.UNBLOCK_PROTECT_ACCOUNT_SHOW,flow_service:n.UnblockAccountField.flow_service,screen:n.UnblockAccountField.screen})}logUnbanRecommendationConnect(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.UNBLOCK_PROTECT_ACCOUNT_CONNECT,flow_service:n.UnblockAccountField.flow_service,screen:n.UnblockAccountField.screen})}logUnbanRecommendationCancellation(){this.logEvent({event_type:n.IVkConnectNavigationItemEventType.UNBLOCK_PROTECT_ACCOUNT_CANCELLATION,flow_service:n.UnblockAccountField.flow_service,screen:n.UnblockAccountField.screen})}constructor(){this.lastNavEventId=0,this.productionStatCollector=new i.ProductionStatCollector,this.actionStatCollector=new i.ActionStatCollector(this.productionStatCollector),this.registrationItemStat=new i.RegistrationItemStatCollector(this.actionStatCollector)}}},123062:(e,t,o)=>{"use strict";o.d(t,{VkidEcosystemNavigationCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o=this.productionStatCollector.getBaseEvent(),i={...o,prev_nav_id:this.lastNavEventId,prev_event_id:o.prev_id||0,screen:"main",type:n.ProductionStatEventTypes.TYPE_ACTION,[n.ProductionStatEventTypes.TYPE_ACTION]:{type:n.ActionProductionStatEventTypes.TYPE_VKID_ECOSYSTEM_NAVIGATION_ITEM,[n.ActionProductionStatEventTypes.TYPE_VKID_ECOSYSTEM_NAVIGATION_ITEM]:{...e,screen:"ecosystem_navigation"}}};this.lastNavEventId=i.id,this.productionStatCollector.logEvent(i,t)}constructor(){this.lastNavEventId=0,this.productionStatCollector=new i.ProductionStatCollector}}},124319:(e,t,o)=>{"use strict";o.d(t,{CaptchaClientItemStatCollector:()=>s});var n=o(695290),i=o(476726),r=o(772546);class s{logEvent(e,t,o,s,a,_,c,l){if(!(0,i.partConfigEnabled)("captcha_client_item_stat"))return;const u={event_type:e,screen:t,unauth_id:(0,r.getCookie)("remixstlid")??(0,r.getCookie)("remixstid"),sid:(0,r.getCookie)("remixnreg_sid")};o&&(u.screen_to=o),a&&(u.fields=[...u.fields||[],...a]),_&&(u.app_id=_),l&&(u.multiacc_id=l);const d={type:n.ActionProductionStatEventTypes.TYPE_CAPTCHA_CLIENT_ITEM,[n.ActionProductionStatEventTypes.TYPE_CAPTCHA_CLIENT_ITEM]:u};this.actionStatCollector.logEvent(d,s)}constructor(e){this.actionStatCollector=e,this.fields={}}}},802571:(e,t,o)=>{"use strict";o.d(t,{ClickStatCollector:()=>i});var n=o(695290);class i{logEvent(e,t,o,i){const r={...this.productionStatCollector.getBaseEvent(),type:n.ProductionStatEventTypes.TYPE_CLICK,screen:o,[n.ProductionStatEventTypes.TYPE_CLICK]:{item:t,...e}};this.productionStatCollector.logEvent(r,i)}constructor(e){this.productionStatCollector=e}}},162557:(e,t,o)=>{"use strict";o.d(t,{ClipDescriptionStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ClickProductionStatEventTypes.TYPE_CLIPS_DESCRIPTION_CLICK_ITEM,[n.ClickProductionStatEventTypes.TYPE_CLIPS_DESCRIPTION_CLICK_ITEM]:e};this.clickStatCollector.logEvent(t,{type:n.EventItemType.CLIP})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},827603:(e,t,o)=>{"use strict";o.d(t,{ClipDownloadStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ClickProductionStatEventTypes.TYPE_CLIPS_DOWNLOAD_CLICK_ITEM,[n.ClickProductionStatEventTypes.TYPE_CLIPS_DOWNLOAD_CLICK_ITEM]:e};this.clickStatCollector.logEvent(t,{type:n.EventItemType.CLIP})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},680316:(e,t,o)=>{"use strict";o.d(t,{CommunityAppsClickEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent({miniAppId:e,groupId:t,eventType:o,source:i,vkRef:r,options:s}){const a={event:o,group_id:t};i&&(a.source=i);const _={type:n.ClickProductionStatEventTypes.TYPE_COMMUNITY_APPS_CATALOG_ITEM,[n.ClickProductionStatEventTypes.TYPE_COMMUNITY_APPS_CATALOG_ITEM]:a},c={type:n.EventItemType.MINI_APP,id:e,vk_ref:r};s&&(c.track_code=JSON.stringify(s)),this.clickStatCollector.logEvent(_,c)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},238527:(e,t,o)=>{"use strict";o.d(t,{feedItemMenuActionCollector:()=>r});var n=o(695290),i=o(581903);const r=new class{logEvent(e,t,o){const i={...this.productionStatCollector.getBaseEvent(o),type:n.ClickProductionStatEventTypes.TYPE_FEED_ITEM_MENU_ACTION,[n.ActionProductionStatEventTypes.TYPE_FEED_ITEM_MENU_ACTION]:e};this.clickStatCollector.logEvent(i,t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productionStatCollector)}}},181347:(e,t,o)=>{"use strict";o.d(t,{feedOpenItemCollector:()=>r});var n=o(695290),i=o(581903);const r=new class{logEvent(e,t,o){const i={...this.productionStatCollector.getBaseEvent(o),type:n.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM,[n.ClickProductionStatEventTypes.TYPE_FEED_OPEN_ITEM]:e};this.clickStatCollector.logEvent(i,t)}constructor(){this.productionStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productionStatCollector)}}},782784:(e,t,o)=>{"use strict";o.d(t,{feedInteractionItemStatCollector:()=>r});var n=o(695290),i=o(581903);const r=new class{logEvent(e,t){const o={type:n.ClickProductionStatEventTypes.TYPE_FEED_INTERACTION_ITEM,[n.ClickProductionStatEventTypes.TYPE_FEED_INTERACTION_ITEM]:e},i={type:t};this.clickStatCollector.logEvent(o,i)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},536197:(e,t,o)=>{"use strict";o.d(t,{ProfileActionButtonCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={type:e},i={type:n.ClickProductionStatEventTypes.TYPE_PROFILE_ACTION_BUTTON_ITEM,[n.ClickProductionStatEventTypes.TYPE_PROFILE_ACTION_BUTTON_ITEM]:o};this.clickStatCollector.logEvent(i,{id:t,type:n.EventItemType.MINI_APP})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},820014:(e,t,o)=>{"use strict";o.d(t,{SearchStatsCollector:()=>s});var n=o(695290),i=o(581903),r=o(687604);class s{constructor(){this.logEvent=e=>{const t={type:n.ClickProductionStatEventTypes.TYPE_SEARCH_CLICK_ITEM,[n.ClickProductionStatEventTypes.TYPE_SEARCH_CLICK_ITEM]:{action:e.action}},o={type:e.type,track_code:e.track_code};this.clickStatCollector.logEvent(t,o)},this.logOutOfSerpEvent=e=>{const t=(0,r.getTrackCode)("search_track_code");t&&this.logEvent({...e,track_code:t})},this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},482122:(e,t,o)=>{"use strict";o.d(t,{ShortVideoStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ClickProductionStatEventTypes.TYPE_SHORT_VIDEO_CLICK_ITEM,[n.ClickProductionStatEventTypes.TYPE_SHORT_VIDEO_CLICK_ITEM]:{action:e.action}},o={type:e.type,track_code:e.track_code};this.clickStatCollector.logEvent(t,o)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},733999:(e,t,o)=>{"use strict";o.d(t,{SnowballsEventsClickStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ClickProductionStatEventTypes.TYPE_SNOWBALL_EVENTS_ITEM,[n.ClickProductionStatEventTypes.TYPE_SNOWBALL_EVENTS_ITEM]:e},o={type:n.EventItemType.PROFILE};this.clickStatCollector.logEvent(t,o)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},69570:(e,t,o)=>{"use strict";o.d(t,{SuperappShowcaseStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={type:n.EventItemType.SUPER_APP},i={type:n.EventItemType.TYPE_SUPERAPP_CLICK,[n.EventItemType.TYPE_SUPERAPP_CLICK]:e};this.clickStatCollector.logEvent(i,o,void 0,t)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},883899:(e,t,o)=>{"use strict";o.d(t,{VideoActionButtonStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={type:n.ClickProductionStatEventTypes.TYPE_CLIP_VIEWER_ITEM,[n.ClickProductionStatEventTypes.TYPE_CLIP_VIEWER_ITEM]:e};this.clickStatCollector.logEvent(t,{type:n.EventItemType.VIDEO})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},846118:(e,t,o)=>{"use strict";o.d(t,{VideoAuthorFilterClickStatsCollector:()=>r});var n=o(581903),i=o(695290);class r{logEvent(e){const t={type:i.ClickProductionStatEventTypes.TYPE_VIDEO_AUTHOR_FILTER_CLICK,[i.ClickProductionStatEventTypes.TYPE_VIDEO_AUTHOR_FILTER_CLICK]:{selected:!0}},o={type:i.EventItemType.CATALOG_ITEM,track_code:e};this.clickStatCollector.logEvent(t,o,"video_subscriptions")}constructor(){this.productStatCollector=new n.ProductionStatCollector,this.clickStatCollector=new n.ClickStatCollector(this.productStatCollector)}}},723216:(e,t,o)=>{"use strict";o.d(t,{VideoPlaylistClickStatsCollector:()=>r});var n=o(581903),i=o(695290);class r{logEvent(e,t){const o={type:i.ClickProductionStatEventTypes.TYPE_VIDEO_PLAYLIST_ITEM,[i.ClickProductionStatEventTypes.TYPE_VIDEO_PLAYLIST_ITEM]:e};this.clickStatCollector.logEvent(o,{type:i.EventItemType.CLICK_ITEM},t)}constructor(){this.productStatCollector=new n.ProductionStatCollector,this.clickStatCollector=new n.ClickStatCollector(this.productStatCollector)}}},877511:(e,t,o)=>{"use strict";o.d(t,{VkAppsActionMenuStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t,o){const i={type:o},r={type:n.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM,[n.ClickProductionStatEventTypes.TYPE_MINI_APP_ITEM]:i},s={type:t,id:e};this.clickStatCollector.logEvent(r,s)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.clickStatCollector=new i.ClickStatCollector(this.productStatCollector)}}},796948:(e,t,o)=>{"use strict";o.d(t,{VkAppsCatalogCollector:()=>i});var n=o(581903);class i{logEvent(){}constructor(){this.productStatCollector=new n.ProductionStatCollector,this.navigationStatCollector=new n.NavigationStatCollector(this.productStatCollector)}}},796044:(e,t,o)=>{"use strict";var n,i;o.d(t,{DonutActionEventScreen:()=>i,DonutActionEventType:()=>n}),function(e){e.PAYMENT_FORM="payment_form",e.PAYMENT_FORM_CLICK_OFFER="payment_form_click_offer",e.PAYMENT_FORM_CLICK_PAY="payment_form_click_pay",e.PAYMENT_FORM_CLICK_CLOSE="payment_form_click_close"}(n||(n={})),function(e){e.PAYMENT_START="payment_start",e.DATA_ACCESS="data_access",e.RESULT_PAYMENT_SUCCESS_OK="result_payment_success_ok",e.RESULT_PAYMENT_SUCCESS_WAITING="result_payment_success_waiting",e.RESULT_PAYMENT_SUCCESS_WAITING_TIMEOUT="result_payment_success_waiting_timeout",e.RESULT_RESUB_SUCCESS_WAITING_OK="result_resub_success_waiting_ok",e.RESULT_PAYMENT_UNAVAILABLE="result_payment_unavailable",e.RESULT_PAYMENT_CANCEL="result_payment_cancel",e.RESULT_ERROR="result_error",e.RESULT_CHANGE_ERROR="result_change_error",e.RESULT_CHANGE_SUCCESS_OK="result_change_success_ok",e.RESULT_CHANGE_SUCCESS_WAITING_TIMEOUT="result_change_success_waiting_timeout",e.UNKNOWN="donut_payment_screen_unknown"}(i||(i={}))},581903:(e,t,o)=>{"use strict";o.d(t,{ActionStatCollector:()=>W.ActionStatCollector,CaptchaClientItemEventTypes:()=>q.CaptchaClientItemEventTypes,CaptchaClientItemStatCollector:()=>j.CaptchaClientItemStatCollector,CaptchaEventScreens:()=>q.CaptchaEventScreens,ClickStatCollector:()=>K.ClickStatCollector,EventFieldValues:()=>q.EventFieldValues,EventScreens:()=>q.EventScreens,MTTimespentStatCollector:()=>G.MTTimespentStatCollector,NavigationProductionStatEventTypes:()=>q.NavigationProductionStatEventTypes,NavigationStatCollector:()=>U.NavigationStatCollector,ProductionStatCollector:()=>F.ProductionStatCollector,RegistrationFieldItemNames:()=>q.RegistrationFieldItemNames,RegistrationFieldItemValues:()=>q.RegistrationFieldItemValues,RegistrationItemEventTypes:()=>q.RegistrationItemEventTypes,RegistrationItemStatCollector:()=>H.RegistrationItemStatCollector,ViewStatCollector:()=>V.ViewStatCollector,adMiniAppsEventItemStat:()=>Q,bridgeEventItemStat:()=>X,clipDescriptionStatsCollector:()=>be,clipDownloadStatsCollector:()=>Te,communityAppsCatalogActionEventCollector:()=>me,communityAppsClickEventStatsCollector:()=>he,easterEggsItemStat:()=>z,gamesJsSDKEventStatsCollector:()=>ie,getScreen:()=>$.getScreen,marketItemsMapStats:()=>re,marketingTransitionItemStat:()=>Y,miniAppsActionEventController:()=>ve,miniAppsItemStats:()=>te,personalDiscountEventItemStat:()=>Z,profileActionButtonCollector:()=>se,searchStatsCollector:()=>ae,searchViewStatCollector:()=>pe,setScreen:()=>$.setScreen,setScreenPrev:()=>$.setScreenPrev,shortVideoStatsCollector:()=>_e,snowballsActionEventController:()=>we,snowballsClickEventController:()=>Ae,surveyMiniAppsEventItemStat:()=>J,unverifiedScreenEventCollector:()=>Ee,videoActionButtonStatsCollector:()=>Ie,videoAllSubscriptionsNavCollector:()=>de,videoAuthorFilterClickCollector:()=>ue,videoPlaylistClickStatsCollector:()=>ye,videoPublishStatsCollector:()=>ge,videoSubscriptionNavCollector:()=>le,videoUploadStatsCollector:()=>fe,videoViewStatsCollector:()=>ce,vkAppsActionMenuItemStat:()=>ee,vkConnectNavigationCollector:()=>oe,vkIdEcosystemNavigationCollector:()=>ne});var n=o(954130),i=o(642806),r=o(122223),s=o(877511),a=o(629605),_=o(968083),c=o(123062),l=o(657789),u=o(810630),d=o(980715),p=o(619833),h=o(782618),m=o(536197),E=o(820014),f=o(69570),g=o(796948),y=o(556337),v=o(680316),w=o(229566),A=o(101146),b=o(855132),T=o(392630),I=o(828674),P=o(723216),C=o(622639),S=o(733999),O=o(833397),M=o(981550),D=o(482122),L=o(611430),k=o(846118),R=o(904165),N=o(162557),B=o(827603),x=o(883899),U=o(553785),F=o(441480),W=o(639313),K=o(802571),V=o(133154),H=o(426106),j=o(124319),G=o(16345),q=o(695290),$=o(193270);const Y=new n.MarketingTransitionItemStatCollector,z=new r.EasterEggsItemStatCollector,X=new i.BridgeEventStatsCollector,Q=new l.AdMiniAppsEventStatsCollector,J=new u.SurveyMiniAppsEventStatsCollector,Z=new b.PersonalDiscountEventStatsCollector,ee=new s.VkAppsActionMenuStatsCollector,te=new a.MiniAppsEventStatsCollector,oe=new _.VkConnectNavigationCollector,ne=new c.VkidEcosystemNavigationCollector,ie=new d.GamesJsSDKEventStatsCollector,re=new h.MarketItemsMapStats,se=new m.ProfileActionButtonCollector,ae=new E.SearchStatsCollector,_e=new D.ShortVideoStatsCollector,ce=(new f.SuperappShowcaseStatsCollector,new M.VideoViewStatCollector),le=new L.VideoSubscriptionNavCollector,ue=new k.VideoAuthorFilterClickStatsCollector,de=new R.VideoAllSubscriptionsNavCollector,pe=(new g.VkAppsCatalogCollector,new y.SearchViewStatCollector),he=(new p.GamesFeedBlockStatsCollector,new v.CommunityAppsClickEventStatsCollector),me=new w.CommunityAppsCatalogActionEventCollector,Ee=new A.UnverifiedScreenEventCollector,fe=new T.VideoUploadStatsCollector,ge=new I.VideoPublishStatsCollector,ye=new P.VideoPlaylistClickStatsCollector,ve=new C.MiniAppsActionEventCollector,we=new O.SnowballsEventsActionStatsCollector,Ae=new S.SnowballsEventsClickStatsCollector,be=new N.ClipDescriptionStatsCollector,Te=new B.ClipDownloadStatsCollector,Ie=new x.VideoActionButtonStatsCollector},619833:(e,t,o)=>{"use strict";o.d(t,{GamesFeedBlockStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e){const t={subtype:n.NavigationProductionStatEventTypes.GO,screen:"feed"},o={type:n.NavigationProductionStatEventTypes.TYPE_GAMES_FEED_BLOCK_NAVGO,[n.GAMES_FEED_BLOCK_ITEM]:{track_code:e}};this.navgoStatCollector.logEvent({...t,...o})}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.navgoStatCollector=new i.NavigationStatCollector(this.productStatCollector)}}},904165:(e,t,o)=>{"use strict";o.d(t,{VideoAllSubscriptionsNavCollector:()=>r});var n=o(695290),i=o(581903);class r{logOpenEvent(e,t){const o={subtype:n.NavigationProductionStatEventTypes.GO,screen:"video_catalog",screen_to:t,item:{type:n.EventItemType.VIDEO_ALL_SUBSCRIPTIONS_BUTTON,track_code:e}};this.navStatCollector.logEvent(o)}logCloseEvent(e){const t={subtype:n.NavigationProductionStatEventTypes.BACK,screen:"video_subscriptions_all_creators",destination_item:{type:n.EventItemType.VIDEO_ALL_SUBSCRIPTIONS_BUTTON,track_code:e}};this.navStatCollector.logEvent(t)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.navStatCollector=new i.NavigationStatCollector(this.productStatCollector)}}},611430:(e,t,o)=>{"use strict";o.d(t,{VideoSubscriptionNavCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t){const o={subtype:t?n.NavigationProductionStatEventTypes.TAB_OPEN:n.NavigationProductionStatEventTypes.GO,screen:t?"video_subscriptions":"video_catalog",screen_to:"video_subscriptions"};t&&(o.item={type:n.EventItemType.CATALOG_ITEM,track_code:t}),e&&(o.destination_item={type:n.EventItemType.CATALOG_ITEM,track_code:e}),this.navStatCollector.logEvent(o)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.navStatCollector=new i.NavigationStatCollector(this.productStatCollector)}}},553785:(e,t,o)=>{"use strict";o.d(t,{NavigationStatCollector:()=>l});var n=o(942451),i=o(695290),r=o(193270),s=o(476726),a=o(623702);const _="unknown",c=()=>(0,n.makeSharedState)("navigation-stat-collector-event-config",(()=>({data:{screen:_,tab_id:(()=>{const e="NAVIGATION_TAB_ID";if(!(0,a.isStorageAvailable)("localStorage"))return Math.floor(127*Math.random());let t=(Number(a.vkLocalStorage.getItem(e))||0)+1;return t=t>=127?0:t,a.vkLocalStorage.setItem(e,t),t})()}})),{version:0})();class l{logEvent(e){const t={...this.ProductionStatCollector.getBaseEvent(),type:i.ProductionStatEventTypes.TYPE_NAVGO,[i.ProductionStatEventTypes.TYPE_NAVGO]:e};return this.ProductionStatCollector.logEvent(t),{statEvent:t}}_logEvent(e){if(!(0,s.partConfigEnabled)("navigation_timespent"))return;const{statEvent:t}=this.logEvent(e);this.updateEventData(t)}updateEventData(e){const t=e[i.ProductionStatEventTypes.TYPE_NAVGO];this.setEventData({...this.getEventData(),prev_navgo_id:e.id,prev_navgo_timestamp:e.timestamp,screen:t.screen_to||t.screen,screen_prev:t.screen_to?t.screen:t.screen_prev})}getEventData(){return c().data}setEventData(e){return c().data=e}getDestinationItem(){const e=window.cur.navgoFields?.destination_item;return delete window.cur.navgoFields,e}getEvent(e){return{...this.getEventData(),subtype:e}}sendMoveEvent(e,t,{destinationItem:o}={}){const n={...this.getEvent(t),screen_to:e,destination_item:o??this.getDestinationItem()};if(n.screen===_)return console.warn("NavigationStatCollector: previous event not found."),null;(0,r.setLeftMenuScreen)(e),(0,r.setScreen)(n.screen),this._logEvent(n)}sendShow(){this._logEvent(this.getEvent(i.NavigationProductionStatEventTypes.SHOW))}sendHide(){this._logEvent(this.getEvent(i.NavigationProductionStatEventTypes.HIDE))}sendTabOpen(){this._logEvent({...this.getEvent(i.NavigationProductionStatEventTypes.TAB_OPEN),screen:this.getModule(),destination_item:this.getDestinationItem()})}sendTabClose(){this._logEvent(this.getEvent(i.NavigationProductionStatEventTypes.TAB_CLOSE))}sendGo(e,{destinationItem:t}={}){this.sendMoveEvent(e,i.NavigationProductionStatEventTypes.GO,{destinationItem:t})}sendBack(e){this.sendMoveEvent(e,i.NavigationProductionStatEventTypes.BACK)}getModule(){return window.cur?.module??_}getScreen(e=_){return window.cur?.screen?window.cur.screen===_?e:window.cur.screen:e}constructor(e){this.ProductionStatCollector=e}}},441480:(e,t,o)=>{"use strict";o.d(t,{ProductionStatCollector:()=>_});var n=o(568352),i=o(318288),r=o(144770),s=o(708953),a=o(476726);class _{getCurrentTime(e=!0){const t=Date.now().toString(10);return e?t+"000":t}getIntId(){return Math.floor(Math.random()*_.MAX_INT32)}logEvent(e,t){this.DEBUG&&(0,i.log)(e),e.type&&e[e.type]?(((0,a.partConfigEnabled)("production_stats_logs_immediately")||s.DebugConfig.get("productionStatsLogsImmediately"))&&(t={...t,force:!0}),(0,r.saveProductionStats)(e,t),this.lastEvent=e):(0,n.logError)(new Error("ProductionStatCollector: invalid event."))}getLastEvent(){return this.lastEvent}getBaseEvent(e){return{id:this.getIntId(),prev_id:this.lastEvent?.id,timestamp:this.getCurrentTime(),url:window.location.href,screen:e}}constructor(){this.DEBUG=!1}}_.MAX_INT32=2147483647},426106:(e,t,o)=>{"use strict";o.d(t,{RegistrationItemStatCollector:()=>s});var n=o(695290),i=o(476726),r=o(772546);class s{logFieldInteraction(e,t,o=!1){[n.RegistrationFieldItemNames.PASSWORD,n.RegistrationFieldItemNames.SMS_CODE,n.RegistrationFieldItemNames.RULES_ACCEPT].includes(e)&&(t=t?"1":"0");const i=o?"0":this.actionStatCollector.productionStatCollector.getCurrentTime(!1),r=this.fields[e];r?(r.value=t,r.end_interaction_time=i):this.fields[e]={name:e,value:t,start_interaction_time:i,end_interaction_time:i}}getFieldInteractions(){return Object.values(this.fields)}resetFieldInteractions(){for(const e of Object.getOwnPropertyNames(this.fields))delete this.fields[e]}logEvent(e,t,o,s,a,_,c,l){if(!(0,i.partConfigEnabled)("registration_item_stat"))return;const u={event_type:e,screen:t,unauth_id:(0,r.getCookie)("remixstlid")??(0,r.getCookie)("remixstid"),sid:(0,r.getCookie)("remixnreg_sid")};[n.RegistrationItemEventTypes.SCREEN_PROCEED,n.RegistrationItemEventTypes.SCREEN_SKIP,n.RegistrationItemEventTypes.SCREEN_RETURN,n.RegistrationItemEventTypes.INCORRECT_SMS_CODE,n.RegistrationItemEventTypes.POPUP_OPEN].includes(e)&&(u.screen_to=o,u.fields=this.getFieldInteractions(),this.resetFieldInteractions()),e!==n.RegistrationItemEventTypes.SELECT_COUNTRY_DONE&&e!==n.RegistrationItemEventTypes.PROCEED_OTHER_COUNTRY_CODE||!this.fields[n.RegistrationFieldItemNames.SELECT_COUNTRY_NAME]||(u.fields=this.getFieldInteractions().filter((e=>e.name===n.RegistrationFieldItemNames.SELECT_COUNTRY_NAME)),delete this.fields[n.RegistrationFieldItemNames.SELECT_COUNTRY_NAME]),e!==n.RegistrationItemEventTypes.SWITCH_FROM_ACCOUNT&&e!==n.RegistrationItemEventTypes.SWITCH_TO_ACCOUNT||!c||(u.user_id=c),a&&(u.fields=[...u.fields||[],...a]),_&&(u.app_id=_),l&&(u.multiacc_id=l);const d={type:n.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM,[n.ActionProductionStatEventTypes.TYPE_REGISTRATION_ITEM]:u};this.actionStatCollector.logEvent(d,s)}constructor(e){this.actionStatCollector=e,this.fields={}}}},695290:(e,t,o)=>{"use strict";var n,i,r,s,a;o.d(t,{ActionProductionStatEventTypes:()=>u,AdMiniAppsBannerUpdated:()=>x,AlertInAppType:()=>j,AppSessionActionEventTypes:()=>B,CaptchaClientItemEventTypes:()=>w,CaptchaEventScreens:()=>i,ClickProductionStatEventTypes:()=>d,ClipDescriptionEventTypes:()=>he,ClipDescriptionLinkTypes:()=>Ee,ClipDownloadEventTypes:()=>me,CommunityAppsAddClickSourceTypes:()=>W,CommunityAppsCatalogClickItemTypes:()=>F,CommuntyAppsCatalogActionEventTypes:()=>k,CommuntyAppsCatalogActionSourceTypes:()=>R,DownloadedGamesItemType:()=>H,ETooltipEventTypes:()=>fe,EventFieldValues:()=>r,EventItemSubType:()=>f,EventItemType:()=>E,EventScreens:()=>n,FeedInteractionItemType:()=>ce,GAMES_FEED_BLOCK_ITEM:()=>_,GamesJsSDKEventNames:()=>L,IEasterEggsItemEventType:()=>q,IMiniAppsEventTypesStatEvent:()=>m,IVkConnectNavigationItemEventType:()=>$,LongtapEventCategory:()=>D,MarketEventTypes:()=>h,MarketingTransitionItemCampaignType:()=>S,MarketingTransitionItemEventType:()=>O,MarketingTransitionItemSourceType:()=>M,MiniAppsUserActionItemType:()=>G,MyGamesCloudItemType:()=>V,NavigationProductionStatEventTypes:()=>a,PersonalDiscountEventType:()=>ae,ProductionStatEventTypes:()=>s,ProfileActionButtonEventType:()=>Z,RADIO_STATION_EVENT_ITEM:()=>c,RegistrationFieldItemNames:()=>y,RegistrationFieldItemValues:()=>v,RegistrationItemEventTypes:()=>g,SearchClickActionMap:()=>re,SurveyMiniAppsObjectEventType:()=>U,UnblockAccountField:()=>Y,UnverifiedScreenActionEventTypes:()=>N,UserInfoStatsFeature:()=>T,UserInfoStatsOrientation:()=>C,UserInfoStatsPreferensContrast:()=>I,UserInfoStatsPrefersColorScheme:()=>P,VideoActionButtonEventTypes:()=>ge,VideoPlaylistEventTypes:()=>pe,VideoPublishActionEventTypes:()=>de,VideoUploadActionEventTypes:()=>ue,ViewProductionStatEventTypes:()=>p,VkAppActionMenuActionType:()=>K,VkidEcosystemNavigationItem:()=>X,VkidEcosystemNavigationItemEventType:()=>z,VkidEcosystemNavigationItemPlace:()=>Q}),function(e){e.NOWHERE="nowhere",e.OTHER="other",e.START="start",e.START_BOX="start_box",e.START_PROCEED_AS="start_proceed_as",e.REGISTRATION_DOWNLOAD_APP="registration_download_app",e.REGISTRATION_COUNTRY="registration_country",e.REGISTRATION_PHONE="registration_phone",e.REGISTRATION_PHONE_VERIFY="registration_phone_verify",e.REGISTRATION_PASSWORD="registration_password",e.REGISTRATION_EDUCATION="registration_education",e.REGISTRATION_EMAIL="registration_email",e.REGISTRATION_PHOTO="registration_photo",e.REGISTRATION_RECOM_THEMES="registration_recom_themes",e.REGISTRATION_EMAIL_EXPLANATION="registration_email_explanation",e.REGISTRATION_NAME="registration_name",e.REGISTRATION_INVITE_CONFIRM="registration_invite_confirm",e.REGISTRATION_LIST_FRIENDS_FACEBOOK="registration_list_friends_facebook",e.PHONE_2FA_VERIFY="phone_2fa_verify",e.OAUTH_FB="oauth_fb",e.FACEBOOK_REGISTRATION_FAILED="facebook_registration_failed",e.MAIN="main",e.MULTI_ACC_SWITCHER="multi_acc_switcher",e.ONBOARDING_MULTIACCOUNT="onboarding_multiaccount",e.CAPTCHA="captcha",e.MEET_PASSKEY="meet_passkey",e.CONNECT_PASSKEY="connect_passkey",e.CONNECTED_KEYS="connected_keys",e.ECOSYSTEM_NAVIGATION="ecosystem_navigation"}(n||(n={})),function(e){e.CAPTCHA="captcha",e.OTHER="other"}(i||(i={})),function(e){e.REGISTERED_VIA_FB="1"}(r||(r={})),function(e){e.TYPE_NAVGO="type_navgo",e.TYPE_ACTION="type_action",e.TYPE_CLICK="type_click",e.TYPE_VIEW="type_view"}(s||(s={})),function(e){e.GO="go",e.BACK="back",e.TAB_OPEN="tab_open",e.TAB_CLOSE="tab_close",e.HIDE="hide",e.SHOW="show"}(a||(a={})),function(e){e.TYPE_DONUT_DESCRIPTION_NAV_ITEM="type_donut_description_nav_item",e.TYPE_MARKET_NAVGO="type_market_navgo",e.TYPE_YOULA_SNIPPET_NAVGO="type_youla_snippet_navgo",e.TYPE_STUDIO_NAVGO="type_studio_navgo",e.TYPE_SERVICES_MAP_NAVGO="type_services_map_navgo",e.TYPE_MARUSIA_NAVGO="type_marusia_navgo",e.TYPE_MINI_APP_CATALOG_ITEM="type_mini_app_catalog_item",e.TYPE_GAMES_FEED_BLOCK_NAVGO="type_games_feed_block_navgo"}(a||(a={}));const _="type_games_feed_block_item",c="type_radio_station_item";var l,u,d,p,h,m,E,f,g,y,v,w,A,b,T,I,P,C,S,O,M,D,L,k,R,N,B,x,U,F,W,K,V,H,j,G,q,$,Y,z,X,Q,J,Z,ee,te,oe,ne,ie,re,se,ae,_e,ce,le,ue,de,pe,he,me,Ee,fe,ge;!function(e){e.TYPE_YOULA_SNIPPET_ITEM="type_youla_snippet_item",e.TYPE_YOULA_TRANSITION_TO_ITEM="type_youla_transition_to_item",e.TYPE_YOULA_IM="type_youla_im"}(l||(l={})),function(e){e.TYPE_REGISTRATION_ITEM="type_registration_item",e.TYPE_MARKETING_TRANSITION_ITEM="type_marketing_transition_item",e.TYPE_DONUT_PAYMENT_ITEM="type_donut_payment_item",e.TYPE_CALL_ITEM="type_voip_call_item",e.TYPE_BRIDGE_EVENT_ITEM="type_bridge_event_item",e.TYPE_AD_MINI_APPS_EVENT_ITEM="type_ad_mini_apps_event_item",e.TYPE_EASTER_EGGS_ITEM="type_easter_eggs_item",e.TYPE_USER_INFO_STATS_ITEM="type_user_info_stats_item",e.TYPE_VK_CONNECT_NAVIGATION_ITEM="type_vk_connect_navigation_item",e.TYPE_GAMES_JS_SDK_ITEM="type_games_js_sdk_item",e.TYPE_SERVICES_MAP_ITEM="type_services_map_item",e.TYPE_SURVEY_MINI_APPS_EVENT_ITEM="type_survey_mini_apps_event_item",e.TYPE_PERFORMANCE_STATS_ITEM="type_performance_stats_item",e.TYPE_COMMUNITY_APPS_CATALOG_EVENT_ITEM="type_community_apps_catalog_transition_item",e.TYPE_MINI_APPS_ACTION_ITEM="type_mini_apps_action_item",e.TYPE_UNVERIFIED_SCREEN_ITEM="type_unverified_screen_item",e.TYPE_MINI_APPS_PERSONAL_DISCOUNT_EVENT_ITEM="type_mini_apps_personal_discount",e.TYPE_CATALOG_AUDIO_LONGTAP_ITEM="type_audio_longtap_item",e.TYPE_CATALOG_AUDIO_SNIPPET_ITEM="type_audio_snippet_item",e.TYPE_AUDIO_DISLIKES_ITEM="type_audio_dislike_item",e.TYPE_FEED_INTERACTION_ITEM="type_feed_interaction_item",e.TYPE_CAPTCHA_CLIENT_ITEM="type_captcha_client_item",e.TYPE_VIDEO_UPLOAD_ITEM="type_video_upload_item",e.TYPE_VIDEO_PUBLISH_ITEM="type_video_publish_item",e.TYPE_BROWSER_CERTIFICATE_SUPPORT_STATS_ITEM="type_browser_certificate_support_stats_item",e.TYPE_RECOM_THEMES_ITEM="type_recom_themes_item",e.TYPE_SNOWBALLS_EVENTS_ITEM="type_snowball_events_item",e.TYPE_MT_TIMESPENT_ITEM="type_mt_timespent_item",e.TYPE_VKID_ECOSYSTEM_NAVIGATION_ITEM="type_vkid_ecosystem_navigation_item",e.TYPE_FEED_OPEN_ITEM="type_feed_open_item",e.TYPE_FEED_COMMENTS_SORT_TAB_CLICK="type_feed_comments_sort_tab_click",e.TYPE_FEED_ITEM_MENU_ACTION="type_feed_item_menu_action",e.TYPE_UI_HINT_ITEM="type_ui_hint_item"}(u||(u={})),function(e){e.TYPE_MARKET_CLICK="type_market_click",e.TYPE_WORKI_CLICK="type_worki_click",e.TYPE_CATALOG_BANNER_ITEM="type_catalog_banner_item",e.TYPE_MINI_APP_ITEM="type_mini_app_item",e.TYPE_MESSAGING_CONTACT_RECOMMENDATIONS_ITEM="type_messaging_contact_recommendations_item",e.TYPE_STUDIO_PERIOD_SELECT="type_studio_period_select",e.TYPE_QUESTION_ITEM="type_question_item",e.TYPE_PROFILE_ACTION_BUTTON_ITEM="type_profile_action_button_item",e.TYPE_PROFILE_ITEM="type_profile_item",e.TYPE_SEARCH_CLICK_ITEM="type_search_click_item",e.TYPE_SHORT_VIDEO_CLICK_ITEM="type_short_video_click_item",e.TYPE_CATALOG_ITEM="type_catalog_item",e.TYPE_POSTING_ITEM="type_posting_item",e.TYPE_PHOTOS_ITEM="type_photos_item",e.FOLLOWERS_MODE_ONBOARDING_CLICK="type_followers_mode_onboarding_click",e.FOLLOWERS_MODE_SWITCH_STATE="type_followers_mode_switch_state",e.TYPE_COMMUNITY_APPS_CATALOG_ITEM="type_community_apps_catalog_click_item",e.TYPE_COMMUNITY_ITEM="type_groups_event_item",e.TYPE_MINI_APPS_SESSION="type_mini_apps_session",e.TYPE_MARUSIA_CONVERSATION_ITEM="type_marusia_conversation_item",e.TYPE_CATALOG_AUDIO_LONGTAP_ITEM="type_audio_longtap_item",e.TYPE_CATALOG_AUDIO_SNIPPET_ITEM="type_audio_snippet_item",e.TYPE_FEED_INTERACTION_ITEM="type_feed_interaction_item",e.TYPE_SNOWBALL_EVENTS_ITEM="type_snowball_events_item",e.TYPE_VIDEO_PLAYLIST_ITEM="type_video_playlist_item",e.TYPE_VIDEO_AUTHOR_FILTER_CLICK="type_video_author_filter_click",e.TYPE_FEED_OPEN_ITEM="type_feed_open_item",e.TYPE_CLIPS_DESCRIPTION_CLICK_ITEM="type_clips_description_click_item",e.TYPE_CLIPS_DOWNLOAD_CLICK_ITEM="type_clips_download_click_item",e.TYPE_FEED_COMMENTS_SORT_TAB_CLICK="type_feed_comments_sort_tab_click",e.TYPE_FEED_ITEM_MENU_ACTION="type_feed_item_menu_action",e.TYPE_CLIP_VIEWER_ITEM="type_clip_viewer_item"}(d||(d={})),function(e){e.TYPE_CATALOG_BANNER_ITEM="type_catalog_banner_item",e.TYPE_MARKET_VIEW="type_market_view",e.TYPE_MINI_APPS_VIEW_ITEM="type_mini_app_view_item",e.TYPE_CATALOG_SPECIAL_PROJECT_ITEM="type_catalog_special_project_item",e.TYPE_MARUSIA_CONVERSATION_ITEM="type_marusia_conversation_item",e.TYPE_CATALOG_AUDIO_LONGTAP_ITEM="type_audio_longtap_item",e.TYPE_FEED_ITEM="type_feed_item"}(p||(p={})),function(e){e.TYPE_MARKET_ORDERS_ITEM="type_market_orders_item",e.TYPE_MARKET_CARTS_ITEM="type_market_carts_item",e.TYPE_MARKET_GOODS_ITEM="type_market_item",e.TYPE_MARKET_MARKETPLACE_ITEM="type_market_marketplace_item",e.TYPE_MARKET_ADD_ITEM_TO_BOOKMARKS="type_market_add_item_to_bookmarks"}(h||(h={})),function(e){e.CATALOG_PROMO_BANNER_VIEWED="catalog_promo_banner_viewed",e.CATALOG_CAROUSEL_BANNER_VIEWED="catalog_carousel_banner_viewed",e.CATALOG_SECTION_PROMO_BANNER_VIEWED="catalog_section_promo_banner_viewed"}(m||(m={})),function(e){e.CURATOR="curator",e.ARTICLE="article",e.ADS="ads",e.GROUP="group",e.PHOTO="photo",e.POST="post",e.STORY="story",e.USER="user",e.BROWSER="browser",e.NARRATIVE="narrative",e.MINI_APP="mini_app",e.GAME="game",e.MARKET_ITEM="market_item",e.MARKET_ITEM_ALBUM="market_item_album",e.MARKET_ORDER="market_order",e.MARKETPLACE_GEO_CHANGE="marketplace_geo_change",e.CATALOG_BANNER="catalog_banner",e.GROUP_CATEGORY_ITEM="group_category_item",e.AUDIO_FULLSCREEN_BANNER="audio_fullscreen_banner",e.AUDIO_SPECIAL_PROGECT_MODAL="audio_special_project_modal",e.WORKI_SNIPPET="worki_snippet",e.MINI_APPS_CATALOG_BANNER_VIEWED="catalog_promo_banner_viewed",e.MINI_APPS_CATALOG_BANNER="catalog_promo_banner",e.CATALOG_SECTION_PROMO_BANNER_VIEWED="catalog_section_promo_banner_viewed",e.TYPE_MESSAGING_CONTACT_RECOMMENDATIONS_ITEM="type_messaging_contact_recommendations_item",e.STUDIO="studio",e.OPEN_CATALOG_ECO_MENU="open_catalog_eco_menu",e.QUESTION="question",e.PROFILE="profile",e.TYPE_SUPERAPP_CLICK="type_superapp_click",e.SUPER_APP="super_app",e.SEARCH_SUGGESTION="search_suggestion",e.LINK="link",e.CATALOG_ITEM="catalog_item",e.CLICK_ITEM="click_item",e.SEARCH_AUTHOR="search_author",e.MINI_APPS_LAUNCH_EXTENDED="launch_extended",e.FOLLOWERS_MODE_ONBOARDING_BUTTON_ENTRYPOINT_VIEW="type_followers_mode_onboarding_entrypoint_view",e.MUSIC_PLAYLIST="playlist",e.MUSIC_ALBUM="album",e.MUSIC_AUDIO="audio",e.EVENT="event",e.START="start",e.OPEN="open",e.STOP="stop",e.ADDED="added",e.HINT="hint",e.CLIP="clip",e.STICKERS="stickers",e.IM_GROUP_CHAT="group_chat",e.IM_CONTACT="contact",e.IM_BUSINESS_NOTIFY="business_notify",e.IM_GROUP_MESSAGE_REQUEST="group_message_request",e.IM_USER_MESSAGE_REQUEST="user_message_request",e.IM_CONVO_INVITE="convo_invite",e.IM_SHARED_CONVOS="shared_convos",e.IM_CREATE_CONVERSATION="create_conversation",e.IM_CONTACTS_LIST="contacts_list",e.IM_CONTACTS_IMPORT="contacts_import",e.IM_LIST_ALL="list_all",e.IM_LIST_UNREAD="list_unread",e.IM_LIST_ARCHIVE="list_archive",e.IM_LIST_BUSINESS_NOTIFY="list_business_notify",e.IM_LIST_MR="list_mr",e.IM_FAV_BOX="fav_box",e.IM_SEARCH_MESSAGES_TAB="search_messages_tab",e.IM_SEARCH_CONVOS_TAB="search_convos_tab",e.IM_NOTIFICATIONS="notifications",e.IM_FASTCHATS_LIST_ALL="fastchats_list_all",e.IM_FASTCHATS_LIST_UNREAD="fastchats_list_unread",e.IM_FASTCHATS_THUMBS="fastchats_thumbs",e.IM_TOP_MESSENGER_LIST_ALL="top_messenger_list_all",e.IM_TOP_MESSENGER_LIST_UNREAD="top_messenger_list_unread",e.IM_TOP_MESSENGER_LIST_CHATS="top_messenger_list_chats",e.IM_GLOBAL_SEARCH="global_search",e.IM_PEER_INFO_POPUP="peer_info_popup",e.IM_SAK_MODULE="sak_module",e.IM_FASTCHATS_LIST_FRIENDS_ONLINE="fastchats_list_friends_online",e.IM_LIST_FOLDER="list_folder",e.IM_CALLS="calls",e.IM_FORWARD_MESSAGES_TARGET="forward_messages_target",e.IM_PROFILE_PAGE="profile_page",e.IM_VOICE_PLAYER="voice_player",e.IM_AUDIO_PLAYER="audio_player",e.OPEN_GROUP="open_group",e.OPEN_USER="open_user",e.OPEN_PHOTO="open_photo",e.OPEN_AUDIO="open_audio",e.LONGTAP_DRILLDOWN="longtap_drilldown",e.EXPAND="expand",e.CLICK_NEXT="click_next",e.CLICK_PREVIOUS="click_previous",e.CLICK_PRETTY_CARD="click_pretty_card",e.REPORT="report",e.RADIO="radio",e.SEARCH_PEOPLE_FRIENDS="search_people_friends",e.SEARCH_PEOPLE_EXCEPT_FRIENDS="search_people_except_friends",e.CLICK_ONLINE_BOOKING="click_online_booking",e.AUDIO_SNIPPETS_SNIPPET_FEED_OPEN="snippet_feed_open",e.AUDIO_SNIPPETS_SNIPPET_FEED_EXIT="snippet_feed_exit",e.AUDIO_SNIPPETS_SNIPPET_FEED_DRILLDOWN="snippet_feed_drilldown",e.AUDIO_SNIPPETS_PAUSE="pause",e.AUDIO_SNIPPETS_STOP="stop",e.AUDIO_SNIPPETS_START="start",e.AUDIO_SNIPPETS_ADDED="added",e.AUDIO_SNIPPETS_REMOVED="removed",e.AUDIO_SNIPPETS_NEXT_SNIPPET="next_snippet",e.AUDIO_SNIPPETS_PREV_SNIPPET="prev_snippet",e.AUDIO_SNIPPETS_SNIPPET_FEED_PLAYLIST_UP="snippet_feed_playlist_up",e.AUDIO_SNIPPETS_SNIPPET_FEED_PLAYLIST_DOWN="snippet_feed_playlist_down",e.AUDIO_SNIPPETS_SNIPPET_PLAYLIST_END="snippet_playlist_end",e.AUDIO_SNIPPETS_SNIPPET_FEED_END="snippet_feed_end",e.AUDIO_DISLIKES_ADD_DISLIKE="add_dislike",e.AUDIO_DISLIKES_REMOVE_DISLIKE="remove_dislike",e.INT_LINK_CLICK="int_link_click",e.INT_LINK_CLICK_SNIPPET="int_link_click_snippet",e.EXT_LINK_CLICK="ext_link_click",e.EXT_LINK_CLICK_SNIPPET="ext_link_click_snippet",e.CAPTION_LINK_CLICK="caption_link_click",e.VIDEO="video",e.VIDEO_PLAYLIST="video_playlist",e.VIDEO_ALL_SUBSCRIPTIONS_BUTTON="video_all_subscriptions_button"}(E||(E={})),function(e){e.SWITCH_ITEM_VARIANT_1="switch_item_variant_1",e.SWITCH_ITEM_VARIANT_2="switch_item_variant_2",e.OPEN_WIKI="open_wiki",e.AUDIO_LONGTAP_CLICK_OUTSIDE="click_outside",e.AUDIO_LONGTAP_CLICK_EXIT="click_exit",e.AUDIO_LONGTAP_AUTO_FINISH="auto_finish",e.AUDIO_LONGTAP="longtap",e.AUDIO_ADD_AFTER_LONGTAP="add_longtap",e.AUDIO_LONGTAP_HINT="hint_longtap",e.AUDIO_LONGTAP_OPEN="open_longtap",e.AUDIO_LONGTAP_GO_TO_TRACK="goto_track",e.AUDIO_LONGTAP_GO_TO_ARTIST="goto_artist",e.AUDIO_SNIPPETS_SWIPE="swipe",e.AUDIO_SNIPPETS_OVERLAY="overlay",e.AUDIO_SNIPPETS_GOTO_TRACK="goto_track",e.AUDIO_SNIPPETS_GOTO_PLAYLIST="goto_playlist",e.AUDIO_SNIPPETS_GOTO_ARTIST="goto_artist",e.AUDIO_SNIPPETS_PLAY_BTN="play_btn",e.AUDIO_SNIPPETS_SESSION_TERMINATED="session_terminated",e.AUDIO_SNIPPETS_CLOSE="close",e.AUDIO_SNIPPETS_ERROR="error",e.AUDIO_SNIPPETS_NEXT="next",e.AUDIO_SNIPPETS_PREV="prev",e.AUDIO_SNIPPETS_AUTOPLAY="autoplay",e.AUDIO_SNIPPETS_CHANGE_SOURCE="change_source",e.AUDIO_SNIPPETS_ADD_TRACK="add_track",e.AUDIO_SNIPPETS_NEXT_BTN="next_btn",e.AUDIO_SNIPPETS_PREV_BTN="prev_btn",e.AUDIO_SNIPPETS_ADD_SNIPPET="add_snippet",e.AUDIO_SNIPPETS_REMOVE_SNIPPET="remove_snippet",e.AUDIO_SNIPPETS_TAP="tap",e.AUDIO_DISLIKES_ADDED_TO_MM="added_to_mm"}(f||(f={})),function(e){e.SCREEN_PROCEED="screen_proceed",e.SCREEN_SKIP="screen_skip",e.SCREEN_RETURN="screen_return",e.COMMON_SERVER_ERROR="common_server_error",e.RESEND_SMS_CODE="resend_sms_code",e.RESEND_SMS_CODE_FAILED="resend_sms_code_failed",e.INCORRECT_SMS_CODE="incorrect_sms_code",e.INCORRECT_PASSWORD="incorrect_password",e.INCORRECT_NAME="incorrect_name",e.INCORRECT_CAPTCHA="incorrect_captcha",e.INCORRECT_PHONE_NUMBER="incorrect_phone_number",e.INCORRECT_BDAY="incorrect_bday",e.INCORRECT_SEX="incorrect_sex",e.INCORRECT_EMAIL="incorrect_email",e.EXISTING_EMAIL="existing_email",e.INCORRECT_EDUCATION="incorrect_education",e.SUCCESS_2FA="success_2fa",e.LOGIN_TAP="login_tap",e.PASSWORD_TAP="passw_tap",e.START_REG_TAP="start_reg_tap",e.FIRST_COUNTRY="first_country",e.FIRST_EDUCATION="first_education",e.FIRST_EMAIL="first_email",e.FIRST_FRIEND_ASK="first_friend_ask",e.SELECT_COUNTRY="select_country",e.SELECT_COUNTRY_DONE="select_country_done",e.INPUT_NUMBER_INTERACTION="input_number_interaction",e.INPUT_CODE_INTERACTION="input_code_interaction",e.PROCEED_OTHER_COUNTRY_CODE="proceed_other_country_code",e.INPUT_PHONE="input_phone",e.INPUT_EMAIL="input_email",e.AUTH_SAVED_START="auth_saved_start",e.ADD_ACCOUNT_TO_SAVED_START="add_account_to_saved_start",e.DROP_ACCOUNT_FROM_SAVED="drop_account_from_saved",e.POPUP_OPEN="popup_open",e.MULTIACC_ADD_ANOTHER_ACCOUNT_TAP="multiacc_add_another_account_tap",e.MULTIACC_DROP_ACCOUNT_TAP="multiacc_drop_account_tap",e.MULTIACC_DROP_ACCOUNT="multiacc_drop_account",e.CONTINUE_TAP="continue_tap",e.SWITCH_ACCOUNT_TAP="switch_account_tap",e.SWITCH_FROM_ACCOUNT="switch_from_account",e.SWITCH_TO_ACCOUNT="switch_to_account",e.REFUSE_ONBOARDING_PASSKEY="refuse_onboarding_passkey",e.CREATE_BUSINESS_START="create_business_start"}(g||(g={})),function(e){e.ACCOUNTS_COUNT="accounts_cnt",e.PHONE_COUNTRY="phone_country",e.PHONE_NUMBER="phone_number",e.COUNTRY="country",e.CITY="city",e.EMAIL="email",e.UNIVERSITY="university",e.FACULTY="faculty",e.SCHOOL="school",e.CHAIR="chair",e.YEAR_FROM="year_from",e.YEAR_TO="year_to",e.CLASS="class",e.EDU_FORM="edu_form",e.EDU_STATUS="edu_status",e.GRADUATION="graduation",e.SPECIALIZATION="specialization",e.RULES_ACCEPT="rules_accept",e.SMS_CODE="sms_code",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.SEX="sex",e.BDAY="bday",e.PASSWORD="password",e.FACEBOOK_REGISTRATION="facebook_registration",e.FRIEND_ASK="friend_ask",e.VERIFICATION_TYPE="verification_type",e.SELECT_COUNTRY_NAME="select_country_name",e.SAVED_SOURCE="saved_source",e.AVAILABLE_AUTH_WITH_QR="available_auth_with_qr",e.TO_SWITCHER_FROM="to_switcher_from",e.SAVED_AUTHORIZATION_ON="save_authorization_on",e.ONBOARDING_TYPE="onboarding_type",e.DEEPLINK="deeplink"}(y||(y={})),function(e){e.SAVED_SOURCE_CAROUSEL="carousel",e.LONG="long",e.ONBOARDING="onboarding"}(v||(v={})),function(e){e.SCREEN_PROCEED="screen_proceed",e.SCREEN_SKIP="screen_skip",e.SCREEN_RETURN="screen_return",e.SCREEN_BLUR="screen_blur",e.CAPTCHA="captcha",e.INCORRECT_CAPTCHA="incorrect_captcha",e.CAPTCHA_SUCCESS="captcha_success",e.CAPTCHA_REFRESH="captcha_refresh"}(w||(w={})),function(e){e.CAPTCHA="captcha"}(A||(A={})),function(e){e[e.CAPTCHA_SUCCESS=1]="CAPTCHA_SUCCESS",e[e.CAPTCHA_FAIL=0]="CAPTCHA_FAIL"}(b||(b={})),function(e){e[e.NOT_SUPPORTED=0]="NOT_SUPPORTED",e[e.NONE=1]="NONE",e[e.ACTIVE=2]="ACTIVE"}(T||(T={})),function(e){e[e.NOT_SUPPORTED=0]="NOT_SUPPORTED",e[e.NONE=1]="NONE",e[e.MORE=2]="MORE",e[e.LESS=3]="LESS",e[e.CUSTOM=4]="CUSTOM"}(I||(I={})),function(e){e[e.NOT_SUPPORTED=0]="NOT_SUPPORTED",e[e.DARK=1]="DARK",e[e.LIGHT=2]="LIGHT"}(P||(P={})),function(e){e[e.NOT_SUPPORTED=0]="NOT_SUPPORTED",e[e.PORTRAIT=1]="PORTRAIT",e[e.LANDSCAPE=2]="LANDSCAPE"}(C||(C={})),function(e){e.UNAUTH_BOTTOM_BANNER="unauth_bottom_banner",e.UNAUTH_ACTION_BOX="unauth_action_box"}(S||(S={})),function(e){e.OPEN="open",e.CLOSE="close",e.CLICK_SIGN_UP="click_sign_up",e.CLICK_SIGN_IN="click_sign_in",e.CLICK_OPEN_IN_APP="click_open_in_app"}(O||(O={})),function(e){e.LIKE="like",e.SHARE="share",e.MORE="more",e.FAVE="fave",e.COMMENT="comment"}(M||(M={})),function(e){e.play="play",e.view="view",e.action="action",e.nav="nav"}(D||(D={})),function(e){e.INIT="games_js_sdk_init"}(L||(L={})),function(e){e.OPEN_COMMUNITY_APPS_CATALOG="open_community_apps_catalog",e.EXPAND_COMMUNITY_APPS_TAB="expand_community_apps_tab",e.COMMUNITY_APPS_ALL="community_apps_all",e.COMMUNITY_APPS_BUSINESS="community_apps_business",e.COMMUNITY_APPS_EVENT="community_apps_event",e.COMMUNITY_APPS_ENTERTAINMENT="community_apps_entertainment",e.OPEN_COMMUNITY_APPS_TAB="open_community_apps_tab"}(k||(k={})),function(e){e.COMMUNITY_APPS_SETTINGS_LIST="community_apps_settings_list",e.MINI_APPS_CATALOG_COMMUNITY_APPS_SECTION="mini_apps_catalog_community_apps_section"}(R||(R={})),function(e){e.UNVERIFIED_SCREEN="unverified_screen",e.UNVERIFIED_SCREEN_LAUNCH="unverified_screen_launch",e.UNVERIFIED_SCREEN_QUIT="unverified_screen_quit"}(N||(N={})),function(e){e.START="session_start",e.SESSION_END="session",e.SESSION_PART="session_part"}(B||(B={})),function(e){e[e.BANNER_NOT_UPDATED=0]="BANNER_NOT_UPDATED",e[e.BANNER_UPDATED=1]="BANNER_UPDATED",e[e.BANNER_NOT_CHANGED=2]="BANNER_NOT_CHANGED"}(x||(x={})),function(e){e.SHOW="show_survey",e.PRELOAD="preload_survey",e.DISPLAY="display_survey"}(U||(U={})),function(e){e.COMMUNITY_APPS_LIST_CLICK_ADD="community_apps_list_click_add",e.APPS_SETTINGS_LIST_CLICK_ADD="apps_settings_list_click_add",e.OPEN_INSTALLED_APP_POPUP="open_installed_app_popup",e.OPEN_INSTALLED_APP_SETTINGS="open_installed_app_settings",e.OPEN_INSTALLED_APP_FIRST_SETTINGS="open_installed_app_first_settings",e.CLICK_ADD_APP="CLICK_ADD_APP",e.SAVE_APP_SETTING_CHANGES="SAVE_APP_SETTING_CHANGES",e.INSTALL_APP_WIDGET="INSTALL_APP_WIDGET"}(F||(F={})),function(e){e.COMMUNITY_APPS_SETTINGS_LIST="community_apps_settings_list",e.COMMUNITY_APPS_SETTINGS_CARD="community_apps_settings_card ",e.COMMUNITY_APPS_CATALOG_LIST="community_apps_catalog_list",e.COMMUNITY_APPS_CATALOG_CARD="community_apps_catalog_card",e.MINI_APPS_CATALOG_COMMUNITY_APPS_SECTION="mini_apps_catalog_community_apps_section"}(W||(W={})),function(e){e.ACTION_MENU_SHARE="action_menu_share",e.ACTION_MENU_ADD_TO_FAVOURITES="action_menu_add_to_favourites",e.ACTION_MENU_REMOVE_FROM_FAVOURITES="action_menu_remove_from_favourites",e.ACTION_MENU_ENABLE_NOTIFICATIONS="action_menu_enable_notifications",e.ACTION_MENU_DISABLE_NOTIFICATIONS="action_menu_disable_notifications",e.ACTION_MENU_ALL_APPS="action_menu_all_apps",e.ACTION_MENU_ALL_GAMES="action_menu_all_games",e.ACTION_MENU_COPY="action_menu_copy",e.ACTION_MENU_DELETE="action_menu_delete",e.ACTION_MENU_RECOMMEND="action_menu_recommend",e.ACTION_MENU_UNRECOMMEND="action_menu_unrecommend",e.ACTION_MENU_ENABLE_BADGES="action_menu_enable_badges",e.ACTION_MENU_DISABLE_BADGES="action_menu_disable_badges",e.ACTION_MENU_ADD_TO_BOOKMARKS="action_menu_add_to_bookmarks",e.ACTION_MENU_REMOVE_FROM_BOOKMARKS="action_menu_remove_from_bookmarks"}(K||(K={})),function(e){e.CLICK_GAME_CARD="cloud_games_game_click",e.CLICK_DOWNLOAD_GAME="cloud_games_client_download",e.OPEN_SECTION="cloud_games_section_open"}(V||(V={})),function(e){e.SECTION_OPEN="downloaded_games_section_open",e.SECTION_LOADED="downloaded_games_section_loaded",e.SECTION_ERROR="downloaded_games_section_error",e.DOWNLOAD_GAME="downloaded_games_download",e.LAUNCH_GAME="downloaded_games_launch",e.SHOW_GAME="downloaded_games_show_game",e.NEED_MORE="downloaded_games_need_more"}(H||(H={})),function(e){e.SHOW="notifications_request_sent",e.CLOSE="notifications_request_close",e.SWIPE="notifications_request_swipe",e.TIMEOUT_CLOSE="notifications_request_timeout",e.SETTING_OPEN="notifications_request_settings_open"}(j||(j={})),function(e){e.RECOMMENDATION_MODAL_RECOMMEND="recommendation_modal_recommend",e.RECOMMENDATION_MODAL_CANCEL="recommendation_modal_cancel"}(G||(G={})),function(e){e.EGG_SHOW="egg_show",e.POPUP_SHOW="popup_show",e.POPUP_ACTION="popup_action"}(q||(q={})),function(e){e.CLICK_ENTER_LK="click_enter_lk",e.CLICK_VK_PAY="click_vk_pay",e.CLICK_VK_COMBO="click_vk_combo",e.POPUP_OPEN="popup_open",e.POPUP_CLOSE="popup_close",e.SERVICE_NAVIGATION_CLICK="service_navigation_click",e.SERVICE_NAVIGATION_OPEN="service_navigation_open",e.SERVICE_NAVIGATION_CLOSE="service_navigation_close",e.CANCEL_ON_EXIT="cancel_on_exit",e.SAVE_LOGIN_MODAL_SHOW="save_login_modal_show",e.START_PHONE_CUA="start_phone_cua",e.CLICK_SETTINGS="click_settings",e.CLICK_THEME="click_theme",e.CLICK_SUPPORT="click_support",e.UNBLOCK_PROTECT_ACCOUNT_SHOW="unblock_protect_account_show",e.UNBLOCK_PROTECT_ACCOUNT_CONNECT="unblock_protect_account_connect",e.UNBLOCK_PROTECT_ACCOUNT_CANCELLATION="unblock_protect_account_cancellation"}($||($={})),function(e){e.flow_service="unblock_protect_account_modal",e.screen="unblock_protect_account"}(Y||(Y={})),function(e){e.OPEN="open",e.CLOSE="close",e.TAP="tap",e.LOGOUT="logout",e.ADD_ANOTHER_ACCOUNT_TAP="multiacc_add_another_account_tap",e.SWITCH_ACCOUNT_TAP="switch_account_tap",e.DROP_ACCOUNT_TAP="multiacc_drop_account_tap",e.SECURITY_RECCOMENDATION_SHOW="security_recommendation_show",e.ERROR_API="error_api",e.ERROR_SWITCHER="error_switcher",e.THEME_CHANGED="theme_changed"}(z||(z={})),function(e){e.EMAIL="email",e.CLOUD="cloud",e.AVATAR="avatar",e.VKID_LK="vkid_lk",e.SUBSCRIPTIONS="subscriptions",e.BALANCE="balance",e.SETTINGS="settings",e.THEME="theme",e.HELP="help",e.SWITCHER="switcher",e.LOGOUT="logout"}(X||(X={})),function(e){e.ECOSYSTEM="ecosystem",e.VK="vk",e.MULTIACCOUNT="multiaccount"}(Q||(Q={})),function(e){e.CLICK="promo_banner_click"}(J||(J={})),function(e){e.LAUNCH_THIRD_PARTY_APP="launch_third_party_app"}(Z||(Z={})),function(e){e.OPTIONS_OPEN="options_open",e.OPTIONS_TAP="options_tap",e.PROFILE_OPEN="profile_open",e.SEARCH_OPEN="search_open",e.MAIN_MENU_TAP="main_menu_tap",e.DOCK_TAP="dock_block_tap",e.MORE_TAP="more_tap",e.SHOW_ALL="show_all",e.OPEN_TAB="open_tab",e.LEAVE_TAB="leave_tab",e.WIDGET_TAP="widget_tap",e.MINI_WIDGET_TAP="mini_widget_tap",e.ONBOARDING_CLOSE="onboarding_panel_close"}(ee||(ee={})),function(e){e.NAVBAR="navbar",e.WIDGET="widget",e.MENU="menu",e.DOCK="dock",e.MINI_WIDGET="mini_widget"}(te||(te={})),function(e){e.ADS_EASY_PROMOTE="ads_easy_promote",e.DATING="dating",e.HEALTH="health",e.MASKS="masks",e.VK_DATING="vk_dating",e.VK_PAY="vk_pay",e.VKCOM_EMAIL="vkcom_email",e.FRIENDS="friends",e.GROUPS="groups",e.MUSIC="music",e.CLASSIFIEDS="classifieds",e.GAMES="games",e.STICKERS="stickers",e.VIDEOS="videos",e.ZNAKOMSTVA="znakomstva",e.MORE="more"}(oe||(oe={})),function(e){e.MINIAPPS="miniapps",e.GAMES="games",e.BIRTHDAY="birthday"}(ne||(ne={})),function(e){e.COUNTER="counter",e.DOT="dot",e.PROMO="promo",e.IS_NEW="is_new",e.IS_FAVOURITE="is_favourite"}(ie||(ie={})),function(e){e.START="start",e.PLAY="play",e.PAUSE="pause",e.WRITE_MSG="write_msg",e.WRITE_MSG_OUT="write_msg_out",e.ADD_FRIENDS="add_friends",e.OPEN_APP="open_app",e.TAP="tap",e.REMOVE_FRIEND="remove_friend",e.REMOVE_FRIEND_OUT="remove_friend_out",e.ADD_FRIEND="add_friend",e.ADD_FRIEND_OUT="add_friend_out",e.JOIN_GROUP="join_group",e.JOIN_GROUP_OUT="join_group_out",e.LEAVE_GROUP="leave_group",e.LEAVE_GROUP_OUT="leave_group_out",e.SEND_MESSAGE="send_message",e.SEND_MESSAGE_OUT="send_message_out",e.FAVE="fave",e.FAVE_OUT="fave_out",e.UNFAVE="unfave",e.UNFAVE_OUT="unfave_out",e.MONEY="money",e.MONEY_OUT="money_out",e.CALL="call",e.CALL_OUT="call_out",e.SEND_GIFT="send_gift",e.SEND_GIFT_OUT="send_gift_out",e.SHOW_STORIES="show_stories",e.SHOW_STORIES_OUT="show_stories_out",e.SUBSCRIBE="subscribe",e.SUBSCRIBE_OUT="subscribe_out",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_OUT="unsubscribe_out",e.PLAY_ALL="play_all",e.PLAY_ALL_OUT="play_all_out",e.OPEN_OWNER="open_owner",e.OPEN_OWNER_OUT="open_owner_out",e.COPY_LINK="copy_link",e.COPY_LINK_OUT="copy_link_out",e.SHARE="share",e.SHARE_OUT="share_out",e.LIKE="like",e.LIKE_OUT="like_out",e.UNLIKE="unlike",e.UNLIKE_OUT="unlike_out",e.DOWNLOAD="download",e.DOWNLOAD_OUT="download_out",e.ADD_TO_ME="add_to_me",e.ADD_TO_ME_OUT="add_to_me_out",e.REMOVE_FROM_ME="remove_from_me",e.REMOVE_FROM_ME_OUT="remove_from_me_out",e.REMOVE_RECENT="remove_recent",e.OPEN_FILTERS="open_filters",e.NOTIFY="notify",e.UNNOTIFY="unnotify",e.NOTIFY_OUT="notify_out",e.UNNOTIFY_OUT="unnotify_out",e.DISLIKE="dislike",e.REMOVE_DISLIKE="remove_dislike",e.DISLIKE_OUT="dislike_out",e.MAKE_DUET_OUT="make_duet_out",e.MAKE_CLIP_OUT="make_clip_out",e.TAP_SHOW_ALL="tap_show_all",e.NOTIFY_ABOUT_POST_OUT="notify_about_post_out",e.UNNOTIFY_ABOUT_POST_OUT="unnotify_about_post_out",e.UNNOTIFY_ABOUT_LIVE_OUT="unnotify_about_live_out",e.NOTIFY_ABOUT_LIVE_OUT="notify_about_live_out",e.ASK_QUESTION_OUT="ask_question_out",e.VIEW_WISH_LIST_OUT="view_wish_list_out",e.ADD_TO_CLOSE_FRIENDS_OUT="add_to_close_friends_out",e.REMOVE_FROM_CLOSE_FRIENDS_OUT="remove_from_close_friends_out",e.COMPLAIN_OUT="complain_out",e.ADD_TO_BLACK_LIST_OUT="add_to_black_list_out",e.REMOVE_FROM_BLACK_LIST_OUT="remove_from_black_list_out",e.OPEN_FRIENDS_LIST="open_friends_list",e.OPEN_FRIENDS_LIST_OUT="open_friends_list_out",e.POST_ON_WALL_OUT="post_on_wall_out",e.POST_PHOTO_ON_WALL_OUT="post_photo_on_wall_out",e.OPEN_FRIEND_POSSIBLE_OUT="open_friend_possible_out",e.ADD_FRIEND_POSSIBLE_OUT="add_friend_possible_out",e.HIDE_FRIENDS_POSSIBLE_OUT="hide_friends_possible_out",e.OPEN_MARKET="open_market",e.ADD_TO_CART="add_to_cart",e.OPEN_CART="open_cart",e.ADD_TO_CART_OUT="add_to_cart_out",e.ADD_ONE_MORE_OUT="add_one_more_out",e.OPEN_CART_OUT="open_cart_out",e.OPEN_MARKET_OUT="open_market_out",e.OPEN_LINK_OUT="open_link_out",e.BUY_OUT="buy_out",e.OPEN_ATTACHED_MUSIC_OUT="open_attached_music_out",e.OPEN_COMMENTS_OUT="open_comments_out",e.OPEN_HASHTAG_OUT="open_hashtag_out",e.OPEN_THEMATIC_OUT="open_thematic_out",e.SHOW_SAME="show_same",e.LISTEN_NEXT="listen_next",e.SHOW_SNIPPET="show_snippet",e.OPEN_ALBUM="open_album",e.ADD_TO_PLAYLIST="add_to_playlist",e.GO_TO_TAB="go_to_tab",e.OPEN_LINK="open_link",e.OPEN_FAVE_OUT="open_fave_out",e.MIX_ALL_OUT="mix_all_out",e.LISTEN_NEXT_OUT="listen_next_out"}(re||(re={})),function(e){e.OPEN_ITEM="open_item",e.OPEN_SECTION="open_section",e.OPEN_SEARCH="open_search"}(se||(se={})),function(e){e.OPEN_SNACK_BAR_PROMO="open_snack_bar_promo",e.VIEW_PROMO_MODAL="view_promo_modal",e.HIDE_PROMO_MODAL="hide_promo_modal",e.OPEN_TAB_MODAL_PURCHASE="open_tab_modal_purchase",e.OPEN_TAB_APP_SETTINGS_PURCHASE="open_app_settings_purchase",e.OPEN_TAB_MENU_PURCHASE="open_tab_menu_purchase",e.OPEN_TAB_PROFILE_PURCHASE="open_tab_profile_purchase",e.SHOW_TOOLTIP_PROMO="show_tooltip_promo",e.SHOW_INSTRUCTION_PROMO="show_instruction_promo"}(ae||(ae={})),function(e){e.BONUS_VOTES="bonus_votes",e.FREE_VOTES="free_votes",e.PERCENT_DISCOUNT="percent_discount"}(_e||(_e={})),function(e){e.WALL_ITEM="wall_item",e.POST_MODAL="post_modal",e.ONLINE_BOOKING_CLICK="online_booking_click"}(ce||(ce={})),function(e){e.NONE="none",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error"}(le||(le={})),function(e){e.DECODE_VIDEO_METAINFO="decode_video_metainfo"}(ue||(ue={})),function(e){e.EVENT_TYPE_UPLOAD_NEW_VIDEO="upload_new_video",e.EVENT_TYPE_EDIT_VIDEO="edit_video",e.EVENT_TYPE_OPEN_VIDEO_EDITOR="open_video_editor",e.EVENT_TYPE_CUT_VIDEO="cut_video",e.EVENT_TYPE_SAVE_EDITED_VIDEO="save_edited_video",e.EVENT_TYPE_SAVE_EDITED_VIDEO_AS_NEW="save_edited_video_as_new"}(de||(de={})),function(e){e.PLAY_ALL_PLAYLIST_BUTTON="play_all_playlist_button",e.PLAY_ALL_PLAYLIST_COVER="play_all_playlist_cover"}(pe||(pe={})),function(e){e.CLICK_TO_EXPAND_DESCRIPTION="click_to_expand_description",e.CLICK_TO_DESCRIPTION="click_to_description"}(he||(he={})),function(e){e.DOWNLOAD_STARTED="download_started",e.DOWNLOAD_FINISHED="download_finished",e.DOWNLOAD_CANCELLED="download_cancelled"}(me||(me={})),function(e){e.HASHTAG="hashtag",e.MENTION="mention",e.LINK="link"}(Ee||(Ee={})),function(e){e.TOOLTIP_SHOW="tooltip_show",e.TOOLTIP_COULD_BE_SHOWN="tooltip_could_be_shown",e.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION="tooltip_hide_by_interface_interaction",e.TOOLTIP_HIDE_BY_CROSS="tooltip_hide_by_cross",e.TOOLTIP_HIDE_BY_CLICK="tooltip_hide_by_click"}(fe||(fe={})),function(e){e.CLICK_TO_ACTION_BUTTON="click_to_action_button"}(ge||(ge={}))},193270:(e,t,o)=>{"use strict";o.d(t,{getCurrentScreen:()=>u,getLeftMenuScreen:()=>c,getScreen:()=>p,getScreenPrev:()=>m,setCurrentScreen:()=>l,setLeftMenuScreen:()=>_,setScreen:()=>d,setScreenPrev:()=>h});var n=o(623702);const i="STATS_NAVIGATION_SCREEN_CURRENT",r="STATS_NAVIGATION_SCREEN",s="STATS_NAVIGATION_SCREEN_PREV",a="STATS_NAVIGATION_SCREEN_LEFT_MENU",_=e=>n.vkSessionStorage.setItem(a,e),c=()=>n.vkSessionStorage.getItem(a),l=e=>n.vkSessionStorage.setItem(i,e),u=()=>n.vkSessionStorage.getItem(i),d=e=>n.vkSessionStorage.setItem(r,e),p=()=>n.vkSessionStorage.getItem(r),h=e=>n.vkSessionStorage.setItem(s,e),m=()=>n.vkSessionStorage.getItem(s)},133154:(e,t,o)=>{"use strict";o.d(t,{ViewStatCollector:()=>i});var n=o(695290);class i{logEvent(e,t,o){const i={...this.productionStatCollector.getBaseEvent(o),type:n.ProductionStatEventTypes.TYPE_VIEW,[n.ProductionStatEventTypes.TYPE_VIEW]:{item:t,...e}};this.productionStatCollector.logEvent(i)}constructor(e){this.productionStatCollector=e}}},629605:(e,t,o)=>{"use strict";o.d(t,{MiniAppsEventStatsCollector:()=>r});var n=o(695290),i=o(581903);class r{logEvent(e,t,o="",i=""){const r={...e,...t},s={type:n.ViewProductionStatEventTypes.TYPE_MINI_APPS_VIEW_ITEM,[n.ViewProductionStatEventTypes.TYPE_MINI_APPS_VIEW_ITEM]:r,start_view:o,end_view:i};this.viewStatCollector.logEvent(s,e)}logLaunchExtendedEvent(e,t){const o={};o[n.EventItemType.MINI_APPS_LAUNCH_EXTENDED]={webview_url:t,mini_app_id:e},i.miniAppsItemStats.logEvent({type:n.EventItemType.MINI_APPS_LAUNCH_EXTENDED},o)}constructor(){this.productStatCollector=new i.ProductionStatCollector,this.viewStatCollector=new i.ViewStatCollector(this.productStatCollector)}}},556337:(e,t,o)=>{"use strict";o.d(t,{SearchViewStatCollector:()=>i});var n=o(581903);class i{constructor(){this.logEvent=e=>{this.viewStatCollector.logEvent({},e)},this.productStatCollector=new n.ProductionStatCollector,this.viewStatCollector=new n.ViewStatCollector(this.productStatCollector)}}},981550:(e,t,o)=>{"use strict";o.d(t,{VideoViewStatCollector:()=>i});var n=o(581903);class i{constructor(){this.logEvent=(e,t)=>{this.viewStatCollector.logEvent({position:t},e)},this.productStatCollector=new n.ProductionStatCollector,this.viewStatCollector=new n.ViewStatCollector(this.productStatCollector)}}},205504:(e,t,o)=>{"use strict";o.d(t,{getImageMinWidth:()=>n});const n=e=>Math.ceil(e*Math.max(window.devicePixelRatio,1))},527496:(e,t,o)=>{"use strict";o.d(t,{ASK_QUESTION_BOX_URL_PREFIX:()=>r,MY_QUESTIONS_BOX_URL_PARAMETER:()=>i,QUESTION_MAX_LENGTH:()=>n});const n=80,i="question",r="ask_question"},730735:(e,t,o)=>{"use strict";o.d(t,{banUser:()=>u,deleteFromAuthor:()=>_,deleteQuestion:()=>s,getQuestion:()=>i,getQuestions:()=>r,getUsers:()=>l,reportQuestion:()=>p,restoreAuthorQuestions:()=>c,restoreQuestion:()=>a,unbanUser:()=>d});var n=o(933052);function i(e){return(0,n.api)("questions.getById",{owner_id:window.vk.id,question_id:e,extended:1,fields:"photo_50,photo_100,first_name_gen,last_name_gen,domain"})}function r(e="",t=15){return(0,n.api)("questions.get",{owner_id:window.vk.id,start_from:e,limit:t,extended:1,fields:"photo_50,photo_100,first_name_gen,last_name_gen,domain"})}function s(e){return(0,n.api)("questions.delete",{owner_id:window.vk.id,question_id:e})}function a(e){return(0,n.api)("questions.restore",{owner_id:window.vk.id,question_id:e})}function _(e){return(0,n.api)("questions.deleteFromAuthor",{owner_id:window.vk.id,question_id:e})}function c(e){return(0,n.api)("questions.restoreFromAuthor",{owner_id:window.vk.id,question_id:e})}function l(e){return(0,n.api)("users.get",{user_ids:e.join(","),fields:"photo_50,photo_100,can_ask_anonymous,can_ask_question,first_name_nom,first_name_dat,first_name_gen,last_name_gen,sex"})}function u(e){return(0,n.api)("questions.authorBan",{owner_id:window.vk.id,question_id:e})}function d(e){return(0,n.api)("questions.authorUnBan",{owner_id:window.vk.id,question_id:e})}function p(e){return(0,n.api)("reports.add",{type:"profile_story_question",owner_id:window.vk.id,item_id:e})}},238540:(e,t,o)=>{"use strict";var n;o.d(t,{QuestionsBoxRef:()=>n}),function(e){e.SNIPPET="snippet",e.URL="url",e.STORY="story"}(n||(n={}))},388078:(e,t,o)=>{"use strict";o.d(t,{Ranges:()=>r.Ranges,rangesIsGroupIdPositive:()=>s});var n=o(568352),i=o(476726),r=o(847891);function s(e){e<0&&(0,i.partConfigEnabled)("ranges_group_id_negative_log")&&(0,n.logError)(new Error("Ranges: expecting positive groupId but negative given."));let t=-Math.abs(e)||0;return r.Ranges.isGroupId(t)}},44499:(e,t,o)=>{"use strict";o.d(t,{VKHistory:()=>r});var n=o(444329),i=o(773444);class r{push(e,t){this.config.push(this.createHref(e),this.getNextState({userState:t,index:this.index+1}))}replace(e,t){this.config.replace(this.createHref(e),this.getNextState({userState:t,index:this.index}))}go(e){window.history.go(e)}createHref(e){if("string"==typeof e)return e;const{pathname:t="/",search:o,hash:n}=e;let i=t;return o&&"?"!==o&&(i+=o.startsWith("?")?o:"?"+o),n&&"#"!==n&&(i+=n.startsWith("#")?n:"#"+n),i}listen(e){return this.config.listen((()=>{e({action:this.action,location:this.location})}))}getNextState({userState:e,index:t}){return{usr:e||null,idx:t,key:(0,n.nanoid)()}}getLocation(){return{pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,state:history.state?.usr||null,key:history.state?.key||"default"}}constructor(e){if(this.config=e,history.state&&void 0!==history.state?.idx&&history.state?.key)this.index=history.state?.idx;else{const e=history.state??null;this.index=0,history.replaceState({...e,...this.getNextState({userState:e,index:this.index})},"")}this.action=i.Action.Pop,this.location=this.getLocation(),this.config.listen((e=>{if(!history.state?.key||void 0===history.state?.idx){const e=history.state??null;history.replaceState({...e,...this.getNextState({userState:e,index:this.index+1})},"")}this.action=e.action,this.location=this.getLocation(),this.index=history.state?.idx}))}}},263665:(e,t,o)=>{"use strict";var n;o.d(t,{BasicStatisticsEvents:()=>n,DEFAULT_BLOCK_LS_KEY_NAME:()=>i,MAX_RETRY_COUNT:()=>r}),function(e){e.ViewBlock="view_block",e.ViewTime="view_time",e.HideBlock="hide_block",e.OpenUser="open_user"}(n||(n={}));const i="block_stat",r=3},391075:(e,t,o)=>{"use strict";o.d(t,{Stats:()=>c});var n=o(942451),i=o(933052),r=o(250682),s=o(171444),a=o(263665);const _=(0,n.makeSharedState)("block-stats",(()=>({blockStatsInstance:null})),{version:0});class c{static getInstance(){let e=_().blockStatsInstance;return e||(e=new c(a.DEFAULT_BLOCK_LS_KEY_NAME),_().blockStatsInstance=e),e}destroyInterval(){clearInterval(this._sendInterval),this.send()}resetInterval(e){(!e&&this.errorCount<this._MAXIMUM_ERROR_COUNT||this.errorCount)&&(this.errorCount=e?0:this.errorCount+1,clearInterval(this._sendInterval),this._sendInterval=setInterval(this.send,this._DELAY_SEND*(this.errorCount+1)))}destroyInstance(){_().blockStatsInstance=null}registerConsumer(e){this.consumerList.includes(e)||this.consumerList.push(e)}unRegisterConsumer(e){this.consumerList=this.consumerList.filter((t=>t!==e)),this.consumerList.length||this.destroyInterval()}pushLs(e,t){const o=r.multiAccountLs.get(t??this._lsKeyName)||[];o.push(e),r.multiAccountLs.set(t??this._lsKeyName,o)}log(e,t){this.pushLs(e,t)}setLs(e,t,o,n){const i=o??this._lsKeyName,s=r.multiAccountLs.get(i)||{};n&&(Object.keys(s).forEach((e=>{Date.now()-s[e]?.date>n&&delete s[e]})),window.setTimeout((()=>{const t=r.multiAccountLs.get(i)||{};delete t[e],Object.keys(t).length?r.multiAccountLs.set(i,t):r.multiAccountLs.remove(i)}),n)),s[e]=t,r.multiAccountLs.set(i,s)}async send(e,t){const o=t??(r.multiAccountLs.get(e??this._lsKeyName)||[]);if(o.length){r.multiAccountLs.remove(e??this._lsKeyName);try{await c.request(JSON.stringify(o)),this.resetInterval(!0)}catch{this.log(o,e??this._lsKeyName),this.resetInterval()}}}static request(e){return(0,i.api)("stats.trackEvents",{events:e})}constructor(e){this._lsKeyName=a.DEFAULT_BLOCK_LS_KEY_NAME,this._DELAY_SEND=15e3,this._MAXIMUM_ERROR_COUNT=15e3,this.errorCount=0,this.consumerList=[],this.send=this.send.bind(this),this.destroyInstance=this.destroyInstance.bind(this),e&&(this._lsKeyName=e),this._sendInterval=setInterval(this.send,this._DELAY_SEND*(this.errorCount+1)),(0,s.pushNavDestroy)((()=>{this.destroyInstance()}))}}},805088:(e,t,o)=>{"use strict";o.d(t,{isPopUpStickersEnabled:()=>s,isPopUpStickersEnabledInVkCom:()=>r});var n=o(705744),i=o(476726);const r=()=>(0,i.partConfigEnabled)("stickers.popup.vkcom"),s=()=>(0,n.isMvk)()?(0,i.partConfigEnabled)("stickers.popup.mvk"):r()},292188:(e,t,o)=>{"use strict";o.d(t,{DAY:()=>a,SECOND:()=>i,getShortPrintableTimeSpan:()=>u});var n=o(610989);const i=1e3,r=60*i,s=60*r,a=24*s,_=7*a,c=30*a,l=12*c;function u(e){return e>=l?(0,n.langNumeric)(Math.floor(e/l),n.getLang("global_short_years_fixed")):e>=c?(0,n.langNumeric)(Math.floor(e/c),n.getLang("global_short_months")):e>=_?(0,n.langNumeric)(Math.floor(e/_),n.getLang("global_short_weeks")):e>=a?(0,n.langNumeric)(Math.floor(e/a),n.getLang("global_short_days")):e>=s?(0,n.langNumeric)(Math.floor(e/s),n.getLang("global_short_hours")):e>=r?(0,n.langNumeric)(Math.floor(e/r),n.getLang("global_short_minutes")):e>=i?(0,n.langNumeric)(Math.floor(e/i),n.getLang("global_short_seconds")):""}},857125:(e,t,o)=>{"use strict";o.d(t,{TooltipsStat:()=>r});var n=o(695290);const i=new(o(390317).TooltipStatCollector);class r{handleShow(){this.showTime=new Date,this.skipShow?i.logEvent(n.ETooltipEventTypes.TOOLTIP_COULD_BE_SHOWN,this.tooltipId,0):i.logEvent(n.ETooltipEventTypes.TOOLTIP_SHOW,this.tooltipId,0)}handleHide(e=n.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){let t=0;this.showTime&&(t=(new Date).getTime()-this.showTime.getTime()),i.logEvent(e,this.tooltipId,t)}static registryShow(e,t=!1){r.tootips[e]=new r(e,t),r.tootips[e].handleShow()}static registryHide(e,t=n.ETooltipEventTypes.TOOLTIP_HIDE_BY_INTERFACE_INTERACTION){(r.tootips[e]||new r(e,!1)).handleHide(t)}constructor(e,t){this.tooltipId=e,this.skipShow=t}}r.tootips={}},33362:(e,t,o)=>{"use strict";o.d(t,{UnauthorizedSourceType:()=>n});const n={COMMON:"common",PHOTO:"photo",VIDEO:"video",AUDIO:"audio",COMMENTS:"comments",MESSAGE:"message",ADD_TO_FRIENDS:"add_to_friends",UPLOAD_VIDEO:"upload_video",SUBSCRIBE_VIDEO_AUTHOR:"subscribe_video_author",SUBSCRIBE_VIDEO_PLAYLIST:"subscribe_video_playlist",ADD_PRODUCT_TO_BOOKMARKS:"add_product_to_bookmarks"}},380042:(e,t,o)=>{"use strict";o.d(t,{articleURLPattern:()=>n,isArticleURL:()=>i});const n=/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/,i=e=>{const t=e.startsWith("/")?e.substring(1):e;return n.test(t)}},214716:(e,t,o)=>{"use strict";o.d(t,{checkOwnerIsNFT:()=>n});const n=e=>{if(e){if("is_nft"in e)return Boolean(e.is_nft);if("is_nft_photo"in e)return Boolean(e.is_nft_photo)}return!1}},953430:(e,t,o)=>{"use strict";o.d(t,{createSentryLogger:()=>s,isApiNetworkError:()=>r});var n=o(708742),i=o(568352);function r(e){return!(!e||"object"!=typeof e)&&e.type===n.APIErrorType.NETWORK_ERROR}const s=({debugPrefix:e="[Sentry Logger]",isConsoleEnabled:t=!1,environment:o,catchNetworkError:n})=>{function s(t,o){return`${e} `+(o?`${o}: ${t}`:t)}return function(a){const{error:_,additionalText:c,extra:l,environment:u}=a,d=u||o;if(t&&console.error(e,{error:_,additionalText:c||"Some error happened",extra:l,environment:d}),n&&r(_)&&n(a))return;const p=l?{environment:u,breadcrumb:{data:{extra:l}}}:{environment:d};if(_ instanceof Error){const e=new Error(s(_.message,c));return e.name=_.name,e.stack=_.stack,void(0,i.logError)(e,p)}if("string"!=typeof _)return _ instanceof Object?(p.breadcrumb?.data?p.breadcrumb.data.object=_:p.breadcrumb={...p.breadcrumb,data:{object:_}},void(0,i.logError)(new Error(s("Error as object",c)),p)):void(_||!c?(0,i.logError)(new Error(s("Unknown error")),p):(0,i.logError)(new Error(s(c)),p));(0,i.logError)(new Error(s(_,c)),p)}}},952881:(e,t,o)=>{"use strict";o.d(t,{getOwnerName:()=>n});const n=(e,t=!0,o)=>{let n="";return e&&("name"in e?n=e.name||"":!t&&"first_name"in e?n=o?e[`first_name_${o}`]||"":e.first_name||"":("first_name"in e||"last_name"in e)&&(n=o?`${e[`first_name_${o}`]} ${e[`last_name_${o}`]}`:`${e.first_name} ${e.last_name}`)),n}},417517:(e,t,o)=>{"use strict";o.d(t,{getOwnerUrl:()=>n});const n=(e,t="/")=>e?"domain"in e&&"id"in e?`/artist/${e.domain||e.id||""}`:"screen_name"in e&&e.screen_name?`${t}${e.screen_name}`:"first_name"in e?`${t}id${e.id}`:`${t}club${e.id}`:""},33281:(e,t,o)=>{"use strict";o.d(t,{getVideoCopyLink:()=>a,getVideoUrl:()=>s});var n=o(112268),i=o(705744),r=o(753677);const s=e=>{const{owner_id:t,id:o}=e;if(void 0===t)return"/video";if(void 0===o)return`/video/@id${t}`;return"/"+("short_video"===e.type?"clip":"video")+(0,n.joinRawId)({ownerId:t,itemId:o})+(e.access_key?`?list=${e.access_key}`:"")},a=(e,t)=>{const o=new URL(s(e),"https://"+(0,i.getHostName)());return t&&o.searchParams.set("t",(0,r.toString)(t)),e.access_key?.startsWith("ln-")?o.searchParams.set("list",e.access_key):o.searchParams.delete("list"),o.toString()}},841691:(e,t,o)=>{"use strict";function n(e){return Object.keys(e).some((e=>e.startsWith("_react")||e.startsWith("__react")))}o.d(t,{isReactHTMLElement:()=>n})},434487:(e,t,o)=>{"use strict";o.d(t,{onDomReady:()=>n,onDomReadyPromise:()=>i});const n=e=>{"loading"!==window.document.readyState?e():window.document.addEventListener("DOMContentLoaded",(()=>e()),{once:!0})},i=new Promise((e=>{n(e)}))},599568:(e,t,o)=>{"use strict";o.d(t,{replaceEmailLinks:()=>i});var n=o(495917);function i(e,t){return e.replace(n.EMAIL,t||function(e){return`<a href="mailto:${e}">${e}</a>`})}},399290:(e,t,o)=>{"use strict";o.d(t,{linksReplacer:()=>h,linksReplacerReact:()=>p,replaceHyperLinks:()=>u});var n=o(7144),i=o(705744),r=o(678340),s=o(889393),a=o(408063);function _(e){if(!e[0]||!e[6])return e;const t=e[0].length-1,o=e[6].length-1;return"."===e[0][t]&&"."===e[6][o]&&(e[0]=e[0].slice(0,t),e[6]=e[6].slice(0,o)),e}function c(e){return{full:e[0],protocol:e[1]||"http://",url:e[2],domain:e[4],query:e[6]||""}}function l(e){return e.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,t){const o=new RegExp(r.RE_URL_PATTERN,"ig"),n=s.TOP_DOMAINS.reduce(((e,t)=>Math.max(e,t.length)),0);let i,a=0,l=e;for(;null!==(i=o.exec(e));){i=_(i);const o=i[0].length,r=i.index+o,u=e[i.index-1],d=e[r-1];if("@"===e[r]&&(!i[0]||i[0]&&!i[0].toLowerCase().includes("http")))continue;const p=void 0!==u&&/([\w\$А-Яа-яёЁєЄҐґЇїІіЈј—\-\_@;.])/i.test(u),h=void 0!==d&&/([:;$])/i.test(d);if(!p&&!h){const e=c(i),_=e.domain.toLowerCase();if(_.length<=n&&s.TOP_DOMAINS.includes(_)){const n=t(e);l=l.slice(0,i.index+a)+n+l.slice(r+a),a+=n.length-o}}}return l}function d(e,t){try{e=decodeURIComponent(e)}catch(e){}return e.length>t&&(e=e.substr(0,t-2)+".."),e=l(e).replace(/\n/g," ")}function p(e){return(t,o,r=55)=>{const{url:_,protocol:c,query:u,full:p}=o,h=d(p,r),m=(0,n.replaceEntities)(_+u);if(s.OUR_DOMAINS.test(_)){const o=l(c+_+u),n=p.match(s.VK_DOMAIN);return e({key:t,href:o,mentionId:n?n[1]:"",text:h})}{const o=window.nav?.strLoc?.startsWith("video"),r=((0,i.isPWA)()||o?`https://${(0,i.getHostName)()}`:"")+(0,a.wrapAway)(c+m,!0),s=(0,n.clean)(c+_+u);return e({key:t,href:r,goAwayUrl:s,text:h})}}}function h(e,t=55){let{full:o}=e;const{url:r,protocol:a,query:_}=e;o=d(o,t);const c=(0,n.replaceEntities)(r+_);if(s.OUR_DOMAINS.test(r)){let e="";const t=o.match(s.VK_DOMAIN);if(t){const o=t[1];e=(0,i.isMvk)()?"":` mention_id="${o}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`}return`<a href="${l(a+r+_)}" target="_blank" rel="noopener"${e}>${o}</a>`}const u=window.nav?.strLoc?.startsWith("video"),p=`${(0,i.isPWA)()||u?`https://${(0,i.getHostName)()}/`:""}away.php?utf=1&to=${encodeURIComponent(a+c)}`,h=(0,n.clean)((a+r+_).replace(/'/g,"\\'"));return`<a href="${p}" target="_blank" rel="noopener" ${(0,i.isMvk)()?"":`onclick="return goAway('${h}', {}, event);"`}>${o}</a>`}},846210:(e,t,o)=>{"use strict";o.d(t,{mentionReplaceReact:()=>a,replaceMentions:()=>s});var n=o(487703),i=o(7144),r=o(705744);function s(e,t){return e.replace(n.MENTION,t||function(e,t,o,n,s){const a=(0,r.isMvk)()?"":` mention_id="${(0,i.clean)(t+o)}" onclick="return mentionClick(this, event)" onmouseover="mentionOver(this)"`;return`<a href="/${t+o}" class="mem_link" mention="${(0,i.clean)(n||"")}"${a}>${s}</a>`})}function a(e){return(t,o,n,i,r,s)=>e({key:t,mentionId:n+i,mention:r,href:`/${n+i}`,text:s})}},687604:(e,t,o)=>{"use strict";o.d(t,{TRACK_CODE_TYPES:()=>n,getTrackCode:()=>i,setTrackCode:()=>r});const n=["search_track_code","video_track_code","trackcode"],i=e=>history.state?.[e]||new URLSearchParams(window.location.search).get(e),r=(e,t)=>{t&&history.replaceState({...history.state,[e]:t},"")}},555603:(e,t,o)=>{"use strict";o.d(t,{MenuHelpHintTextTooltip:()=>s});var n=o(474848),i=o(296540),r=o(320830);const s=e=>{const[t,o]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{const e=setTimeout((()=>o(!0)));return()=>{clearTimeout(e)}}),[]),(0,n.jsx)(r.TextTooltip,{shown:t,...e})}},183964:(e,t,o)=>{"use strict";o.d(t,{MenuHelpHintTooltip:()=>a});var n=o(474848),i=o(296540),r=o(753457),s=o(741531);const a=e=>{const{helpHint:t,onClose:o,...a}=e,[_,c]=(0,i.useState)(!1),l=(0,i.useCallback)((()=>{(0,s.ensureAccountHelpHintsService)().hideHelpHint({hintId:t.id,isOptimistic:!0}),o?.()}),[o]);return(0,i.useLayoutEffect)((()=>{const e=setTimeout((()=>c(!0)));return()=>{clearTimeout(e)}}),[]),(0,n.jsx)(r.Tooltip,{isShown:_,header:t.title,text:t.description,onClose:l,...a})}},407816:(e,t,o)=>{"use strict";o.d(t,{MenuHelpHintTextTooltip:()=>i.MenuHelpHintTextTooltip,MenuHelpHintTooltip:()=>n.MenuHelpHintTooltip});var n=o(183964),i=o(555603)},197466:(e,t,o)=>{"use strict";o.d(t,{BASE_LOCATION:()=>r,MY_VIDEO_ALBUM_ID:()=>n,OWNER_VIDEOS_PAGE_BASE_PATH:()=>s,PLAYLIST_PAGE_BASE_PATH:()=>l,PLAYLIST_PAGE_REGEXP:()=>u,PLAYLIST_POPOVER_VERTICAL_OFFSET:()=>c,PLAYLIST_POPOVER_WIDTH:()=>_,SNACKBAR_TIMEOUT:()=>i,VIDEO_COMMUNITY_COMMENTS_PATH:()=>d,VIDEO_PAGE_PATHNAME_REGEXP:()=>p,WATCH_LATER_PATH:()=>a});const n=-2,i=4e3,r="/video",s="/video/@",a="/video/bookmarks",_=252,c=16,l="video/playlist/",u=/video\/playlist\/(-?\d+_-?\d+)/,d="comments",p=/^\/video(-?\d+_\d+)$/},961694:(e,t,o)=>{"use strict";o.d(t,{getAdditionalInfo:()=>_});var n=o(8520),i=o(422495),r=o(129473),s=o(610989),a=o(292188);const _=e=>{const{partner_text:t,date:o,type:_,release_date:c,genres:l,views:u=1}=e;if("music_video"===_&&l?.length&&c)return`${new Date(c*a.SECOND).getFullYear()} · ${l[0].name}`;if(t)return(0,n.decodeHTMLEntities)(t);const d=e=>(0,n.decodeHTMLEntities)((0,r.getFormattedViews)(e));return o?o>Date.now()/a.SECOND?s.getLang("video_postponed_publication"):(0,i.isLiveVideo)(e)?d(u):`${d(u)} · ${(0,n.decodeHTMLEntities)((0,i.getFormattedUpdatedTime)(o,!0))}`:d(u)}},21941:(e,t,o)=>{"use strict";o.d(t,{getFormattedPostponePublishDateTime:()=>_,getFormattedUpdatedTime:()=>s,getFormattedUpdatedTimeWithPrefix:()=>a});var n=o(7144),i=o(610989);const r=(e,[t,o],r)=>{return r?(0,i.langNumeric)((0,n.intval)(e),o):(s=(0,n.intval)(e),a=t,_=o,(0,n.isArray)(a)&&s<a.length?a[s]:(0,i.langNumeric)(s,_));var s,a,_},s=(e,t)=>{const o=Date.now()/1e3-e;if(o<5)return((e,t)=>t?(0,i.langNumeric)((0,n.intval)(e),i.getLang("video_added_less_than_a_minute_ago")):i.getLang("video_added_now","raw")[0])(o,t);if(o<60)return((e,t)=>t?(0,i.langNumeric)((0,n.intval)(e),i.getLang("video_added_less_than_a_minute_ago","raw")):i.getLang("video_added_less_than_a_minute_ago"))(o,t);if(o<3600){const e=[i.getLang("video_word_mins_ago","raw"),i.getLang("video_mins_ago","raw")];return r(o/60,e,t)}if(o<86400){const e=[i.getLang("video_word_hours_ago","raw"),i.getLang("video_hours_ago","raw")];return r(o/3600,e,t)}if(o<2592e3){const e=[i.getLang("video_word_days_ago","raw"),i.getLang("video_days_ago","raw")];return r(o/86400,e,t)}if(o<31536e3){const e=[i.getLang("video_word_months_ago","raw"),i.getLang("video_months_ago","raw")];return r(o/2592e3,e,t)}const s=[i.getLang("video_word_years_ago","raw"),i.getLang("video_years_ago","raw")];return r(o/31363200,s,t)},a=e=>(0,i.langStr)(i.getLang("video_album_updated_time"),"updated_time_ago",s(e,!0)),_=e=>{const t=1e3*e,o=new Date,n=new Date(t);return(0,i.langDate)(t,o.getFullYear()===n.getFullYear()?i.getLang("video_postponed_publication_date","raw"):i.getLang("video_postponed_publication_full_date","raw"),0,i.getLang("months_sm_of"))}},129473:(e,t,o)=>{"use strict";o.d(t,{getFormattedViews:()=>r});var n=o(610989),i=o(422495);function r(e){return e>999?(0,i.getFormattedBigViewsToShortCase)(e):n.getLang("video_N_views_list",e||1,!0)}},471276:(e,t,o)=>{"use strict";o.d(t,{useOwner:()=>n.useOwner,useVideoInPlaylist:()=>i.useVideoInPlaylist});var n=o(103248),i=o(965657)},103248:(e,t,o)=>{"use strict";o.d(t,{useOwner:()=>r});var n=o(149183),i=o(847891);const r=(e,t,o)=>{const r=(0,n.useEntitiesStore)(t.$entitiesGroups,i.Ranges.convertOwnerIdToGroupId(e.owner_id)),s=(0,n.useEntitiesStore)(o.$entitiesUsers,e.owner_id);return i.Ranges.isGroupId(e.owner_id)&&r?r:i.Ranges.isUserId(e.owner_id)&&s?s:void 0}},965657:(e,t,o)=>{"use strict";o.d(t,{useVideoInPlaylist:()=>i});var n=o(293721);const i=(e,t,o)=>(0,n.useStoreMap)(e,(e=>!(!e||!e[t])&&Boolean(e[t][o])))},422495:(e,t,o)=>{"use strict";o.d(t,{BASE_LOCATION:()=>i.BASE_LOCATION,BOOKMARKS_URL:()=>f.BOOKMARKS_URL,MY_VIDEO_ALBUM_ID:()=>i.MY_VIDEO_ALBUM_ID,MenuHelpHintTextTooltip:()=>n.MenuHelpHintTextTooltip,MenuHelpHintTooltip:()=>n.MenuHelpHintTooltip,OWNER_VIDEOS_PAGE_BASE_PATH:()=>i.OWNER_VIDEOS_PAGE_BASE_PATH,PLAYLIST_PAGE_BASE_PATH:()=>i.PLAYLIST_PAGE_BASE_PATH,PLAYLIST_PAGE_REGEXP:()=>i.PLAYLIST_PAGE_REGEXP,PLAYLIST_POPOVER_VERTICAL_OFFSET:()=>i.PLAYLIST_POPOVER_VERTICAL_OFFSET,PLAYLIST_POPOVER_WIDTH:()=>i.PLAYLIST_POPOVER_WIDTH,SNACKBAR_TIMEOUT:()=>i.SNACKBAR_TIMEOUT,VIDEO_COMMUNITY_COMMENTS_PATH:()=>i.VIDEO_COMMUNITY_COMMENTS_PATH,VIDEO_PAGE_PATHNAME_REGEXP:()=>i.VIDEO_PAGE_PATHNAME_REGEXP,WATCH_LATER_PATH:()=>i.WATCH_LATER_PATH,canAddVideoToCommunityPlaylist:()=>f.canAddVideoToCommunityPlaylist,createVideoBindingsService:()=>m.createVideoBindingsService,formatTextWithLinks:()=>f.formatTextWithLinks,get:()=>h.get,getAdditionalInfo:()=>r.getAdditionalInfo,getAllPlaylistURL:()=>f.getAllPlaylistURL,getFormattedBigLikesToShortCase:()=>g.getFormattedBigLikesToShortCase,getFormattedBigSubscribersToShortCase:()=>g.getFormattedBigSubscribersToShortCase,getFormattedBigViewsToShortCase:()=>g.getFormattedBigViewsToShortCase,getFormattedFullVideoViews:()=>g.getFormattedFullVideoViews,getFormattedPostponePublishDateTime:()=>s.getFormattedPostponePublishDateTime,getFormattedUpdatedTime:()=>s.getFormattedUpdatedTime,getFormattedUpdatedTimeWithPrefix:()=>s.getFormattedUpdatedTimeWithPrefix,getFormattedVideoDate:()=>g.getFormattedVideoDate,getFormattedViews:()=>a.getFormattedViews,getPlaylistURL:()=>f.getPlaylistURL,getThumbSrc:()=>f.getThumbSrc,isLiveVideo:()=>f.isLiveVideo,isPrivacyLocked:()=>p.isPrivacyLocked,mapArtistToVideoCardOwner:()=>c.mapArtistToVideoCardOwner,mapPlaylistToPlaylistCardItem:()=>l.mapPlaylistToPlaylistCardItem,mapRestrictions:()=>p.mapRestrictions,mapUserOrGroupToPlaylistCardOwner:()=>u.mapUserOrGroupToPlaylistCardOwner,mapUserOrGroupToVideoCardOwner:()=>d.mapUserOrGroupToVideoCardOwner,mapVideoToSimpleVideoCardItem:()=>p.mapVideoToSimpleVideoCardItem,mapVideoToVideoCardItem:()=>p.mapVideoToVideoCardItem,trackOneStatError:()=>E.trackOneStatError,useOwner:()=>_.useOwner,useVideoInPlaylist:()=>_.useVideoInPlaylist});var n=o(407816),i=o(197466),r=o(961694),s=o(21941),a=o(129473),_=o(471276),c=o(291423),l=o(284469),u=o(676822),d=o(275535),p=o(823213),h=o(899231),m=o(532656),E=o(554332),f=o(125830),g=o(219751)},624225:(e,t,o)=>{"use strict";o.d(t,{isPrivacyLocked:()=>n});const n=e=>!!e&&Boolean((e=>e.category&&!["all","any"].includes(e.category))(e)||e.excluded_category?.length||e.lists?.allowed?.length||e.lists?.excluded?.length||e.owners?.allowed?.length||e.owners?.excluded?.length)},665408:(e,t,o)=>{"use strict";o.d(t,{isUpcomingLiveVideo:()=>n});const n=({liveStatus:e,type:t})=>"live"===t&&"upcoming"===e},517347:(e,t,o)=>{"use strict";o.d(t,{isVideoExternal:()=>n});const n=e=>Boolean(e&&e.player&&(e.files?.external||"YouTube"===e.platform))},291423:(e,t,o)=>{"use strict";o.d(t,{mapArtistToVideoCardOwner:()=>c,mapVideoToFeaturedArtists:()=>l});var n=o(952881),i=o(417517),r=o(8520);const s=[50,100,200],a=({photo:e})=>e?s.reduce(((t,o)=>(t[`photo_${o}`]=(0,r.getPhotoSize)(e,o)?.url,t)),{}):{},_=e=>({name:(0,n.getOwnerName)(e),href:(0,i.getOwnerUrl)(e)}),c=e=>{if("music_video"!==e.type||!e.main_artists)return null;const[t]=e.main_artists;return t?{name:(0,n.getOwnerName)(t),href:(0,i.getOwnerUrl)(t),...a(t)}:null},l=e=>e?.featured_artists?e.featured_artists.map(_):void 0},284469:(e,t,o)=>{"use strict";o.d(t,{mapPlaylistToPlaylistCardItem:()=>s});var n=o(125830),i=o(624225),r=o(21941);const s=e=>({id:e.id,href:(0,n.getPlaylistURL)(e.owner_id,e.id),title:e.title,count:e.count,thumbSrc:(0,n.getThumbSrc)(e),isPrivacyLocked:(0,i.isPrivacyLocked)(e.privacy),isThumbBlurred:Boolean(e.image_blur),additionalInfo:(0,r.getFormattedUpdatedTimeWithPrefix)(e.updated_time)})},676822:(e,t,o)=>{"use strict";o.d(t,{mapUserOrGroupToPlaylistCardOwner:()=>s});var n=o(159824),i=o(952881),r=o(417517);const s=(e,t)=>({name:(0,i.getOwnerName)(e),href:(0,r.getOwnerUrl)(e,t),is_nft:(0,n.isOwnerUser)(e)?e.is_nft:e.is_nft_photo,verified:Boolean(e.verified),has_unseen_stories:e.has_unseen_stories,photo_50:e.photo_50,photo_100:e.photo_100,photo_200:e.photo_200})},275535:(e,t,o)=>{"use strict";o.d(t,{mapUserOrGroupToVideoCardOwner:()=>s});var n=o(214716),i=o(952881),r=o(417517);const s=(e,t)=>e?{...e,name:(0,i.getOwnerName)(e),href:(0,r.getOwnerUrl)(e,t),verified:1===e.verified,is_nft:(0,n.checkOwnerIsNFT)(e)}:{name:"",href:""}},823213:(e,t,o)=>{"use strict";o.d(t,{isPrivacyLocked:()=>p,mapRestrictions:()=>m,mapVideoToSimpleVideoCardItem:()=>y,mapVideoToVideoCardItem:()=>g});var n=o(8520),i=o(610989),r=o(292188),s=o(33281),a=o(665408),_=o(291423),c=o(125830),l=o(961694),u=o(129473),d=o(21941);const p=e=>!!e&&((e=>"members"===e.category?"to_subscribers":"by_link"===e.category?"by_link":Boolean(e.category&&!["all","any"].includes(e.category)))(e)||Boolean(e.excluded_category?.length||e.lists?.allowed?.length||e.lists?.excluded?.length||e.owners?.allowed?.length||e.owners?.excluded?.length)),h=e=>{if(!e)return;return{delete_outline:"delete",hide_outline:"hide",recent_outline:"recent",info_outline:"info",lock_outline:"lock",picture_outline:"picture",live_clock_badge_outline:"liveClockBadge",do_not_disturb_outline:"doNotDisturb",users3_outline:"users3",cancle_circle_outline:"cancleCircle"}[e]},m=e=>{const t=e&&(e=>e&&(e.icon_name?.length||e.mute_info_link?.length)?1===e.blur?"blurred":e.mute_info_link&&e.mute_info_link.length>0?"muted":"hidden":null)(e);return t?{title:e.title,mode:t,iconType:h(e.icon_name)}:null},E=e=>{const t=e.title||"",o=e.subtitle||"";return"music_video"===e.type?`${t} ${o}`:t},f=e=>{const t=e.published_at;if(!t)return;const o=t*r.SECOND;return Date.now()>o?void 0:(0,i.langDate)(o,i.getLang("global_short_date_time","raw"),0,i.getLang("months_sm_of","raw"))},g=e=>{const t=(0,a.isUpcomingLiveVideo)({type:e.type,liveStatus:e.live_status});return{additionalInfo:(0,l.getAdditionalInfo)(e),description:e.description,duration:e.duration,href:(0,s.getVideoUrl)(e),isLive:(0,c.isLiveVideo)(e),isPrivacyLocked:p(e.privacy_view),isProcessing:Boolean(e.processing),ownersRelationText:e.featured_artists?i.getLang("video_feature_relation_text"):void 0,platform:e.platform,publishDate:f(e),restriction:m(e.restriction),secondaryOwners:(0,_.mapVideoToFeaturedArtists)(e),thumbSrc:(0,c.getThumbSrc)(e),title:E(e),trailerSrc:e.trailer?.mp4_360,upcomingBadge:t?i.getLang("global_video_soon"):void 0,viewedDuration:e.viewed_duration}},y=(e,t)=>({title:E(e),isPrivacyLocked:p(e.privacy_view),isLive:(0,c.isLiveVideo)(e),duration:e.duration,viewedDuration:e.viewed_duration,platform:e.platform,thumbSrc:(0,c.getThumbSrc)(e),restriction:m(e.restriction),href:(0,s.getVideoUrl)(e),views:void 0!==e.views?(0,u.getFormattedViews)(e.views):void 0,date:t||void 0===e.date?void 0:(0,n.decodeHTMLEntities)((0,d.getFormattedUpdatedTime)(e.date,!0))})},899231:(e,t,o)=>{"use strict";o.d(t,{get:()=>a});var n=o(933052),i=o(623702);const r="videoplayer_auth_token",s=async({refresh:e=!1,prefetch:t=!1}={})=>{const o=t?n.apiWithPrefetch:n.api,{token:s}=await o("video.getStatsToken",{env:window.__dev?"development":"production",force_refresh:e?1:0});var a;return a=s,i.bestAvailableStorage.setItem(r,a),s},a=async(e={})=>e.refresh?await s(e):i.bestAvailableStorage.getItem(r)??await s(e)},608314:(e,t,o)=>{"use strict";o.d(t,{createVideoBindingsService:()=>r});var n=o(32489),i=o(679005);const r=e=>{const t=e.createEvent(),o=e.createEvent(),r=e.createEvent(),s=e.createStore({});return(0,n.sample)({clock:t,source:s,fn:(e,{album_ids:t,video_id:o})=>(0,i.produce)(e,(e=>{t.forEach((t=>{e[o]||(e[o]={}),e[o][t]=!0}))})),target:s}),(0,n.sample)({clock:o,source:s,fn:(e,{album_id:t,video_id:o})=>{const n=!e[o]||!e[o][t];return(0,i.produce)(e,(e=>{e[o]||(e[o]={}),e[o][t]=n}))},target:s}),(0,n.sample)({clock:r,fn:()=>({}),target:s}),{$entitiesVideoBinding:s,addBindingsEvent:t,toggleBindingEvent:o,resetBindingsEvent:r}}},532656:(e,t,o)=>{"use strict";o.d(t,{createVideoBindingsService:()=>n.createVideoBindingsService});var n=o(608314)},554332:(e,t,o)=>{"use strict";o.d(t,{trackOneStatError:()=>r});var n=o(476726),i=o(490712);const r=(0,n.partConfigEnabled)("video_player_track_onestat_errors")?e=>{const t=e instanceof Error?e.name:String(e);(0,i.statlogsValueEvent)("video_player_insignificant_network_error","onestat",t)}:()=>{}},125830:(e,t,o)=>{"use strict";o.d(t,{BOOKMARKS_URL:()=>p,canAddVideoToCommunityPlaylist:()=>g,formatTextWithLinks:()=>f,getAllPlaylistURL:()=>u,getArtistPhotos:()=>h,getPlaylistURL:()=>d,getThumbSrc:()=>y,isLiveVideo:()=>m});var n=o(7144),i=o(399290),r=o(846210),s=o(599568),a=o(517347),_=o(8520),c=o(205504),l=o(163633);const u=e=>`/video/@${e}/playlists`,d=(e,t)=>`/video/playlist/${e}_${t}`,p="/video/bookmarks",h=e=>{const t=[50,100,200],o={};return e.photo?e.photo.reduce(((e,o)=>(t.includes(o.width)&&(e[`photo_${o.width}`]=o.url),e)),o):o},m=({live_status:e})=>Boolean(e&&!["postlive","finished"].includes(e)),E=(e,t,o,n,i)=>i,f=(e,t=!1)=>{let o=(0,n.clean)(e);return o=(0,i.replaceHyperLinks)(o,i.linksReplacer),o=(0,r.replaceMentions)(o,t?E:void 0),o=(0,s.replaceEmailLinks)(o),o},g=e=>"short_video"!==e.type&&(!e.restriction||((0,a.isVideoExternal)(e)?1===e.restriction.can_play:1===e.restriction.can_preview)),y=e=>{const t=(e instanceof l.Video?e.data:e).image||[],o=t.filter((e=>!e.with_padding)),n=o.length?o:t;return(0,_.getPhotoSize)(n,(0,c.getImageMinWidth)(240))?.url}},219751:(e,t,o)=>{"use strict";o.d(t,{getFormattedBigLikesToShortCase:()=>u,getFormattedBigSubscribersToShortCase:()=>l,getFormattedBigViewsToShortCase:()=>c,getFormattedFullVideoViews:()=>p,getFormattedVideoDate:()=>d});var n=o(610989),i=o(7144),r=o(292188);const s=({count:e,localeOptions:t})=>{const{getMinNumbersLocale:o,getThousandLocale:n,getMillionLocale:r}=t,s=window.langConfig?.locale||"ru";if(e<1e3)return o?o(e):e.toString();let a=1e3,_=n();e>999999&&(a=1e6,_=r());const[c="",l=""]=(e/a).toString().split("."),u=e>=1e5&&e<1e6||0===l.length?0:(0,i.intval)(l.substring(0,1)),d=(0,i.intval)(u)>0?`${c}.${u}`:c;return`${Number(d).toLocaleString(s)}${_}`},a={getMinNumbersLocale:e=>n.getLang("video_N_views_list",e),getThousandLocale:()=>n.getLang("video_N_views_thousand"),getMillionLocale:()=>n.getLang("video_N_views_million")},_={getMinNumbersLocale:e=>n.getLang("video_N_group_members_count",e),getThousandLocale:()=>n.getLang("video_N_subscribers_thousand"),getMillionLocale:()=>n.getLang("video_N_subscribers_million")},c=e=>s({count:e,localeOptions:a}),l=e=>s({count:e,localeOptions:_}),u=e=>s({count:e,localeOptions:{getThousandLocale:()=>n.getLang("video_N_thousand"),getMillionLocale:()=>n.getLang("video_N_million")}}),d=e=>(0,n.langDate)(e*r.SECOND,n.getLang("global_date","raw").slice(0,2),0,n.getLang("months_of","raw")),p=e=>`${e.toLocaleString("ru-RU")} ${n.getLang("video_showcase_N_viewers",e).split(" ")[1]}`},671194:(e,t,o)=>{"use strict";o.d(t,{Skeleton:()=>a});var n=o(474848),i=(o(296540),o(742023));const r={default:"SkeletonIso--borderRadiusDefault",paper:"SkeletonIso--borderRadiusPaper",promo:"SkeletonIso--borderRadiusPromo"};function s(e){return"string"==typeof e&&Object.keys(r).includes(e)}const a=({className:e,width:t,height:o,children:a,borderRadius:_,circle:c,colorFrom:l,colorTo:u,noAnimation:d=!1,duration:p,fontSize:h,noShrink:m})=>{const E={},f=a;t&&(E.width=t),o&&(E.height=o),h&&(E.fontSize=h),_&&!s(_)&&(E.borderRadius=_),c&&(E.borderRadius="50%",E.width&&!E.height&&(E.height=E.width),E.height&&!E.width&&(E.width=E.height)),l&&(E["--skeleton-from"]=l),u&&(E["--skeleton-to"]=u),p&&(E["--animation-duration"]=`${p}s`);const g=!!a||!E.height||!E.width;return(0,n.jsx)("span",{className:(0,i.classNames)("SkeletonIso",d&&"SkeletonIso--noAnimation",m&&"SkeletonIso--noShrink",s(_)&&r[_],e),"data-testid":"loading-skeleton","aria-live":"polite","aria-busy":!d,style:E,children:g&&(0,n.jsx)("span",{className:"SkeletonIso__in",children:f})})}},984869:(e,t,o)=>{"use strict";o.d(t,{logSavedUsersAuthStart:()=>a,logSavedUsersDropAccount:()=>_,logSwitcherAccounts:()=>c});var n=o(581903);const i=new n.ProductionStatCollector,r=new n.ActionStatCollector(i),s=new n.RegistrationItemStatCollector(r);function a(e){s.logEvent(n.RegistrationItemEventTypes.AUTH_SAVED_START,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function _(e){s.logEvent(n.RegistrationItemEventTypes.DROP_ACCOUNT_FROM_SAVED,n.EventScreens.START_PROCEED_AS,void 0,{force:!0},[{name:n.RegistrationFieldItemNames.SAVED_SOURCE,value:n.RegistrationFieldItemValues.SAVED_SOURCE_CAROUSEL,start_interaction_time:"",end_interaction_time:""}],e)}function c(){s.logEvent(n.RegistrationItemEventTypes.POPUP_OPEN,n.EventScreens.MAIN,n.EventScreens.MULTI_ACC_SWITCHER,{force:!0})}},582874:(e,t,o)=>{"use strict";o.d(t,{storyPublisherInitAsync:()=>s});var n=o(8520),i=o(850101),r=o(476726);const s=async e=>{if((0,r.partConfigEnabled)("stories_publisher_web_new")){const t=await(async()=>{let e=null;try{e=(await(0,n.asyncImportLoader)((()=>Promise.all([o.e(50560),o.e(91498),o.e(85172),o.e(89631),o.e(21529),o.e(762),o.e(6376),o.e(42607),o.e(75277),o.e(59886)]).then(o.bind(o,12586))),3)).StoryPublisherV2||null}catch(e){console.error(e)}return e})();t&&t.init(e[0])}else{if(function(e){return e===a}(await function(e){const t=!0,o=(0,i.showBoxLoader)();return e.then((e=>t&&(0,i.isBoxLoadingCancelled)(o)?a:((0,i.isBoxLoadingCancelled)(o)||(0,i.hideBoxLoader)(),e)),(e=>((0,i.hideBoxLoader)(),Promise.reject(e))))}(window.stManager.add([window.jsc("web/story_publisher.js")]))))return;window.StoryPublisher.init(...e)}},a="showBoxLoaderForPromise cancelled"},768772:(e,t,o)=>{"use strict";function n(e,t,o=null){e&&!window.vk?.isBanned&&window.stManager.add([window.jsc("web/article_layer.js"),"article.css"]).then((()=>{window.ArticleLayer.prepare(e,o,t)}))}o.d(t,{articlePrepare:()=>n})},54482:(e,t,o)=>{"use strict";o.d(t,{AudioPageProxy:()=>u});var n=o(434518),i=o(763812),r=o(919225),s=o(942451),a=o(523149),_=(0,i._)("_emitter"),c=(0,i._)("_globalStorage"),l=(0,i._)("_audioPage");class u{get emitter(){return(0,n._)(this,_)[_]}get events(){return(0,n._)(this,_)[_].listenable}get isInitialized(){return Boolean((0,n._)(this,l)[l])}get data(){return(0,n._)(this,l)[l]?._data||null}get readyAudio(){return(0,n._)(this,l)[l]?._readyAudio??null}get currentPlaylist(){return(0,n._)(this,l)[l]?.getPageCurrentPlaylist()}get currentSection(){return(0,n._)(this,l)[l]?._currentSection??null}get audioStartReadyAudio(){return(0,n._)(this,c)[c]?.audioStartReadyAudio??!1}set audioStartReadyAudio(e){(0,n._)(this,c)[c]={audioStartReadyAudio:e}}get ownerId(){return(0,n._)(this,l)[l]?.getOwnerId()??null}get canAddToGroup(){return Boolean((0,n._)(this,l)[l]?.canAddToGroup())}get canEditGroup(){return Boolean((0,n._)(this,l)[l]?.canEditGroup())}get contentBlock(){return(0,n._)(this,l)[l]?._els?.contentBlock??null}destroyReadyAudio(){(0,n._)(this,l)[l]?._destroyReadyAudio()}initAudioRowsAutoList(e){(0,n._)(this,l)[l]?._initAudioRowsAutoList(e)}reloadGeneralSectionData(e){(0,n._)(this,l)[l]?.reloadGeneralSectionData(e)}onUserAction(e,t){(0,n._)(this,l)[l]?.onUserAction(e,t)}constructor(){Object.defineProperty(this,c,{get:d,set:p}),Object.defineProperty(this,l,{get:h,set:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,n._)(this,_)[_]=new r.Emitter}}function d(){return window.cur??null}function p(e){(0,a.default)(window.cur)&&(window.cur={...window.cur,...e})}function h(){return(0,n._)(this,c)[c]?.audioPage??null}u.ensure=(0,s.makeSharedState)("AudioPageProxy",(()=>new u),{version:5})},208144:(e,t,o)=>{"use strict";var n;o.d(t,{AudioRecomsOnboardingShowRequestedEventReason:()=>n}),function(e){e.VibeRecommendationsPlaylistPlayButton="VIBE_RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.RecommendationsPlaylistOpenButton="RECOMMENDATIONS_PLAYLIST_OPEN_BUTTON",e.RecommendationsPlaylistPlayButton="RECOMMENDATIONS_PLAYLIST_PLAY_BUTTON",e.SnippetsBannerOpenSnippetsPageLink="SNIPPETS_BANNER_SNIPPETS_PAGE_LINK",e.Navigation="NAVIGATION",e.AudioPageInit="AUDIO_PAGE_INIT",e.Unknown="UNKNOWN"}(n||(n={}))},98916:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPageEventType:()=>n}),function(e){e.Updated="updated",e.RadioStationFollowed="radioStationFollowed",e.PodcastAddedToFavorites="podcastAddedToFavorites",e.AudioLinkCopied="audioLinkCopied",e.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested"}(n||(n={}))},119265:(e,t,o)=>{"use strict";o.d(t,{AudioPageEventType:()=>i.AudioPageEventType,AudioPageProxy:()=>n.AudioPageProxy,AudioRecomsOnboardingShowRequestedEventReason:()=>r.AudioRecomsOnboardingShowRequestedEventReason});var n=o(54482),i=o(98916),r=o(208144)},527966:(e,t,o)=>{"use strict";o.d(t,{FetchService:()=>l});var n=o(434518),i=o(763812),r=o(624216),s=o(385608),a=o(476726),_=o(441914),c=(0,i._)("_getAudioIdsBySourceApi");class l{async getAudioIdsBySource(e,t={}){const o=(0,a.partConfigEnabled)("audio_recom_playlists_starts_with_last_played_audio_web"),{audioListId:i,audioListSource:s,ref:l}=t,u={audioIds:[],lastPlayedAudioRawId:null};try{if(o&&"playlist"===s&&i){const{audios:e,last_listened_audio_id:t=null}=await(0,n._)(this,c)[c]({entity_id:i,source:s,ref:l});return u.audioIds=e.map((e=>({audio_raw_id:e.audio_id,access_key:(0,_.mapAPIRawIdToAudioIdentity)(e.audio_id)?.accessKey??"",track_code:e.track_code}))),t&&(u.lastPlayedAudioRawId=t),u}const t=await r.ajax.promisifiedPost("al_audio.php?act=get_audio_ids_by_source",{...e}),a=t?.[0];Array.isArray(a)&&(u.audioIds=a)}finally{return u}}constructor(){Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=(0,s.createMethod)("audio.getAudioIdsBySource"),this.reloadAudios=e=>new Promise(((t,o)=>{r.ajax.post("al_audio.php?act=reload_audios",{audio_ids:e},{onDone:e=>{t(e)},onFail:e=>(o(e),!1)})})),this.getAutoplayAudioIdsBySource=e=>new Promise(((t,o)=>{r.ajax.post("al_audio.php?act=get_next_audios",{...e},{onDone:e=>{t(e)},onFail:e=>(o(e),!1)})})),this.followRadiostation=(e,t)=>new Promise(((o,n)=>{r.ajax.post("al_audio.php?act=follow_radiostation",{id:e,hash:t},{onDone:e=>{o(e)},onFail:e=>(n(e),!0)})})),this.unfollowRadiostation=(e,t)=>new Promise(((o,n)=>{r.ajax.post("al_audio.php?act=unfollow_radiostation",{id:e,hash:t},{onDone:e=>{o(e)},onFail:e=>(n(e),!0)})}))}}},149143:(e,t,o)=>{"use strict";o.d(t,{hideCatalogBlock:()=>s});var n=o(788407),i=o(514640),r=o(624216);function s(e,t){r.ajax.post("/al_audio.php?act=hide_catalog_block",{block_id:e});const o=t.closest(".CatalogBlock__content");o&&(0,n.getAudioPlayer)().notify(i.events.PLACEHOLDER_REMOVE,o.dataset.id)}},439677:(e,t,o)=>{"use strict";o.d(t,{showAudioLongtapModal:()=>l});var n=o(474848),i=o(507607),r=o(272259),s=o(355110),a=o(672229),_=o(332583);const c=(0,i.asyncComponent)((()=>Promise.all([o.e(91498),o.e(89631),o.e(1715)]).then(o.bind(o,800028))),(({AudioLongtapModal:e})=>e)),l=(e,t)=>{const o=a.AudioLongtapModalService.ensure(),i=(0,_.ensureMyMusicService)();o.setAudioElement(t),(0,r.showMessageBoxModalSuspense)((t=>(0,n.jsx)(c,{...t,audioLongtapService:o,previewsService:s.audioPreviewsService,myMusicService:i,audio:e})),{width:380,onDestroy:()=>{o.onCloseModal("click_outside")}})}},445677:(e,t,o)=>{"use strict";o.d(t,{SpecialProjectModal:()=>h});var n=o(474848),i=o(296540),r=o(209642),s=o(416124),a=o(943388),_=o(104900),c=o(533048),l=o(753457),u=o(102629),d=o(432654);const p="SpecialProjectModal__subheader",h=({title:e,text:t,button:o,style:h,image:m,backgroundImage:E,sendCloseReason:f,onClose:g})=>{const y=e=>{"A"===e.target.tagName&&f("link")};return(0,i.useEffect)((()=>{const[e]=document.getElementsByClassName(p);return e.addEventListener("click",y),()=>{e.removeEventListener("click",y)}}),[]),(0,n.jsxs)(r.ModalBox,{children:[(0,n.jsx)(l.ModalDismissButton,{onClick:g}),(0,n.jsx)(u.SpecialProjectHeader,{backgroundImage:E,image:m,style:h}),(0,n.jsxs)(s.ModalBody,{insetLevel:1,children:[(0,n.jsx)(a.ModalTextLayout,{subheader:(0,n.jsx)("span",{className:p,children:(0,d.parseReactWikiLinks)(t)}),subheaderMode:"primary",children:e}),(0,n.jsx)(_.ButtonLayout,{children:(0,n.jsx)(c.Button,{onClick:()=>{f("button"),o.action?.url&&window.nav.go(o.action.url)},size:"l",mode:"primary",children:o.title},"special-project-submit-button")})]})]})}},118415:(e,t,o)=>{"use strict";o.d(t,{showWebSpecialProjectModal:()=>s});var n=o(474848),i=o(272259),r=o(445677);const s=(e,t)=>{(0,i.showMessageBoxModal)((o=>(0,n.jsx)(r.SpecialProjectModal,{...o,...e,sendCloseReason:t})),{width:420,onDestroy:()=>{t("close")}})}},207431:(e,t,o)=>{"use strict";o.d(t,{AUDIO_STORAGE_KEYS_ENUM:()=>n});const n={AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME:"audio_preview_tooltip_show_date_time"}},298077:(e,t,o)=>{"use strict";o.d(t,{createAudioDislikesInMyMusicWebService:()=>w});var n=o(94359),i=o(919225),r=o(23280),s=o(471027),a=o(255053),_=o(32489),c=o(278758),l=o(540401),u=o(753421),d=o(514640),p=o(277942),h=o(297420),m=o(630082),E=o(711055),f=o(671300),g=o(198155),y=o(145608),v=o(823103);function w(e){const t=(0,n.getEffectorServiceDomain)(e),o=new i.Emitter,f=(0,l.ensureAudioPlayerService)(),g=(0,r.ensureMyAudioDislikesService)(),y=(0,u.ensureMyAudioMusicWebService)(),v=(0,_.createEvent)(),{$fullIdsMap:w,fullIdsMapApi:T}=(0,s.createFullIdsMap)(t),{$fullIdsMap:I,fullIdsMapApi:P}=(0,s.createFullIdsMap)(t),{$fullIdsMap:C,fullIdsMapApi:S}=(0,s.createFullIdsMap)(t),O=(0,_.restore)(v,null),M=(0,_.attach)({source:O,async effect(e){if(!e)throw new Error("Audio not exists");const t=(0,a.getAudioFullId)(e);await Promise.all([y.addFx({audio:e,isNotificationDisabled:!0}),g.removeFx({identity:e})]),S.remove(t),f.updateAudioDislikeStatusFx({audioFullId:t,hasDislike:!1}),f.notifyFx({eventType:d.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[t]}),o.emit(E.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestored,{audio:e})}}),D=(0,_.attach)({source:(0,_.combine)({dislikesIdentitiesMap:g.$identitiesMap,myMusicIdentitiesMap:y.$identitiesMap,dislikeActionInitializedIdentitiesMap:w,myMusicActionInitializedIdentitiesMap:y.$initializedIdentitiesMap,isFinitePlaylist:(0,h.not)((0,m.equals)(f.$currentPlaylist.map((e=>Boolean(e?.isLive()||e?.isLoadable()))),!0)),playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({dislikeActionInitializedIdentitiesMap:e,myMusicActionInitializedIdentitiesMap:t,dislikesIdentitiesMap:n,myMusicIdentitiesMap:i,isFinitePlaylist:r,playerCurrentAudio:s,playerProgress:_},{audio:c,audioEl:l=null,skipDeletionAudioFromMyMusic:h,needReloadTrackCode:m}){if(!c)throw new Error("Audio not exists");const w=(0,a.getAudioFullId)(c),T=s&&w===(0,a.getAudioFullId)(s)?_:0,I=Boolean(e[w]);if((0,p.hasDislike)({audio:c,dislikesIdentitiesMap:n,isDislikeActionInitialized:I}))throw new Error("Audio already disliked");const P=await A({playerService:f,audio:c,audioEl:l});try{let e=c;if(m){const t=await b(c,l);t&&(e={...c,trackCode:t})}await g.addFx({identity:c});if(!h&&(0,u.isMy)({identity:c,myMusicIdentitiesMap:i,isMyMusicActionInitialized:Boolean(t[w]),userId:window.vk.id}))try{await y.deleteFx({audio:c}),v(c),o.emit(E.AudioDislikesInMyMusicWebServiceEventType.AudioDislikedInMyMusic,{audio:e,playlistIdentity:P,playerProgress:T}),S.add(w),f.updateAudioDislikeStatusFx({audioFullId:w,hasDislike:!0}),f.notifyFx({eventType:d.AudioPlayerEventType.AUDIO_DELETE_BY_DISLIKE_ACTION,params:[w]})}catch(e){throw new Error("Failed to delete audio from MyMusic",{cause:e})}else o.emit(E.AudioDislikesInMyMusicWebServiceEventType.AudioDisliked,{audio:e,playlistIdentity:P,playerProgress:T});const n=f.getPlaylistQueue();if(r&&n&&n?.indexOfAudio?.(c)===n?.length-1)return;f.getCurrentAudio()?.id===c.id&&f.playNextFx()}catch(e){throw new Error("Failed to add dislike to audio",{cause:e})}}}),L=(0,_.attach)({source:(0,_.combine)({dislikesIdentitiesMap:g.$identitiesMap,initializedIdentitiesMap:w,lastDislikedAudioInMyMusic:O,isCancelDeletionLastDislikedAudioInMyMusicFxPending:M.pending,dislikedAudiosInMyMusicMap:C,playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({initializedIdentitiesMap:e,dislikesIdentitiesMap:t,lastDislikedAudioInMyMusic:n,isCancelDeletionLastDislikedAudioInMyMusicFxPending:i,dislikedAudiosInMyMusicMap:r,playerCurrentAudio:s,playerProgress:_},{audio:c,audioEl:l=null,needReloadTrackCode:u}){if(!c)throw new Error("Audio not exists");const h=(0,a.getAudioFullId)(c),m=Boolean(e[h]);if(!(0,p.hasDislike)({audio:c,dislikesIdentitiesMap:t,isDislikeActionInitialized:m}))throw new Error("Audio not disliked");const w=await A({playerService:f,audio:c,audioEl:l}),T=Boolean(n)&&n?.id===c.id;let I=c;if(u){const e=await b(c,l);e&&(I={...c,trackCode:e})}try{!m||!(h in r)||i&&T?await g.removeFx({identity:c}):(T&&(o.emit(E.AudioDislikesInMyMusicWebServiceEventType.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton,{audio:c}),v(null)),await Promise.all([y.addFx({audio:c,isNotificationDisabled:!0}),g.removeFx({identity:c})]),S.remove(h),f.notifyFx({eventType:d.AudioPlayerEventType.AUDIO_RESTORE_BY_DISLIKE_ACTION,params:[h]})),o.emit(E.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemoved,{audio:I,playlistIdentity:w,playerProgress:s&&h===(0,a.getAudioFullId)(s)?_:0}),f.updateAudioDislikeStatusFx({audioFullId:h,hasDislike:!1})}catch(e){throw new Error("Failed to remove dislike from audio",{cause:e})}}}),k=(0,_.attach)({source:(0,_.combine)({dislikesIdentitiesMap:g.$identitiesMap,dislikeActionInitializedIdentitiesMap:w,playerCurrentAudio:f.$currentAudio,playerProgress:f.$progress}),async effect({dislikesIdentitiesMap:e,dislikeActionInitializedIdentitiesMap:t,playerCurrentAudio:n,playerProgress:i},{audio:r,audioEl:s,needReloadTrackCode:_,...c}){if(!r)throw new Error("Audio not exists");const l=await A({playerService:f,audio:r,audioEl:s}),u=(0,a.getAudioFullId)(r),d=(0,p.hasDislike)({audio:r,dislikesIdentitiesMap:e,isDislikeActionInitialized:u in t});let h=r;if(_){const e=await b(r,s);e&&(h={...r,trackCode:e})}d?(await Promise.all([g.removeFx({identity:r}),y.addFx({audio:h,needReloadTrackCode:!1,...c})]),f.updateAudioDislikeStatusFx({audioFullId:u,hasDislike:!1}),o.emit(E.AudioDislikesInMyMusicWebServiceEventType.AudioDislikeRemovedByAddToMyMusicButton,{audio:h,playlistIdentity:l,playerProgress:n&&u===(0,a.getAudioFullId)(n)?i:0})):await y.addFx({audio:h,audioEl:s,...c})}});return(0,_.sample)({clock:[D.done,L.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:T.add}),(0,_.sample)({clock:[D,L],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,a.getAudioFullId)(e),target:P.add}),(0,_.sample)({clock:[D.finally,L.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:P.remove}),(0,c.reset)({clock:M.done,target:O}),{$dislikesIdentitiesMap:g.$identitiesMap,$dislikesInitializedIdentitiesMap:w,$dislikesLoadingIdentitiesMap:I,addDislikeFx:D,removeDislikeFx:L,$myMusicIdentitiesMap:y.$identitiesMap,$myMusicInitializedIdentitiesMap:y.$initializedIdentitiesMap,$myMusicLoadingIdentitiesMap:y.$loadingIdentitiesMap,addToMyMusicFx:k,deleteFromMyMusicFx:y.deleteFx,cancelDeletionLastDislikedAudioInMyMusicFx:M,events:o.listenable}}async function A({playerService:e,audio:t,audioEl:o}){if(t.album)return{id:t.album[v.AudioPlaylistTupleKeys.Id],ownerId:t.album[v.AudioPlaylistTupleKeys.OwnerId]};const n=e.getCurrentAudio();if(n&&(0,a.getAudioFullId)(n)===(0,a.getAudioFullId)(t)){const t=await e.getCurrentPlaylistFx();if(t){const e=t?.getPlaylistId(),o=t?.getPlaylistId();if(e&&o)return{id:+e,ownerId:+o}}}if(o){let e=f.AudioUtils.getContextPlaylist(o);if(e?.playlist){const t=e.playlist?.getPlaylistId(),o=e.playlist?.getPlaylistId();if(t&&o)return{id:+t,ownerId:+o}}}return null}async function b(e,t){const o=(0,g.getContextPlaylist)(t);if(!o)return null;return await(0,y.getAudioTrackCodeFromPlaylist)(o?.playlist,e)??null}},711055:(e,t,o)=>{"use strict";var n;o.d(t,{AudioDislikesInMyMusicWebServiceEventType:()=>n}),function(e){e.AudioDisliked="audioDisliked",e.AudioDislikedInMyMusic="audioDislikedInMyMusic",e.LastDislikedAudioInMyMusicRestored="lastDislikedAudioInMyMusicRestored",e.LastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton="lastDislikedAudioInMyMusicRestoreRequestedByCancelDislikeButton",e.AudioDislikeRemoved="audioDislikeRemoved",e.AudioDislikeRemovedByAddToMyMusicButton="audioDislikeRemovedByAddToMyMusicButton"}(n||(n={}))},432800:(e,t,o)=>{"use strict";o.d(t,{ensureAudioDislikesInMyMusicWebService:()=>a,hasDislike:()=>s.hasDislike});var n=o(942451),i=o(32489),r=o(298077),s=o(277942);o(711055);const a=(0,n.makeSharedState)("global/web/audio/dislikesInMyMusic",(()=>(0,r.createAudioDislikesInMyMusicWebService)({domain:(0,i.createDomain)("global/web/audio/dislikesInMyMusic"),name:"global/web/audio/dislikesInMyMusic"})),{version:3})},830875:(e,t,o)=>{"use strict";o.d(t,{hasDislike:()=>r});var n=o(255053),i=o(668592);function r({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:o}){return!!e&&(!!t[(0,n.getAudioFullId)(e)]||!o&&((0,i.getAudioExtra)(e)?.dislike??!1))}},277942:(e,t,o)=>{"use strict";o.d(t,{hasDislike:()=>n.hasDislike});var n=o(830875)},282246:(e,t,o)=>{"use strict";o.d(t,{createAudioLongtapFetchService:()=>r});var n=o(32489),i=o(332583);function r(e){const t=(0,n.createDomain)("AudioLongtapModal"),o=(0,i.ensureMyMusicService)(),r=t.createStore(!1),s=t.createStore(!1),a=(0,n.attach)({effect:e.fetchAudioPreviewFx}),_=(0,n.attach)({effect:o.addFx}),c=t.createEvent();return s.reset(c),(0,n.sample)({clock:a.failData,fn:()=>!0,target:r}),(0,n.sample)({clock:a,fn:()=>!1,target:r}),(0,n.sample)({clock:_.doneData,fn:()=>!0,target:s}),(0,n.sample)({clock:_,fn:()=>!1,target:s}),{$failFetch:r,$successAddAudio:s,resetAddSuccessResult:c,fetchAudioPreviewFx:a,addAudioFx:_}}},672229:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapModalService:()=>g});var n=o(514640),i=o(695290),r=o(788407),s=o(836681),a=o(132873),_=o(671300),c=o(920492),l=o(355110),u=o(449502),d=o(441914),p=o(332583),h=o(255053),m=o(282246),E=o(476726);let f=null;class g{static ensure(){return f||(f=new g,f)}async fetchPreview(e){await this.fetcher.fetchAudioPreviewFx({identity:(0,d.mapAPIRawIdToAudioIdentity)(e.fullId)}),this.previewPlayer.timelinePosition=0,this.previewPlayer.setCurrentAudio(e)}async play(e){const t={...this.getStatData(),audio:this.previewPlayer.currentAudio};this.statCollector.openModal(t),this.commonAudioWasPlaying=this.commonAudioPlayer.isPlaying(),await this.previewPlayer.play(e,this.commonAudioPlayer.getVolume()),this.commonAudioWasPlaying&&this.commonAudioPlayer.pauseByChangeChannel();const o=a.AudioLongtapTooltip.ensure();this.statCollector.start(this.getStatData()),o.canShow()&&o.disable()}setAudioElement(e){this.audioElement=e}stop(){const e=this.commonAudioPlayer.getCurrentAudio();if(this.previewPlayer.stop(),this.commonAudioWasPlaying&&e){const t=this.commonAudioPlayer.getCurrentPlaylist();this.commonAudioPlayer.resumeChannel({audio:e,playlist:t,context:void 0}),this.commonAudioWasPlaying=!1}}subscribeStop(e){this.previewPlayer.subscribe.call(this.previewPlayer,n.events.STOP_PREVIEW,e),this.previewPlayer.subscribe.call(this.previewPlayer,n.events.END_PREVIEW,e)}unsubscribeStop(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.STOP_PREVIEW,e),this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.END_PREVIEW,e)}subscribeProgress(e){this.previewPlayer.subscribe.call(this.previewPlayer,n.events.PROGRESS_PREVIEW,e)}unsubscribeProgress(e){this.previewPlayer.unsubscribe.call(this.previewPlayer,n.events.PROGRESS_PREVIEW,e)}onCloseModal(e){if(this.audioElement)switch(e){case"click_exit":this.statCollector.closeBy(i.EventItemSubType.AUDIO_LONGTAP_CLICK_EXIT,this.getStatData());break;case"click_outside":this.statCollector.closeBy(i.EventItemSubType.AUDIO_LONGTAP_CLICK_OUTSIDE,this.getStatData());break;case"auto_finish":this.statCollector.closeBy(i.EventItemSubType.AUDIO_LONGTAP_AUTO_FINISH,this.getStatData())}this.audioElement=null,this.stop(),this.commonAudioWasPlaying=!1,this.previewPlayer.unsubscribe(n.events.STOP_PREVIEW,this.stop),this.previewPlayer.unsubscribe(n.events.END_PREVIEW,this.stop)}get currentAudio(){return this.previewPlayer.currentAudio}get timelinePosition(){return this.previewPlayer.timelinePosition}get playbackDuration(){return this.previewPlayer.playbackDuration}async addAudio(e){const t=(0,E.partConfigEnabled)("add_audio_to_effector_web");await this.fetcher.addAudioFx({trackedIdentity:{id:e.id,ownerId:e.owner_id,accessKey:e.accessKey,trackCode:e.trackCode},userId:window.vk.id});const o=(0,p.ensureMyMusicService)().$identitiesMap.getState()[(0,h.getAudioFullId)({id:e.id,ownerId:e.ownerId})];(0,r.getAudioPlayer)().notify(n.events.ADDED,e,o.id);const i={...this.getStatData(),audioAddedId:o.id||void 0};if(this.audioElement&&this.audioElement.classList.add("audio_row__added"),!t){_.AudioUtils.getAddRestoreInfo()[e.fullId]={state:"added",addedFullId:(0,h.getAudioFullId)({id:o.id,ownerId:o.ownerId}),audio:e}}this.statCollector.addTrack(i)}getStatData(){const e=this.commonAudioPlayer.getCurrentPlaylist(),t=e?.getPlaylistId()??void 0;return{audio:this.currentAudio,timelinePosition:this.timelinePosition,playlistId:t,playbackDuration:this.playbackDuration,volume:(0,u.unLogF)(this.commonAudioPlayer.getVolume()),snippetLength:this.previewPlayer.previewLength}}goToTrack(e){e&&(this.statCollector.goToTrack(this.getStatData()),window.nav.go(`audio${e}`))}goToArtist(e){e&&(this.statCollector.goToArtist(this.getStatData()),window.nav.go(`artist/${e}`))}constructor(){this.previewPlayer=s.PreviewAudioPlayer.ensure(),this.commonAudioPlayer=(0,r.getAudioPlayer)(),this.statCollector=c.AudioLongtapStatCollector.ensure(),this.previewPlayer.subscribe(n.events.STOP_PREVIEW,(()=>this.stop())),this.previewPlayer.subscribe(n.events.END_PREVIEW,(()=>this.stop())),this.fetcher=(0,m.createAudioLongtapFetchService)(l.audioPreviewsService)}}},920492:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapStatCollector:()=>a});var n=o(695290),i=o(581903);const r=e=>{if(!e.audio)return{event_category:e.eventCategory};const{trackCode:t,id:o,ownerId:n,albumId:i}=e.audio;return{track_code:t,audio_id:o,audio_owner_id:n,playlist_id:i,playlist_owner_id:void 0,audio_id_new:e.audioAddedId||void 0,timeline_position:e.timelinePosition,playback_duration:e.playbackDuration,volume:Math.round(100*e.volume),audio_length:e.snippetLength,event_category:e.eventCategory}};let s=null;class a{static ensure(){return s||(s=new a,s)}start(e){const t=r({...e,eventCategory:n.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.START,event_subtype:n.EventItemSubType.AUDIO_LONGTAP,...t}})}openModal(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.OPEN,n.EventItemSubType.AUDIO_LONGTAP_OPEN,n.LongtapEventCategory.view,t)}addTrack(e){const t=r({...e,eventCategory:n.LongtapEventCategory.action});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.ADDED,event_subtype:n.EventItemSubType.AUDIO_ADD_AFTER_LONGTAP,...t}})}tipHasShown(){this.sendView(n.EventItemType.HINT,n.EventItemSubType.AUDIO_LONGTAP_HINT,n.LongtapEventCategory.view)}closeBy(e,t){if(!this.audio)return;const o=r({...t,audio:this.audio,eventCategory:n.LongtapEventCategory.play});this.actionStatCollector.logEvent({type:n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ActionProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:n.EventItemType.STOP,event_subtype:e,...o}}),this.audio=null}goToTrack(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.LONGTAP_DRILLDOWN,n.EventItemSubType.AUDIO_LONGTAP_GO_TO_TRACK,n.LongtapEventCategory.nav,t)}goToArtist(e){this.audio=e.audio;const t=r(e);this.sendView(n.EventItemType.LONGTAP_DRILLDOWN,n.EventItemSubType.AUDIO_LONGTAP_GO_TO_ARTIST,n.LongtapEventCategory.nav,t)}sendView(e,t,o,i){const r={type:n.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[n.ViewProductionStatEventTypes.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{...i,event_type:e,event_subtype:t,event_category:o}},s={type:e,track_code:i?.track_code};this.viewCollector.logEvent(r,s)}constructor(){this.audio=null,this.productCollector=new i.ProductionStatCollector,this.viewCollector=new i.ViewStatCollector(this.productCollector),this.actionStatCollector=new i.ActionStatCollector(this.productCollector)}}},132873:(e,t,o)=>{"use strict";o.d(t,{AudioLongtapTooltip:()=>v});var n=o(434518),i=o(763812),r=o(96526),s=o(623702),a=o(207431),_=o(920492),c=o(741531),l=o(165753),u=o(942451),d=o(119265);var p=(0,i._)("_audioPage"),h=(0,i._)("_hint"),m=(0,i._)("_tooltip"),E=(0,i._)("_isOpen"),f=(0,i._)("_disabled"),g=(0,i._)("_isUserAuthorized"),y=(0,i._)("_getTooltip");class v{getHints(){(0,n._)(this,g)[g]&&(0,n._)(this,p)[p].isInitialized&&(0,c.ensureAccountHelpHintsService)().getHelpHintsFx()}getHint(){const e=(0,c.ensureAccountHelpHintsService)().$helpHints.getState()[l.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB];return(0,n._)(this,h)[h]=e||null,(0,n._)(this,h)[h]}canShow(){if((0,n._)(this,f)[f])return!1;let e=!1;if(this.getHint()){const t=s.vkLocalStorage.getItem(a.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME),o=t?JSON.parse(t):null,n=o?o.firstShow:null;if(n){const t=new Date(+n).getTime(),i=(new Date).getTime(),r=Math.abs(i-t),_=Math.ceil(r/864e5);if(_<=3&&o?.disabledDay!==_){e=!0;const t={firstShow:n,disabledDay:_};s.vkLocalStorage.setItem(a.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}o?.disabledDay===_&&(e=!1)}else{e=!0;const t={firstShow:(new Date).getTime(),disabledDay:1};s.vkLocalStorage.setItem(a.AUDIO_STORAGE_KEYS_ENUM.AUDIO_PREVIEW_TOOLTIP_SHOW_DATE_TIME,JSON.stringify(t))}}return e}async show(e){e&&((0,n._)(this,m)[m]=(0,n._)(this,y)[y](e),(0,n._)(this,m)[m]&&((0,n._)(this,m)[m].show(),(0,n._)(this,E)[E]=!0,_.AudioLongtapStatCollector.ensure().tipHasShown()))}disable(){this.getHint()&&(0,c.ensureAccountHelpHintsService)().hideHelpHint({hintId:l.AvailableHelpHints.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB}),(0,n._)(this,f)[f]=!0}get isOpen(){return(0,n._)(this,E)[E]}constructor({audioPage:e}){Object.defineProperty(this,g,{get:w,set:void 0}),Object.defineProperty(this,y,{value:A}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),(0,n._)(this,E)[E]=!1,(0,n._)(this,f)[f]=!1,(0,n._)(this,p)[p]=e}}function w(){return Boolean(window?.vk?.id)}function A(e){const t={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip audio_snippet_tooltip",content:(0,n._)(this,h)[h]?.title,align:"right",centerShift:8,appendTo:document.body,autoAdjustToViewport:!0,noAutoHideOnWindowClick:!0,autoHide:!0,onHide:()=>{(0,n._)(this,E)[E]=!1,(0,n._)(this,m)[m]?.destroy()},width:286},o=new r.ElementTooltip(e,t);return window.cur?.destroy?.push((()=>{o?.destroy()})),o}v.ensure=(0,u.makeSharedState)("AudioLongtapTooltip",(()=>new v({audioPage:d.AudioPageProxy.ensure()})),{version:1})},933631:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>_});var n=o(32489),i=o(94359),r=o(958955),s=o(918081),a=o(842225);const _=(0,o(942451).makeSharedState)("global/audio/audioPage/myPlaylists",(()=>function({config:e,myAudioPlaylistsService:t}){const o=(0,i.getEffectorServiceDomain)(e),n=o.createStore({}),a=o.createEffect((async e=>await t.createFx({...e}))),_=o.createEffect((async e=>{await t.deleteFx({...e})}));return n.on(a.done,((e,{params:t,result:o})=>(0,r.addPairToMap)(e,{key:t.blockId,value:o}))),n.on(_.done,((e,{params:t})=>(0,s.removePairFromMap)(e,t.blockId))),{createFx:a,deleteFx:_,setUserId:t.setUserId,$myAudioPlaylistsIdentitiesMap:n}}({config:{domain:(0,n.createDomain)("global/audio/audioPage/myPlaylists"),name:"global/audio/audioPage/myPlaylists"},myAudioPlaylistsService:(0,a.ensureMyAudioPlaylistsService)()})),{version:1})},499012:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>n.ensureAudioPageMyAudioPlaylistsService});var n=o(933631)},473137:(e,t,o)=>{"use strict";o.d(t,{createAudioPageService:()=>I});var n=o(94359),i=o(471027),r=o(255053),s=o(156693),a=o(760325),_=o(847891),c=o(248251),l=o(851579),u=o(432800),d=o(32489),p=o(753421),h=o(119265),m=o(7144),E=o(671300),f=o(620626),g=o(20025),y=o(610989),v=o(879007),w=o(248298),A=o(788407),b=o(624216),T=o(525294);function I(e){const t=(0,n.getEffectorServiceDomain)(e),o=h.AudioPageProxy.ensure(),_=(0,u.ensureAudioDislikesInMyMusicWebService)(),c=(0,l.ensureGroupsAudioMusicWebService)(),I=t.createEvent(),O=(0,d.restore)(I,null),{$fullIdsMap:M,fullIdsMapApi:D}=(0,i.createFullIdsMap)(t),{$fullIdsMap:L,fullIdsMapApi:k}=(0,i.createFullIdsMap)(t),{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:R,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:N}=(0,T.createDeleteAudiosFromMyMusicForLastWeekDataIdentities)(t),B=t.createEffect((({audioEl:e,inProgress:t})=>{e&&(e.dataset["in-progress"]=(0,m.intval)(t).toString())})),x=(0,d.attach)({source:(0,d.combine)({myMusicIdentitiesMap:_.$myMusicIdentitiesMap,myMusicInitializedIdentitiesMap:_.$myMusicInitializedIdentitiesMap,deletedFromMyMusicAudiosIdentitiesMap:M,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:R}),async effect({myMusicIdentitiesMap:e,myMusicInitializedIdentitiesMap:t,deletedFromMyMusicAudiosIdentitiesMap:n,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:i},{audio:s,audioEl:a,playlist:c,audioRef:l}){if(!s)throw new Error("Audio not exists");const u=(0,r.getAudioFullId)(s),d=(0,p.isMy)({identity:s,myMusicIdentitiesMap:e,isMyMusicActionInitialized:u in t,userId:window.vk.id});try{d?await _.deleteFromMyMusicFx({audioEl:a,audio:s,audioRef:l,needReloadTrackCode:!0}):(c&&o.onUserAction(s,c),await _.addToMyMusicFx({audioEl:a,audio:s,audioRef:l,isNotificationDisabled:!0,needReloadTrackCode:!0}),d?D.add(u):(u in n&&D.remove(u),u in i&&N.remove(u)),!d&&u in n?D.remove(u):d&&D.add(u))}catch(e){throw new Error(`${d?'Failed to delete audio from "My Music"':'Failed to add audio to "My music"'}`,{cause:e})}}}),U=(0,d.attach)({source:c.$identitiesMap,async effect(e,{audioEl:t,audio:n,groupId:i,playlist:r}){if(!n)throw new Error("Audio not exists");const a=(0,l.isAddedToGroup)({identity:n,groupsMusicIdentitiesMap:e,groupId:i});try{a?await c.deleteFx({audioEl:t,groupId:i,audio:n}):(r&&o.onUserAction(n,r),await c.addFx({audioEl:t,groupId:i,audio:n}),k.remove((0,s.getGroupAudioFullId)(n,i)))}catch(e){throw new Error(`${a?"Failed to delete audio from group with id":"Failed to add audio to group with id"} ${i}`,{cause:e})}}}),F=(0,d.attach)({source:O,async effect(e,{audioEl:t,audio:n,audioRef:i=""}){if(!C(e))return window.vk&&window.vk.widget&&window.Widgets?void window.Widgets.oauth():void console.error("The user is not authorized, it is impossible to add or delete audio");if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(S(t))return;const r=n||E.AudioUtils.getAudioFromEl(n,!0);if(!r)throw new Error("Audio not exists");const s=o.currentPlaylist,_=P(o),c=(0,a.isNumber)(_),l=c&&t&&!t.classList.contains("audio_row__deleted")&&Boolean(t.closest(".CatalogBlock__group_audios"));!c||l?await x({audioEl:t,audio:r,playlist:s,audioRef:i}):await U({audioEl:t,audio:r,groupId:_,playlist:s})}}),W=(0,d.attach)({source:R,async effect(e,{audioEl:t,audio:o}){if(!o)throw new Error("Audio not exists");const n=(0,r.getAudioFullId)(o),i=e[n];if(!i)throw new Error("Audio is not ready to delete all audio from the last week in My Music");(0,g.showFastBox)({title:y.getLang("audio_delete_all_title"),onHide:()=>{B({audioEl:t,inProgress:!1})}},i.message||"",y.getLang("global_delete"),(function(e){let t=(0,v.extend)({act:"delete_all"},i.data);b.ajax.post("al_audio.php",t,{showProgress:()=>(0,w.lockButton)(e),onDone:function(){let e=(0,A.getAudioPlayer)().getPlaylist(f.AudioPlaylist.TYPE_PLAYLIST,i.data.from_id,f.AudioPlaylist.DEFAULT_PLAYLIST_ID);(0,A.getAudioPlayer)().deletePlaylist(e),D.remove(n),window.nav.reload()},onFail:()=>!0})}),y.getLang("global_cancel"))}}),K=(0,d.attach)({source:(0,d.combine)({userId:O,myMusicInitializedIdentitiesMap:_.$myMusicInitializedIdentitiesMap,myMusicIdentitiesMap:_.$myMusicIdentitiesMap,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:R}),async effect({userId:e,myMusicIdentitiesMap:t,myMusicInitializedIdentitiesMap:n,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:i},{audio:l,audioEl:u}){if(!C(e))return void console.error("The user is not authorized, it is impossible to add or delete audio");if(!l)throw new Error("Audio not exists");if(S(u))return;window.tooltips&&window.tooltips.hideAll();const d=(0,r.getAudioFullId)(l);if(d in i)return void await W({audioEl:u,audio:l});const h=P(o),m=(0,a.isNumber)(h)&&l.ownerId===h;if(!(0,p.isMy)({identity:l,myMusicIdentitiesMap:t,isMyMusicActionInitialized:d in n,userId:e})&&!m)throw new Error("Audio not added");if(l.isClaimed&&u?.remove(),m)return await c.deleteFx({audioEl:u,groupId:h,audio:l,needShowDeletedAudioRowState:!0}),l.isClaimed&&E.AudioUtils.deleteDeletedAudios(),B({audioEl:u,inProgress:!1}),void k.add((0,s.getGroupAudioFullId)(l,h));const[f,g]=await b.ajax.promisifiedPost("al_audio.php",{act:"delete_audio",oid:l.ownerId,aid:l.id,hash:l.deleteHash,restore:1,track_code:l.trackCode});f&&N.add({audioFullId:d,value:{data:f,message:g||""}}),await _.deleteFromMyMusicFx({audio:l,audioEl:u,forceRemoveFromStoreParams:{oldIdentity:l,newIdentity:l}}),D.add(d),l.isClaimed&&E.AudioUtils.deleteDeletedAudios(),B({audioEl:u,inProgress:!1})}});return(0,d.sample)({clock:[F,K],fn:({audioEl:e})=>({audioEl:e,inProgress:!0}),target:B}),(0,d.sample)({clock:F.finally,fn:({params:{audioEl:e}})=>({audioEl:e,inProgress:!1}),target:B}),{$myMusicIdentitiesMap:_.$myMusicIdentitiesMap,$deletedFromMyMusicAudiosIdentitiesMap:M,$deletedFromGroupAudiosIdentitiesMap:L,$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:R,toggleAddAudioFx:F,deleteAudioLegacyFx:K,setUserId:I}}function P(e){if(!(0,a.isNumber)(e.ownerId))return null;return Boolean(e.ownerId&&(0,a.isNumber)(e.ownerId)&&_.Ranges.isGroupId(e.ownerId)&&e.canAddToGroup)?(0,c.convertToGroupMusicId)(e.ownerId):null}function C(e){return(0,a.isNumber)(e)&&_.Ranges.isUserId(e)}function S(e){return Boolean(e?.dataset?.["in-progress"])}},145357:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageService:()=>s});var n=o(942451),i=o(32489),r=o(473137);const s=(0,n.makeSharedState)("global/audio/audioPage/service",(()=>(0,r.createAudioPageService)({domain:(0,i.createDomain)("global/audio/audioPage/service"),name:"global/audio/audioPage/service"})),{version:2})},525294:(e,t,o)=>{"use strict";o.d(t,{createDeleteAudiosFromMyMusicForLastWeekDataIdentities:()=>s});var n=o(32489),i=o(958955),r=o(918081);function s(e){const t=e.createStore({});return{$deleteAudiosFromMyMusicForLastWeekDataIdentitiesMap:t,deleteAudiosFromMyMusicForLastWeekDataIdentitiesMapApi:(0,n.createApi)(t,{add:(e,t)=>(0,i.addPairToMap)(e,{key:t.audioFullId,value:t.value}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},579032:(e,t,o)=>{"use strict";o.d(t,{ensureAudioPageMyAudioPlaylistsService:()=>n.ensureAudioPageMyAudioPlaylistsService,ensureAudioPageService:()=>i.ensureAudioPageService});var n=o(499012),i=o(145357)},487379:(e,t,o)=>{"use strict";o.d(t,{createAudioPlayerService:()=>d});var n=o(32489),i=o(788407),r=o(514640),s=o(13709),a=o(735477),_=o(94359),c=o(264874),l=o(281524),u=o(8520);function d(e){const t=(0,_.getEffectorServiceDomain)(e),o=t.createEvent(),d=()=>{const e=(0,i.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");return e.getPlaylistQueue()??null},p=t.createEvent(),h=t.createEvent(),m=t.createEvent(),E=t.createEvent(),f=t.createEvent(),g=t.createEvent(),y=t.createEvent(),v=t.createEvent(),w=t.createEvent(),A=t.createEvent(),b=t.createEvent(),T=t.createEvent(),I=t.createEvent(),P=t.createEvent(),C=t.createEvent(),S=t.createEvent(),O=t.createEvent(),M=t.createEvent(),D=t.createEvent(),L=(0,n.restore)(p,null),k=t.createStore(null,{updateFilter:(e,t)=>!(0,u.isEqual)(e,t)}),R=k.map((e=>e&&(0,a.audioTupleToAudioObject)(e)||null)),N=(0,n.restore)(h,!1),B=(0,n.restore)(A,!1),x=(0,n.restore)(b,null),U=(0,n.restore)(m,null),F=(0,n.restore)(f,0),W=(0,n.restore)(g,0),K=(0,n.restore)(y,0),V=(0,n.restore)(v,0),H=(0,n.restore)(w,1),j=(0,n.restore)(T,!1),G=(0,n.restore)(I,!1),q=(0,n.restore)(P,!1),$=(0,n.restore)(C,!1),Y=(0,n.restore)(S,!1),z=t.createEffect((()=>{const e=(0,i.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");h(e.isPlaying()),A(e.ads.isActive||!1),b(e.ads.getCurrentAd()||null),m(e.getCurrentPlaylist()||null),E(e.getCurrentAudio()||null),f(e.getCurrentProgress()??0),g(0),y(e.getCurrentBuffered()??0),v(e.getVolume()||0),w(s.AudioPlayer.podcastGetPlaybackRate()||1),T(Boolean(s.AudioPlayer.getDurationType())),I(Boolean(d()?.shuffled)),P(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll())),e.subscribe(r.AudioPlayerEventType.PLAYER_IS_PLAYING_CHANGED,(e=>{h(e)})),e.subscribe(r.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{m(e.getCurrentPlaylist()||null)})),e.on(this,r.AudioPlayerEventType.PLAYLIST_CLEAR_REQUESTED,(()=>{M()})),e.on(this,r.AudioPlayerEventType.PLAYLIST_CLEARED,(()=>{m(e.getCurrentPlaylist()||null),T(Boolean(s.AudioPlayer.getDurationType())),I(d()?.shuffled??!1),w(s.AudioPlayer.podcastGetPlaybackRate()||1),P(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll()))})),e.subscribe(this,r.AudioPlayerEventType.PLAYER_IS_AD_CHANGED,(t=>{A(t||!1),b(e.ads.getCurrentAd()||null)})),e.on(this,[r.AudioPlayerEventType.AD_STARTED,r.AudioPlayerEventType.AD_READY,r.AudioPlayerEventType.AD_DEINITED,r.AudioPlayerEventType.AD_COMPLETED],(()=>{A(e.ads.isActive||!1),b(e.ads.getCurrentAd()||null)})),e.on(this,[r.AudioPlayerEventType.PLAY,r.AudioPlayerEventType.PLAY_REQUESTED],(()=>{O()})),e.on(this,[r.AudioPlayerEventType.PLAY,r.AudioPlayerEventType.PLAY_REQUESTED,r.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,r.AudioPlayerEventType.CURRENT_AUDIO_DISLIKE_STATUS_UPDATE,r.AudioPlayerEventType.PLAYLIST_CLEARED,r.AudioPlayerEventType.CURRENT_CHANGED,r.AudioPlayerEventType.UPDATE],(e=>{E(e||null)})),e.subscribe(r.AudioPlayerEventType.CURRENT_RADIOSTATION_FOLLOW_STATUS_UPDATE,(e=>{D(e)})),e.subscribe(r.AudioPlayerEventType.CURRENT_CHANGED,(()=>{f(0)})),e.subscribe(r.AudioPlayerEventType.PROGRESS,((t,o)=>{S(!1),f(e.ads?.isActive?e.ads.getCurrentProgress():t),g(o)})),e.subscribe(r.AudioPlayerEventType.BUFFERED,(t=>{y(e.ads?.isActive?0:t)})),e.subscribe(r.AudioPlayerEventType.VOLUME,(e=>{v(e)})),e.on(this,r.AudioPlayerEventType.UPDATE,(()=>{T(Boolean(s.AudioPlayer.getDurationType()))})),e.on(this,r.AudioPlayerEventType.START_LOADING,(()=>{S(!0)})),e.on(this,r.AudioPlayerEventType.CAN_PLAY,(()=>{S(!1)})),e.on(this,r.AudioPlayerEventType.ENDED,(()=>{S(!1)})),e.on(this,r.AudioPlayerEventType.FAILED,(()=>{S(!1)})),p(e)})),X=(0,l.attachPlayer)(L,(async(e,t)=>{if(!t)return void e.playAudioItem();const{audio:o,playlist:n,context:i,byPlayerButton:r=!1}=t;e[r?"playByButton":"playAudioItem"].bind(e)({audio:o,playlist:n,context:i})})),Q=(0,l.attachPlayer)(L,((e,t)=>{if(!t)return void e.pauseByButton();const{byChangeChannel:o=!1}=t;e[o?"pauseByChangeChannel":"pauseByButton"].bind(e)()})),J=(0,l.attachPlayer)(L,(e=>{e.resume()})),Z=(0,l.attachPlayer)(L,(e=>{e.playNext()})),ee=(0,l.attachPlayer)(L,(e=>{e.playPrev()})),te=(0,l.attachPlayer)(L,(e=>{e.playNextByButton()})),oe=(0,l.attachPlayer)(L,(e=>{e.playPrevByButton()})),ne=(0,l.attachPlayer)(L,((e,{audioEl:t,audio:o})=>{e.setNext(t,o)})),ie=(0,l.attachPlayer)(L,((e,t)=>{e.seek(t)})),re=(0,l.attachPlayer)(L,((e,t)=>{e.seekBySlider(t)})),se=(0,l.attachPlayer)(L,((e,t)=>{e.setVolume(t)})),ae=(0,l.attachPlayer)(L,(e=>{e.toggleDurationType()})),_e=t.createEffect((()=>{I(d()?.shuffled??!1)})),ce=(0,l.attachPlayer)(L,(e=>{e.toggleRepeatCurrentAudio(),P(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll()))})),le=(0,l.attachPlayer)(L,(e=>{e.toggleRepeatAll(),P(Boolean(e.isRepeatCurrentAudio())),C(Boolean(e.isRepeatAll()))})),ue=(0,n.attach)({source:(0,n.combine)({ap:L,prevSpeed:H}),effect({ap:e,prevSpeed:t},o){if(!e)throw new Error("Audio player does not initialize");t!==o&&(e.podcastChangePlaybackRate(1!==o&&o<t),w(s.AudioPlayer.podcastGetPlaybackRate()??1))}}),de=(0,l.attachPlayer)(L,(e=>e.getCurrentPlaylist()??null)),pe=(0,l.attachPlayer)(L,((e,{audio:t,actionType:o,ref:n="",refEl:i=null})=>{e.podcastSetActionRef(t,o,n,i)})),he=(0,l.attachPlayer)(L,((e,{audioFullId:t,hasDislike:o})=>{e.updateAudioDislikeStatus(t,o)})),me=(0,l.attachPlayer)(L,((e,t)=>e?.emitter?.emit(t.eventName,t.data))),Ee=(0,l.attachPlayer)(L,((e,{eventType:t,params:o})=>e.notify(t,...o)));return(0,n.sample)({clock:(0,c.once)(o),target:z}),(0,n.sample)({clock:E,target:k}),{$isPlaying:N,$isAd:B,$currentAd:x,$currentPlaylist:U,$currentAudio:R,$currentAudioTuple:k,$progress:F,$duration:W,$loadingProgress:K,$volume:V,$negativeDurationTypeEnabled:j,$isShuffled:G,$isRepeatCurrentAudio:q,$isRepeatAll:$,$playbackSpeed:H,$isPending:Y,playFx:X,pauseFx:Q,resumeFx:J,playNextFx:Z,playPrevFx:ee,playNextByButtonFx:te,playPrevByButtonFx:oe,setNextFx:ne,seekFx:ie,seekBySliderFx:re,updateVolumeFx:se,toggleNegativeDurationTypeFx:ae,updatedIsShuffledFx:_e,toggleRepeatCurrentAudioFx:ce,toggleRepeatAllFx:le,updatePlaybackSpeedFx:ue,getCurrentPlaylistFx:de,podcastSetActionRefFx:pe,updateAudioDislikeStatusFx:he,emitFx:me,notifyFx:Ee,notifyAudioStartedPlaying:O,notifyPlaylistClearRequested:M,notifyCurrentRadioStationFollowStatusUpdate:D,init:o,getCurrentAudio:()=>{const e=(0,i.getAudioPlayer)();if(!e)throw new Error("Audio player does not initialize");const t=e.getCurrentAudio();return t?(0,a.audioTupleToAudioObject)(t):null},getPlaylistQueue:d,getPlaylist:({type:e,ownerId:t,albumId:o,accessHash:n,blockId:r})=>{const s=(0,i.getAudioPlayer)();if(!s)throw new Error("Audio player does not initialize");return s.getPlaylist(e,t,o,n,r)||null}}}},540401:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerPodcastActionType:()=>s.AudioPlayerPodcastActionType,ensureAudioPlayerService:()=>a});var n=o(942451),i=o(32489),r=o(487379),s=o(306948);const a=(0,n.makeSharedState)("global/web/audio/player",(()=>(0,r.createAudioPlayerService)({domain:(0,i.createDomain)("global/web/audio/player"),name:"audio/web/audio/player"})),{version:3})},281524:(e,t,o)=>{"use strict";o.d(t,{attachPlayer:()=>i});var n=o(32489);function i(e,t){return(0,n.attach)({source:e,effect(e,o){if(!e)throw new Error("Audio player does not initialize");return t(e,o)}})}},306948:(e,t,o)=>{"use strict";o.d(t,{AudioPlayerPodcastActionType:()=>n});var n,i=o(697034);!function(e){e[e.Play=i.ACTION_PLAY]="Play",e[e.Pause=i.ACTION_PAUSE]="Pause",e[e.Seek=i.ACTION_SEEK]="Seek",e[e.TimeMaker=i.ACTION_TIME_MARKER]="TimeMaker",e[e.Heartbeat=i.ACTION_HEARTBEAT]="Heartbeat"}(n||(n={}))},355110:(e,t,o)=>{"use strict";o.d(t,{audioPreviewsService:()=>n});const n=(0,o(398565).ensureAudioPreviewsService)()},181353:(e,t,o)=>{"use strict";o.d(t,{createGroupsMusicWebService:()=>m});var n=o(94359),i=o(611713),r=o(471027),s=o(255053),a=o(156693),_=o(32489),c=o(143219),l=o(746570),u=o(540401),d=o(514640),p=o(620626),h=o(671300);function m(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.ensureGroupsMusicService)(),m=(0,u.ensureAudioPlayerService)(),{$fullIdsMap:E,fullIdsMapApi:f}=(0,r.createFullIdsMap)(t),g=(0,_.attach)({source:(0,_.combine)({groupsMusicIdentitiesMap:o.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:n,audioEl:i=null}){if(!t)throw new Error("Audio not exists");if((0,c.isAddedToGroup)({identity:t,groupsMusicIdentitiesMap:e,groupId:n}))throw new Error(`Audio already in group with id ${n}`);const r=(0,s.getAudioFullId)(t);let a=document.querySelector(`._audio_row_${r}`);a=a==i?null:a;try{n!==t.ownerId&&i&&i.classList.add("audio_row__added"),n!==t.ownerId&&a&&a.classList.add("audio_row__added"),m.notifyFx({eventType:d.AudioPlayerEventType.ADDED,params:[r]}),await o.addFx({groupId:n,trackedIdentity:t}),i&&(i.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)),a&&(a.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(a,!1,!0)),m.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[t,Boolean(i)&&{audioElement:i}]})}catch(e){throw n!==t.ownerId&&i&&i.classList.remove("audio_row__added"),n!==t.ownerId&&a&&a.classList.remove("audio_row__added"),new Error(`Failed to add audio to group with id ${n}`,{cause:e})}}}),y=(0,_.attach)({source:(0,_.combine)({groupsMusicIdentitiesMap:o.$identitiesMap}),async effect({groupsMusicIdentitiesMap:e},{audio:t,groupId:n,audioEl:i=null,needShowDeletedAudioRowState:r}){if(!t)throw new Error("Audio not exists");const _=(0,a.getGroupAudioFullId)(t,n),c=(0,l.isGroupAudio)({identity:t,groupsMusicIdentitiesMap:e,groupId:n}),u=e[_];if(!c&&!u)throw new Error(`Audio not found in group with id ${n}`);const E=(0,s.getAudioFullId)(t),f=(0,s.getAudioFullId)(u??t);let g=document.querySelector(`._audio_row_${E}`);g=g==i?null:g;try{i&&!r&&i.classList.remove("audio_row__added"),g&&!r&&g.classList.remove("audio_row__added"),m.notifyFx({eventType:d.AudioPlayerEventType.REMOVED,params:[E,f]}),await o.deleteFx({groupId:n,audioId:u?u.id:t.id}),i&&r&&(i.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0),i.classList.remove("audio_row__added")),g&&r&&(g.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(g,!1,!0),g.classList.remove("audio_row__added"));const e=m.getPlaylist({type:p.AudioPlaylist.TYPE_PLAYLIST,ownerId:n,albumId:p.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(f),m.notifyFx({eventType:d.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[t,Boolean(i)&&{audioElement:i}]})}catch(e){throw i&&i.classList.add("audio_row__added"),i&&r&&(i.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)),g&&g.classList.add("audio_row__added"),g&&r&&(g.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(g,!1,!0)),new Error(`Failed to delete audio from group with id ${n}`,{cause:e})}}});return(0,_.sample)({clock:[g,y],filter:({audio:e})=>Boolean(e),fn:({audio:e,groupId:t})=>(0,a.getGroupAudioFullId)(e,t),target:f.add}),(0,_.sample)({clock:[g.finally,y.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e,groupId:t}})=>(0,a.getGroupAudioFullId)(e,t),target:f.remove}),{$loadingIdentitiesMap:E,$identitiesMap:o.$identitiesMap,addFx:g,deleteFx:y}}},851579:(e,t,o)=>{"use strict";o.d(t,{ensureGroupsAudioMusicWebService:()=>a,isAddedToGroup:()=>s.isAddedToGroup});var n=o(942451),i=o(32489),r=o(181353),s=o(143219);const a=(0,n.makeSharedState)("global/web/audio/groupsMusic",(()=>(0,r.createGroupsMusicWebService)({domain:(0,i.createDomain)("global/web/audio/groupsMusic"),name:"global/web/audio/groupsMusic"})),{version:3})},143219:(e,t,o)=>{"use strict";o.d(t,{isAddedToGroup:()=>r});var n=o(760325),i=o(156693);function r({identity:e,groupsMusicIdentitiesMap:t,groupId:o}){if(!e||!(0,n.isNumber)(o))return!1;return(0,i.getGroupAudioFullId)(e,o)in t}},746570:(e,t,o)=>{"use strict";o.d(t,{isGroupAudio:()=>s});var n=o(760325),i=o(248251),r=o(143219);function s({identity:e,groupsMusicIdentitiesMap:t,groupId:o}){return!(!e||!(0,n.isNumber)(o))&&(e.ownerId===(0,i.convertToGroupMusicId)(o)||(0,r.isAddedToGroup)({identity:e,groupsMusicIdentitiesMap:t,groupId:o}))}},339372:(e,t,o)=>{"use strict";o.d(t,{createMusicAudioMyDislikesService:()=>s});var n=o(255053),i=o(32489),r=o(432800);function s({domain:e,$audio:t,$audioEl:o}){const s=(0,r.ensureAudioDislikesInMyMusicWebService)(),a=o??e.createStore(null),_=t.map((e=>e&&e.id&&e.ownerId?{id:e.id,ownerId:e.ownerId,trackCode:e.trackCode}:null)),c=(0,i.combine)({identity:_,fullIdsMap:s.$dislikesInitializedIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,n.getAudioFullId)(e)])));return{$isAudioDisliked:(0,i.combine)({audio:t,myAudioDislikesIdentitiesMap:s.$dislikesIdentitiesMap,isDislikeActionInitialized:c}).map((({audio:e,myAudioDislikesIdentitiesMap:t,isDislikeActionInitialized:o})=>(0,r.hasDislike)({audio:e,dislikesIdentitiesMap:t,isDislikeActionInitialized:o}))),$isDislikeActionLoading:(0,i.combine)({identity:_,fullIdsMap:s.$dislikesLoadingIdentitiesMap}).map((({identity:e,fullIdsMap:t})=>Boolean(e&&t[(0,n.getAudioFullId)(e)]))),addFx:(0,i.attach)({source:(0,i.combine)({audio:t,audioEl:a}),async effect({audio:e,audioEl:t},o){await s.addDislikeFx({audio:e,audioEl:t,skipDeletionAudioFromMyMusic:o?.skipDeletionAudioFromMyMusic,needReloadTrackCode:o?.needReloadTrackCode})}}),removeFx:(0,i.attach)({source:(0,i.combine)({audio:t,audioEl:a}),async effect({audio:e,audioEl:t},o){await s.removeDislikeFx({audio:e,audioEl:t,needReloadTrackCode:o?.needReloadTrackCode})}})}}},478508:(e,t,o)=>{"use strict";o.d(t,{createMusicAudioMyDislikesService:()=>n.createMusicAudioMyDislikesService});var n=o(339372)},579437:(e,t,o)=>{"use strict";o.d(t,{createMyMusicWebService:()=>y});var n=o(94359),i=o(332583),r=o(919225),s=o(471027),a=o(255053),_=o(32489),c=o(540401),l=o(514640),u=o(234053),d=o(271560),p=o(620626),h=o(671300),m=o(143148),E=o(280357),f=o(145608),g=o(198155);function y(e){const t=(0,n.getEffectorServiceDomain)(e),o=(0,i.ensureMyMusicService)(),f=(0,c.ensureAudioPlayerService)(),g=new r.Emitter,{$fullIdsMap:y,fullIdsMapApi:w}=(0,s.createFullIdsMap)(t),{$fullIdsMap:A,fullIdsMapApi:b}=(0,s.createFullIdsMap)(t),T=(0,_.attach)({source:(0,_.combine)({myMusicIdentitiesMap:o.$identitiesMap,initializedIdentitiesMap:y}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:n,audioEl:i=null,isNotificationDisabled:r,forceAddToStoreParams:s,needReloadTrackCode:_,audioRef:c}){if(!n)throw new Error("Audio not exist");const p=Boolean(t[(0,a.getAudioFullId)(n)]);if((0,u.isMy)({identity:n,myMusicIdentitiesMap:e,isMyMusicActionInitialized:p,userId:window.vk.id}))throw new Error('Audio already in "My Music"');const m=(0,a.getAudioFullId)(n);let E=document.querySelector(`._audio_row_${m}`);E=E==i?null:E;let y=!1,w=!1;i&&(i.closest(".CatalogBlock__my_audios_block")||i.closest(".CatalogBlock__my_audios"))&&(y=!0),E&&(E.closest(".CatalogBlock__my_audios_block")||E.closest(".CatalogBlock__my_audios"))&&(w=!0);try{i&&!y&&i.classList.add("audio_row__added"),E&&!w&&E.classList.add("audio_row__added"),f.notifyFx({eventType:l.AudioPlayerEventType.ADDED,params:[m]});let e=n.trackCode;const t=n.context;if(_){const t=await v(n,i,c);t&&(e=t)}s?o.addToStore(s):await o.addFx({userId:window.vk.id,trackedIdentity:{...n,ref:t,trackCode:e}}),i&&y&&(i.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)),E&&w&&(E.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(E,!1,!0)),r||g.emit(d.MyMusicWebServiceEventType.AudioAddedToMyMusic),f.notifyFx({eventType:l.AudioPlayerEventType.MUSIC_AUDIOS_ADD,params:[n,Boolean(i)&&{audioElement:i}]})}catch(e){throw i&&(i.classList.remove("audio_row__added"),y&&(i.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0))),E&&(E.classList.remove("audio_row__added"),w&&(E.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0))),new Error('Failed to add audio to "My Music"',{cause:e})}}}),I=(0,_.attach)({source:(0,_.combine)({myMusicIdentitiesMap:o.$identitiesMap,initializedIdentitiesMap:y}),async effect({myMusicIdentitiesMap:e,initializedIdentitiesMap:t},{audio:n,audioEl:i=null,forceRemoveFromStoreParams:r,audioRef:s,needReloadTrackCode:_}){if(!n)throw new Error("Audio not exist");const c=(0,a.getAudioFullId)(n),d=Boolean(t[c]),g=(0,u.isMy)({identity:n,myMusicIdentitiesMap:e,isMyMusicActionInitialized:d,userId:window.vk.id}),y=e[c];if(!g&&!y)throw new Error('Audio not found in "My Music"');let w=document.querySelector(`._audio_row_${c}`);w=w==i?null:w;let A=!1,b=!1;i&&(i.closest(".CatalogBlock__my_audios_block")||i.closest(".CatalogBlock__my_audios"))&&(A=!0),w&&(w.closest(".CatalogBlock__my_audios_block")||w.closest(".CatalogBlock__my_audios"))&&(b=!0);const T=(0,a.getAudioFullId)(y??n);try{i&&i.classList.remove("audio_row__added"),w&&w.classList.remove("audio_row__added"),f.notifyFx({eventType:l.AudioPlayerEventType.REMOVED,params:[c,T]}),r?o.removeFromStore(r):await o.deleteFx({identity:y??n}),_?v(n,i,s).then((e=>{(0,m.onAdditionalEvent)(i,n,{type:E.TYPE_REMOVED,trackCode:e||n.trackCode})})):(0,m.onAdditionalEvent)(i,n,{type:E.TYPE_REMOVED,trackCode:n.trackCode}),i&&A&&(i.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)),w&&b&&(w.classList.add("audio_row__deleted"),h.AudioUtils.onRowOver(w,!1,!0));const e=f.getPlaylist({type:p.AudioPlaylist.TYPE_PLAYLIST,ownerId:window.vk.id,albumId:p.AudioPlaylist.DEFAULT_PLAYLIST_ID});e&&e.removeAudio(T),f.notifyFx({eventType:l.AudioPlayerEventType.MUSIC_AUDIOS_DELETE,params:[n,Boolean(i)&&{audioElement:i}]})}catch(e){throw i&&(A?(i.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)):i.classList.add("audio_row__added")),w&&(b?(w.classList.remove("audio_row__deleted"),h.AudioUtils.onRowOver(i,!1,!0)):w.classList.add("audio_row__added")),new Error('Failed to delete audio from "My Music"',{cause:e})}}});return(0,_.sample)({clock:[T.done,I.done],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:w.add}),(0,_.sample)({clock:[T,I],filter:({audio:e})=>Boolean(e),fn:({audio:e})=>(0,a.getAudioFullId)(e),target:b.add}),(0,_.sample)({clock:[T.finally,I.finally],filter:({params:{audio:e}})=>Boolean(e),fn:({params:{audio:e}})=>(0,a.getAudioFullId)(e),target:b.remove}),{$initializedIdentitiesMap:y,$loadingIdentitiesMap:A,$identitiesMap:o.$identitiesMap,addFx:T,deleteFx:I,events:g.listenable}}async function v(e,t,o){const n=(0,g.getContextPlaylist)(t)??{context:o,playlist:null};return await(0,f.getAudioTrackCodeFromPlaylist)(n?.playlist,e)??null}},271560:(e,t,o)=>{"use strict";var n;o.d(t,{MyMusicWebServiceEventType:()=>n}),function(e){e.AudioAddedToMyMusic="audioAddedToMyMusic"}(n||(n={}))},753421:(e,t,o)=>{"use strict";o.d(t,{ensureMyAudioMusicWebService:()=>a,isMy:()=>s.isMy});var n=o(942451),i=o(32489),r=o(579437),s=o(234053);const a=(0,n.makeSharedState)("global/web/audio/myMusic",(()=>(0,r.createMyMusicWebService)({domain:(0,i.createDomain)("global/web/audio/myMusic"),name:"global/web/audio/myMusic"})),{version:3})},234053:(e,t,o)=>{"use strict";o.d(t,{isMy:()=>i});var n=o(255053);function i({identity:e,myMusicIdentitiesMap:t,isMyMusicActionInitialized:o,userId:i}){if(!e)return!1;return(0,n.getAudioFullId)(e)in t||!o&&e.ownerId===i}},702203:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipApplication:()=>s});var n=o(474848),i=o(505954),r=o(234570);function s({target:e,portalRoot:t,onShownChange:o}){return(0,n.jsx)(i.AppRootProvider,{children:(0,n.jsx)(r.AudioRowMoreTooltipContainer,{onShownChange:o,target:e,portalRoot:t})})}},667962:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>m});var n=o(434518),i=o(763812),r=o(410796),s=o(702203),a=o(919225),_=o(942451),c=o(988365),l=(0,i._)("_initiator"),u=(0,i._)("_emitter"),d=(0,i._)("_target"),p=(0,i._)("_checkIsMounted"),h=(0,i._)("_handleShownChange");class m{get isMounted(){return(0,n._)(this,p)[p]()}get events(){return(0,n._)(this,u)[u].listenable}mount(e,t){(0,n._)(this,p)[p](e)||((0,n._)(this,d)[d]=e),(0,n._)(this,l)[l].render({target:e,portalRoot:t,onShownChange:(0,n._)(this,h)[h]})}unmount(){(0,n._)(this,p)[p]()&&(0,n._)(this,l)[l].unmount(),(0,n._)(this,d)[d]=null,(0,n._)(this,u)[u].emit(c.AudioRowMoreTooltipControllerEventType.Closed)}constructor(){Object.defineProperty(this,p,{value:E}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),(0,n._)(this,l)[l]=(0,r.createReactInitiator)(s.AudioRowMoreTooltipApplication),(0,n._)(this,u)[u]=new a.Emitter,(0,n._)(this,d)[d]=null,(0,n._)(this,h)[h]=e=>{this.isShown=e,e||(0,n._)(this,u)[u].emit(c.AudioRowMoreTooltipControllerEventType.Closed)}}}function E(e){return(!e||e===(0,n._)(this,d)[d])&&(0,n._)(this,l)[l].isMounted()}m.ensure=(0,_.makeSharedState)("audio/audioPage/audioRow/moreTooltip/controller",(()=>new m),{version:2})},879036:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>i.AudioRowMoreTooltipControllerEventType});var n=o(667962),i=o(988365)},988365:(e,t,o)=>{"use strict";var n;o.d(t,{AudioRowMoreTooltipControllerEventType:()=>n}),function(e){e.Closed="closed"}(n||(n={}))},568755:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>M});var n=o(474848),i=o(349826),r=o(234337),s=o(106412),a=o(575489),_=o(485749),c=o(203788),l=o(223173),u=o(136017),d=o(715782),p=o(684540),h=o(694430),m=o(168799),E=o(293721),f=o(933933),g=o(296540),y=o(610989),v=o(476726),w=o(207099),A=o(433387),b=o(760325),T=o(302495);const I=(0,v.partConfigEnabled)("audio_longtap_web"),P=(0,v.partConfigEnabled)("audio_tooltip_copy_link_web"),C=(0,v.partConfigEnabled)("dislikes_web_enabled")||(0,v.partConfigEnabled)("redesign_audio_player_tooltip_dislikes_web_enabled"),S=(0,f.ensureAudioRowMoreTooltipService)(),{dislikesService:O}=S;function M({target:e,portalRoot:t=null,onShownChange:o}){const f=(0,E.useUnit)(S.setIsShowTooltip),v=(0,E.useUnit)(S.$audio),M=(0,E.useUnit)(S.$isAudioClaimed),D=(0,E.useUnit)(S.$isEpisode),L=(0,E.useUnit)(S.$isAlbum),k=(0,E.useUnit)(S.$isCurrentAlbumSnippet),R=(0,E.useUnit)(S.$isAudioHasSnippet),N=(0,E.useUnit)(S.$audioPlaylists),B=(0,E.useUnit)(S.$isShowAllPlaylists),x=(0,E.useUnit)(S.$isAudioPlaylistsFetching),U=(0,E.useUnit)(S.$loadingAddToPlaylistFullIdsMap),F=(0,E.useUnit)(S.$addedPlaylistsFullIdsMap),W=(0,E.useUnit)(S.$initializedPlaylistsFullIdsMap),K=(0,E.useUnit)(S.$currentGroupId),V=(0,E.useUnit)(O.$isAudioDisliked),H=(0,E.useUnit)(O.$isDislikeActionLoading),j=(0,E.useUnit)(S.copyAudioLinkFx),G=(0,E.useUnit)(S.shareAudioFx),q=(0,E.useUnit)(S.openEpisodeFx),$=(0,E.useUnit)(S.openAlbumFx),Y=(0,E.useUnit)(S.setNextInPlayerQueueFx),z=(0,E.useUnit)(O.addFx),X=(0,E.useUnit)(O.removeFx),Q=(0,E.useUnit)(S.addAudioToNewPlaylistFx),J=(0,E.useUnit)(S.toggleAddAudioToPlaylistFx),Z=(0,E.useUnit)(S.showAllPlaylistsFx),ee=(0,g.useMemo)((()=>V?"audio-show-more-tooltip-remove-dislike-button":"audio-show-more-tooltip-add-dislike-button"),[V]);return(0,g.useEffect)((()=>()=>{f(!1),o(!1)}),[]),(0,n.jsx)(i.DropdownActionSheet,{portalRoot:t,action:"hover",restoreFocus:!1,content:(0,n.jsxs)(n.Fragment,{children:[I&&R&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(a.Icon20ListPlayOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.LISTEN_NEXT,v?.trackCode),Y()),"data-testid":"audio-row-more-tooltip-set-next-audio",children:y.getLang("audio_set_next_audio")}),P&&!M&&!D&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(_.Icon20CopyOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.COPY_LINK,v?.trackCode),j()),"data-testid":"audio-row-more-tooltip-copy-audio-link",keepOpen:!0,children:y.getLang("audio_copy_audio_link")}),D&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(c.Icon20PodcastOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:q,"data-testid":"audio-row-more-tooltip-podcast-open-episode",children:y.getLang("audio_podcast_open_episode")}),!M&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(l.Icon20ShareOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.SHARE,v?.trackCode),G()),"data-testid":"audio-row-more-tooltip-share-audio",children:y.getLang("audio_share_audio")}),C&&!M&&!D&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:V?(0,n.jsx)(u.Icon20ThumbsDown,{className:(0,r.getColorClass)("color_icon_secondary")}):(0,n.jsx)(d.Icon20ThumbsDownOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),keepOpen:V,onClick:()=>{if(V)return(0,T.logSearchAudioClick)(T.SearchClickActionMap.REMOVE_DISLIKE,v?.trackCode),void X({needReloadTrackCode:!0});(0,T.logSearchAudioClick)(T.SearchClickActionMap.DISLIKE,v?.trackCode),z({skipDeletionAudioFromMyMusic:(0,b.isNumber)(K),needReloadTrackCode:!0})},disabled:H,"data-testid":ee,children:y.getLang("audio_action_dislike")}),!M&&L&&!k&&(0,n.jsx)(i.DropdownActionSheet.Item,{before:(0,n.jsx)(p.Icon20VinylOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.OPEN_ALBUM,v?.trackCode),$()),"data-testid":"audio-row-more-tooltip-open-album",children:y.getLang("audio_open_album")}),!M&&!D&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.DropdownActionSheet.Separator,{}),(0,n.jsx)(s.DropdownActionSubSheet,{before:(0,n.jsx)(a.Icon20ListPlayOutline,{className:(0,r.getColorClass)("color_icon_secondary")}),loading:x,disabled:x,sheet:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.DropdownActionSubSheet.Item,{disabled:x,before:(0,n.jsx)(h.Icon24Add,{className:(0,r.getColorClass)("color_icon_secondary")}),onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.ADD_TO_PLAYLIST,v?.trackCode),Q()),"data-testid":"audio-row-more-tooltip-add-to-new-playlist",children:y.getLang("audio_add_to_new_pl")}),N?.map(((e,t)=>{if(!v||!e)return null;const o=(0,w.getAudioPlaylistId)(v.id,e.id),i=o in W?o in F:e.hasTargetAudio;return(0,n.jsx)(g.Fragment,{children:(0,n.jsx)(s.DropdownActionSubSheet.Item,{keepOpen:!0,loading:!!v&&o in U,before:i?(0,n.jsx)(m.Icon20Check,{className:(0,r.getColorClass)("color_icon_secondary")}):null,onClick:()=>((0,T.logSearchAudioClick)(T.SearchClickActionMap.ADD_TO_PLAYLIST,v?.trackCode),J(e)),"data-testid":"audio-row-more-tooltip-add-to-playlist",children:e.title??""})},null===e.id?t:e.id)})),B&&(0,n.jsx)(s.DropdownActionSubSheet.Item,{onClick:Z,"data-testid":"audio-row-more-tooltip-show-all-playlists",children:y.getLang("audio_row_show_all_playlists")})]}),children:y.getLang("audio_add_to_playlist")})]})]}),onShownChange:e=>{f(e),o(e)},children:(0,n.jsx)(A.ForwardElementRef,{element:e})})}},141550:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=o(568755)},234570:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipContainer:()=>n.AudioRowMoreTooltipContainer});var n=o(141550)},402409:(e,t,o)=>{"use strict";o.d(t,{AudioRowMoreTooltipController:()=>n.AudioRowMoreTooltipController,AudioRowMoreTooltipControllerEventType:()=>n.AudioRowMoreTooltipControllerEventType,ensureAudioRowMoreTooltipService:()=>i.ensureAudioRowMoreTooltipService});var n=o(879036),i=o(933933)},508722:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataService:()=>w});var n=o(624216),i=o(119265),r=o(8520),s=o(32489),a=o(477810),_=o(842225),c=o(255053),l=o(471027),u=o(562984),d=o(625523),p=o(823103),h=o(671300),m=o(143148),E=o(280357),f=o(20025),g=o(30052),y=o(207099),v=o(278758);function w({domain:e,$audio:t,$audioTuple:o,$audioEl:p,$isShowTooltip:w}){const T=i.AudioPageProxy.ensure(),I=(0,_.ensureMyAudioPlaylistsService)(),P=e.createEvent(),C=t.map((e=>e&&e.id&&e.ownerId?(0,c.getAudioFullId)({id:e.id,ownerId:e.ownerId}):null)),{$audioPlaylistsDataMap:S,audioPlaylistsDataMapApi:O}=(0,a.createAudioPlaylistsDataMap)(e),{$fullIdsMap:M,fullIdsMapApi:D}=(0,l.createFullIdsMap)(e),{$fullIdsMap:L,fullIdsMapApi:k}=(0,l.createFullIdsMap)(e),{$fullIdsMap:R,fullIdsMapApi:N}=(0,l.createFullIdsMap)(e),{$fullIdsMap:B,fullIdsMapApi:x}=(0,l.createFullIdsMap)(e),U=(0,s.combine)({audioFullId:C,audioPlaylistsDataMap:S}).map((({audioFullId:e,audioPlaylistsDataMap:t})=>Boolean(e)&&(0,r.isString)(e)?t[e]??null:null)),{$audioPlaylists:F,$isShowAllPlaylists:W,$newPlaylistHash:K}=(0,d.reshape)({source:U,shape:{$audioPlaylists:e=>e?.playlists||[],$isShowAllPlaylists:e=>e?.isShowAllPlaylists||!1,$newPlaylistHash:e=>e?.newPlaylistHash||null}}),V=(0,s.combine)({audioFullId:C,loadingFetchingFullIdsMap:M}).map((({audioFullId:e,loadingFetchingFullIdsMap:t})=>!!e&&Boolean(t[e]))),H=e.createEffect((async e=>{if(!e)throw new Error("Audio not exists");const t=b(T);try{const o=await n.ajax.promisifiedPost("al_audio.php",{act:"playlists_by_audio",owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id});if(!o)throw new Error("Unknown error when fetching playlists by audio");const[i,r,s]=o;return{playlists:(i||[]).map(A),isShowAllPlaylists:r||!1,newPlaylistHash:s||null}}catch(e){throw new Error("Error when fetching playlists by audio",{cause:e})}})),j=(0,s.attach)({source:t,effect:async e=>H(e)}),G=(0,s.attach)({source:(0,s.combine)({audioTuple:o,newPlaylistHash:K}),effect({audioTuple:e,newPlaylistHash:t}){if(!e)throw new Error("Audio not exists");if(!t)throw new Error("Playlist hash not exists");const o=b(T);h.AudioUtils.editPlaylist(o,!1,"edit",{addAudio:e,newPlaylistHash:t,onSavePlaylistDone(){P()}})}}),q=(0,s.attach)({source:(0,s.combine)({audioEl:p,addedPlaylistsFullIdsMap:R,initializedPlaylistsFullIdsMap:B,addedAudiosMap:I.$addedAudiosMap}),async effect({audioEl:e,addedPlaylistsFullIdsMap:t,initializedPlaylistsFullIdsMap:o,addedAudiosMap:n},{audio:i,playlist:r}){if(!i||!e)throw new Error("Audio not exists");const s=(0,y.getAudioPlaylistId)(i.id,r.id),a=s in o?s in t:r.hasTargetAudio;if(I.setUserId(window.vk.id),a){const e=n[(0,u.getPlaylistAudioFullId)({playlist:{id:r.id,ownerId:r.ownerId},originalAudio:i})]??{id:i.id,ownerId:window.vk.id};await I.deleteAudioFx({originalAudioIdentity:i,audioIdentity:e,playlistId:r.id})}else await I.addAudioFx({audioIdentity:i,playlistId:r.id});(0,m.onAdditionalEvent)(e,i,{type:a?E.TYPE_REMOVED:E.TYPE_ADDED,subtype:E.SUBTYPE_PLAYLIST})}}),$=(0,s.attach)({source:t,async effect(e,t){await q({audio:e,playlist:t})}}),Y=(0,s.attach)({source:F,async effect(e,t){if(e&&t){for(const o of e){const e=(0,y.getAudioPlaylistId)(t.id,o.id);k.remove(e),N.remove(e),x.remove(e)}O.remove((0,c.getAudioFullId)(t))}}}),z=(0,s.attach)({source:t,effect(e){if(!e)throw new Error("Audio not exists");const t=b(T);(0,f.showBox)("al_audio.php?act=more_playlists_add",{owner_id:t,audio_owner_id:e.ownerId,audio_id:e.id},{params:{bodyStyle:"padding: 0px",width:560},onDone(){Y(e)}})}});return(0,s.sample)({source:U,clock:(0,s.combine)({audio:t,isShowTooltip:w}),filter:(e,{isShowTooltip:t,audio:o})=>t&&!e&&Boolean(o),target:j}),(0,s.sample)({source:C,clock:j.doneData,filter:e=>Boolean(e),fn:(e,t)=>({audioFullId:e,playlistsData:t}),target:O.add}),(0,s.sample)({clock:H,filter:e=>Boolean(e),fn:e=>(0,c.getAudioFullId)({id:e.id,ownerId:e.ownerId}),target:D.add}),(0,s.sample)({clock:H.finally,filter:({params:e})=>Boolean(e),fn:({params:e})=>{const t=e;return(0,c.getAudioFullId)({id:t.id,ownerId:t.ownerId})},target:D.remove}),(0,s.sample)({clock:q,filter:({audio:e,playlist:t})=>Boolean(e)&&Boolean(t),fn:({audio:e,playlist:t})=>(0,y.getAudioPlaylistId)(e.id,t.id),target:k.add}),(0,s.sample)({clock:q.finally,filter:({params:{audio:e,playlist:t}})=>Boolean(e)&&Boolean(t),fn:({params:e})=>{const{audio:t,playlist:o}=e;return(0,y.getAudioPlaylistId)(t.id,o.id)},target:k.remove}),(0,s.sample)({source:(0,s.combine)({addedPlaylistsFullIdsMap:R,initializedPlaylistsFullIdsMap:B}),clock:q.done,filter:(e,{params:{audio:t,playlist:o}})=>Boolean(t)&&Boolean(o),fn:({addedPlaylistsFullIdsMap:e,initializedPlaylistsFullIdsMap:t},{params:o})=>{const{audio:n,playlist:i}=o,r=(0,y.getAudioPlaylistId)(n.id,i.id);return{added:r in t?r in e:i.hasTargetAudio,audioPlaylistId:r}},target:[x.add.prepend((({audioPlaylistId:e})=>e)),(0,g.condition)({if:({added:e})=>e,then:N.remove.prepend((({audioPlaylistId:e})=>e)),else:N.add.prepend((({audioPlaylistId:e})=>e))})]}),(0,v.reset)({clock:P,target:[S,M,L,B,R]}),{$audioPlaylists:F,$isShowAllPlaylists:W,$isAudioPlaylistsFetching:V,$loadingAddToPlaylistFullIdsMap:L,$addedPlaylistsFullIdsMap:R,$initializedPlaylistsFullIdsMap:B,addAudioToNewPlaylistFx:G,toggleAddAudioToPlaylistFx:$,showAllPlaylistsFx:z}}function A(e){return{ownerId:+e[p.AudioPlaylistTupleKeys.OwnerId],id:+e[p.AudioPlaylistTupleKeys.Id],title:e[p.AudioPlaylistTupleKeys.Title]||null,hasTargetAudio:e[p.AudioPlaylistTupleKeys.HasTargetAudio]||!1,actionHash:e[p.AudioPlaylistTupleKeys.ActionHash]||null}}function b(e){let t;return t=(0,r.isNumber)(e.ownerId)&&e.ownerId<0&&e.canEditGroup?e.ownerId:window.vk.id,t}},207099:(e,t,o)=>{"use strict";function n(e,t){return`${e}_${t}`}o.d(t,{getAudioPlaylistId:()=>n})},689046:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataService:()=>n.createAudioPlaylistsDataService});var n=o(508722)},477810:(e,t,o)=>{"use strict";o.d(t,{createAudioPlaylistsDataMap:()=>s});var n=o(32489),i=o(958955),r=o(918081);function s(e){const t=e.createStore({});return{$audioPlaylistsDataMap:t,audioPlaylistsDataMapApi:(0,n.createApi)(t,{add:(e,{audioFullId:t,playlistsData:o})=>(0,i.addPairToMap)(e,{key:t,value:o}),remove:(e,t)=>(0,r.removePairFromMap)(e,t)})}}},823103:(e,t,o)=>{"use strict";var n;o.d(t,{AudioPlaylistTupleKeys:()=>n}),function(e){e[e.OwnerId=0]="OwnerId",e[e.Id=1]="Id",e[e.Title=2]="Title",e[e.HasTargetAudio=3]="HasTargetAudio",e[e.ActionHash=4]="ActionHash"}(n||(n={}))},883028:(e,t,o)=>{"use strict";o.d(t,{createAudioRowMoreTooltipService:()=>h});var n=o(94359),i=o(919225),r=o(760325),s=o(32489),a=o(810780),_=o(671300),c=o(119265),l=o(478508),u=o(689046),d=o(540401),p=o(781352);function h(e){const t=(0,n.getEffectorServiceDomain)(e),o=c.AudioPageProxy.ensure(),h=(0,d.ensureAudioPlayerService)(),E=new i.Emitter,f=(0,s.createEvent)(),g=t.createEvent(),y=t.createEvent(),v=(0,s.restore)(g,!1),w=t.createStore(null),A=t.createStore(null),b=t.createStore(null),T=t.createStore(null),I=t.createStore(null),P=(0,s.restore)(y,null),{$audioPlaylists:C,$isShowAllPlaylists:S,$isAudioPlaylistsFetching:O,$loadingAddToPlaylistFullIdsMap:M,$addedPlaylistsFullIdsMap:D,$initializedPlaylistsFullIdsMap:L,addAudioToNewPlaylistFx:k,toggleAddAudioToPlaylistFx:R,showAllPlaylistsFx:N}=(0,u.createAudioPlaylistsDataService)({domain:t,$audio:A,$audioEl:w,$audioTuple:b,$isShowTooltip:v}),B=A.map((e=>!!e&&Boolean(e?.isClaimed))),x=A.map((e=>!!e&&Boolean(_.AudioUtils.isPodcast(e)))),U=A.map((e=>!!e&&Boolean(e?.album))),F=A.map((e=>!!e&&Boolean(e?.isCurrentAlbumSnippet))),W=(0,s.combine)({audioEl:w,audio:A}).map((({audioEl:e,audio:t})=>{if(!e||!t)return!1;const o=_.AudioUtils.getContextPlaylist(e,!0),[n,i]=_.AudioUtils.contextSplit(o);if(!n||"my_audios_block"===i)return Boolean(t?.isInSnippet);switch(n){case"search_results":case"catalog":case"album_page":case"my":case"module":case"user_list":case"group_list":case"edit_playlist":return!0}return Boolean(t?.isInSnippet)})),K=(0,l.createMusicAudioMyDislikesService)({domain:t,$audio:A,$audioEl:w}),V=(0,s.attach)({source:(0,s.combine)({audio:A,audioLinkPathname:T,audioAccessKey:I}),async effect({audio:e,audioLinkPathname:t,audioAccessKey:o}){if(!e)throw new Error("Audio not exist");t?await _.AudioUtils.copyAudioLink(t):await _.AudioUtils.copyAudioLinkByIdentity(e,o??""),E.emit(p.AudioRowMoreTooltipServiceEventType.AudioLinkCopied,e)}}),H=(0,s.attach)({source:(0,s.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&_.AudioUtils.shareAudio(e??!1,n)}}),j=(0,s.attach)({source:(0,s.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&_.AudioUtils.openEpisode(e??!1,n)}}),G=(0,s.attach)({source:(0,s.combine)({audioEl:w,currentAudio:A}),effect:({audioEl:e,currentAudio:t})=>{const n=t||o.readyAudio;if(!e||!n)throw new Error("Audio not exist");n&&_.AudioUtils.showAudioAlbum(e??!1,n)}}),q=(0,s.attach)({source:(0,s.combine)({audioEl:w,audio:A}),effect:({audioEl:e,audio:t})=>{if(!e||!t)throw new Error("Audio not exist");t&&h.setNextFx({audioEl:e,audio:t})}}),$=(0,s.attach)({source:A,async effect(e){if(!e)throw new Error("Audio not exists");const t=o.ownerId&&(0,r.isNumber)(o.ownerId)&&o.ownerId<0&&o.canAddToGroup&&o.ownerId!==e.ownerId;y(t?-o.ownerId:null)}});return(0,a.spread)({source:f.map(m),targets:{audioEl:w,audioTuple:b,audio:A,audioLinkPathname:T,audioAccessKey:I}}),o.events.on(c.AudioPageEventType.Updated,(()=>{$()})),{init:f,$audio:A,$audioEl:w,$isAudioClaimed:B,$isEpisode:x,$isAlbum:U,$isCurrentAlbumSnippet:F,$isAudioHasSnippet:W,$audioPlaylists:C,$isShowAllPlaylists:S,$isAudioPlaylistsFetching:O,$loadingAddToPlaylistFullIdsMap:M,$addedPlaylistsFullIdsMap:D,$initializedPlaylistsFullIdsMap:L,$currentGroupId:P,setIsShowTooltip:g,copyAudioLinkFx:V,shareAudioFx:H,openEpisodeFx:j,openAlbumFx:G,setNextInPlayerQueueFx:q,addAudioToNewPlaylistFx:k,toggleAddAudioToPlaylistFx:R,showAllPlaylistsFx:N,dislikesService:K,events:E.listenable}}function m(e){return{audioEl:e.audioEl??null,audio:e.audio??null,audioTuple:e.audioTuple,audioLinkPathname:e?.audioLinkPathname||e.audio?.trackPageId||null,audioAccessKey:e?.audioAccessKey||null}}},781352:(e,t,o)=>{"use strict";var n;o.d(t,{AudioRowMoreTooltipServiceEventType:()=>n}),function(e){e.AudioLinkCopied="audioLinkCopied"}(n||(n={}))},933933:(e,t,o)=>{"use strict";o.d(t,{ensureAudioRowMoreTooltipService:()=>s});var n=o(942451),i=o(32489),r=o(883028);const s=(0,n.makeSharedState)("audio/audioPage/audioRow/moreTooltip",(()=>(0,r.createAudioRowMoreTooltipService)({domain:(0,i.createDomain)("audio/audioPage/audioRow/moreTooltip"),name:"audio/audioPage/audioRow/moreTooltip"})),{version:3})},433387:(e,t,o)=>{"use strict";o.d(t,{ForwardElementRef:()=>n});const n=(0,o(296540).forwardRef)((function({element:e,getRootRef:t},o){return t&&i(t,e),i(o,e),null}));function i(e,t){e&&("function"==typeof e?e(t):e.current=t)}},856826:(e,t,o)=>{"use strict";o.d(t,{SaveUserForQuickLoginBox:()=>h});var n=o(474848),i=o(296540),r=o(610989),s=o(581903),a=o(272259),_=o(209642),c=o(125852),l=o(416124),u=o(785118),d=o(966576),p=o(533048);const h=({logoutUrl:e,onLogout:t,onClose:o})=>{const[h,m]=(0,i.useState)(!0),E=()=>{s.vkConnectNavigationCollector.logCancelOnExit(),o()};return(0,i.useEffect)((()=>{s.vkConnectNavigationCollector.logSaveLoginModalShow()}),[]),(0,n.jsxs)(_.ModalBox,{children:[(0,n.jsx)(c.ModalHeader,{onClose:E,closeAriaLabel:r.getLang("global_close"),children:r.getLang("vkconnect_logout_save_user_dialog_title")}),(0,n.jsx)(l.ModalBody,{insetLevel:1,children:(0,n.jsx)(u.Div,{children:(0,n.jsx)(a.SettingsCellSwitch,{description:r.getLang("vkconnect_logout_save_user_dialog_description_text"),checked:h,onChange:e=>m(e.target.checked),children:r.getLang("vkconnect_logout_save_user_dialog_description_title")})})}),(0,n.jsx)(d.ModalFooter,{actionButtons:[(0,n.jsx)(p.Button,{size:"s",mode:"secondary",onClick:E,children:r.getLang("global_cancel")},"close"),(0,n.jsx)(p.Button,{size:"s",mode:"primary",onClick:()=>{let o="&save_user=0";h&&(o="&save_user=1"),t(`${e}${o}`)},children:r.getLang("global_head_logout")},"logout")]})]})}},646387:(e,t,o)=>{"use strict";o.d(t,{logout:()=>a,logoutWithDialog:()=>c});var n=o(474848),i=o(933052),r=o(856826),s=o(272259);const a=(e,t)=>{(0,i.removeLoginCache)(e,t)},_=e=>{a(),window.location.href=e},c=e=>{(0,i.login)("check_user_saved").then((t=>{const{feature_enabled:o,is_user_saved:i}=t;o&&!i?(0,s.showMessageBoxModal)((t=>(0,n.jsx)(r.SaveUserForQuickLoginBox,{...t,logoutUrl:e,onLogout:_})),{width:420}):_(e)})).catch((()=>{_(e)}))}},187465:(e,t,o)=>{"use strict";o.d(t,{writeLogout:()=>a});var n=o(490712),i=o(368759),r=o(832813),s=o(935037);const a=(e="unknown",t="",o="")=>{if(!t)return;let a=0;try{const e=(0,i.imDbGet)(window.vk.id);Object.entries(e).forEach((function(e){const t=e[0],o=e[1];t.startsWith("draft_")&&(o.txt||o.attaches&&o.attaches.length)&&a++}))}catch(e){}o&&((0,r.logSwitcherDropAccount)(o),localStorage.setItem(s.NOTIFY_SWITCH_KEY,"0")),(0,r.prepareLogSwitchAccountEvent)(),(0,n.statlogsValueEvent)("logout_stat",e,t,a)}},186301:(e,t,o)=>{"use strict";o.d(t,{handleCaptcha:()=>s});var n=o(20025),i=o(476726),r=o(816475);const s=e=>new Promise((t=>{if((0,i.partConfigEnabled)("vkcom_audio_captcha_enabled"))(0,r.showCaptchaPopup)({sid:e.captcha_sid,isRefreshEnabled:e.is_refresh_enabled,isSoundCaptchaAvailable:e.is_sound_captcha_available,isUiuxChangesEnabled:e.uiux_changes,captcha_track:e.captcha_track,captcha_img:e.captcha_img,onSubmit:(o,n)=>{t({captcha_sid:e.captcha_sid,captcha_key:o,is_sound_captcha:n})}});else{let o=null;const r=(0,i.partConfigEnabled)("vkcom_captcha_resized")?`${e.captcha_img}&resized=1&width=400`:e.captcha_img,s=e?.is_refresh_enabled||!1,a={imgSrc:r,onSubmit:(e,n)=>{t({captcha_sid:e,captcha_key:n,is_sound_captcha:0}),o&&o.hide()}};o=(0,n.showCaptchaBox)(e.captcha_sid,!1,null,a,s)}}))},816475:(e,t,o)=>{"use strict";o.d(t,{showCaptchaPopup:()=>n.showCaptchaPopup});var n=o(766338)},506537:(e,t,o)=>{"use strict";o.d(t,{CaptchaType:()=>n.CaptchaType,Platform:()=>n.Platform,captchaPopupService:()=>i});var n=o(161882);const i=(0,n.createCaptchaPopupService)()},766338:(e,t,o)=>{"use strict";o.d(t,{showCaptchaPopup:()=>s});var n=o(474848),i=o(272259),r=o(121939);function s(e){(0,i.showMessageBoxModal)((t=>(0,n.jsx)(r.CaptchaPopup,{...t,...e,onClose:()=>{e.onClose&&e.onClose(),t.onClose()},onSubmit:(o,n)=>{e.onSubmit&&(e.onSubmit(o,n),t.onClose())}})),{width:300})}},705333:(e,t,o)=>{"use strict";o.d(t,{CaptchaAnswerField:()=>l});var n=o(474848),i=o(296540),r=o(529558),s=o(753457),a=o(506537),_=o(610989),c=o(293721);const l=(0,i.forwardRef)((({disabled:e,captchaType:t,isUiuxChangesEnabled:o},l)=>{const u=(0,i.useRef)(null),d=(0,i.useRef)(null),p=(0,c.useStore)(a.captchaPopupService.$answer),h=(0,c.useEvent)(a.captchaPopupService.answerChanged),m=!!o&&t===a.CaptchaType.AUDIO,E=t===a.CaptchaType.IMAGE?_.getLang("vkconnect_auth_label_captcha"):o?_.getLang("vkconnect_auth_label_captcha_audio_new_ux"):_.getLang("vkconnect_auth_label_captcha_audio");return(0,i.useImperativeHandle)(l,(()=>({inputFieldRef:u,inputLabelRef:d}))),(0,n.jsx)(r.FormItem,{mode:"vertical",noPadding:!0,top:m?(0,n.jsx)("div",{tabIndex:0,ref:d,children:_.getLang("vkconnect_auth_audio_captcha_title")}):"",children:(0,n.jsx)(s.Input,{getRef:u,tabIndex:0,value:p,placeholder:E,disabled:e,onChange:e=>h(e.target.value)})})}))},473735:(e,t,o)=>{"use strict";o.d(t,{CaptchaAnswerField:()=>n.CaptchaAnswerField});var n=o(705333)},90205:(e,t,o)=>{"use strict";o.d(t,{CaptchaError:()=>c});var n=o(474848),i=o(753457),r=o(610989),s=o(293721),a=o(506537),_=o(765668);const c=(0,o(296540).forwardRef)((({captchaType:e},t)=>{const o=(0,s.useEvent)(a.captchaPopupService.captchaReloaded);return(0,n.jsxs)(i.Footer,{children:[(0,n.jsx)(n.Fragment,{children:e===a.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_loading_error_caption"):r.getLang("vkconnect_auth_audio_captcha_loading_error_caption")}),(0,n.jsx)(_.Link,{onClick:o,getRootRef:t,role:"button","aria-label":e===a.CaptchaType.IMAGE?r.getLang("vkconnect_auth_captcha_image_loading_error_retry_aria_label"):r.getLang("vkconnect_auth_captcha_sound_loading_error_retry_aria_label"),children:r.getLang("vkconnect_auth_captcha_loading_error_refresh_text")})]})}))},272247:(e,t,o)=>{"use strict";o.d(t,{CaptchaError:()=>n.CaptchaError});var n=o(90205)},959179:(e,t,o)=>{"use strict";o.d(t,{CaptchaInfoButton:()=>c});var n=o(474848),i=o(296540),r=o(580539),s=o(533048),a=o(234337),_=o(610989);const c=(0,i.forwardRef)((({onClick:e},t)=>(0,n.jsx)(s.Button,{getRootRef:t,tabIndex:0,appearance:"neutral",mode:"tertiary",size:"m",before:(0,n.jsx)(r.Icon24InfoCircleOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),"aria-label":_.getLang("vkconnect_auth_audio_captcha_info_text"),onClick:e})))},991031:(e,t,o)=>{"use strict";o.d(t,{CaptchaInfoButton:()=>n.CaptchaInfoButton});var n=o(959179)},901885:(e,t,o)=>{"use strict";o.d(t,{CaptchaPopup:()=>P});var n=o(474848),i=o(296540),r=o(293721),s=o(209642),a=o(416124),_=o(785118),c=o(624338),l=o(828902),u=o(428918),d=o(757550),p=o(533048),h=o(753457),m=o(610989),E=o(476726),f=o(493192),g=o(272247),y=o(698035),v=o(707695),w=o(473735),A=o(934905),b=o(991031),T=o(725405),I=o(506537);const P=({sid:e,isRefreshEnabled:t,isSoundCaptchaAvailable:o,isUiuxChangesEnabled:P,captcha_track:C,captcha_img:S,onSubmit:O,onClose:M})=>{(0,r.useGate)(I.captchaPopupService.Gate,{sid:e,platform:I.Platform.VK_WEB,captchaTrack:C,captchaImage:S,deviceId:(0,A.getDeviceId)(I.Platform.VK_WEB)});const D=(0,E.partConfigEnabled)("vkcom_captcha_new_ux"),L=(0,r.useEvent)(I.captchaPopupService.captchaLoadingEnds),k=(0,r.useStore)(I.captchaPopupService.$hasLoadCaptchaError),R=(0,r.useStore)(I.captchaPopupService.$captchaLoading),N=(0,r.useEvent)(I.captchaPopupService.captchaLoadingErrorSet),B=(0,r.useStore)(I.captchaPopupService.$captchaType),x=(0,r.useStore)(I.captchaPopupService.$answer),U=(0,r.useStore)(I.captchaPopupService.$captchaSrc),F=(0,r.useStore)(I.captchaPopupService.$isSubmitButtonDisabled),W=(0,r.useStore)(I.captchaPopupService.$isCaptchaTypeToggleDisabled),K=(0,r.useEvent)(I.captchaPopupService.captchaTypeToggled),V=(0,r.useStore)(I.captchaPopupService.$isRefreshButtonDisabled),H=(0,r.useEvent)(I.captchaPopupService.captchaRefreshed),j=(0,r.useStore)(I.captchaPopupService.$refreshCountdown),G=(0,i.useRef)(null),q=(0,i.useRef)(null),$=(0,i.useRef)(null),Y=(0,i.useRef)(null),z=(0,i.useRef)(null),X=(0,i.useRef)(null),Q=(0,i.useRef)(null),J=(0,i.useRef)(null),Z=!!P&&B===I.CaptchaType.AUDIO,[ee,te]=(0,i.useState)(!1),oe=(0,r.useStore)(I.captchaPopupService.$isAudioPlaying),ne=(0,i.useRef)(!1),ie=e=>{e.preventDefault(),O&&O(x,Number(B===I.CaptchaType.AUDIO))},re=(0,i.useCallback)((e=>{const t=J.current||Q.current||q.current,n=$.current,i=Y.current,r=z.current,s=G?.current?.inputFieldRef.current,a=G?.current?.inputLabelRef.current,_=X.current,{activeElement:c}=document,l=[t,n,i,r,s,a,_].includes(c)?c:t;if("Space"===e.code&&[n,i,r,_,t].some((e=>l===e))){e.preventDefault();l.click()}function u(){Z&&!i?.disabled?i?.focus():d()}function d(){r?.disabled?p():r?.focus()}function p(){Z&&a?a?.focus():h()}function h(){s?.disabled?m():s?.focus()}function m(){D||!_?.disabled?_?.focus():E()}function E(){t?.focus()}if(o&&"Tab"===e.key&&!e.shiftKey&&l)switch(e.preventDefault(),l){case t:D||!n?.disabled?n?.focus():u();break;case n:u();break;case i:d();break;case r:p();break;case a:h();break;case s:m();break;case _:E()}function f(){s?.disabled?g():s?.focus()}function g(){Z?a?.focus():y()}function y(){r?.disabled?v():r?.focus()}function v(){Z?i?.focus():w()}function w(){D||!n?.disabled?n?.focus():A()}function A(){t?.focus()}if(o&&"Tab"===e.key&&e.shiftKey&&l)switch(e.preventDefault(),l){case t:D||!_?.disabled?_?.focus():f();break;case _:f();break;case s:g();break;case a:y();break;case r:v();break;case i:w();break;case n:A()}}),[o,D,Z]);(0,i.useEffect)((()=>(document.removeEventListener("keydown",re),document.addEventListener("keydown",re),()=>{document.removeEventListener("keydown",re)})),[re]),(0,i.useEffect)((()=>{if(Z){const e=e=>{e.ctrlKey&&!oe&&J?.current?.click()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}}),[Z,oe]),(0,i.useEffect)((()=>{const e=q.current;!R&&B===I.CaptchaType.IMAGE&&e&&(e.tabIndex=0,e.ariaLabel=m.getLang("vkconnect_auth_captcha_image_aria_label"),e.focus()),R||B!==I.CaptchaType.AUDIO||J.current?.focus()}),[R,B]),(0,i.useEffect)((()=>{const e=Q.current;k&&e&&e.focus()}),[k]),(0,i.useEffect)((()=>{B!==I.CaptchaType.AUDIO||P||(ne.current=!0)}),[B,P]);return(0,n.jsxs)(s.ModalBox,{children:[(0,n.jsx)(h.ModalDismissButton,{onClick:M}),(0,n.jsx)(a.ModalBody,{insetLevel:1,children:(0,n.jsxs)(_.Div,{mode:"vertical",spacing:4,paddingTop:8,paddingBottom:8,children:[(0,n.jsxs)(c.Image,{getRef:q,alt:m.getLang("vkconnect_auth_captcha_image_aria_label"),src:B===I.CaptchaType.IMAGE?U:"",onLoad:L,onError:N,width:268,height:102,children:[R&&(0,n.jsx)(l.Spinner,{}),!R&&k&&(0,n.jsx)(g.CaptchaError,{ref:Q,captchaType:B}),!k&&B===I.CaptchaType.AUDIO&&(0,n.jsx)(f.SoundCaptcha,{ref:J,src:U,disabled:!D&&oe,shouldAutoPlayRef:ne,captchaType:B,isUiuxChangesEnabled:P,onAudioPlay:()=>{P||G?.current?.inputFieldRef.current?.focus()}})]}),(0,n.jsx)(u.Spacing,{size:6}),(0,n.jsxs)(d.ButtonGroup,{mode:"horizontal",stretched:!0,gap:"s",style:{justifyContent:"space-between"},children:[t&&(0,n.jsx)(y.CaptchaRefreshButton,{ref:$,newCaptchaUX:D,disabled:!D&&(V||Z&&(R||k)),countdownValue:j,captchaType:B,isUiuxChangesEnabled:P,onRefresh:()=>{B!==I.CaptchaType.AUDIO||P||(ne.current=!0),H(),D&&G?.current?.inputFieldRef.current?.focus()}}),(Z||o)&&(0,n.jsxs)(d.ButtonGroup,{mode:"horizontal",gap:"s",children:[Z&&(0,n.jsx)(b.CaptchaInfoButton,{ref:Y,onClick:()=>{te((e=>!e))}}),o&&(0,n.jsx)(v.CaptchaTypeButton,{ref:z,disabled:!D&&W,captchaType:B,onToggle:()=>{K(),D&&G?.current?.inputFieldRef.current?.focus()}})]})]}),Z&&ee&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.Spacing,{size:8}),(0,n.jsx)(T.InfoBanner,{})]}),(0,n.jsx)(u.Spacing,{size:16}),(0,n.jsxs)("form",{onSubmit:ie,children:[(0,n.jsx)(w.CaptchaAnswerField,{ref:G,disabled:Z&&(R||k),captchaType:B,isUiuxChangesEnabled:P}),(0,n.jsx)(u.Spacing,{size:12}),(0,n.jsx)(d.ButtonGroup,{mode:"vertical",align:"center",stretched:!0,children:(0,n.jsx)(p.Button,{getRootRef:X,size:"l",stretched:!0,disabled:!D&&(F||Z&&(R||k)),onClick:ie,tabIndex:0,children:m.getLang("vkconnect_auth_captcha_submit_button")})})]})]})})]})}},121939:(e,t,o)=>{"use strict";o.d(t,{CaptchaPopup:()=>n.CaptchaPopup});var n=o(901885)},698035:(e,t,o)=>{"use strict";o.d(t,{CaptchaRefreshButton:()=>l});var n=o(474848),i=o(296540),r=o(573638),s=o(533048),a=o(234337),_=o(506537),c=o(610989);const l=(0,i.forwardRef)((({newCaptchaUX:e,disabled:t,countdownValue:o,captchaType:i,isUiuxChangesEnabled:l,onRefresh:u},d)=>(0,n.jsx)(s.Button,{getRootRef:d,disabled:t,size:"m",appearance:"neutral",mode:"tertiary",before:(0,n.jsx)(r.Icon24Refresh,{className:(0,a.getColorClass)("color_icon_secondary")}),"aria-label":i===_.CaptchaType.IMAGE?c.getLang("vkconnect_auth_captcha_refresh_button_aria_label"):i===_.CaptchaType.AUDIO?l?c.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label_new_ux"):c.getLang("vkconnect_auth_captcha_refresh_audio_button_aria_label"):void 0,tabIndex:0,onClick:u,children:e||!o?c.getLang("vkconnect_refresh_captcha"):(0,c.langReplace)(c.getLang("vkconnect_refresh_captcha_via"),{time:String(o)})})))},153391:(e,t,o)=>{"use strict";o.d(t,{CaptchaTypeButton:()=>u});var n=o(474848),i=o(296540),r=o(506537),s=o(963328),a=o(16547),_=o(533048),c=o(234337),l=o(610989);const u=(0,i.forwardRef)((({disabled:e,captchaType:t,onToggle:o},i)=>(0,n.jsx)(_.Button,{getRootRef:i,disabled:e,size:"m",appearance:"neutral",mode:"tertiary",before:t===r.CaptchaType.IMAGE?(0,n.jsx)(s.Icon24Headphones,{className:(0,c.getColorClass)("color_icon_secondary")}):(0,n.jsx)(a.Icon24TextOutline,{className:(0,c.getColorClass)("color_icon_secondary")}),onClick:o,"aria-label":t===r.CaptchaType.IMAGE?l.getLang("vkconnect_auth_captcha_enable_audio_aria_label"):l.getLang("vkconnect_auth_captcha_enable_image_aria_label"),tabIndex:0})))},707695:(e,t,o)=>{"use strict";o.d(t,{CaptchaTypeButton:()=>n.CaptchaTypeButton});var n=o(153391)},40041:(e,t,o)=>{"use strict";o.d(t,{InfoBanner:()=>a});var n=o(474848),i=o(618168),r=o(610989),s=o(194620);const a=()=>(0,n.jsx)(i.Banner,{noPadding:!0,size:"s",subheader:r.getLang("vkconnect_auth_audio_captcha_info_text"),mode:"image",imageTheme:"light",background:(0,n.jsx)("div",{className:s.default.background})})},725405:(e,t,o)=>{"use strict";o.d(t,{InfoBanner:()=>n.InfoBanner});var n=o(40041)},647283:(e,t,o)=>{"use strict";o.d(t,{SoundCaptcha:()=>p});var n=o(474848),i=o(296540),r=o(426622),s=o(155581),a=o(234337),_=o(595154),c=o(610989),l=o(205726),u=o(293721),d=o(506537);const p=(0,i.forwardRef)((({src:e,disabled:t,shouldAutoPlayRef:o,captchaType:p,isUiuxChangesEnabled:h,onAudioPlay:m},E)=>{const f=(0,i.useRef)(null),g=(0,u.useEvent)(d.captchaPopupService.audioPlaying),y=(0,u.useEvent)(d.captchaPopupService.audioPaused),v=(0,u.useEvent)(d.captchaPopupService.captchaLoadingErrorSet),w=(0,u.useEvent)(d.captchaPopupService.captchaLoadingStarts),A=(0,u.useEvent)(d.captchaPopupService.captchaLoadingEnds),b=(0,u.useStore)(d.captchaPopupService.$isAudioPlaying),T=(0,u.useStore)(d.captchaPopupService.$captchaLoading),I=()=>{const e=f.current;e?.readyState||e?.load(),o.current=!1,e?.play().then((()=>{m&&m()})).catch((()=>{v()}))};(0,i.useEffect)((()=>{const t=f.current;e&&t&&t.load()}),[e]);return(0,n.jsxs)(n.Fragment,{children:[e&&(0,n.jsx)("audio",{ref:f,preload:"none",src:e,onLoadStart:w,onCanPlay:()=>{A(),p===d.CaptchaType.AUDIO&&!b&&o.current&&I()},onPlay:g,onPause:y,onError:v}),!T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.IconIllustrationSoundWaveLeft36h,{className:(0,a.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")}),(0,n.jsx)(_.IconButton,{getRootRef:E,size:52,disabled:t,"aria-label":h?c.getLang("vkconnect_auth_captcha_play_audio_button_aria_label_new_ux"):c.getLang("vkconnect_auth_captcha_play_audio_button_aria_label"),className:(0,a.getColorClass)("color_text_accent_themed"),tabIndex:0,onClick:I,children:(0,n.jsx)(l.Icon40PlayCircle,{})}),(0,n.jsx)(s.IconIllustrationSoundWaveRight36h,{className:(0,a.getColorClass)(b?"color_icon_accent_themed":"color_icon_tertiary")})]})]})}))},493192:(e,t,o)=>{"use strict";o.d(t,{SoundCaptcha:()=>n.SoundCaptcha});var n=o(647283)},934905:(e,t,o)=>{"use strict";o.d(t,{getDeviceId:()=>a});var n=o(623702),i=o(418562),r=o(506537);const s="vk_web_captcha_device_id",a=e=>{let t;switch(e){case r.Platform.VK_WEB:t=s;break;case r.Platform.VK_M_WEB:t="vk_m_web_captcha_device_id";break;default:t=s}let o=n.vkLocalStorage.getItem(t);return o||(o=(0,i.default)(),n.vkLocalStorage.setItem(t,o)),o}},374036:(e,t,o)=>{"use strict";o.d(t,{UI_GALLERY_CLASSNAME:()=>n,UI_GALLERY_CONTENT_CLASSNAME:()=>r,UI_GALLERY_INNER_CLASSNAME:()=>i});const n="ui_gallery",i="ui_gallery__inner",r="ui_gallery__inner_cont"},812477:(e,t,o)=>{"use strict";o.d(t,{TOOLTIP_CLASSES_DEFAULT:()=>r,helpHintTooltip:()=>s});var n=o(624216),i=o(96526);const r="feature_intro_tt feature_intro_blue_tt feature_info_tooltip",s=(e,t,o={})=>{let s;const a={...{autoShow:!1,cls:r,content:t.content,withCloseButton:!0,noAutoHideOnWindowClick:!0,onHide:()=>{s?.destroy()},width:230},...o,onDestroy:()=>{var e;"isServerSideHideDisabled"in(e=t)&&e.isServerSideHideDisabled||n.ajax.post("al_index.php",{act:"help_hints_hide",hash:t.helpHintHash,hint_id:t.helpHintId}),t.onHideRequestSent?.(),o.onDestroy&&o.onDestroy()}};return"helpHintId"in t&&(a.helpHintId=t.helpHintId,a.skipShow=Boolean(t.skipShow)),s=new i.ElementTooltip(e,a),window.cur?.destroy?.push((()=>{s?.destroy()})),{tooltip:s}}},338127:(e,t,o)=>{"use strict";o.d(t,{DIRootWebProvider:()=>_,ensureDIRootWebContainer:()=>a});var n=o(474848),i=o(127126),r=o(527559);let s=!1;function a(){const e=(0,r.ensureDIRootContainer)();return s||(s=!0),e}function _({children:e}){return(0,n.jsx)(i.DIProvider,{instance:a(),children:e})}},689938:(e,t,o)=>{"use strict";o.d(t,{DIRootWebProvider:()=>n.DIRootWebProvider,ensureDIRootWebContainer:()=>n.ensureDIRootWebContainer});var n=o(338127)},331876:(e,t,o)=>{"use strict";o.d(t,{EcoPlateAnalytics:()=>_,EcoPlateAnalyticsContext:()=>c});var n=o(695290),i=o(581903),r=o(216147),s=o(296540),a=o(333258);class _{updateThemeField(){this.theme=r.colorScheme.getMode()===r.ColorSchemeMode.Auto?"system":r.colorScheme.getMode()}init(e,t,o,n){this.securityStatus=e===a.AccountSecurityLevelEnumNames.HAVE_ISSUES?"critical_vulnerabilities":e===a.AccountSecurityLevelEnumNames.HAVE_RECOMMENDATIONS?"protection_recommendations":"securely_protected",this.nftAvatar=t,this.isVerified=o,this.multiaccId=n,this.unsubscribeThemeListener=r.colorScheme.subscribe((()=>{this.updateThemeField()}))}getCommonFields(){return{multiacc_id:this.multiaccId,metadata:JSON.stringify({security_status:this.securityStatus,theme:this.theme,nft_avatar:this.nftAvatar,is_verified:this.isVerified}),options:[{names:n.VkidEcosystemNavigationItem.AVATAR,values:n.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:n.VkidEcosystemNavigationItem.VKID_LK,values:n.VkidEcosystemNavigationItemPlace.ECOSYSTEM},{names:n.VkidEcosystemNavigationItem.BALANCE,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.SETTINGS,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.THEME,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.HELP,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.LOGOUT,values:n.VkidEcosystemNavigationItemPlace.VK},{names:n.VkidEcosystemNavigationItem.SWITCHER,values:n.VkidEcosystemNavigationItemPlace.MULTIACCOUNT}]}}logTopNavItemClick(e){e!==n.VkidEcosystemNavigationItemEventType.LOGOUT?i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.TAP,item:e,...this.getCommonFields()}):i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.LOGOUT,...this.getCommonFields()},{force:!0})}logThemeChange(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.THEME_CHANGED,item:n.VkidEcosystemNavigationItem.THEME,...this.getCommonFields()})}logTopNavToggle(e){i.vkIdEcosystemNavigationCollector.logEvent({event:e?n.VkidEcosystemNavigationItemEventType.OPEN:n.VkidEcosystemNavigationItemEventType.CLOSE,...this.getCommonFields()})}logApiError(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ERROR_API,...this.getCommonFields()})}logSwitcherError(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ERROR_SWITCHER,...this.getCommonFields()})}logMultiaccAddAnotherTap(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.ADD_ANOTHER_ACCOUNT_TAP,...this.getCommonFields()})}logMultaccSwitchAccountTap(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.SWITCH_ACCOUNT_TAP,...this.getCommonFields()})}logMultaccDropAccountTap(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.DROP_ACCOUNT_TAP,...this.getCommonFields()})}logSecurityRecommShow(){i.vkIdEcosystemNavigationCollector.logEvent({event:n.VkidEcosystemNavigationItemEventType.SECURITY_RECCOMENDATION_SHOW,...this.getCommonFields()})}unsubscribe(){this.unsubscribeThemeListener()}constructor(){this.updateThemeField()}}const c=(0,s.createContext)(void 0)},832813:(e,t,o)=>{"use strict";o.d(t,{logSwitchAccountEvent:()=>h,logSwitchAccountTapEvent:()=>d,logSwitcherAddAnotherTapEvent:()=>l,logSwitcherDropAccount:()=>u,logTopNavElements:()=>m,prepareLogSwitchAccountEvent:()=>p});var n=o(581903),i=o(968083);const r=new n.ProductionStatCollector,s=new n.ActionStatCollector(r),a=new n.RegistrationItemStatCollector(s),_=new i.VkConnectNavigationCollector;function c(e){const t=s.productionStatCollector.getCurrentTime(!1);return[{name:n.RegistrationFieldItemNames.TO_SWITCHER_FROM,value:e,start_interaction_time:t,end_interaction_time:t}]}function l(e,t){a.logEvent(n.RegistrationItemEventTypes.MULTIACC_ADD_ANOTHER_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(t),void 0,void 0,e)}function u(e,t="profile"){e&&(a.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(t),void 0,void 0,e),a.logEvent(n.RegistrationItemEventTypes.MULTIACC_DROP_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(t),void 0,void 0,e))}function d(e,t){e&&a.logEvent(n.RegistrationItemEventTypes.SWITCH_ACCOUNT_TAP,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(t),void 0,void 0,e)}function p(){window.vk.id&&sessionStorage.setItem("LOG_ACC_SWITCH",String(window.vk.id))}function h(e,t,o,i){e&&t&&o&&(a.logEvent(n.RegistrationItemEventTypes.SWITCH_FROM_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(i),void 0,t,e),a.logEvent(n.RegistrationItemEventTypes.SWITCH_TO_ACCOUNT,n.EventScreens.MULTI_ACC_SWITCHER,n.EventScreens.NOWHERE,{force:!0},c(i),void 0,o,e))}function m(e){_.logTopNavElements(e)}},935037:(e,t,o)=>{"use strict";o.d(t,{APP_NAME:()=>n,LAST_ACC_ID_KEY:()=>s,LOG_ACC_SWITCH_KEY:()=>r,NOTIFY_SWITCH_KEY:()=>i});const n="EcosystemMultiAccountsEntry",i="multiacc_should_show_notifier",r="multacc_should_send_analytics",s="multiacc_last_id"},945192:(e,t,o)=>{"use strict";o.d(t,{init:()=>c});var n=o(823875),i=o(402953),r=o(850101),s=o(359244),a=o(741531),_=o(568352);const c=()=>{(0,n.init)(),(0,i.tqi)().setHandler("Common/nav_go",(e=>{e.payload.event?.target&&window.nav.go(e.payload.event.target,e.payload.event,JSON.parse(e.payload.dataAttrs?.options||"{}"))}),!1),(0,i.tqi)().setHandler("Common/cur_box_hide",(()=>{(0,r.curBox)()?.hide()}),!1),(0,i.tqi)().setHandler("Common/show_menu_settings",(e=>{const t=e.payload.dataAttrs?.type?Number(e.payload.dataAttrs.type):void 0;(0,s.loadMenuSettingsBox)(t)}),!1),(0,i.tqs)().setHandler("HelpHints/init",(({payload:{target:e}})=>{e?.remove(),(0,a.ensureAccountHelpHintsService)().initialize({viewerId:window.vk?.id,logErrorFn:_.logError})}),!0)}},966665:(e,t,o)=>{"use strict";o.d(t,{recognizeBlockState:()=>n});const n=(0,o(942451).makeSharedState)("photo_recognize_block",(()=>({block:null})),{version:0})},512243:(e,t,o)=>{"use strict";o.d(t,{FEED_RECOGNIZE_PHOTO_DEFAULT_BLOCK_TYPE:()=>u,FEED_RECOGNIZE_PHOTO_POST_ID:()=>l,NUMBER_INITIALIZED_PHOTO:()=>d,PHOTO_CAROUSEL_AVATAR_CLASS:()=>_,PHOTO_CAROUSEL_CLASS:()=>n,PHOTO_CAROUSEL_HIDE_BTN_CLASS:()=>c,PHOTO_CAROUSEL_ITEM_CLASS:()=>i,PHOTO_CAROUSEL_ITEM_NO_SIZE_CLASS:()=>r,PHOTO_ELEMENT_CLASS:()=>s,PHOTO_NO_SIZE_ELEMENT_CLASS:()=>a});const n="PhotoCarousel",i="PhotoCarouselItem",r="PhotoCarouselItem--noSize",s="PhotoCarouselImage",a="PhotoCarouselItem__stub",_="PhotoCarouselBlockItem__avatar",c="PhotoCarousel__hidePost",l="tags_suggestions",u="tags_suggestions",d=4},885469:(e,t,o)=>{"use strict";o.d(t,{getFeedPageLoadingState:()=>a});var n=o(942451),i=o(793401),r=o(285047);const s=()=>{const e={requestState:"initial",cancellationToken:null,setRequestStarted:()=>(e.cancellationToken&&(r.debugConsole.error(`FeedPageLoader: cancellationToken is not null, cancel previous request with state '${e.requestState}'`),e.cancellationToken.cancel()),e.cancellationToken=new i.AjaxCancellationToken,e.requestState="loading",e.cancellationToken),setRequestState:t=>{e.cancellationToken=null,e.requestState=t}};return e},a=(0,n.makeSharedState)("feed_page_skeleton",(()=>({content:s(),rightBlock:s(),skeleton:{html:void 0,hasSkeleton:!1}})),{version:1})},848536:(e,t,o)=>{"use strict";var n;o.d(t,{FeedPath:()=>n,checkIsInFeed:()=>i}),function(e){e.feed="feed",e.al_feed="al_feed.php"}(n||(n={}));const i=(e=window.nav?.objLoc[0])=>new Array("feed","al_feed.php").includes(e)},787179:(e,t,o)=>{"use strict";o.d(t,{FEED_OFFLINE_MODE_FIELD:()=>n,PageCacheState:()=>i});const n="feed_offline_mode_state";var i;!function(e){e.Active="active",e.Inactive="inactive",e[e.Unset="%%pageCacheState%%"]="Unset"}(i||(i={}))},470147:(e,t,o)=>{"use strict";o.d(t,{handleSWResponse:()=>a,handleSWTimingsMessage:()=>s});var n=o(850263),i=o(942451);const r=(0,i.makeSharedState)("feed_with_offline_mode_sw_timings_data",(()=>({})),{version:1}),s=e=>{r().timings=e},a=()=>{const e=Date.now(),{timings:t}=r();if(!t?.lastTimestamp)return;const{lastTimestamp:o,...i}=t;(e=>{const{gettingFromCache:t,fetching:o,gettingFromCacheOnError:i,puttingIntoCache:r,postingFeedStateMessage:s,responding:a}=e;new n.DevNullStatCollector(new n.CustomStatCollector).logEvent({key:"feed_with_offline_mode_sw_content_timings",value:t,value2:o,value3:i,value4:r,value5:s,value6:a})})({...i,responding:e-o})}},212823:(e,t,o)=>{"use strict";o.d(t,{isPageCacheStateActive:()=>i,setPageCacheState:()=>r});var n=o(787179);const i=()=>window.vk.pageCacheState===n.PageCacheState.Active,r=e=>{window.vk.pageCacheState=e}},285047:(e,t,o)=>{"use strict";o.d(t,{debugConsole:()=>n});const n=(0,o(300189).createDebugConsole)("__feed_page_load_debug_logs")},871033:(e,t,o)=>{"use strict";o.d(t,{feedLoadingNavigationHandler:()=>r});var n=o(476726),i=o(848536);function r(e){const{dest:t,where:r,debugLog:s,opts:a}=e;if("string"==typeof t&&(0,i.checkIsInFeed)(t)&&!a.back)return(0,n.partConfigEnabled)("feed_web_skeleton_on_navigation_enabled")&&!r.params?.section?(s("feed_page_skeleton"),o.e(29311).then(o.bind(o,694423)).then((({handleNavigationWithClientSkeleton:t})=>{t(e)})),!1):(0,n.partConfigEnabled)("feed_web_async_right_block")?(s("feed_page_async_right_block"),o.e(56091).then(o.bind(o,588928)).then((({handleNavigationWithAsyncRightBlock:t})=>{t(e)})),!1):void 0}},996456:(e,t,o)=>{"use strict";o.d(t,{getAdAttribute:()=>_,hideAdAttributesInNodeProperties:()=>a,removeAdAttribute:()=>l,updateAdAttribute:()=>c});var n=o(476726);const i="data-post-locator",r=`[${i}]`,s=/^data-ad\b/,a=()=>{if((0,n.partConfigEnabled)("post_adguard_protection_promo")){if(!document.querySelector(r))return;const e=document.querySelectorAll(r);for(let t=0;t<e.length;t++){const o=e[t],n=o.attributes;Object.values(n).filter((e=>s.test(e.nodeName))).forEach((e=>{o.adAttrs||(o.adAttrs={}),o.adAttrs[e.nodeName.replace("data-","")]=e.nodeValue,o.removeAttribute(e.nodeName)})),o.removeAttribute(i)}}else{if(!document.querySelector("[data-ad]"))return;const e=document.querySelectorAll("[data-ad]");for(const t of e)t.adAttrs={ad:t.dataset.ad,"ad-view":t.dataset.adView,"ad-block-uid":t.dataset.adBlockUid},t.removeAttribute("data-ad"),t.removeAttribute("data-ad-view"),t.removeAttribute("data-ad-block-uid")}},_=(e,t)=>e?(0,n.partConfigEnabled)("post_adblock_protection_promo")?e.adAttrs?.[t]??e.getAttribute(`data-${t}`):e.getAttribute(`data-${t}`):null,c=(e,t,o)=>{if(!e)return null;e.adAttrs||(e.adAttrs={}),e.adAttrs[t]=o},l=(e,t)=>{if(!e||!e.adAttrs)return null;delete e.adAttrs[t]}},681589:(e,t,o)=>{"use strict";o.d(t,{getBaseDataFromPost:()=>a,getQuery:()=>p,getSection:()=>d,getTrackCodeFromPost:()=>s,isFeedInitiated:()=>u,resolveRef:()=>_,resolveRefFromCur:()=>c,setFeedInitiated:()=>l});var n=o(489944),i=o(638879);const r=e=>e?.closest(n.WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR)??null,s=e=>{const t=r(e),o=t?.getAttribute("data-post-track-code");return o??null},a=e=>{const t=r(e);if(!t)return null;const o=t?.getAttribute("data-post-track-code"),n=t?.getAttribute("data-post-id");return{trackCode:o??null,postId:n??null}},_=(e,t,o)=>"feed"==e?"search"==t?"feed_search":"news"==t?o?"feed_news_"+o:"feed_news":"recommended"==t?o?"feed_recommended_"+o:"feed_recommended":"friends"==t?o?"feed_friends_"+o:"feed_friends":"groups"==t?o?"feed_groups_"+o:"feed_groups":"videos"==t?o?"feed_videos_"+o:"feed_videos":"photos"==t?o?"feed_photos_"+o:"feed_photos":"podcasts"==t?o?"feed_podcasts_"+o:"feed_podcasts":"list"==t?o?"feed_list_"+o:"feed_list":"feed_other":e,c=()=>_(window.cur.module,window.cur.section,window.cur.subsection);function l(){window.cur.isFeedInitiated=!0,(0,i.dispatchFeedInitiatedEvent)()}function u(){return Boolean(window.cur.isFeedInitiated)}function d(){return window.cur.section?window.cur.section:void 0}function p(){return window.cur.q||""}},638879:(e,t,o)=>{"use strict";var n;function i(){setTimeout((()=>{window.dispatchEvent(new CustomEvent("feed_initiated"))}))}function r(e){setTimeout((()=>{window.dispatchEvent(new CustomEvent("section_changed",{detail:e}))}))}function s(e){setTimeout((()=>{window.dispatchEvent(new CustomEvent("query_changed",{detail:e}))}))}o.d(t,{FeedCustomEventName:()=>n,dispatchFeedInitiatedEvent:()=>i,dispatchQueryChangedEvent:()=>s,dispatchSectionChangedEvent:()=>r}),function(e){e.FEED_INITIATED="feed_initiated",e.SECTION_CHANGED="section_changed",e.QUERY_CHANGED="query_changed"}(n||(n={}))},468189:(e,t,o)=>{"use strict";o.d(t,{attachPlayerEventHandler:()=>v,checkIfLinkIsValid:()=>A,feedShowMoreButtonLoadedCount:()=>b,getCommentsSortEvent:()=>C,getFeedEventSubtype:()=>O,getFeedInteractionItemType:()=>M,handleViewingFeedBlocks:()=>I,handleViewingPosts:()=>T,isFeedPostDurationStatsFixEnabled:()=>y,isFeedRepliesStatsEnabled:()=>S,sendCaptionLinkClickEvent:()=>P,sendCarouselClickEventWeb:()=>w});var n=o(476726),i=o(681589),r=o(71894),s=o(116346),a=o(374036),_=o(617430),c=o(7144),l=o(946076),u=o(185628),d=o(512243),p=o(966665),h=o(248298),m=o(490712),E=o(197971),f=o(695290),g=o(782784);function y(){return(0,n.partConfigEnabled)("feed_posts_duration_stats_fix")}function v({isAudioChanged:e,attachElement:t}){if(!e||!t)return;const o=(0,i.getTrackCodeFromPost)(t),n=(0,i.resolveRefFromCur)();(0,r.sendFeedOpenAudioStats)(o,n)}function w(e,t,o){(0,r.sendCarouselClickEvent)(e,t,o)}function A(e){return"Post/ownerLinkClick"!==e?.getAttribute("data-task-click")&&!e?.closest(".PostActivityCaption, .PostActivityBar")&&!e?.closest(".ui_actions_menu_item")}const b=(e,t,o)=>{let n=document.getElementById("show_more_link"),i=n?.offsetTop??0;n&&!n.seen&&i>=t&&i<t+o&&(n.seen=Date.now(),(0,m.statlogsValueEvent)("feed_load_more_seen",(0,h.isButtonLocked)(n),e))},T=({posts:e=[],postRaws:t,el:o})=>o?((0,E.isAdWithLongImpressionOnly)(o)||(0,E.isAutoplayAd)(o)?window.Wall.triggerAdStat(o.firstElementChild,"impression"):t&&e?.push(t),e??[]):e??[],I=({el:e,index:t,ref:o,onView:n})=>{if(e)if(e.querySelector(".VideosForYouGallery"))window.FeedVideosForYou?.viewBlock(),n?.();else if(e.querySelector(".FeedVideoPostcard"))window.FeedVideoPostcard?.viewBlock(),n?.();else if(e.querySelector(".UxpollsBlock")){const t=e.querySelector(".UxpollsBlock")?.dataset.trackCode;t&&((0,s.viewUXPollsBlock)(t),n?.())}else if(e.querySelector(".feed_friends_recomm")){let i=e.querySelector(`.${a.UI_GALLERY_CLASSNAME}`);const r=i?.getAttribute("data-from");let s=i?.getAttribute("data-code");if(r&&s&&((0,_.friendsRecommLogSave)(["view_block",r,String(t),(0,c.vkNow)(),String(o??""),s],!0),n?.()),i){const e=(0,l.uiGetGallery)(i);e?.setGalleryViewed?.(),n?.()}}else e.querySelector(".js-feed_groups_recomm")?((0,u.feedInitialViewRecommendedGroupsTrigger)(e,t),n?.()):e.querySelector("#feed_mini_apps_recomm")?(window.RecommendedMiniApps.viewBlock(),n?.()):e.querySelector(`#${d.FEED_RECOGNIZE_PHOTO_POST_ID}`)&&((0,p.recognizeBlockState)().block?.viewBlock(),n?.())};function P(e,t){g.feedInteractionItemStatCollector.logEvent({track_code:e??void 0,ref:t,item:f.FeedInteractionItemType.WALL_ITEM},f.EventItemType.CAPTION_LINK_CLICK)}function C(e){return{asc:"sort_oldest",desc:"sort_latest",smart:"sort_popular"}[e]}function S(){return(0,n.partConfigEnabled)("feed_replies_stats_web")}function O(){return(0,E.isWkLayerOpened)()?f.FeedInteractionItemType.POST_MODAL:""}function M(){return(0,E.isWkLayerOpened)()?f.FeedInteractionItemType.POST_MODAL:f.FeedInteractionItemType.WALL_ITEM}},197971:(e,t,o)=>{"use strict";o.d(t,{getFeedPosts:()=>E,isAdWithLongImpression:()=>u,isAdWithLongImpressionOnly:()=>d,isAdWithShowOff:()=>p,isAutoplayAd:()=>l,isElemViewable:()=>m,isInFeed:()=>g,isWkLayerOpened:()=>f,postsGetRaws:()=>c});var n=o(5829),i=o(452314),r=o(879007),s=o(681589),a=o(996456),_=o(476726);const c=e=>{if(!(e instanceof HTMLElement))return{};let t=(0,r.indexOf)((0,i.domPN)(e).children,e),o=e.firstElementChild;if(!(o instanceof HTMLElement))return{};for(;o&&o.id.startsWith("moat");)o=(0,i.domNS)(o);if(!(o instanceof HTMLElement))return{};let n,_,c,l=/^post(-?\d+_\d+)$/,u={};if("ads_feed_placeholder"===o.id)return u;const d=window.cur;u={module:(0,s.resolveRef)(d.module,d.section,d.subsection),index:t},"feed"===d.module&&"search"===d.section&&(u.q=d.q);let p=(0,a.getAdAttribute)(o,"ad-view");p&&(u["ad_"+p]=1);let h=o.getAttribute("post_view_hash");h&&(u.hash=h);let m=o.getAttribute("data-post-track-code");if(m&&!p&&(u.trackCode=m),"block_"===o.id.substr(0,6)){u[o.id]=1,u.block=o.id.substr(6);let e=(0,i.attr)(o,"data-contain");e&&e.split(",").forEach((function(e){const t=e.split(":");u[t[0]]=(0,r.intval)(t[1])||1}))}else if(_=o.id.match(l))u[_[1]]=1;else if(_=o.id.match(/^post(adsite.*)$/))u[_[1]]=1;else if(n=o.className,_=n.match(/feed_reposts_wrap(-?\d+_\d+)/)){if(c=(0,i.domFC)(o),(0,i.hasClass)((0,i.domFC)(c),"post_copy")&&(u[_[1]]=-1),(_=(0,i.domFC)(c)?.id.match(l))&&(u[_[1]]=1),(0,i.isVisible)(c=(0,i.domNS)(c)))for(c=(0,i.domFC)(c);c;c=(0,i.domNS)(c))(_=c?.id.match(l))&&(u[_[1]]=1)}else if(_=n.match(/feed_repost(-?\d+_\d+)/)){if(c=(0,i.domFC)(o),!c)return u;(0,i.hasClass)(c,"post_copy")&&(u[_[1]]=-1),(_=c.id.match(l))&&(u[_[1]]=1)}else{let e=o.id;if((0,i.hasClass)(o,"post_photos")){c=(0,i.geByClass1)("post_image",o,"a");const t=c?.querySelector?.("[data-post-id]")?.getAttribute("data-post-id");t&&(_=t.match(/^(-?\d+_p?\d+)$/),_&&(e=_[1]))}u[e]=1}return u},l=e=>{const t=e&&(0,i.domFC)(e);return t&&((0,_.partConfigEnabled)("post_adguard_protection_promo")?(0,a.getAdAttribute)(t,"ad-video-autoplay"):t.hasAttribute("data-ad-video-autoplay"))},u=e=>{const t=e&&(0,i.domFC)(e);return t&&((0,_.partConfigEnabled)("post_adguard_protection_promo")?(0,a.getAdAttribute)(t,"ad-stat-impression_long")||(0,a.getAdAttribute)(t,"ad-disabled-stat-impression_long"):t.hasAttribute("data-ad-stat-impression_long")||t.hasAttribute("data-ad-disabled-stat-impression_long"))},d=e=>{let t=e&&(0,i.domFC)(e);return t&&((0,_.partConfigEnabled)("post_adguard_protection_promo")?(0,a.getAdAttribute)(t,"ad-views-long-only"):t.hasAttribute("data-ad-views-long-only"))},p=e=>{let t=e&&(0,i.domFC)(e);return t&&((0,_.partConfigEnabled)("post_adguard_protection_promo")?(0,a.getAdAttribute)(t,"ad-stat-show_off"):t.hasAttribute("data-ad-stat-show_off"))},h=(0,n.memoizeFirstTruthy)((()=>(0,i.ge)("page_header").offsetHeight)),m=(e,t,o,n)=>{let i=h(),r=o+i,s=o+n,a=e.offsetHeight,_=e.offsetTop+i,c=_+a;return(c>r&&_<s?(Math.min(s,c)-Math.max(r,_))/a:0)>=t},E=e=>document.querySelectorAll(`${e} .feed_row`),f=()=>Boolean(window.wkcur?.shown),g=()=>"feed"===window.cur?.module},870700:(e,t,o)=>{"use strict";var n;function i(e){return e.type?`profile_tooltip__${e.type}`:"profile_tooltip"}function r(e){return e.type?`profile_tooltip_all__${e.type}`:"profile_tooltip"}o.d(t,{GiftRef:()=>n,getAllGiftsRefInTooltip:()=>r,getGiftRefInTooltip:()=>i}),function(e){e.PROFILE_BUTTON="profile_button",e.PROFILE_MODULE="profile_module",e.PROFILE_TOOLTIP="profile_tooltip",e.PROFILE_TOOLTIP_ALL="profile_tooltip_all"}(n||(n={}))},359045:(e,t,o)=>{"use strict";o.d(t,{boxQueue:()=>r});var n=o(317412),i=o(206513);const r={skip:void 0,_boxes:[],curBox:0,_emitter:new(o(919225).Emitter),get events(){return r._emitter.listenable},getAll(){const e=[];return r._boxes.forEach((t=>{const o=window._message_boxes[t];o&&e.push(o)})),e},hideAll:function(e,t){if(e)for(;r.count();)r.hideLast();else{if(r.count()){const e=r._boxes.pop();(0,i.assertNotNull)(e);const o=window._message_boxes[e];o&&(o._in_queue=!1,o._hide(!1,!1,t))}for(;r.count();){const e=r._boxes.pop();(0,i.assertNotNull)(e);window._message_boxes[e]._in_queue=!1}}},hideAllNoCheck(){for(;r.count();)r.hideLast(!1)},hideLast:function(e,t){if(r.count()){const o=window._message_boxes[r._boxes[r.count()-1]],n=t&&t.target&&t.target instanceof Element&&t.target.tagName&&"input"!==t.target.tagName.toLowerCase()&&window.cur.__mdEvent&&t.target!==window.cur.__mdEvent.target;if(!0===e&&(o.changed||o.preventHideLastWithCheck||r.skip||n))return void(r.skip=!1);o.hide()}if(t&&"click"===t.type)return(0,n.cancelEvent)(t)},hideLastCheck:function(e){return r.hideLast(!0,e)},isBackdropClick:function(e){return!(e.target instanceof Element&&e.target.closest(".box_layout"))},handleBackdropClick:function(e){r.isBackdropClick(e)&&r.hideLastCheck(e)},hideBGClick:function(e){e&&e.target instanceof Element&&e.target.id.startsWith("box_layer")&&r.hideLast()},count:function(){return r._boxes.length},_show:function(e){const t=window._message_boxes[e];if(!t||t._in_queue)return;r.count()?window._message_boxes[r._boxes[r.count()-1]]._hide(!0,!0):window.tooltips&&window.tooltips.hideAll(),t._in_queue=!0;let o=!!r.count();o&&(o=r._boxes.every((e=>!!window._message_boxes[e]&&!window._message_boxes[e].forceHide))),r.curBox=e,t._show(!0,o),r._boxes.push(e),r._emitter.emit("show",{box:t})},_hide:function(e){const t=window._message_boxes[e];if(t&&t._in_queue&&r._boxes[r.count()-1]===e&&t.isVisible()&&(t._in_queue=!1,r._boxes.pop(),t._hide(!!r.count()),r._emitter.emit("hide",{box:t}),r.count())){const e=r._boxes[r.count()-1];r.curBox=e,window._message_boxes[e]._show(!0,!0,!0)}}}},432997:(e,t,o)=>{"use strict";o.d(t,{_handleResponseExtraPayloads:()=>_,replaceExtraHandler:()=>a});var n=o(942451),i=o(678751),r=o(568352);const s=(0,n.makeSharedState)("ajax-extra-handlers",(()=>new i.default),{version:0}),a=(e,t)=>(s().removeAllListeners(e),((e,t)=>(s().addListener(e,t),()=>{s().removeListener(e,t)}))(e,t)),_=e=>{var t;null!==(t=e)&&"object"==typeof t&&Object.keys(e).forEach((t=>{try{o=t,n=e[t],s().emit(o,n)}catch(e){const o={message:"Extra response error",data:{extraKey:t}};(0,r.logError)(e,{environment:"ajax_request",breadcrumb:o}),console.error(e)}var o,n}))}},807825:(e,t,o)=>{"use strict";o.d(t,{subscribeOnModuleEvaluated:()=>r,triggerSubscribersOnModuleEvaluated:()=>_,unsubscribeOnModuleEvaluated:()=>a,waitModuleEvaluate:()=>s});const n=[],i=[];function r(e,t=!1){"function"==typeof e&&(t?i.push(e):n.push(e))}function s(e=100){return new Promise((t=>{const o=window.setTimeout((()=>t()),e);r((()=>{clearTimeout(o),t()}),!0)}))}function a(e){const t=n.indexOf(e),o=i.indexOf(e);t>=0&&n.splice(t,1),o>=0&&i.splice(o,1)}function _(){n.forEach((e=>e())),i.forEach((e=>e())),i.splice(0,i.length)}},111455:(e,t,o)=>{"use strict";o.d(t,{authFailed:()=>l});var n,i=o(387674),r=o(646387),s=o(452314),a=o(516501),_=o(49667),c=o(217363);!function(e){e.NEED_REDIRECT="need_redirect"}(n||(n={}));const l=(()=>{let e,t=[];return(o,n,l)=>{t.push((()=>{o.resend(l,(0,c.resetOptionsCache)(o))})),e||(e=(e=>new Promise(((t,o)=>{let n;const r=(0,s.ce)("iframe",{src:`${(0,a.getLoginDomain)()}?${(0,i.toQueryString)({role:"al_frame",_origin:window.location.origin,ip_h:e[0]||window.vk.ip_h,to:e[1]||"",lrt:e[2]||""})}`}),_=(e,o,i)=>{clearTimeout(n),r.remove(),t({toUrl:e,userInfo:o,actionType:i})},c=(e,t)=>{clearTimeout(n),r.remove(),o({toRoot:e,toUrl:t})};n=window.setTimeout((()=>{window.onReLoginDone===_&&(window.onReLoginDone=void 0),window.onReLoginFailed===c&&(window.onReLoginFailed=void 0),o()}),16e3),window.onReLoginDone=_,window.onReLoginFailed=c,window.utilsNode.appendChild(r)})))(n).then((e=>{e.toUrl&&"need_redirect"===e.actionType?_.Nav.go(e.toUrl,null,{hard:!0}):t.forEach((e=>e()))}),(e=>{if(!e)return;const{toUrl:t,toRoot:o}=e;(0,r.logout)(),t?_.Nav.go(t,null,{hard:!0}):-1!==o?o&&_.Nav.go("/"):window.location.href=location.href.replace(/^http:/,"https:")})).finally((()=>{t=[],e=void 0})))}})()},217363:(e,t,o)=>{"use strict";o.d(t,{resetOptionsCache:()=>n});const n=e=>e.cache?{...e,cache:-1}:e},949610:(e,t,o)=>{"use strict";o.d(t,{logRefreshCaptcha:()=>a});var n=o(581903);const i=new n.ProductionStatCollector,r=new n.ActionStatCollector(i),s=new n.CaptchaClientItemStatCollector(r);function a(){s.logEvent(n.CaptchaClientItemEventTypes.CAPTCHA_REFRESH,n.CaptchaEventScreens.CAPTCHA)}},513734:(e,t,o)=>{"use strict";o.d(t,{curReady:()=>a,onCurReady:()=>s,resetWindowCur:()=>_});var n=o(942451),i=o(386231);const r=(0,n.makeSharedState)("cur-loading-state",(()=>({isReady:!1,onReadyCallbacks:[]})),{version:1}),s=e=>{r().onReadyCallbacks.push(e),r().isReady&&e()},a=()=>{r().isReady=!0,(0,i.initNavigationStats)();for(let e of r().onReadyCallbacks)e()},_=(e=!1)=>{const t=window.cur;return window.cur={beforeNavigateRequestHandlers:[],destroy:[],nav:[]},e&&t&&(window.cur.lang=t.lang),void 0!==t&&"function"==typeof t.onAfterReset&&t.onAfterReset(t,window.cur),window.cur}},516501:(e,t,o)=>{"use strict";function n(){return window.vk.loginDomain}o.d(t,{getLoginDomain:()=>n})},20025:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{MessageBox:()=>MessageBox,showBox:()=>showBox,showCaptchaBox:()=>showCaptchaBox,showFastBox:()=>showFastBox,showReCaptchaBox:()=>showReCaptchaBox,showTabbedBox:()=>showTabbedBox});var _ui__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(248298),_debug_tools__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(618913),_dom_events__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(317412),_ui_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(357889),_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(452314),_utils_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(879007),_lang__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(645024),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(387674),_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(850101),_accessibility__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(967886),_icons_desktop__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(787576),_icons_desktop__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(275563),_icons_desktop__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(833791),_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(258643),_shared_lib_dom__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(226095),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(8520),_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(568352),_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(206513),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(476726),_web_lib_captcha_stats__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(949610),_shared_accessibility_accessibility__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(203240);const FULLSCREEN_BOX_CLASSNAME="box_layer_fullscreen",MessageBox=function(_options){this instanceof MessageBox||(0,_shared_lib_js_logger__WEBPACK_IMPORTED_MODULE_13__.logError)(new Error('Missed "new" before "MessageBox"'));const defaults={title:!1,titleControls:"",containerClass:"",width:450,height:"auto",bodyStyle:{},grey:!1,white:!1,selfDestruct:!0,progress:!1,hideOnBGClick:!1,hideButtons:!1,onShow:!1,onBeforeHide:!1,onHide:!1,onClose:!1,onClean:!1,onDestroy:!1,preventHideLastWithCheck:!1,refreshCoordsOnTimeout:!1};let options=(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(defaults,_options);const guid=window._message_box_guid++;let visible=!1;const btns={ok:[],cancel:[]};let boxTitleBck,retBox,progressId=options.progress||"";progressId||(progressId="box_progress"+guid);const controlsStyle=options.hideButtons?' style="display: none"':"",boxContainer=(0,_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("div",{className:(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_12__.classNames)("popup_box_container",options.containerClass,!1===options.needShadow&&"popup_box_container--no-shadow"),innerHTML:`\n<div class="box_layout" data-testid="box_layout">\n  <div class="box_title_wrap">\n    <div class="box_x_button" aria-label="${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_close")}" tabindex="0" role="button" data-testid="box_x_button">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_16__.getIcon20Cancel)().icon}</div>\n    <div class="box_title_controls"></div>\n    <div class="box_title"></div>\n  </div>\n\n  <div class="box_body"></div>\n  ${options.noControls?"":`\n  <div class="box_controls_wrap" ${controlsStyle}>\n    <div class="box_controls">\n      <div class="box_controls_buttons fl_r"></div>\n\n      <div class="progress" id="${progressId}"></div>\n\n      <div class="box_controls_text">${options.textControls||""}</div>\n    </div>\n  <div>`}\n</div>`}),boxTitleWrap=boxContainer.querySelector(".box_title_wrap");(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitleWrap);const boxCloseButton=boxTitleWrap.querySelector(".box_x_button");(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxCloseButton);const boxTitle=boxTitleWrap.querySelector(".box_title");(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitle);const boxTitleControls=boxTitleWrap.querySelector(".box_title_controls");function onClose(){(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onClose)&&options.onClose()}(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitleControls),options.noCloseButton&&(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(boxCloseButton);const boxLayoutNode=boxContainer.querySelector(".box_layout");(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxLayoutNode);const boxBody=boxContainer.querySelector(".box_body");(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxBody);const boxControlsWrap=boxContainer.querySelector(".box_controls_wrap");let boxButtons=null,boxProgress=null,boxControlsText=null;boxControlsWrap&&(boxButtons=boxControlsWrap.querySelector(".box_controls_buttons"),boxProgress=boxControlsWrap.querySelector(".progress"),boxControlsText=boxControlsWrap.querySelector(".box_controls_text")),options.fullscreen&&window.boxLayer.classList.add(FULLSCREEN_BOX_CLASSNAME),boxContainer.setAttribute("role","dialog"),boxContainer.setAttribute("aria-modal","true"),boxContainer.setAttribute("tabindex","-1"),window.boxLayer.appendChild(boxContainer),options.bodyStyle&&applyBodyStyle(options.bodyStyle),refreshBox(),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer);const emitter=new EventEmitter;function applyBodyStyle(e){if((0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxBody),"string"==typeof e){const t=e.split(";");for(let e=0,o=t.length;e<o;e++){const o=t[e].split(":");o.length>1&&o[0].length&&(boxBody.style[(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o[0])]=(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o[1]),boxBody.style.setProperty&&boxBody.style.setProperty((0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o[0]),(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o[1]),""))}}else(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_12__.isObject)(e)&&Object.assign(boxBody.style,e)}function setInitialFocus(){const e=boxCloseButton?[boxCloseButton]:[];(0,_shared_accessibility_accessibility__WEBPACK_IMPORTED_MODULE_18__.setFocusIsNeed)(boxContainer,e),boxContainer&&!boxContainer.contains(document.activeElement)&&boxContainer.focus()}function refreshBox(){(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitle),(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitleWrap),(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxTitleControls),boxTitleBck||((0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxBody),options.title?(boxTitle.innerHTML=options.title,boxBody.classList.remove("box_no_title"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(boxTitleWrap)):(boxBody.classList.add("box_no_title"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(boxTitleWrap))),options.titleTransparent&&(boxTitleWrap.classList.add("box_title_wrap--transparent"),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(boxTitleWrap)),options.titleControls&&(boxTitleControls.innerHTML=options.titleControls),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(boxBody,"box_no_buttons",options.hideButtons),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(boxTitleWrap,"box_grey",options.grey),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.toggleClass)(boxTitleWrap,"box_white",options.white),boxContainer.classList.toggle("popup_box_container--no-shadow",!1===options.needShadow),boxContainer.style.width="string"==typeof options.width?options.width:options.width+"px",boxContainer.style.height="string"==typeof options.height?options.height:options.height+"px"}function addButtonInternal(e,t,o,n){let i,r;"no"===o||"gray"===o||"neutral"===o?(i="neutral"===o?_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonAppearance.SECONDARY:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonAppearance.TERTIARY,r="cancel"):(i=_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonAppearance.PRIMARY,r="ok");const s=_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButton.render({appearance:i,size:_web_ui_FlatButton__WEBPACK_IMPORTED_MODULE_10__.FlatButtonSize.M,children:e,restAttrs:{id:n||""}});return s.addEventListener("click",(e=>{emitter.emit(r,retBox),t.apply(null,[s,e])})),boxButtons&&boxButtons.prepend(s),btns[r].push(s),s}function setControlsText(e){boxControlsText&&(boxControlsText.innerHTML=e)}function removeButtons(){(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxButtons),(0,_shared_lib_dom__WEBPACK_IMPORTED_MODULE_11__.emptyNode)(boxButtons),btns.ok.length=btns.cancel.length=0}const destroyMe=()=>{(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onClean)&&options.onClean(),(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onDestroy)&&options.onDestroy(),options.noControls||removeButtons(),options.fullscreen&&window.boxLayer.classList.remove(FULLSCREEN_BOX_CLASSNAME),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.cleanElems)(boxContainer,boxCloseButton,boxTitleWrap,options.noControls?void 0:boxControlsWrap),window.boxLayer.removeChild(boxContainer),delete window._message_boxes[guid]},hideMe=(e,t,o)=>{visible&&(visible=!1,options.hideOnBGClick&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(document,"click",window.boxQueue.hideBGClick),(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onBeforeHide)&&options.onBeforeHide(),window._message_boxes[guid].shOther||e||window.layers.boxhide(),!t&&options.selfDestruct?destroyMe():(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(boxContainer),(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onHide)&&options.onHide(o),retBox.emit("afterHide",retBox))},hideMeInternal=({showingOther:e,tempHiding:t,noLoc:o})=>{hideMe(e,t,o)};function showMe(e,t,o){visible||!window._message_boxes[guid]||window._message_boxes[guid].forceHide||(visible=!0,options.hideOnBGClick&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(document,"click",window.boxQueue.hideBGClick),t||window.layers.boxshow(),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(boxContainer),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer),options.onShow&&options.onShow(o))}return(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(boxCloseButton,"click",(()=>{onClose(),window.boxQueue.hideLast()})),(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(boxCloseButton,"keydown",(e=>{"Enter"===e.key&&(onClose(),window.boxQueue.hideAll())})),retBox=window._message_boxes[guid]={guid,_show:showMe,_hide:hideMe,boxLayoutNode,bodyNode:boxBody,controlsTextNode:boxControlsText,titleWrap:boxTitleWrap,btns,show:function(){return window.boxQueue._show(guid),setInitialFocus(),this},progress:boxProgress||void 0,showCloseProgress:()=>boxTitleWrap.classList.add("box_loading"),hideCloseProgress:()=>boxTitleWrap.classList.remove("box_loading"),showProgress:function(){(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(boxControlsText),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(boxProgress)},hideProgress:function(){(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(boxProgress),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(boxControlsText)},hide:function(e){return!((0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(options.onHideAttempt)&&!options.onHideAttempt(e))&&(window.boxQueue._hide(guid),!0)},_hideForce:function(){window.boxQueue._hide(guid)},_hideInternal:hideMeInternal,isVisible:function(){return visible},bodyHeight:function(){return(0,_dom__WEBPACK_IMPORTED_MODULE_4__.getStyle)(boxBody,"height")},content:function(e){return(0,_shared_asserts_assertNotNull__WEBPACK_IMPORTED_MODULE_17__.assertNotNull)(boxBody),options.onClean&&options.onClean(),"string"==typeof e?boxBody.innerHTML=e:e instanceof HTMLElement&&(boxBody.innerHTML="",boxBody.appendChild(e)),options.refreshCoordsOnTimeout?setTimeout((()=>{(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer)})):(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer),refreshBox(),(0,_accessibility__WEBPACK_IMPORTED_MODULE_9__.updateAriaElements)(),setInitialFocus(),this},emit:function(e,t){emitter.emit(e,t)},addButton:function(e,t,o,n,i){const r=addButtonInternal(e,t||this.hide,o,i);return n?r:this},setButtons:function(e,t,o,n){return removeButtons(),e?(this.addButton(e,t),o&&this.addButton(o,n,"no"),this):this.addButton(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("box_close"))},setControlsText,removeButtons:function(){return removeButtons(),this},setBackTitle:function(e){boxTitle&&(e?(boxTitle.innerHTML='<div class="back"><span class="back__icon">'+(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_19__.getIcon24BrowserBack)().icon+"</span>"+_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_box_title_back")+"</div>",boxTitleBck=options.title,options.title=boxTitle.innerHTML,setTimeout((function(){const t=boxTitle.querySelector(".back");t&&(t.onclick=e)}),100)):boxTitleBck&&(boxTitle.innerHTML=options.title=boxTitleBck,boxTitleBck=void 0))},destroy:destroyMe,getOptions:function(){return options},on:function(e,t){emitter.on(e,t)},once:function(e,t){emitter.once(e,t)},updateBoxCoords(){(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer)},setOptions:function(e){return options.hideOnBGClick&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(document,"click",window.boxQueue.hideBGClick),options=(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(options,e),options.bodyStyle&&applyBodyStyle(options.bodyStyle),options.hideOnBGClick&&(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(document,"click",window.boxQueue.hideBGClick),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.toggle)(boxControlsWrap,!options.hideButtons),refreshBox(),options.noRefreshCoords||(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(boxContainer),this},evalBox:function(js,url,params){const scr="((function() { return function() { var box = this; "+(js||"")+";}; })())";if(window.__debugMode){const fn=eval(scr);fn.apply(this,[url,params])}else try{const fn=eval(scr);fn.apply(this,[url,params])}catch(e){(0,_ui_util__WEBPACK_IMPORTED_MODULE_3__.topError)(e,{dt:15,type:7,url,query:params?(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_7__.toQueryString)(params):void 0,js}),(0,_debug_tools__WEBPACK_IMPORTED_MODULE_1__.logEvalError)(e,scr)}},preventHideLastWithCheck:options.preventHideLastWithCheck,needHideLastCheck:options.needHideLastCheck,execInline:function(e){window.vk.inline[e](this),delete window.vk.inline[e]}},retBox};function showBox(e,t,o={},n){if((0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.checkEvent)(n))return!1;const i=o.params||{};o.containerClass&&(i.containerClass=o.containerClass);let r=Date.now().toString(36);t&&(t.boxhash=r);const s=new MessageBox(i);s.boxhash=r;const a={onDone:function(n,a,_,c){if(o.preOnDone&&o.onDone&&o.onDone(s),t&&(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(t.onMessageSend)&&window.WriteBox&&window.WriteBox.once("message_sended",t.onMessageSend),s.isVisible())if(window.__debugMode)l();else try{l()}catch(o){(0,_ui_util__WEBPACK_IMPORTED_MODULE_3__.topError)(o,{dt:15,type:103,url:e,query:(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_7__.toQueryString)(t),answer:Array.prototype.slice.call(arguments).join("<!>")}),s.isVisible()&&s.hide()}else o.onDone&&o.onDone(s,c);function l(){(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(window.boxLayerBG),document.body.classList.add("layers_shown"),s.setOptions({title:n,hideButtons:i.hideButtons||!1,noCloseButton:i.noCloseButton||!1,titleTransparent:i.titleTransparent||!1,bodyStyle:i.bodyStyle}),o.showProgress?s.show():(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(s.bodyNode),s.content(a),o.noEval?s.execInline(r):s.evalBox(_,e,t),o.onDone&&o.onDone(s,c)}},onFail:function(e){return s.failed=!0,setTimeout(s.hide,0),!!(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.isFunction)(o.onFail)&&o.onFail(e)},cache:o.cache,stat:o.stat,fromBox:!0,showProgress:()=>{},hideProgress:()=>{}};return o.prgEl&&(o.showProgress=()=>(0,_ui_util__WEBPACK_IMPORTED_MODULE_3__.showGlobalPrg)(o.prgEl,{cls:o.prgClass,w:o.prgW,h:o.prgH,hide:!0}),o.hideProgress=()=>(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)("global_prg")),o.showProgress?(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.extend)(a,{showProgress:o.showProgress,hideProgress:o.hideProgress}):(s.setOptions({hideButtons:!0}).show(),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.getBoxQueue)().count()<2&&((0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(window.boxLayerBG),document.body.classList.remove("layers_shown")),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(s.bodyNode),a.showProgress=()=>{(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(window.boxLoader),(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.boxRefreshCoords)(window.boxLoader)},a.hideProgress=()=>{(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(window.boxLoader)}),s.removeButtons().addButton(_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_close")),window.ajax.post(e,t,a),s}function showTabbedBox(e,t,o,n){return(o=o||{}).stat=o.stat||[],o.stat.push(window.jsc("web/box.js"),"boxes.css"),showBox(e,t,o,n)}function showFastBox(e,t,o,n,i,r){return new MessageBox("string"==typeof e?{title:e}:e).content(t).setButtons(o,n,i,r).show()}function getCaptchaImageSrc({sid:e,difficulty:t,v:o,withRefresh:n=!1,withResized:i=!1}){return`/captcha.php?sid=${e}${t}${o?`&v=${o}`:""}${n?"&refresh=1":""}${i?"&resized=1&width=400":""}`}function showCaptchaBox(e,t,o,n,i){const r=!!o,s=(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.intval)(t)?"":"&s=1",a=5e3,_=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_14__.partConfigEnabled)("vkcom_captcha_refresh"),c=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_14__.partConfigEnabled)("vkcom_captcha_resized"),l=n.imgSrc||getCaptchaImageSrc({sid:e,difficulty:s,withResized:c});let u;if(r)u=o;else{const e=`\n<div class="captcha ${c?"resized":""}  ${_?"refresh":""}">\n  <div class="captcha__image-wrapper"><img src="${l}"/></div>\n  ${_&&i?`<button id="captcha-refresh-button" class="captcha__refresh" type="button">\n      <i class="captcha__refresh-icon">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_20__.getIcon24Refresh)().icon}</i>\n      <span>${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("vkconnect_refresh_captcha")}</span>\n    </button>`:""}\n  <div>\n    <input type="text" class="big_text" maxlength="7" placeholder="${_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_captcha_input_here")}" />\n    <div class="progress" /></div>\n  </div>\n</div>`+(n.addText||"");u=showFastBox({title:_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("captcha_enter_code"),width:305,onHide:n.onHide,onDestroy:n.onDestroy},e,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("captcha_send"),(function(){u.submit&&u.submit()}),_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("captcha_cancel"),(function(){const e=u.bodyNode.querySelector("input"),t=u.bodyNode.querySelector("img");(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(e),(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(t),u.hide()}))}const d=function(t){if(!u)return;const o=u.bodyNode.querySelector("input");if(!o||t&&"boolean"!=typeof t&&void 0!==t.keyCode&&10!==t.keyCode&&13!==t.keyCode)return;if(!(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.trim)(o.value)&&!0!==t)return void(0,_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(o);const i=u.bodyNode.querySelector("img");(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(o),(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.removeEvent)(i),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(u.bodyNode.querySelector(".progress")),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(o),n.onSubmit(e,o.value)};u.submit=()=>d(!0),u.changed=!0;const p=u.bodyNode.querySelector("input"),h=u.bodyNode.querySelector("img"),m=u.bodyNode.querySelector("#captcha-refresh-button"),E=m?.querySelector("span");if(r&&(p&&(p.value=""),h&&(h.src=getCaptchaImageSrc({sid:e,difficulty:s,withResized:c})),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.hide)(u.bodyNode.querySelector(".progress"))),(0,_dom__WEBPACK_IMPORTED_MODULE_4__.show)(p),(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(p,"keypress",d),_&&m&&E){let t=5;(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(m,"click",(function(){h&&(h.src=getCaptchaImageSrc({sid:e,difficulty:s,v:(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.irand)(1e6,2e6),withRefresh:!0,withResized:c})),m.disabled=!0,E.textContent=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("vkconnect_refresh_captcha_via").replace("{time}",String(t)),t-=1;const o=setInterval((()=>{E.textContent=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("vkconnect_refresh_captcha_via").replace("{time}",String(t)),t-=1}),1e3);setTimeout((()=>{clearInterval(o),t=5,m.disabled=!1,E.textContent=_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("vkconnect_refresh_captcha")}),a),(0,_web_lib_captcha_stats__WEBPACK_IMPORTED_MODULE_15__.logRefreshCaptcha)()}))}else(0,_dom_events__WEBPACK_IMPORTED_MODULE_2__.addEvent)(h,"click",(function(){this.src=getCaptchaImageSrc({sid:e,difficulty:s,v:(0,_utils_common__WEBPACK_IMPORTED_MODULE_5__.irand)(1e6,2e6),withResized:c})}));return(0,_dom__WEBPACK_IMPORTED_MODULE_4__.elfocus)(p),u}function showReCaptchaBox(e,t,o,n){window.recaptchaResponse=function(e){n.onSubmit(e)};const i=!!o,r=!!window.grecaptcha;if(!i){r||(window.recaptchaCallback=function(){const t=(0,_box_utils__WEBPACK_IMPORTED_MODULE_8__.curBox)();if(!t)return;const o=t.bodyNode.querySelector(".recaptcha");o&&((0,_dom__WEBPACK_IMPORTED_MODULE_4__.val)(o,""),window.grecaptcha.render(o,{sitekey:e,callback:window.recaptchaResponse}))},document.head.appendChild((0,_dom__WEBPACK_IMPORTED_MODULE_4__.ce)("script",{type:"text/javascript",src:"https://www.google.com/recaptcha/api.js?onload=recaptchaCallback&render=explicit&hl="+t})));const i='<div class="recaptcha"></div>'+(n.addText||""),s=(o=showFastBox({title:_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("global_recaptcha_title"),width:354,onHide:n.onHide,onDestroy:n.onDestroy},i,_lang__WEBPACK_IMPORTED_MODULE_6__.getLang("captcha_cancel"))).bodyNode.querySelector(".recaptcha");s&&(s.id="recaptcha"+(o.guid?o.guid:"0")),(0,_ui__WEBPACK_IMPORTED_MODULE_0__.showProgress)(s)}return i&&r?window.grecaptcha.reset():r&&window.recaptchaCallback(),o.changed=!0,o}},20191:(e,t,o)=>{"use strict";function n(e,t,o){return window.nav.go(e,t,o)}function i(e,t=!1){return window.nav.subscribeOnModuleEvaluated(e,t),function(){window.nav.unsubscribeOnModuleEvaluated(e)}}function r(e){return window.nav.onLocationChange(e)}function s(e){window.nav.setLoc({...window.nav.objLoc,...e})}o.d(t,{navGo:()=>n,subscribeModuleEvaluated:()=>i,subscribeNavLocationChange:()=>r,updateNavLoc:()=>s})},240515:(e,t,o)=>{"use strict";o.d(t,{ID_MESSAGE_GROUP_PREFIX:()=>ae,ID_NOTIFICATION:()=>_e,PAGE_ID_APPS:()=>X,PAGE_ID_CALLS:()=>j,PAGE_ID_CLIPS:()=>z,PAGE_ID_FRIENDS:()=>G,PAGE_ID_MARKET:()=>J,PAGE_ID_MARKET_ORDERS:()=>Z,PAGE_ID_MESSENGER:()=>H,PAGE_ID_STICKERS:()=>Q,PAGE_ID_SUPPORT:()=>re,globalHistoryDestroy:()=>Ee,handlePageCount:()=>pe,handlePageParams:()=>he,handlePageView:()=>ye,initNavCounters:()=>ce,processDestroy:()=>ge,reloadCheckFlood:()=>me,showBackLink:()=>fe,updateHeaderStyles:()=>le,updateLeftMenu:()=>ue,zNav:()=>ve});var n=o(141229),i=o(452314),r=o(671300),s=o(610989),a=o(645024),_=o(663878),c=o(756758),l=o(765908),u=o(357889),d=o(248298),p=o(119243),h=o(20025),m=o(631346),E=o(850101),f=o(788407),g=o(744025),y=o(402366),v=o(858367),w=o(507035),A=o(226095),b=o(250682),T=o(879007),I=o(359136),P=o(577271),C=o(476726),S=o(929085),O=o(965776),M=o(527496),D=o(375962),L=o(70933),k=o(181794),R=o(388078),N=o(916369),B=o(585364),x=o(37559),U=o(477913),F=o(772994),W=o(582874);const K=17,V=9,H="msg",j="ca",G="fr",q="gr",$="ph",Y="vid",z="svd",X="ap",Q="stickers",J="mk",Z="market_orders",ee="vkp",te="fav",oe="doc",ne="ads",ie="apm",re="spr",se="app",ae="mgid",_e="ntf";function ce(){window.vkLastNav=Date.now(),window.vkTabLoaded=Date.now()}function le(e){document.querySelectorAll("#dev_top_nav_wrap, #page_header_wrap").forEach((t=>{(0,i.setStyle)(t,e)}))}function ue(e){window.__leftMenu&&window.__leftMenu.handleUpdateRequest(e)}function de(e,t,o,n,r){if((0,B.updateItemCount)({id:e,count:t,href:n,isHighlighted:r}),!o)return;let s="",c="",l='<span class="inl_bl"></span>';const u="reqs"===e||e&&e.substr&&"spr"===e.substr(0,3)?5:3,d=(0,i.geByClass1)("left_count_wrap",o);d.classList.toggle("left_count_wrap--highlighted",r);const p=(0,i.geByClass1)("left_count",o,"span"),h=(0,i.val)(p);t&&(s=t.toString(),s.length>u&&(c=' title="'+(0,T.stripHTML)((0,a.langNumeric)(t,"%s",!0))+'"',s=".."+s.substr(s.length-u)),l=`<span class="inl_bl left_count" ${c}>${s}</span>`);const m=function(){(0,i.val)(d,l),d.classList.toggle("left_void",!t),(0,i.setStyle)(d,{opacity:""})};h?s?(0,_.animateCount)(p,s,{str:"auto",onDone:m}):(0,_.animate)(d,{opacity:0},100,m):(m(),(0,i.setStyle)(d,{opacity:0}),(0,_.animate)(d,{opacity:1},100))}function pe(e,t,o,n,r=!1){const s=(0,T.intval)(t),a=Math.max(0,s);if(e===_e)return window.TopNotifier.setCount(a),void window.TopNotifier.createNewEventsBox(a);if(e===k.MARKET_EVENT_COUNTER_SECTION_ID)return void(0,k.updateMarketMenuEventCounter)(`#${e}`,a);let _="";if(n&&o){const e=s>0&&n?`?${n}`:"";_=(0,N.prepareHref)(o+e)}const c=(0,N.getLegacyLeftMenuItemEl)(e);if(de(e,s,c,_,r&&e===H&&(0,C.partConfigEnabled)("mail_unread_counter_highlight")),c){_&&(c.firstChild.href=_);const t=s>=0;(0,i.toggle)(c,t),e===Z&&(c.style.display="")}}function he(e){window.vk.id=e.id,(0,n.tmrUpdateUserId)(),e.body_class!==document.body.className&&(document.body.className=e.body_class||""),(0,v.updateSTL)(),ue(!0),window.cur._level=e.level,window.vk.id&&window.vk.id%1e3==1&&setTimeout((function(){(0,c.statlogsValueEvent)("page_scroll",0,window.cur.module,"0")}),300),ye(e);const t=document.querySelector("#mvk_footer_lnk");t&&e.mvklnk&&(t.firstChild.href=e.mvklnk),window.vk.nophone=(0,T.intval)(e.nophone),window.vk.staticheader=(0,T.intval)(e.staticheader),"leftads"in e&&0!==e.leftads&&window.__adsSet(e.leftads,e.ads_section||"",e.ads_can_show,e.ads_showed);let o=window.location.protocol+"//"+location.host+"/";e.loc&&(e.loc.startsWith("?")?o+=window.nav.strLoc:o+=e.loc);const i=document.URL===o?"":document.URL;setTimeout((()=>(0,P.updateCounters)(o,i)),10);const r=e.counters;if(!r.length)return;let s="",a="";(0,T.intval)(r[V])>0?(s="adsmarket",a="act=overview&status=-1"):(0,T.intval)(r[V])<-1?(r[V]=1,s="ads",a="act=a_comeback_office_redirect"):s="ads?act=office&last=1";const _=[G,$,Y,H,"nts",q,ee,"wsh",X,ne,_e,te,oe,ie,J],u=["friends","albums"+window.vk.id,"video","","notes","groups","vkpay","gifts.php?act=wishlist","apps",s,"","pages","docs","apps_manage","market"],d=["","act=added","section=tagged","","act=comments","","tab=invitations","","",a,"","","","",""];for(let e=0;e<_.length;e++){const t=r[e];(0,T.isObject)(t)||pe(_[e],t,u[e],d[e])}const p=r[K];(0,T.isObject)(p)&&function(e){Object.entries(e).forEach((([e,t])=>{const o=se+(0,T.intval)(e),n=(0,N.getLegacyLeftMenuItemEl)(o);de(o,(0,T.intval)(t),n)}))}(p),setTimeout(l.updSeenAdsInfo,0)}function me(e){e=e||{};const t=b.ls.get("last_reloaded")||[];t.unshift(Date.now());let o=t.length;o>5&&(t.splice(5,o-5),o=5),b.ls.set("last_reloaded",t);return!!(5===o&&t[0]-t[4]<2e4)&&((0,u.topError)('\n            <b>Reloading error</b>, please check internet connection, <b><a href="/page-777107_43991681">clear your cache</a></b> and restart your browser.\n            <br>If problem remains, please <a href="/support?act=new">report it here</a>.\n        ',{dt:15,type:6,msg:"Reload error, from "+(e.from||0)+", forced "+(e.force||0)+", url "+(e.url||"")+", query "+(e.query||"")}),!0)}function Ee(e){for(let t=0,o=window.globalHistory.length;t<o;t++)if(window.globalHistory[t].loc===e){const e=window.globalHistory.splice(t,1)[0];ge(e.cur),e.content.innerHTML="",--t,--o}}function fe(e,t,o){if(!window._tbLink)return;const n=e;if(e=(e||"").replace(/^\//,""),window._tbLink.loc=e,void 0===o&&(o=0,e))for(let t=0;t<window.globalHistory.length;t++)if(window.globalHistory[t].loc===e){o=1;break}if(n){try{window._tbLink.style.maxWidth=window._tbLink.parentNode.offsetWidth-35+"px"}catch(e){}(0,T.extend)(window._tbLink,{href:"/"+e,innerHTML:t,fast:o}),(0,i.show)(window._tbLink),window._stlWas=0}else(0,i.hide)(window._tbLink);(0,d.updSideTopLink)(1)}function ge(e){if(e._back&&e._back.hide&&e===window.cur)for(const t in e._back.hide)if(e._back.hide.hasOwnProperty(t))try{e._back.hide[t]()}catch(e){try{console.log(e.stack)}catch(e){}}if(e.destroy&&e.destroy.length)for(let t=0;t<e.destroy.length;t++)try{e.destroy[t](e)}catch(e){try{console.log(e.stack)}catch(e){}}}function ye(e){const t=document.querySelector("#footer_wrap"),o=document.querySelector("#page_layout"),n=document.querySelector(".TopHomeLink"),r=void 0===e.width?window.vk.width:e.width,s=void 0===e.width_dec?window.vk.width_dec:e.width_dec,a=void 0===e.width_dec_footer?window.vk.width_dec_footer:e.width_dec_footer;if(window.vk.noleftmenu===e.noleftmenu&&window.vk.nobottommenu===e.nobottommenu&&window.vk.width===e.width&&window.vk.width_dec_footer===e.width_dec_footer||(window.vk.noleftmenu!==e.noleftmenu&&e.noleftmenu&&(0,i.hide)("side_bar"),window.vk.nobottommenu!==e.nobottommenu&&(e.nobottommenu?(0,i.hide)("bottom_nav"):(0,i.show)("bottom_nav")),e.noleftmenu&&e.nobottommenu?t&&(t.classList.add("simple"),t.style.width="auto"):t&&(t.classList.remove("simple"),t.style.width=Number(r)-Number(a)+"px")),window.vk.notopmenu!==e.notopmenu&&(e.notopmenu?(0,i.hide)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap"):(0,i.show)("quick_search","qsearch_border","top_search","top_invite_link","top_menu_wrap")),n&&e.top_home_link_class&&window.vk.top_home_link_class!==e.top_home_link_class&&(n.className=e.top_home_link_class),o&&(r!==window.vk.width||s!==window.vk.width_dec)){const e=Number(r);(0,A.setGlobalCustomProperty)("--layout-width",r+"px"),document.querySelector("#page_body").style.width=e-Number(s)+"px";const t=document.querySelector("#ts_wrap");t&&t.classList.contains("vk")&&(t.style.width=e-191+"px"),setTimeout((()=>(0,d.updSideTopLink)(!0)),0),setTimeout(v.updateSTL,0),requestAnimationFrame((function(){try{window._tbLink.style.maxWidth=window._tbLink.parentNode.offsetWidth-35+"px"}catch(e){}}))}window.vk.noleftmenu===e.noleftmenu||e.noleftmenu||(0,i.show)("side_bar"),e.to&&document.querySelector("#quick_login_to")&&(0,i.val)("quick_login_to",e.to),window.vk.noleftmenu=e.noleftmenu,window.vk.nobottommenu=e.nobottommenu,window.vk.top_home_link_class=e.top_home_link_class,window.vk.notopmenu=e.notopmenu,window.vk.width=r,window.vk.width_dec=s,window.vk.width_dec_footer=a,window.vk.body_class=e.body_class,window.vk.staticheader=(0,T.intval)(e.staticheader),window.vk.no_ads=e.no_ads,window.vk.ad_preview=e.ad_preview}function ve(e,t,o){const n=e.z,i=e.f,a=e.w,_=(n||"").match(/^([a-z_]+)(-?\d+(?:_(?:-)?\d+)?)\/?(.*)/i);if(delete e.z,delete e.f,delete e.w,t||(t={}),(0,T.isEmpty)(e)){if(i&&((0,w.handleScroll)(i),void 0===n))return!1;if(t.hist)if(n||a){if(window.layerQueue.back("wiki",a,(_||[])[1],(_||[])[2]))return!1}else if(!1===n&&o?.w&&window.layerQueue.back("wiki",o.w))return!1;if(a){let e="",r="";const s=a.match(/^narrative([0-9\-]+)_(\d+)(?:_(\d+))?/),_=a.match(/^donut_payment(-\d+)/);if(!1===n)window.layers.fullhide(!!t.hist&&2);else{if(a.match(/^story([0-9\-]+)_(\d+)/))return(0,p.showStory)(a);if(s){let[,e,t,o]=s;return(0,p.showNarrative)(e,t,Number(o),"",{source:"narrative_link"})}if(_){const{source:e}=window.nav.objLoc,t=Number(_[1]);return(0,f.showDonutSubscribePopup)(null,null,t,e,"",{type:"subscribe",params:{act:"subscribe_popup"}})}if("stories"===a){if(window.cur.storyLayer)return window.cur.storyLayer.doHide(),!1}else if((0,U.isValidVmojiAvatarUrlPath)(a)){const e=(0,U.parseVmojiAvatarUrlPath)(a);if(e){const{ownerId:t,characterId:o,packId:n}=e;return(0,U.showVmojiAvatar)(t,o,n)}}else{if(a===x.wikiModalExampleInitiator.wLayer)return x.wikiModalExampleInitiator.showModal({userId:window.vk.id});if("story_publisher"===a)return(0,W.storyPublisherInitAsync)([{entrypoint:"link"}]),!0;o||(o=(0,T.clone)(window.nav.objLoc)),a&&(o.w=a),i&&(o.f=i),delete o.z,window.nav.setLoc(o,t),window.nav.objLoc.ref&&(e=window.nav.objLoc.ref,delete window.nav.objLoc.ref),window.nav.objLoc.ref_source&&(r=window.nav.objLoc.ref_source,delete window.nav.objLoc.ref_source)}}const c={w:a};if(e&&"third_party_profile_buttons"===e&&(0,C.partConfigEnabled)("apps_launch_query_params")){const e=window.nav.objLoc.vk_profile_id;if(!e)return;c.vk_user_id=e}return(0,C.partConfigEnabled)("mini_apps_use_custom_handler_for_open_app_in_layer")&&a.match(/^app([0-9]+)/)?(0,F.openAppInLayer)(a):((0,f.showWiki)(c,"note_new"===a,!1,{onLoaded:()=>{switch(Object.values(L.RefSource).includes(r)&&(0,D.onMarketItemCardOpen)({refSource:r,screen:window.nav.objLoc.ref_screen}),e){case L.RefSource.CLIPS:(0,D.onMarketItemCardOpen)({refSource:L.RefSource.CLIPS,screen:window.nav.objLoc.ref_screen});break;case L.RefSource.STORIES:(0,D.onMarketItemCardOpen)({refSource:L.RefSource.STORIES,screen:window.nav.objLoc.ref_screen})}},isZnav:1,customRef:e}),!1)}if("giftbox"===n)return!(0,h.showBox)("/al_gifts.php",{act:"get_gift_box",mid:t.id||0,fr:t.is&&t.id!==window.vk.id?0:1,link:window.nav.objLoc[0]},{stat:["gifts.css","ui_controls.js","ui_controls.css"],cache:1},window.event);if("validatebox"===n)return!(0,m.validateMobileBox)({closeLink:1,onDone:()=>document.querySelector("#change_phone_wrap")?.remove()});if("upload_video"===n)return window.VideoUpload.showBox();if(n===M.MY_QUESTIONS_BOX_URL_PARAMETER){let e=window.nav.objLoc.ref;return e?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):e="url",(0,S.showMyQuestionsBox)({ref:e}),!1}if(!1===n||!1===a){const e=!window.wkcur||!window.wkcur.shown||window.layers.fullhide!==window.WkView.hide;if(window.layers.fullhide&&(e||!1===a)&&!t.asBox){const e=o||{};!t.hist||e.z||e.w||e[0]?.includes("/")||e[0]?.match(/^(photo|video)(-?\d+_\d+)$/)||window.layerQueue.clear(),window.layers.fullhide({opts:t,noLoc:!!t.hist&&2})}const n=(0,E.curBox)();return n&&n.wkRaw&&n.hide(),!1}if(n&&_){const e=function(){return delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0};switch(_[1]){case"photo":return(0,f.showPhoto)(_[2],_[3],(0,T.extend)(t,{onFail:e,noHistory:!0})),!1;case"albums":return(0,f.showAlbums)(_[2],(0,T.extend)(t,{onFail:e,noHistory:!0})),!1;case"album":return(0,f.showAlbum)(_[2],(0,T.extend)(t,{onFail:e,noHistory:!0})),!1;case"tag":case"photo_tag":return(0,f.showPhotoTags)(_[2],(0,T.extend)(t,{onFail:e,noHistory:!0})),!1;case"video":case"clip":let o=_[3]||window.nav.objLoc.list,i=(0,T.extend)(t,{onFail:e,noLocChange:1,focusPlay:1});if(o){const e=[];let t="",n="";if(o.split("/").forEach((o=>{o.startsWith("pl_")?t=o:o.startsWith("ph_")?n=o.substr(3):e.push(o)})),o=e.join("/"),t){t=t.substr(3);const e=window.cur.currentModule?window.cur.currentModule():window.cur.module;i=(0,T.extend)(i,{playlistId:t,module:e,addParams:{force_no_repeat:1,show_next:1,playlist_id:t,show_all_videos:(0,T.intval)(window.cur.isCatalog&&(!window.VideoPlaylist||!window.VideoPlaylist.getList(t)))}}),n&&(i.addParams.promo_post_hash=n)}}return"clip"===_[1]&&(i.shortVideo=1),(0,g.showVideo)(_[2],o,i),!1;case"single":return void 0===a&&window.stManager.add(["single_pv.css",window.jsc("web/single_pv.js")]).then((()=>{const e=document.querySelector(`#${n}`);e?.onclick?.(new MouseEvent("click"))})),!1;case"accept_money":return(0,y.moneyTransferBox)(_[2],_[3]),!1;case"moneysend":const c=I.MoneyTransfer.showMoneyTransferBox({to_id:_[2],from:"public_link"},{},(e=>(c.hide(),setTimeout((0,h.showFastBox)(s.getLang("global_error"),e).hide,2e3),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t),!0)));return!1;case"audio_playlist":const[l,u]=_[2].split("_"),d=t.context||"";return r.AudioUtils.showAudioPlaylist(l,u,window.nav.objLoc.access_key?window.nav.objLoc.access_key:_[3],d,void 0,t.onDone),!1;case"article_edit":const[p,m]=_[2].split("_");return(0,f.openArticleEditor)(Number(p),Number(m),null,{},{}),!1;case"podcast":return window.stManager.add([window.jsc("web/podcast.js"),"page.css"]).then((()=>{window.Podcast.show(null,_[2],null,"url")})),!1;case"apps_achievements":return window.stManager.add([window.jsc("web/apps_achievements.js")]).then((()=>{window.AppsAchievementsPage?.showFriendAchievements(Number(_[2]))})),!1;case M.ASK_QUESTION_BOX_URL_PREFIX:const v=Number(_[2]);let w=window.nav.objLoc.ref;return w?(delete window.nav.objLoc.ref,window.nav.setLoc(window.nav.objLoc,t)):w="url",(0,S.showAskQuestionBox)(v,{ref:w}),!1;case"call":const A=()=>{window.stManager.add([window.jsc("web/notifier.js")]).then((()=>{const[e,o]=_[2].split("_"),n=Number(o),i=o&&R.Ranges.isGroupId(n)?n:void 0,r=()=>window.Calls?.call({vkId:Number(e),entryPoint:O.CallStatSource.LINK,groupId:i});window.Calls?.initialized?r():setTimeout((()=>{r()}),1500),delete window.nav.objLoc.z,window.nav.setLoc(window.nav.objLoc,t)}))};return(0,C.partConfigEnabled)("calls_open_warning_box_on_call_by_link")?(0,h.showFastBox)({title:s.getLang("global_warning")},s.getLang("calls_are_you_sure_to_call_this_user"),s.getLang("global_share_button_call"),(()=>{(0,E.curBox)()?.hide(),A()}),s.getLang("global_close")):A(),!1}}}}},659179:(e,t,o)=>{"use strict";o.d(t,{hideSnackbar:()=>y,showSnackbar:()=>g});var n=o(474848),i=o(296540),r=o(205338),s=o(440961),a=o(10196),_=o(282792),c=o(49442),l=o(983002),u=o(710736),d=o(881320),p=o(850101),h=o(206513);const m={top:"notifier_snackbar_align_top",center:"notifier_snackbar_align_center",bottom:"notifier_snackbar_align_bottom"},E={ok:(0,a.getIcon24CheckCircleOutline)().icon,warning:(0,_.getIcon24WarningTriangleOutline)().icon,error:(0,c.getIcon24ErrorCircleOutline)().icon,clock:(0,l.getIcon24ClockOutline)().icon,ok28:(0,u.getIcon28CheckCircleOutline)().icon,loudspeaker28:(0,d.getIcon28LoudspeakerSlashOutline)().icon},f={ok:"notifier_snackbar_type_ok",warning:"notifier_snackbar_type_warning",error:"notifier_snackbar_type_error",ok28:"notifier_snackbar_type_ok",loudspeaker28:"notifier_snackbar_type_loudspeaker",clock:"notifier_snackbar_type_clock"};async function g({id:e,type:t,text:o,subtitle:i,action:r,before:s,after:a,link:_,timeout:c,align:l,onClick:u,onClose:d}){let g;await Promise.resolve();const y={id:e,link:w(_),timeout:c,onClick:u?()=>((0,h.assertNotNull)(g),u(g)):void 0,onHide:d},b={author_link:w(s?.avatar?.link),add_photo:w(a?.url),tooltipHandler:e=>{e.classList.add("notifier_snackbar"),t&&E[t]?(e.classList.add("notifier_snackbar_with_custom_before"),e.classList.add(f[t])):s?.avatar?.url||s?.avatar?.content?s.avatar.fill&&e.classList.add("notifier_snackbar_with_filled_avatar"):!s?.avatar?.content&&s?.content&&e.classList.add("notifier_snackbar_with_custom_before"),(a?.rounded??1)&&e.classList.add("notifier_snackbar_with_rounded_after");const o=l?m[l]:void 0;if(o&&e.classList.add(o),r?.onClick){const t=e.querySelector(".notifier_snackbar_action");t?.addEventListener("click",(e=>{(0,h.assertNotNull)(g),r.onClick?.(e,g)}))}}};t&&E[t]?b.avatar_custom_content=E[t]:s&&(s.avatar?.url?b.author_photo=w(s.avatar.url):s.avatar?.content?b.avatar_custom_content=v(s.avatar.content):s.content&&(b.avatar_custom_content=v(s.content)),s.icon?.type?b.icon_type=s.icon.type:s.icon?.url&&(b.icon_custom={image_url:A(s.icon.url)}));const T=v((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"notifier_snackbar_text",children:o}),i&&(0,n.jsx)("div",{className:"notifier_snackbar_subtitle",children:i}),r&&(0,n.jsx)("div",{children:(0,n.jsx)("a",{className:"notifier_snackbar_action",href:r.href,children:r.label})})]}));return g=await(0,p.showDoneBoxAsync)(T,y,b),g}function y(e){window.Notifier?.hideEvent(e)}function v(e){const t=document.createElement("div"),o=(0,r.createRoot)(t);return(0,s.flushSync)((()=>{o.render((0,i.createElement)(i.Fragment,null,e))})),t.innerHTML}function w(e){return e&&A(e)}function A(e){return encodeURI(e).replace(/'/g,"%27")}},485413:(e,t,o)=>{"use strict";o.d(t,{default:()=>_,unpackStore:()=>c});var n=o(248782),i=o(250682),r=o(879007),s=o(474325);function a(e,t){if(!t)return i.ls.get(e);i.ls.set(e,t)}function _(e={},t={}){const o=(0,n.debounce)(a,300);let _=(0,r.extend)({},e),c=[],l=[];return t.store&&(_=i.ls.get(t.key)||_),{get:()=>_,set(e){return e(_).then((e=>(_=e,t.store&&o(t.key,e),this.emit(),this))).catch(s.dummyCatch)},setState(e){return this.set((t=>(t=(0,r.extend)(t,e),this.emit(),Promise.resolve(t))))},stash(){c.push(_),_=(0,r.extend)({},e),this.emit()},reset(){_=(0,r.extend)({},e),this.emit()},unmount(){_={},e=!1,l=[]},pop(){c.length>0&&(_=c.pop(),this.emit())},emit(){l.length>0&&l.forEach((e=>e(this)))},subscribe(e){l.includes(e)||l.push(e)},unsubscribe(e){l=l.filter((t=>t!==e))},mutate(e){e(_),t.store&&o(t.key,_),this.emit()}}}function c(e){return function(e){return!!e.get}(e)?e.get():e}},528411:(e,t,o)=>{"use strict";o.d(t,{MARKET_ALIEXPRESS_APP_ID:()=>n,MARKET_ALIEXPRESS_APP_NAME:()=>i,MARKET_ALIEXPRESS_GROUP_ID:()=>s,MARKET_ALIEXPRESS_HOME_URL:()=>r,MARKET_YOULA_GROUP_ID:()=>a});const n=6706576,i="ae_app",r="https://aliexpress.com",s=36941068,a=198582766},181794:(e,t,o)=>{"use strict";o.d(t,{MARKET_EVENT_COUNTER_SECTION_ID:()=>i,updateMarketMenuEventCounter:()=>r});var n=o(133969);const i="page_menu_group_market";function r(e,t){const o=document.querySelector(e);o&&n.PageActionCell.setCounter(o,t)}},474325:(e,t,o)=>{"use strict";function n(e=!1){console.trace(),e||window.alert("Вы поймали баг исчезнувшего lastMsg. Пожалуйста откройте консоль (Cmd + Option + I), остановите выполнение JS на странице (F8+cmd+\\) и свяжитесь с командой сообщений на вебе.")}function i(e){return console.error(e),Promise.reject(e)}o.d(t,{dummyCatch:()=>i,showDebugAlert:()=>n})},380181:(e,t,o)=>{"use strict";o.d(t,{getErrorText:()=>r,logImError:()=>i});var n=o(568352);function i(e,t=""){console.error(e);const o=e=>{(0,n.logError)(e,{environment:"im"})};if(e instanceof Error){const n=new Error(r(e,t));return n.name=e.name,n.stack=e.stack,o(n)}return o(new Error(r(e,t)))}function r(e,t=""){if(e instanceof Error)return t?`${t}: ${e.message}`:e.message;if("string"==typeof e||"number"==typeof e)return t?`${t}: ${e}`:`${e}`;if(e&&"api_error"===e.type){const o=JSON.stringify(e.error);return t?`${t}: ${o}`:o}if(e instanceof Object){let o="";try{o=JSON.stringify(e)}catch(e){o=`Error data ${e}`}return t?`${t}: ${o}`:o}return t}},617430:(e,t,o)=>{"use strict";o.d(t,{friendsRecommLogClear:()=>l,friendsRecommLogGet:()=>c,friendsRecommLogOnFail:()=>p,friendsRecommLogSave:()=>_,friendsRecommLogSend:()=>u,getRef:()=>a});var n,i=o(250682),r=o(879007),s=o(624216);!function(e){e.friends_recomm="friends_recomm"}(n||(n={}));const a=()=>"feed"===window.cur.module&&window.Feed?window.Feed?.getModuleRef():window.cur.module;function _(e,t=!1){const o=c();o.push(e),i.multiAccountLs.set("friends_recomm",o),u(t)}function c(e=!1,t,o=!1){const n=i.multiAccountLs.get("friends_recomm");let s=Array.isArray(n)?n:[];return t&&(s=s.filter((e=>(o?e[1]!==t:e[1]===t)&&(0,r.inArray)(e[0],["show_user_rec","open_user"])))),e&&(s=s.map((e=>e.join("|")))),s}function l(e){if(e){const t=c(!1,e,!0);t.length?i.multiAccountLs.set("friends_recomm",t):i.multiAccountLs.remove("friends_recomm")}else i.multiAccountLs.remove("friends_recomm")}function u(e=!1){!window.cur?.friendsRecommLogIdle&&window?.curNotifier?.idle_manager&&(Array.isArray(window.cur.onIdle)||(window.cur.onIdle=[]),Array.isArray(window.cur.onUnidle)||(window.cur.onUnidle=[]),window.cur.friendsRecommLogIdle=()=>{clearTimeout(window.cur.friendsRecommLog)},window.cur.onIdle.push(window.cur.friendsRecommLogIdle),window.cur.onUnidle.push(u)),clearTimeout(window.cur.friendsRecommLog),e?d():window.cur.friendsRecommLog=window.setTimeout(d,1e4)}function d(){if(window.cur.friendsRecommProcess)return;const e=c(!0);e.length&&(window.cur.friendsRecommProcess=!0,l(),s.ajax.post("al_friends.php",{act:"a_recomm_logs",logs:e},{onDone:()=>{delete window.cur.friendsRecommProcess},onFail:()=>(p(e),delete window.cur.friendsRecommProcess,!0)}))}function p(e){let t=c();t=e.map((e=>e.split("|"))).concat(t),i.multiAccountLs.set("friends_recomm",t)}},185628:(e,t,o)=>{"use strict";o.d(t,{blockInstanceSetForFeedRowContent:()=>s,feedInitialViewRecommendedGroupsTrigger:()=>r});var n=o(946076);const i="__RecommendedGroups";function r(e,t){const o=e.querySelector(".js-feed_groups_recomm"),r=e.querySelector(".ui_gallery");if(!o||!r)return void console.error(new Error("RecommendedGroups: missing block container for view"),o,r);const s=r.getAttribute("data-code")||"",a=o[i]??void 0;if(!a)return void console.error(new Error("RecommendedGroups: missing block instance"),o,r);const _="number"==typeof t?t:void 0;a.viewBlock(s,_);const c=(0,n.uiGetGallery)(r);c&&c.getVisibleItems().forEach((e=>{a.onViewGroup(e[0])})),r.visible=!0}function s(e,t){e[i]=t}},477845:(e,t,o)=>{"use strict";o.d(t,{addPhotoUnblurred:()=>s,isPhotoUnblurred:()=>i,listenPhotoUnblurred:()=>a});var n=o(678751);function i(e){const{unblurredPhotos:t}=window.cur;return!!t&&t.photoIds.has(e)}function r(){let e=window.cur.unblurredPhotos;return e||(e={events:new n.default,photoIds:new Set},window.cur.unblurredPhotos=e),e}function s(e){const t=r();t.photoIds.add(e),t.events.emit("addPhotoUnblurred",e)}function a(e){const t=r();return t.events.addListener("addPhotoUnblurred",e),function(){t.events.removeListener("addPhotoUnblurred",e)}}},857031:(e,t,o)=>{"use strict";o.d(t,{isVKCOMProfileRedesignedEnabled:()=>c,markLiveInStoriesFinished:()=>d,markSeenStoriesInProfile:()=>u,showFansBox:()=>l,showOwnerGiftsBox:()=>m,showSendGiftBox:()=>p,showSendSelectedGiftInBirthdayBox:()=>h,showSilentModeBox:()=>E});var n=o(20025),i=o(850101),r=o(870700),s=o(490712),a=o(476726),_=o(114896);function c(){return(0,a.partConfigEnabled)("redesign_web_profile_feature")}function l(e,t,o,i={},r=""){return window.cur.viewAsBox?window.cur.viewAsBox():!(0,n.showBox)("al_fans.php",{act:"box",tab:t||"fans",oid:e,from:r},{cache:1,stat:["page_help.css",window.jsc("web/fansbox.js")],params:{...i}},o)}function u(e){"profile"===window.cur.module&&window.Profile?.markSeenStories&&window.Profile.markSeenStories(e)}function d(e){"profile"===window.cur.module&&window.Profile?.markLiveInStoriesFinished&&window.Profile.markLiveInStoriesFinished(e)}function p(e,t,o,s=r.GiftRef.PROFILE_BUTTON){const a=(0,i.getBoxLayerWrap)();a&&(window.cur.gftbxWasScroll=a.scrollTop,a.scrollTop=0),(0,n.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,fr:e===t?1:0,ref:s},{stat:["gifts.css",window.jsc("web/wide_dd.js"),"wide_dd.css"],cache:1},o)}function h(e,t,o=r.GiftRef.PROFILE_BUTTON){(0,s.statlogsValueEvent)("gifts_tooltip_action",0,"gift_click",t),(0,n.showBox)("al_gifts.php",{act:"get_gift_box",mid:e,gift:t,ref:o})}function m(e,t,o){return!(0,n.showBox)("al_gifts.php",{act:"box",tab:o||"received",mid:e},{cache:1,stat:["gifts.css",window.jsc("web/gifts.js")]},t)}function E(e,t,o,n){(0,_.showSilentModeEnabledFormBox)({csrf:o,endDate:e,callsMailSend:t,redirectOnClose:!1,redirectOnSubmit:!1,onSubmit:n})}},929085:(e,t,o)=>{"use strict";o.d(t,{showAskQuestionBox:()=>u,showMyQuestionsBox:()=>l});var n=o(452314),i=o(850101),r=o(730735),s=o(547754),a=o(476726),_=o(789176),c=o(731709);function l(e){if(!(0,a.partConfigEnabled)("profile_questions_enabled"))return;if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(window.MyQuestionsBox?.isMounted())return;e?.ref&&(0,c.logQuestionsOpeningEvent)(window.vk.id,e.ref,_.QuestionAnalyticBoxName.myQuestions);const t=document.querySelector("#box_layer_wrap"),o=document.querySelector("#box_loader");(0,n.show)(t),(0,n.show)(o),(0,i.refreshBoxLoaderCoords)(),Promise.all([(0,r.getQuestions)(),window.stManager.add([window.jsc("web/my_questions.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_my_questions_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([i])=>{window.boxQueue.count()||(0,n.hide)(t),(0,n.hide)(o),window.MyQuestionsBox.init(i.count,i.items,i.profiles,i.next_from,{onClose:e?.onClose,fromElement:e?.fromElement})})).catch((e=>{(0,n.hide)(t),(0,n.hide)(o),(0,s.logQuestionError)({error:e,additionalText:"An error occurred while loading data for my_questions.js"})}))}function u(e,t){if(!(0,a.partConfigEnabled)("profile_questions_enabled"))return;if(e===window.vk.id)return void l({ref:t?.ref,fromElement:t?.fromElement});if(window.cur.viewAsBox)return void window.cur.viewAsBox();if(window.AskQuestionBox?.isMounted())return;if(!e)return void(0,s.logQuestionError)({error:"Empty toUserId has been passed to showAskQuestionBox"});t?.ref&&(0,c.logQuestionsOpeningEvent)(e,t.ref,_.QuestionAnalyticBoxName.askQuestion);const o=document.querySelector("#box_layer_wrap"),u=document.querySelector("#box_loader");(0,n.show)(o),(0,n.show)(u),(0,i.refreshBoxLoaderCoords)(),Promise.all([(0,r.getUsers)([e]),window.stManager.add([window.jsc("web/ask_question.js")]),new Promise(((e,t)=>{window.ajax.post("al_questions.php",{act:"load_ask_question_box_lang_keys"},{onDone:()=>{e()},onFail:()=>(t(),!0)})}))]).then((([e])=>{(0,n.hide)(o),(0,n.hide)(u);const i=e[0];i&&window.AskQuestionBox.init(i,t?.fromElement)})).catch((e=>{(0,n.hide)(o),(0,n.hide)(u),(0,s.logQuestionError)({error:e,additionalText:"An error occurred while loading data for ask_question.js"})}))}},114896:(e,t,o)=>{"use strict";o.d(t,{showSilentModeEnabledFormBox:()=>a,showSilentModeEndFormBox:()=>_,showSilentModeFormBox:()=>s});var n=o(474848),i=o(507607),r=o(326382);function s(e){const t=(0,i.asyncComponent)((()=>Promise.all([o.e(91498),o.e(89631),o.e(73214)]).then(o.bind(o,211679))),(({SilentModeForm:e})=>e));(0,r.showMessageBoxModalSuspense)((o=>(0,n.jsx)(t,{...o,...e})),{width:400})}function a(e){const t=(0,i.asyncComponent)((()=>Promise.all([o.e(91498),o.e(89631),o.e(73214)]).then(o.bind(o,232804))),(({SilentModeEnabledForm:e})=>e));(0,r.showMessageBoxModalSuspense)((o=>(0,n.jsx)(t,{...o,...e})),{width:400})}function _(e,t){const s=(0,i.asyncComponent)((()=>Promise.all([o.e(91498),o.e(89631),o.e(73214)]).then(o.bind(o,370580))),(({SilentModeEndForm:e})=>e));(0,r.showMessageBoxModalSuspense)((t=>(0,n.jsx)(s,{...t,...e})),{width:400,onDestroy:t})}},302495:(e,t,o)=>{"use strict";o.d(t,{EventItemType:()=>i.EventItemType,SearchClickActionMap:()=>i.SearchClickActionMap,getTrackCodeFromElement:()=>s,logEvent:()=>a,logSearchAudioClick:()=>c,logSearchClipClick:()=>_,logSearchPlaylistClickOut:()=>l});var n=o(581903),i=o(695290),r=o(512912);const s=(e,t)=>e?t&&e.dataset?.[t]?e.dataset?.[t]||"":e.dataset?.trackCode?e.dataset?.trackCode||"":s(e.parentElement,t):"",a=e=>{e.track_code&&n.searchStatsCollector.logEvent(e)},_=e=>{/^search$|^clips\/search$|^search\?|^clips\/search\?|^search\/clips$|^search\/clips?$/g.test(window?.mvcur?.mvPrevLoc?.[0]??"")&&window?.mvcur?.mvShown&&n.searchStatsCollector.logEvent({action:e,type:i.EventItemType.CLIP,track_code:(0,r.getVideoTrackCode)()})},c=(e,t="")=>{a({action:e,track_code:t,type:i.EventItemType.MUSIC_AUDIO})},l=e=>{n.searchStatsCollector.logOutOfSerpEvent({type:i.EventItemType.MUSIC_PLAYLIST,action:e})}},512912:(e,t,o)=>{"use strict";o.d(t,{getVideoTrackCode:()=>r,pickTrackCodeFromURL:()=>i});var n=o(687604);const i=()=>{setTimeout((()=>n.TRACK_CODE_TYPES.some((e=>(e=>{const t=window.nav.objLoc[e];if(!t)return!1;const o={...window.nav.objLoc};return delete o[e],window.nav.setLoc(o,{replace:!0}),history.replaceState({...history.state,[e]:t},""),!0})(e)))))},r=()=>window?.Videoview?.getMvData()?.track_code??window.mvcur?.options?.addParams?.track_code??""},359244:(e,t,o)=>{"use strict";async function n(e){const{showMenuSettingsBox:t}=await Promise.all([o.e(91498),o.e(6694)]).then(o.bind(o,477547));t(e)}o.d(t,{loadMenuSettingsBox:()=>n})},85953:(e,t,o)=>{"use strict";o.d(t,{initColorSchemeDropdowns:()=>r});var n=o(216147),i=o(832813);function r(){document.querySelectorAll(".SettingsColorSchemeDropdown").forEach((e=>{!function(e){if(e.dataset.inited)return;e.dataset.inited="1";let t=e.dataset.value,o=JSON.parse(e.dataset.items||"[]");n.ColorScheme.isSchemesAutoSwitchingSupported()||(t===n.ColorSchemeMode.Auto&&(t=n.ColorSchemeMode.Light),o=o.filter((([e])=>e!==n.ColorSchemeMode.Auto)));const r=new window.InlineDropdown(e,{selected:t,items:o,onSelect(t){n.colorScheme.setMode(t),(0,i.logTopNavElements)("theme");const o=e.dataset.hash;window.ajax.post("al_settings.php?act=a_save_color_scheme_mode",{mode:t,hash:o})}}),s=n.colorScheme.subscribe((()=>{e&&r?r.val(n.colorScheme.getMode(),!0):s()}))}(e)}))}},169920:(e,t,o)=>{"use strict";o.d(t,{createLeftMenuInitiator:()=>S,initLeftMenu:()=>C});var n=o(474848),i=o(440961),r=o(33371),s=o(293819),a=o(505954),_=o(918967),c=o(296540),l=o(788407),u=o(182753),d=o(819952),p=o(331313),h=o(916369),m=o(240515),E=o(490712),f=o(320090),g=o(20191),y=o(610989),v=o(144770),w=o(359244),A=o(476726),b=o(464927);const T=Date.now(),I=(0,r.default)((()=>(0,A.partConfigEnabled)("web_mourning")));function P(e,t){window.vk.statsMeta.st&&(0,v.saveStatlogEvents)({name:"left_menu_interactions",value:1,keys:[e,window.vk.id,T,...t??[]]})}function C(e){(0,u.setLeftMenu)(e),requestAnimationFrame((()=>{S(document).render()}))}function S(e){const t=e.querySelector("#"+(0,s.getReactRootElId)("LeftMenuRoot"));return{render(){t&&i.render((0,n.jsx)(R,{}),t)},unmount(){t&&i.unmountComponentAtNode(t)}}}const O=()=>document.body.classList.contains("body_narrow_sidebar"),M=(e,t,{icon:o,...n})=>{P("nav_go",[e.currentTarget.tagName,JSON.stringify(n),JSON.stringify(t)]),window.vk.statsMeta.st&&(t.debugLog=(e,...t)=>P(e,t));const i=(0,g.navGo)(e.currentTarget,e.nativeEvent,t);!1===i&&(0,d.cancelEvent)(e),P("nav_go_result",[void 0===i?"undefined":JSON.stringify(i)])},D=(e,t)=>{e.counter_href&&(t.stopPropagation(),M(t,{},e))},L=(e,t)=>{P("item_click",[e?.id,e?.href,e?.action?.type]),(e=>{e.id&&(0,h.unPrefixId)(e.id)===m.PAGE_ID_CLIPS&&(0,E.statlogsValueEvent)("clips_sections_open",1,"clips")})(e);const o=t.nativeEvent,{action:n}=e;if(n){const i=n.type;switch(i){case"nav_go":return void M(t,JSON.parse(n.options_serialized),e);case"open_app":return P("show_app",[n.app_id,n.ref]),void(0,l.showApp)(o,n.app_id,n.need_install,n.ref);case"custom":P("custom_action",[n.handler]);try{Function("event",n.handler)(o)}catch(e){console.error(e),P("custom_failure",e?.message?[e.message]:[])}return;case"external_link":return}P("unknown_action"),(0,p.expectNever)(i)}e.href&&M(t,{},e)},k=e=>(0,u.closeTooltip)(e);function R(){P("render");const{sections:e}=(0,u.useLeftMenuStore)(),[t,o]=(0,c.useState)(O);return(0,c.useEffect)((()=>{const e=new MutationObserver((e=>{e.forEach((e=>{"attributes"===e.type&&"class"===e.attributeName&&o(O())}))}));return e.observe(document.body,{attributes:!0,attributeFilter:["class"]}),()=>{e.disconnect()}}),[]),(0,c.useEffect)((()=>{e.forEach((e=>{e.items.forEach((e=>{e.add_static&&window.stManager.add(e.add_static)}))}))}),[e.length]),e.length?(0,n.jsx)(a.AppRootProvider,{children:(0,n.jsx)(_.LeftMenuOld,{sections:e,narrow:t,settingsAriaLabel:y.getLang("settings_menu_box"),onSelect:L,onCounterClick:D,onSettingsClick:e=>{(0,w.loadMenuSettingsBox)(e.settings_type)},className:I()?b.default.mourning:void 0,onTooltipClose:k})}):(0,n.jsx)(f.LeftMenuLegacySkeleton,{})}},639267:(e,t,o)=>{"use strict";o.d(t,{leftMenu:()=>r});var n=o(182753),i=o(916369);const r={showItem(e){(0,n.setItemHidden)({id:e,isHidden:!1});const t=(0,i.getLegacyLeftMenuItemEl)(e);t&&(t.style.display="")},setBadge(e,t){(0,n.setBadge)({id:e,badge:t});const o=(0,i.getLegacyLeftMenuItemEl)(e);o&&(o.classList.toggle("LeftMenu__item--withRedDot","prominent"===t),o.classList.toggle("LeftMenu__item--withBlueDot","accent"===t))},removeBadge(e){this.setBadge(e,void 0)}}},320090:(e,t,o)=>{"use strict";o.d(t,{LeftMenuLegacySkeleton:()=>r});var n=o(474848),i=(o(296540),o(671194));const r=()=>(0,n.jsx)("div",{className:"LeftMenuLegacySkeleton",children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18].map((e=>(0,n.jsxs)("div",{className:"LeftMenuLegacySkeleton__item",children:[(0,n.jsx)(i.Skeleton,{className:"LeftMenuLegacySkeleton__icon",width:20,height:20,colorFrom:"var(--vkui--color_skeleton_to)",noAnimation:!0,circle:!0}),(0,n.jsx)(i.Skeleton,{className:"LeftMenuLegacySkeleton__label",height:12,colorFrom:"var(--vkui--color_skeleton_to)",noAnimation:!0})]},e)))})},585364:(e,t,o)=>{"use strict";o.d(t,{createLeftMenuInitiator:()=>s.createLeftMenuInitiator,getLeftMenuHeight:()=>r.getLeftMenuHeight,initLeftMenu:()=>s.initLeftMenu,leftMenu:()=>n.leftMenu,setLeftMenu:()=>i.setLeftMenu,updateItemCount:()=>i.updateItemCount});var n=o(639267),i=o(182753),r=o(916369),s=o(169920)},182753:(e,t,o)=>{"use strict";o.d(t,{closeTooltip:()=>g,setBadge:()=>E,setItemHidden:()=>f,setLeftMenu:()=>h,updateItemCount:()=>m,useLeftMenuStore:()=>y});var n=o(942451),i=o(32489),r=o(679005),s=o(916369),a=o(293721),_=o(240515),c=o(8520);function l(e){return t=>t.id===e||t.id===(0,s.prefixId)(e)}function u(e,t,o){return(0,r.produce)(e,(e=>{e.some((({items:e})=>e.some((e=>{if(t(e))return o(e),!0}))))}))}const d=(0,n.makeSharedState)("left-menu-store",(()=>function(){const e=(0,i.createStore)([]),t=(0,i.combine)({sections:e}),o=(0,i.createEvent)("setLeftMenu"),n=(0,i.createEvent)("updateItemCount"),r=(0,i.createEvent)("setBadge"),a=(0,i.createEvent)("setHidden"),d=(0,i.createEvent)("closeTooltip");e.on(o,((e,t)=>"internal.getWebLeftMenu"===t.method&&t.response?.sections?(0,c.decodeHTMLEntitiesDeep)(t.response.sections):[])).on(n,((e,{id:t,count:o,href:n})=>u(e,l(t),(e=>{e.count=Math.max(o,0),e.is_hidden=o<0,n&&(e.href=n),t===_.PAGE_ID_MARKET_ORDERS&&(e.is_hidden=!1)})))).on(r,((e,{id:t,badge:o})=>u(e,l(t),(e=>{e.badge=o})))).on(a,((e,{id:t,isHidden:o})=>u(e,l(t),(e=>{e.is_hidden=o})))).on(d,((e,{hint_id:t})=>{return u(e,(o=t,e=>e.tooltip?.hint_id===o),(e=>{delete e.tooltip}));var o}));const p=(0,i.createEffect)((({hint_id:e,hint_hash:t})=>{(0,s.turnOffTooltip)(e,t)}));return(0,i.sample)({source:d,target:p}),{$leftMenu:t,setLeftMenu:o,updateItemCount:n,setBadge:r,setItemHidden:a,closeTooltip:d}}()),{version:0}),{$leftMenu:p,setLeftMenu:h,updateItemCount:m,setBadge:E,setItemHidden:f,closeTooltip:g}=d(),y=()=>(0,a.useStore)(p)},916369:(e,t,o)=>{"use strict";o.d(t,{getLeftMenuHeight:()=>_,getLegacyLeftMenuItemEl:()=>a,prefixId:()=>i,prepareHref:()=>s,turnOffTooltip:()=>c,unPrefixId:()=>r});var n=o(293819);function i(e){return`l_${e}`}function r(e){return e.replace(/^l_/,"")}function s(e){return e.startsWith("/")?e:`/${e}`}function a(e){const t=(0,n.getReactRootElId)("LeftMenuRoot"),o=document.querySelector(`#${i(e)}`);return o?.closest(`#${t}`)?null:o}function _(){return document.querySelector(".side_bar_nav_wrap")?.getBoundingClientRect()?.height||0}function c(e,t){return new Promise(((o,n)=>{window.ajax.post("al_index.php",{act:"help_hints_hide",hash:t,hint_id:e},{onDone:o,onFail:e=>(n(e),!0)})}))}},211931:(e,t,o)=>{"use strict";o.d(t,{cid:()=>c});var n=o(507035);let i=1e3;const r=function(e){for(let t=0;t<10;t++)e.push(t.toString());for(let t=0;t<25;t++)e.push(String.fromCharCode(97+t)),e.push(String.fromCharCode(65+t));return(0,n.shuffle)(e)}([]),s=r.length;function a(e){return(e>=s?a((e/s|0)-1):"")+r[e%s|0]}const _=function(){const e=[];for(let t=0;e.length<5&&t<r.length;t++)(e.length>0||!/[0-9]/.test(r[t]))&&e.push(r[t]);return e.join("")}(),c=()=>_+a(i++)},528549:(e,t,o)=>{"use strict";o.d(t,{Locator:()=>c});var n=o(211931),i=o(942451),r=o(476726);const s=/((#|\.)[a-zA-Z0-9_\-]*)(?:[:|\s]{0})/gi,a=[".SmokeGuard__char",".SmokeGuard__char--fake",".mailru-visibility-check",".post_marked_as_ads",".adaptive_ad","._ads_block_data_w"],_=["#ads_left"];class c{lookup(e){return this.cache.names[e]??e}getMappingPairs(){return Object.entries(this.cache.names)}hasCache(){return Object.keys(this.cache.names).length>0}disableLocator(){this.isEnabled=!1}setObserving(e){this.isObserving=e}transform(e){const t=(0,r.partConfigEnabled)("tgb_adblock_protection"),o=(0,r.partConfigEnabled)("post_adguard_protection_promo")||t;let i=a;if(t&&(i=i.concat(_)),!(o&&e.startsWith(".ads_ad")||i.includes(e)))return e.slice(1);let s=this.cache.names[e];return s?s=s.slice(1):(s=(0,n.cid)(),this.cache.names[e]=e[0]+s,this.cache.reverse[s]=e),s}parseRulesByText(e){const t=document.implementation.createHTMLDocument(""),o=document.createElement("style");return o.textContent=e,t.body.appendChild(o),o?.sheet?.cssRules}async wrap(){const e=await window.stManager.add("SmokeGuard.css"),t=e?.[0];if(!t)return;const[,o]=t,n=(0,r.partConfigEnabled)("post_adguard_protection_promo")||(0,r.partConfigEnabled)("tgb_adblock_protection");let i=null;if(n){const e=await window.stManager.add("ads_light.css"),t=e?.[0];if(t){const[,e]=t;i=e}else i=document.querySelector('link[href*="ads_light"]')}const a=await Promise.all([fetch(o.href).then((e=>e.text())),n&&i?fetch(i.href).then((e=>e.text())):Promise.resolve("")]);if(!a.length)throw Error("[Locator.wrap] smoke_guard styles not found");const _=this.parseRulesByText(a.join(""));if(!_)throw Error("[Locator.wrap] no styleSheet parsed");let c;try{c=new CSSStyleSheet}catch(e){return}for(const e of _){if(!(e instanceof CSSStyleRule))continue;const t=e.selectorText,o=t.replace(s,(e=>`${e[0]}${this.transform(e)}`)),n=e.cssText.replace(t,o);c.insertRule(n,c.cssRules.length)}document.adoptedStyleSheets=[...document.adoptedStyleSheets||[],c]}constructor(){this.isEnabled=!0,this.cache={names:{},reverse:{}},this.isObserving=!1}}c.getInstance=(0,i.makeSharedState)("smoke_guard/smoke_screen/locator",(()=>new c),{version:2})},87642:(e,t,o)=>{"use strict";o.d(t,{createAppearanceModifier:()=>i,createElement:()=>s,createSizeModifier:()=>r,setContent:()=>a});var n=o(226095);function i(e){return`FlatButton--${e}`}function r(e){return`FlatButton--size-${e}`}function s(e,t){const o=document.createElement(e);return t&&(o.className=t),o}function a(e,t){null!=t&&((0,n.emptyNode)(e),"string"==typeof t?e.innerHTML=t:e.appendChild(t))}},258643:(e,t,o)=>{"use strict";o.d(t,{FlatButton:()=>l,FlatButtonAppearance:()=>a.FlatButtonAppearance,FlatButtonSize:()=>a.FlatButtonSize});var n=o(8520),i=o(52661),r=o(626490),s=o(87642),a=o(754422),_=o(548659);function c(e){return!!e&&e.classList.contains("FlatButton--locked")}const l={isFlatButton:function(e){return Boolean(e&&e.classList&&e.classList.contains("FlatButton"))},lock:function(e){if(!e||c(e))return;const t=e.classList.contains((0,s.createSizeModifier)(a.FlatButtonSize.L)),o=t?(0,i.getIcon24Spinner)().icon:(0,r.getIcon16Spinner)().icon,_=(0,s.createElement)("span",(0,n.classNames)("FlatButton__spinner",{"FlatButton__spinner--l":t}));_.innerHTML=o,e.appendChild(_),e.classList.add("FlatButton--locked")},unlock:function(e){e&&(e.querySelector(".FlatButton__spinner")?.remove(),e.classList.remove("FlatButton--locked"))},isLocked:c,isDisabled:function(e){return!!e&&e.classList.contains("FlatButton--disabled")},render:_.render,setDisabled:function(e,t=!0){e&&("button"===e.tagName.toLowerCase()&&(e.disabled=t),e.classList.toggle("FlatButton--disabled",t))},getAppearance:function(e){if(e)return Object.values(a.FlatButtonAppearance).find((t=>e.classList.contains((0,s.createAppearanceModifier)(t))))},setAppearance:function(e,t){e&&Object.values(a.FlatButtonAppearance).forEach((o=>{e.classList.toggle((0,s.createAppearanceModifier)(o),o===t)}))},setSize:function(e,t){e&&Object.values(a.FlatButtonSize).forEach((o=>{e.classList.toggle((0,s.createSizeModifier)(o),o===t)}))},setLabel:function(e,t){const o=e.querySelector(".FlatButton__in");if(!o)return;const n=o.querySelector(".FlatButton__content");n?(0,s.setContent)(n,t):o.prepend((0,_.renderContent)(t))},setBefore:function(e,t){const o=e?.querySelector(".FlatButton__in");if(!o)return;const n=e.querySelector(".FlatButton__before");null!=t?n?(0,s.setContent)(n,t):o.prepend((0,_.renderBefore)(t)):n?.remove()},setAfter:function(e,t){const o=e?.querySelector(".FlatButton__in");if(!o)return;const n=e.querySelector(".FlatButton__after");null!=t?n?(0,s.setContent)(n,t):o.prepend((0,_.renderAfter)(t)):n?.remove()}}},548659:(e,t,o)=>{"use strict";o.d(t,{render:()=>r,renderAfter:()=>a,renderBefore:()=>s,renderContent:()=>_});var n=o(8520),i=o(87642);function r(e){const{children:t,before:o,after:r,className:c,appearance:l,size:u,round:d,wide:p,flexWide:h,href:m,disabled:E,noPointerEventsForContent:f,restAttrs:g={},dangerousAttrbutesCode:y}=e,v={...g};let w;m?(w=document.createElement("a"),v.href=m):(w=document.createElement("button"),v.type||(v.type="button"));const A=w.tagName.toLowerCase(),b=!t&&Boolean(r)!==Boolean(o);w.className=(0,n.classNames)("FlatButton",(0,i.createAppearanceModifier)(l),(0,i.createSizeModifier)(u),{"FlatButton--round":d,"FlatButton--wide":p,"FlatButton--flexWide":h,"FlatButton--disabled":E,"FlatButton--singleIcon":b},c),Object.entries(v).forEach((([e,t])=>{null!=t&&w.setAttribute(e,String(t))})),E&&"button"===A&&(w.disabled=!0);const T=(0,i.createElement)("span",(0,n.classNames)("FlatButton__in",{"FlatButton__in--noPointerEvents":f}));if(w.appendChild(T),o&&T.appendChild(s(o)),t){const e=_(t);T.appendChild(e)}if(r&&T.appendChild(a(r)),y){const e=document.createElement("div");e.innerHTML=`<div ${y}></div>`;const t=e.firstElementChild;if(!t)return w;const o=t.attributes;Object.keys(o).forEach((e=>{const t=o[Number(e)],n=t.value;null!=n&&w.setAttribute(t.name,n)}))}return w}function s(e){const t=(0,i.createElement)("span","FlatButton__before");return(0,i.setContent)(t,e),t}function a(e){const t=(0,i.createElement)("span","FlatButton__after");return(0,i.setContent)(t,e),t}function _(e){const t=(0,i.createElement)("span","FlatButton__content");return(0,i.setContent)(t,e),t}},754422:(e,t,o)=>{"use strict";o.d(t,{FlatButtonAppearance:()=>n,FlatButtonSize:()=>i});const n={PRIMARY:"primary",SECONDARY:"secondary",TERTIARY:"tertiary",POSITIVE:"positive",NEGATIVE:"negative",OVERLAY_PRIMARY:"overlay-primary",ACCENT_OUTLINE:"accent-outline"},i={S:"s",M:"m",L:"l"}},133969:(e,t,o)=>{"use strict";o.d(t,{PageActionCell:()=>a});var n=o(452314),i=o(626490);function r(e){return null!=e&&e.classList.contains("PageActionCell")}const s="PageActionCell--locked";const a={isPageActionCell:r,isLocked:function(e){return r(e)&&e.classList.contains(s)},lock:function(e){e&&(e.classList.contains(s)||(e.lockTimeout&&clearTimeout(e.lockTimeout),e.resetLockTimeout=!1,e.lockTimeout=window.setTimeout((()=>{if(!e.resetLockTimeout){const t=(0,n.ce)("div",{className:"PageActionCell__spinner"});t.innerHTML=(0,i.getIcon16Spinner)().icon,e.prepend(t),e.classList.add(s)}}),500)))},unlock:function(e){if(e&&(e.resetLockTimeout=!0,e.classList.contains(s))){e.classList.remove(s);const t=e.querySelector(".PageActionCell__spinner");t&&t.remove()}},update:function(e,t){const{icon:o,label:n,counter:i}=t,r=e.querySelector(".PageActionCell__label");if(r&&(r.innerHTML=n),void 0!==o){const t=e.querySelector(".PageActionCell__icon");t&&(t.innerHTML=o)}if(void 0!==i){const t=e.querySelector(".PageActionCell__counter");t&&(t.innerHTML=i)}},setDescription:function(e,t){let o=e.querySelector(".PageActionCell__description");(o||t)&&(o||(o=document.createElement("span"),o.className="PageActionCell__description",e.querySelector(".PageActionCell__in")?.append(o)),t?o.innerHTML=t:o.remove(),e.classList.toggle("PageActionCell--with-desc",Boolean(t)))},getLabelElement:function(e){return e.querySelector(".PageActionCell__label")},getCounter:function(e){let t=e.querySelector(".PageActionCell__counter");return t&&Number(t.innerHTML)||0},setCounter:function(e,t){let o=e.querySelector(".PageActionCell__counter");!o&&t<=0||(o||(o=document.createElement("div"),o.classList.add("PageActionCell__counter"),e.appendChild(o)),t<=0?o.remove():o.innerHTML=String(t))}}},572214:(e,t,o)=>{"use strict";o.d(t,{ModalBoxExample:()=>a});var n=o(474848),i=o(272259),r=o(651696),s=o(380118);function a({header:e,children:t,fullscreen:o,onDestroy:a}){return(0,n.jsx)(i.MessageBoxModal,{onDestroy:a,fullscreen:o,children:({onClose:o})=>(0,n.jsx)(r.ModalBoxFast,{header:e??null,closeAriaLabel:"Закрыть",onClose:o,bodyInsetLevel:2,children:(0,n.jsx)(s.Text,{children:t})})})}},37559:(e,t,o)=>{"use strict";o.d(t,{wikiModalExampleInitiator:()=>h});var n=o(474848),i=o(187797),r=o(296540),s=o(209642),a=o(416124),_=o(943388),c=o(104900),l=o(533048),u=o(272259),d=o(572214);function p({onClose:e,userId:t}){const[o,i]=(0,r.useState)(!1);return(0,r.useEffect)((()=>(console.info("[Wiki1] mount"),()=>{console.info("[Wiki1] unmount")})),[]),(0,n.jsxs)(s.ModalBox,{children:[(0,n.jsx)(u.MessageBoxDismissButton,{onClick:e}),(0,n.jsxs)(a.ModalBody,{insetLevel:1,children:[(0,n.jsxs)(_.ModalTextLayout,{subheader:"Я слой, открытый с изменением URL",children:["Привет, VK ID ",t,"!"]}),(0,n.jsx)(c.ButtonLayout,{children:(0,n.jsx)(l.Button,{size:"m",mode:"primary",onClick:()=>i(!0),children:"Показать бокс"})})]}),o&&(0,n.jsx)(d.ModalBoxExample,{header:"Пример бокса",onDestroy:()=>i(!1),children:"Я бокс, показанный из слоя и поверх слоя!"})]})}const h=(0,i.createWikiModalInitiator)({wLayer:"wiki-modal-example-param",width:720,renderFn:e=>(0,n.jsx)(p,{...e})})},587858:(e,t,o)=>{"use strict";async function n(e,t={}){const{UnauthActionBox:n}=await Promise.all([o.e(50560),o.e(91498),o.e(85172),o.e(89631),o.e(21529),o.e(762),o.e(79210),o.e(33462),o.e(4060),o.e(42607),o.e(49925),o.e(53725),o.e(40746),o.e(25459),o.e(84835)]).then(o.bind(o,100193));return n.show(e,t)}o.d(t,{loadUnauthorizedActionBox:()=>n})},253693:(e,t,o)=>{"use strict";o.r(t),o.d(t,{Unauthorized:()=>l,UnauthorizedSourceType:()=>i.UnauthorizedSourceType,isUnauthorizedMediaLayerBoxAvailable:()=>a});var n=o(476726),i=o(33362),r=o(388078),s=o(587858);function a(){return!r.Ranges.isUserId(window.vk.id)&&!window.layers.visible&&(0,n.partConfigEnabled)("unauthorized_media_layer_box")&&!!document.querySelector(".PageBottomBanner--unauth")}let _,c=!1;const l={initScrollMoreBox:function(e){const t=()=>{c=!1,window.removeEventListener("scroll",_)};t(),_=()=>{if(c)return;if(window.layers?.visible)return;if(window.cur.unauthScrollMoreBox)return;window.pageYOffset>=2*window.innerHeight&&(c=!0,(0,s.loadUnauthorizedActionBox)(e))},e.showOnLoad&&(c=!0,(0,s.loadUnauthorizedActionBox)(e)),window.addEventListener("scroll",_),window.cur.beforeNavigateRequestHandlers?.push((()=>t()))},showMoreBox:function(e,t,o,n){e&&e.preventDefault(),window.ajax.post("/al_index.php?act=a_unauthorized_box",{action:"more",owner_id:t,source:o},{loader:!0,onDone:e=>{e.unauth_action_box?(0,s.loadUnauthorizedActionBox)(e.unauth_action_box,{onHide:n}):n&&n()}})}}},70780:(e,t,o)=>{"use strict";o.d(t,{isWidget:()=>n});const n=()=>window.vk.widget},116346:(e,t,o)=>{"use strict";o.d(t,{clickUXPollsBlock:()=>r,viewUXPollsBlock:()=>i});var n=o(490712);function i(e){(0,n.statlogsValueEvent)("uxpolls_view",e)}function r(e){(0,n.statlogsValueEvent)("uxpolls_click",e)}},60553:(e,t,o)=>{"use strict";function n(){return window.stManager.add([window.jsc("web/video.js")])}function i(){return window.VideoUpload?Promise.resolve():Promise.all([o.e(50560),o.e(91498),o.e(85172),o.e(89631),o.e(21529),o.e(762),o.e(79210),o.e(6376),o.e(33462),o.e(4060),o.e(42607),o.e(49925),o.e(75277),o.e(40746),o.e(73248),o.e(25459),o.e(42099),o.e(51943)]).then(o.bind(o,938179)).then((({initVideoUpload:e,VideoUpload:t,VideoUploadSubtitles:o,VideoInlineUpload:n})=>{!window.VideoUpload&&t&&(window.VideoUpload=t),!window.VideoUploadSubtitles&&o&&(window.VideoUploadSubtitles=o),!window.VideoInlineUpload&&n&&(window.VideoInlineUpload=n),e()}))}function r(){return window.stManager.add([window.jsc("web/video_showcase.js")])}function s(){return window.stManager.add([window.jsc("web/indexer.js")])}function a(){return window.stManager.add([window.jsc("web/grid_sorter.js")])}o.d(t,{getGridSorterModule:()=>a,getIndexerModule:()=>s,getVideoModule:()=>n,getVideoShowcaseModule:()=>r,getVideoUploadModule:()=>i})},400281:(e,t,o)=>{"use strict";o.d(t,{CreatePlaylistRequestOrigin:()=>y,PlaylistFormEvents:()=>g,VideoAddToPlaylistActionSheetEvents:()=>E,VideoCardAddButtonEvents:()=>f,VideoOrderEvents:()=>m,checkVideoIsPreloaded:()=>p,createPlaylistPopup:()=>l,getAdditionalInfo:()=>s.getAdditionalInfo,getFormattedBigViewsToShortCase:()=>s.getFormattedBigViewsToShortCase,getFormattedPostponePublishDateTime:()=>s.getFormattedPostponePublishDateTime,getFormattedUpdatedTime:()=>s.getFormattedUpdatedTime,getVideoTrackCode:()=>_,idlizeCall:()=>a,isMediaHlsSupported:()=>h,logClipClick:()=>c,startLiveVideoPopup:()=>d,uploadVideoPopup:()=>u});var n=o(60553),i=o(695290),r=o(581903),s=o(422495);const a=(e,t=1e3)=>{const o=()=>{setTimeout((()=>e()),t)};return"function"==typeof window.requestIdleCallback?window.requestIdleCallback(o,{timeout:5e3}):o()},_=()=>window?.Videoview?.getMvData()?.track_code||window.mvcur?.options?.addParams?.track_code,c=(e,t)=>{r.shortVideoStatsCollector.logEvent({type:i.EventItemType.CLIP,action:e,track_code:t})},l=async(e,t,o,i,r)=>{window.Video||await(0,n.getVideoModule)(),window.Video.createAlbum(e,t,o,i,r)},u=(e,t,o)=>{window.VideoUpload.showBox({aid:t,from:"video",oid:e,disabled:o})},d=e=>{window.cur.webcast_settings?window.VideoUpload.showLiveVideoLeaveWarning(e):window.VideoUpload.showLiveTypeModal(e)},p=e=>Object.keys(window.ajaxCache).some((t=>t.startsWith("/al_video.php?act=video_box")&&t.includes(`&video=${e}`))),h=()=>window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),m={START_LOADING:"VideoOrderEvents/START_LOADING",END_LOADING:"VideoOrderEvents/END_LOADING"},E={INIT:"VideoAddToPlaylistActionSheetEvents/INIT",SHOW:"VideoAddToPlaylistActionSheetEvents/SHOW",HIDE:"VideoAddToPlaylistActionSheetEvents/HIDE"},f={SET_ADD:"VideoCardAddButtonEvents/SET_ADD",SET_ADDED:"VideoCardAddButtonEvents/SET_ADDED",SHOW:"VideoCardAddButtonEvents/SHOW",HIDE:"VideoCardAddButtonEvents/HIDE"},g={CREATE:"PlaylistFormEvents/CREATE",UPDATE:"PlaylistFormEvents/UPDATE",DELETE:"PlaylistFormEvents/DELETE"},y={VIDEO_PLAYLISTS_MODAL:"CreatePlaylistRequestOrigin/VIDEO_PLAYLISTS_MODAL",NEW_PLAYLIST_PAGE:"CreatePlaylistRequestOrigin/NEW_PLAYLIST_PAGE",VIDEO_CATALOG:"CreatePlaylistRequestOrigin/VIDEO_CATALOG",VIDEO_COMMUNITY:"CreatePlaylistRequestOrigin/VIDEO_COMMUNITY"}},477913:(e,t,o)=>{"use strict";o.d(t,{createVmojiAvatar:()=>_,isValidVmojiAvatarUrlPath:()=>s,parseVmojiAvatarUrlPath:()=>r,showVmojiAvatar:()=>c});var n=o(850101);const i=RegExp("^vmoji(?<ownerId>[0-9]+)_(?<characterId>[A-Za-z0-9_-]+?)(_(?<packId>[0-9]+))?$");function r(e){const t=e.replace(/^\//,"").match(i);return t?.groups?{ownerId:Number(t.groups.ownerId),characterId:String(t.groups.characterId),packId:void 0===t.groups.packId?void 0:Number(t.groups.packId)}:null}function s(e){return null!==r(e)}function a(){const e=(0,n.showBoxLoader)();return window.stManager.add([window.jsc("web/vmoji.js")]).then((()=>{if((0,n.isBoxLoadingCancelled)(e))throw new Error("loading cancelled");(0,n.hideBoxLoader)()}))}function _(){a().then((()=>{window.Vmoji.createAvatar()})).catch((()=>{}))}function c(e,t,o){a().then((()=>{window.Vmoji.showAvatar(e,t,o)})).catch((()=>{}))}},489944:(e,t,o)=>{"use strict";o.d(t,{WEB_WALL_POST_WITH_TRACK_CODE_SELECTOR:()=>i,getPostElem:()=>r,getPostElemByChildEl:()=>s,replyUserImageImg:()=>_,replyUserImageLinkClosest:()=>a});const n=".post, .wl_post",i="._post[data-post-track-code], .wl_post[data-post-track-code]",r=(e,t)=>(e=>{if("string"==typeof e)return document.querySelector(`#post${e}`)??void 0})(e)??t?.closest(n)??void 0,s=e=>e.closest(n)??void 0,a=e=>e.closest(".reply_image, ._reply_image")??void 0,_=e=>e.querySelector("img.reply_img")??void 0},193933:(e,t,o)=>{"use strict";o.d(t,{getWkViewNodes:()=>i,handleWkViewCloseEvent:()=>c,isWkLayerWallPostOpen:()=>r,preparePostElToDetaching:()=>s,sendWkViewCloseEvent:()=>_,updatePostElAfterAttaching:()=>a});var n=o(374036);function i(){const e=window.wkcur.wkBox,t=window.wkcur.wkContent;return{wkBox:e,wkContent:t,wkContentText:t.firstElementChild,wkRight:window.wkcur.wkRight}}const r=()=>!!window.cur.wallLayer,s=e=>{const t=e.querySelector(`.${n.UI_GALLERY_CLASSNAME}`);if(t){const e=t.querySelector(`.${n.UI_GALLERY_CONTENT_CLASSNAME}`)?.scrollLeft;e&&(t.dataset.contentScrollLeft=e.toString())}},a=e=>{const t=e.querySelector(`.${n.UI_GALLERY_CLASSNAME}`);if(t){const e=t.querySelector(`.${n.UI_GALLERY_CONTENT_CLASSNAME}`),{contentScrollLeft:o}=t.dataset;e&&o&&(e.scrollLeft=parseInt(o,10))}},_=()=>{const e=new CustomEvent("wkview_close");window.dispatchEvent(e)},c=e=>{const t=()=>{e()};return window.addEventListener("wkview_close",t),()=>{window.removeEventListener("wkview_close",t)}}},51963:(e,t,o)=>{"use strict";function n(){return window.wkcur&&Array.isArray(window.wkcur._hide)?window.wkcur._hide:[]}function i(e){"function"==typeof e&&n().push(e)}function r(e){var t;t=n().filter((t=>t!==e)),window.wkcur&&(window.wkcur._hide=t)}function s(){n().forEach((e=>{e()}))}o.d(t,{addWkViewHideQueue:()=>i,executeWkViewHideQueue:()=>s,removeWkViewHideQueue:()=>r})},88107:(e,t,o)=>{"use strict";o.d(t,{prepareHref:()=>s,processNavigation:()=>r});var n=o(998355),i=o(717182);function r(e){return(0,n.processNavigation)(i.Routes,e)}function s(e){return(0,n.prepareHref)(i.Routes,e)}},966050:(e,t,o)=>{"use strict";o.d(t,{ensureBrowserHistory:()=>i});var n=o(44499);const i=(()=>{let e=null;return()=>e||(e=new n.VKHistory({listen:e=>window.nav.onLocationChange(((t,o)=>{e({action:o||Action.Pop})})),push:(e,t)=>{window.nav.go(e,null,{replace:!1,state:t})},replace:(e,t)=>{window.nav.go(e,null,{replace:!0,state:t})}}),e)})()},717182:(e,t,o)=>{"use strict";o.d(t,{Routes:()=>n.Routes,ensureBrowserHistory:()=>i.ensureBrowserHistory,routesConfigs:()=>n.routesConfigs});var n=o(688975),i=o(966050)},688975:(e,t,o)=>{"use strict";o.d(t,{Routes:()=>i,routesConfigs:()=>n});const n={Audios:{path:"/audios:ownerId(-?\\d+)",module:"audio",screen:""},Audio:{path:"/audio:ownerId(-?\\d+)_:id(\\d+)",module:"audio",screen:""},Articles:{path:"/@:screenName",module:"author_page",screen:""},Board:{path:"/board:groupId(\\d+)",module:"board",screen:""},Topic:{path:"/topic:ownerId(-?\\d+)_:id(\\d+)",module:"board",screen:""},Bookmarks:{path:"/bookmarks",module:"bookmarks",screen:""},Bugs:{path:"/bugs",module:"bugs",screen:""},BugsSingleRoute:{path:"/bug:bugreportId(\\d+)?",module:"bugs",screen:""},CallsJoin:{path:"/call/join/:callId([\\w\\/=-]+)",module:"calls_join_screen",screen:""},Clips:{path:"/clips",module:"clips_item",screen:""},ClipsUpload:{path:"/clips/upload:ownerId(-?\\d+)",module:"clips_item",screen:""},ClipsHashtag:{path:"/clips/:feed(hashtag)/:hashtag([^?#]+)",module:"clips_item",screen:""},ClipsMusic:{path:"/clips/:feed(music)/:musicId(-?\\d+_\\d+)",module:"clips_item",screen:""},ClipsCompilation:{path:"/clips/:feed(compilation)/:compilationId(\\d+)",module:"clips_item",screen:""},ClipsEffect:{path:"/clips/:feed(effect)/:effectId(-?\\d+_-?\\d+)",module:"clips_item",screen:""},ClipsPlace:{path:"/clips/:feed(place)/:placeId(\\d+)",module:"clips_item",screen:""},ClipsOwner:{path:"/clips:feed(-?\\d+)",module:"clips_item",screen:""},ClipsOwnerTemp:{path:"/clips:ownerId(-?\\d+)",module:"clips_item",screen:""},ClipsOwnerId:{path:"/clips/id:feed(-?\\d+)",module:"clips_item",screen:""},ClipsGroupId:{path:"/clips/club:groupId(\\d+)",module:"clips_item",screen:""},ClipsScreenName:{path:"/clips/:screenName",module:"clips_item",screen:""},ClipsPlaylist:{path:"/clips/:feed(playlist)/:ownerId(-?\\d+)_:playlistId(\\d+)",module:"clips_item",screen:""},ClipsPostponed:{path:"/clips/:feed(postponed)/:ownerId([0-9a-z_.-]+)",module:"clips_item",screen:""},ClipsSection:{path:"/clips/:feed([0-9a-z_.-]+)",module:"clips_item",screen:""},ClipsSearch:{path:"/clips/search",module:"clips_item",screen:""},ClipsSearchSection:{path:"/clips/search\\?(q=.+)?section_id=(.+)",module:"clips_item",screen:""},ClipsSingleRoute:{path:"/clip(-?\\d+_\\d+)?",module:"clips_item",screen:""},ClipsBaseSingle:{path:"/clip",module:"clips_item",screen:""},CommunityApps:{path:"/community_apps",module:"community_apps",screen:""},CommunityAppsCategory:{path:"/community_apps(.*)act=:section(.*)",module:"community_apps",screen:""},Docs:{path:"/docs:ownerId(-?\\d+)?",module:"docs",screen:""},Doc:{path:"/doc:ownerId(-?\\d+)_:id(\\d+)",module:"docs",screen:""},Event:{path:"/event:groupId(\\d+)",module:"groups",screen:""},Feed:{path:"/feed",module:"feed",screen:""},FeedPhotos:{path:"/feed\\?section=photos",module:"feed",screen:""},FeedRecommended:{path:"/feed\\?section=recommended",module:"feed",screen:""},FeedSearch:{path:"/feed\\?section=search",module:"feed",screen:""},FeedLikes:{path:"/feed\\?section=likes",module:"feed",screen:""},FeedUpdates:{path:"/feed\\?section=updates",module:"feed",screen:""},FeedComments:{path:"/feed\\?section=comments",module:"feed",screen:""},FeedGroupSections:{path:"/feed\\?(.*)list=group-:groupId(\\d+)(.*)",module:"feed",screen:""},Friends:{path:"/friends",module:"friends",screen:""},FriendsAll:{path:"/friends\\?section=all",module:"friends",screen:""},FriendsRequests:{path:"/friends\\?section=requests",module:"friends",screen:""},FriendsAllRequests:{path:"/friends\\?section=all_requests",module:"friends",screen:""},FriendsOutRequests:{path:"/friends\\?section=out_requests",module:"friends",screen:""},FriendsFollowers:{path:"/friends\\?section=followers(&sort=\\w+)?",module:"friends",screen:""},FriendsOnline:{path:"/friends\\?section=online",module:"friends",screen:""},FriendsCleanup:{path:"/friends\\?section=cleanup",module:"friends",screen:""},FriendsRecent:{path:"/friends\\?section=recent",module:"friends",screen:""},FriendsList:{path:"/friends\\?section=list:id(\\d+)",module:"friends",screen:""},Group:{path:"/club:groupId(\\d+)",module:"group",screen:""},Groups:{path:"/groups",module:"community_catalog",screen:""},GroupsByOwnerId:{path:"/groups\\?id=:ownerId(\\d+)(.*)",module:"community_catalog",screen:""},GroupsByOwnerIdSearch:{path:"/groups\\?id=:ownerId(\\d+)(.*)q=(.*)",module:"community_catalog",screen:""},GroupsSection:{path:"/groups/:section",module:"community_catalog",screen:""},GroupsCollection:{path:"/groups/collection/:collection",module:"community_catalog",screen:""},GroupsSearch:{path:"/groups\\?(.+)?q=(.+)",module:"community_catalog",screen:""},GroupsSearchMyGroups:{path:"/groups/(my_all_groups|my_admin)\\?(.+)?q=(.+)",module:"community_catalog",screen:""},GroupsDashboard:{path:"/groups/dashboard/:group",module:"community_dashboard",screen:""},Im:{path:"/im",module:"im",screen:""},ImAct:{path:"/al_im.php",module:"im",screen:""},ImGroup:{path:"/gim:groupId(\\d+)",module:"im",screen:""},ImWrite:{path:"/write:id(-?\\d+)",module:"im",screen:""},ImSettings:{path:"/im/settings",module:"im",screen:""},MarketStoreFront:{path:"/market:ownerId(-?\\d+)",module:"market_storefront",screen:""},Market:{path:"/market",module:"market_catalog",screen:"marketplace_main"},MarketCategory:{path:"/market/:section(category)/:slug([\\w-]+)-:id([\\d-]+)",module:"market_catalog",screen:"marketplace_category"},MarketSection:{path:"/market/:section(section)/:slug(-?[\\w-]+)",module:"market_catalog",screen:"marketplace_section"},MarketCompilation:{path:"/market/:section(compilation)/:slug(-?[\\w-]+)",module:"market_catalog",screen:"marketplace_compilation"},MarketItem:{path:"/market/product/:seoSlug([-a-z\\d]*):ownerId(-\\d+)-:itemId(\\d+)",module:"market_item",screen:""},MarketServices:{path:"/uslugi:ownerId(-?\\d+)",module:"market_services",screen:""},Photos:{path:"/photos:ownerId(\\d+)?",module:"photos",screen:""},GroupPhotos:{path:"/photos:ownerId(-\\d+)?",module:"photos",screen:""},Albums:{path:"/albums:ownerId(\\d+)?",module:"photos",screen:""},GroupAlbums:{path:"/albums:ownerId(-\\d+)?",module:"photos",screen:""},AlbumTag:{path:"/tag:ownerId(\\d+)",module:"photos",screen:""},GroupPhotoSimple:{path:"/photo:ownerId(-\\d+)_:id(\\d+)",module:"photos",screen:""},AlbumSimple:{path:"/album:ownerId(\\d+)_:id(\\d+)",module:"photos",screen:""},GroupAlbumSimple:{path:"/album:ownerId(-\\d+)_:id(\\d+)",module:"photos",screen:""},PhotosArchive:{path:"/photos_archive",module:"photos",screen:""},Podcasts:{path:"/podcasts:ownerId(-?\\d+)",module:"podcast",screen:""},Podcast:{path:"/podcast:ownerId(-?\\d+)_:id(\\d+)",module:"podcast",screen:""},Public:{path:"/public:groupId(\\d+)",module:"public",screen:""},Search:{path:"/search",module:"search",screen:""},SearchPeople:{path:"/search/people",module:"search",screen:""},SearchCommunities:{path:"/search/communities",module:"search",screen:""},SearchCommunity:{path:"/search/community",module:"search",screen:""},SearchAudio:{path:"/search/audio",module:"search",screen:""},SearchVideo:{path:"/search/video",module:"search",screen:""},SearchStatuses:{path:"/search/statuses",module:"search",screen:""},SearchMiniApps:{path:"/search/mini_apps",module:"search",screen:""},SearchGames:{path:"/search/games",module:"search",screen:""},SearchMarket:{path:"/search/market",module:"search",screen:""},SearchClips:{path:"/search/clips",module:"search",screen:""},SearchSection:{path:"/search/(.+)\\?(q=.+)?section_id=(.+)",module:"search",screen:""},Settings:{path:"/settings",module:"settings",screen:""},Stats:{path:"/stats\\?(.*)gid=:groupId(\\d+)(.*)",module:"",screen:""},Strikes:{path:"/strikes/:groupId(-\\d+)",module:"strikes",screen:""},VideosScreenName:{path:"/video/@:screenName",module:"author_page",screen:""},Videos:{path:"/videos:ownerId(-?\\d+)",module:"video",screen:""},Video:{path:"/video:ownerId(-?\\d+)_:id(\\d+)",module:"video",screen:""},Wall:{path:"/wall:ownerId(-?\\d+)",module:"wall",screen:""},WallPost:{path:"/wall:ownerId(-?\\d+)_:id(\\d+)",module:"wall",screen:""}},i=Object.fromEntries(Object.entries(n).map((([e,{path:t}])=>[e,t])))},237792:(e,t,o)=>{"use strict";o.d(t,{FriendsPageSkeleton:()=>n.FriendsPageSkeleton,MainContentSkeleton:()=>n.MainContentSkeleton,RecommendationsSkeleton:()=>n.RecommendationsSkeleton,RightMenuSkeleton:()=>n.RightMenuSkeleton});var n=o(145025)},145025:(e,t,o)=>{"use strict";o.d(t,{FriendsPageSkeleton:()=>C,MainContentSkeleton:()=>T,RecommendationsSkeleton:()=>I,RightMenuSkeleton:()=>P});var n=o(474848),i=o(607200),r=o(296916),s=o(515073),a=o(445248),_=o(488618),c=o(625134),l=o(785118),u=o(428918),d=o(320324),p=o(358678),h=o(500774),m=o(564902),E=o(786198),f=o(272259),g=o(62119),y=o(882514);const v=()=>(0,n.jsx)(i.RichCell,{before:(0,n.jsx)(r.FakeAvatar,{size:80,children:(0,n.jsx)(s.Skeleton,{width:80,height:80,circle:!0})}),caption:(0,n.jsx)(s.Skeleton,{width:96,height:12}),hasHover:!1,hasActive:!1,children:(0,n.jsx)(s.Skeleton,{width:192,height:18})}),w=()=>(0,n.jsx)(a.SimpleCell,{before:(0,n.jsx)(r.FakeAvatar,{size:48,children:(0,n.jsx)(s.Skeleton,{width:48,height:48,circle:!0})}),after:(0,n.jsx)(s.Skeleton,{width:24,height:24,circle:!0}),subtitle:(0,n.jsx)(s.Skeleton,{width:96,height:12}),hasHover:!1,hasActive:!1,children:(0,n.jsx)(s.Skeleton,{width:144,height:16})}),A=()=>{const e=e=>({type:"custom",id:e,content:(0,n.jsx)("div",{style:{padding:12,height:36,boxSizing:"border-box"},children:(0,n.jsx)(s.Skeleton,{height:12,width:96,borderRadius:4})})});return[(t="1",{type:"custom",id:t,content:(0,n.jsx)(s.Skeleton,{width:"100%",height:36,borderRadius:8,children:(0,n.jsx)("div",{style:{padding:12},children:(0,n.jsx)(s.Skeleton,{height:12,width:96,borderRadius:4})})})}),e("2"),e("3"),e("4"),e("5")];var t},b=({section:e})=>{if(e&&e.match(/list(\d+)?/))return(0,n.jsx)(_.HeaderLayout,{aside:(0,n.jsx)(s.Skeleton,{width:128,height:28}),children:(0,n.jsx)(c.Header,{size:"large",children:(0,n.jsx)(s.Skeleton,{width:180})})});switch(e){case y.FRIENDS_SECTIONS.RECENT:return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.HeaderLayout,{children:(0,n.jsx)(c.Header,{size:"large",children:(0,n.jsx)(s.Skeleton,{width:250})})}),(0,n.jsx)(l.Div,{mode:"horizontal",spacing:6,children:(0,n.jsx)(s.Skeleton,{height:32})})]});case y.FRIENDS_SECTIONS.REQUESTS:case y.FRIENDS_SECTIONS.ALL_REQUESTS:case y.FRIENDS_SECTIONS.OUT_REQUESTS:return(0,n.jsx)(_.HeaderLayout,{children:(0,n.jsx)(c.Header,{size:"large",children:(0,n.jsx)(s.Skeleton,{width:180})})});case y.FRIENDS_SECTIONS.FOLLOWERS:return(0,n.jsx)(_.HeaderLayout,{aside:(0,n.jsx)(s.Skeleton,{width:160,height:28}),children:(0,n.jsx)(c.Header,{size:"large",children:(0,n.jsx)(s.Skeleton,{width:180})})});case y.FRIENDS_SECTIONS.CLEANUP:return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.HeaderLayout,{aside:(0,n.jsx)(s.Skeleton,{width:128,height:28}),children:(0,n.jsx)(c.Header,{size:"large",children:(0,n.jsx)(s.Skeleton,{width:220})})}),(0,n.jsx)(l.Div,{mode:"horizontal",paddingBottom:12,children:(0,n.jsx)(s.Skeleton,{height:48})}),(0,n.jsx)(u.Spacing,{size:4})]});default:return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(_.HeaderLayout,{aside:(0,n.jsx)(s.Skeleton,{width:128,height:28}),children:(0,n.jsx)(c.Header,{children:(0,n.jsxs)(d.Tabs,{mode:"accent",children:[(0,n.jsx)(p.TabsItem,{disabled:!0,selected:!0,children:(0,n.jsx)(s.Skeleton,{width:124})}),(0,n.jsx)(p.TabsItem,{disabled:!0,children:(0,n.jsx)(s.Skeleton,{width:124})})]})})}),(0,n.jsx)(l.Div,{mode:"horizontal",spacing:6,children:(0,n.jsx)(s.Skeleton,{height:32})})]})}},T=({section:e})=>(0,n.jsxs)(h.Group,{children:[(0,n.jsx)(b,{section:e}),Array(15).fill(null).map(((e,t)=>(0,n.jsx)(v,{},t)))]}),I=()=>(0,n.jsxs)(h.Group,{children:[(0,n.jsx)(c.Header,{children:(0,n.jsx)(s.Skeleton,{width:144,height:18})}),Array(5).fill(null).map(((e,t)=>(0,n.jsx)(w,{},t))),(0,n.jsx)(l.Div,{children:(0,n.jsx)(s.Skeleton,{width:"100%",height:28})})]}),P=()=>(0,n.jsx)(m.RightMenu,{items:A()}),C=()=>{const{section:e}=(0,g.useQuery)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.PageBlockOffsetSpacing,{}),(0,n.jsxs)(E.TwoColumnLayout,{children:[(0,n.jsx)(E.TwoColumnLayout.Main,{role:"main",children:(0,n.jsx)(T,{section:e})}),(0,n.jsxs)(E.TwoColumnLayout.Narrow,{children:[(0,n.jsx)(P,{}),(0,n.jsx)(I,{})]})]})]})}},114034:(e,t,o)=>{"use strict";o.d(t,{FRIENDS_SPA_ANALYTICS:()=>n});const n={FRIENDS_MAIN:"friends_main",FRIENDS_MAIN_ALL_FRIENDS_LIST:"friends_main_friends_list",FRIENDS_MAIN_FRIEND_REQUEST_BLOCK:"friends_main_friends_requests_block",FRIENDS_MAIN_FRIEND_SEARCH:"friends_main_friend_search",FRIENDS_MAIN_GLOBAL_SEARCH_BLOCK:"friends_main_global_search_block",FRIENDS_REQUESTS_ALL_REQUESTS_LIST:"friends_requests_all_requests_list",FRIENDS_REQUESTS_NEW_REQUESTS_LIST:"friends_requests_new_requests_list",FRIENDS_RECENTLY_ADDED_ALL_FRIENDS_LIST:"friends_recently_added_all_friends_list",FRIENDS_OUT_REQUESTS_ALL_REQUESTS_LIST:"friends_out_requests_all_requests_list",FRIENDS_FOLLOWERS_ALL_FOLLOWERS_LIST:"friends_followers_all_followers_list",FRIENDS_CUSTOM_LIST:"friends_custom_list",FRIENDS_MAIN_ONLINE_FRIENDS_LIST:"friends_main_online_friend_list",FRIENDS_MAIN_RECOMMENDED_FRIENDS_RIGHT_BLOCK:"friends_main_recommended_friends_right_block"}},117159:(e,t,o)=>{"use strict";o.d(t,{DEFAULT_FRIEND_LISTS:()=>_,DEFAULT_FRIEND_LIST_LOADING:()=>a,DEFAULT_FRIEND_LIST_SELECTION:()=>s,FRIEND_LISTS_DROPDOWN_MAX_HEIGHT:()=>i,FRIEND_LISTS_DROPDOWN_WIDTH:()=>n,FRIEND_LISTS_SUB_DROPDOWN_MAX_HEIGHT:()=>r});const n=220,i=300,r=180,s={},a={},_=[]},98819:(e,t,o)=>{"use strict";o.d(t,{FRIENDS_API_FIELDS:()=>n,FRIENDS_DEFAULT_VIRTUALIZATION_ESTIMATE_SIZE:()=>s,FRIENDS_FROM:()=>a,FRIENDS_OWNER_API_FIELDS:()=>i,FRIENDS_REQUESTS_API_FIELDS:()=>r,REQUEST_VARIANT:()=>_});const n="first_name_acc,blacklisted_by_me,deactivated,photo_200,photo_100,first_name_gen,first_name_acc,is_nft,online,can_write_private_message,social_button_type,mutual,occupation,can_call,image_status,verified,is_esia_verified,is_tinkoff_verified,is_sber_verified,city,screen_name,id,friend_status,lists,has_unseen_stories",i="is_followers_mode_on,first_name_gen,last_name_gen,is_closed",r="deactivated,can_call,photo_200,photo_100,first_name_gen,is_nft,online,can_write_private_message,social_button_type,mutual,city,occupation,first_name_acc,image_status,verified,is_esia_verified,is_tinkoff_verified,is_sber_verified,has_unseen_stories",s=96,a={FOLLOWERS_PAGE:"followers",NEW_FRIENDS_WIDGET:"new_friends_widget",UNREVIEWED_REQUESTS:"unreviewed_requests"},_={FOLLOWER:"follower"}},882514:(e,t,o)=>{"use strict";o.d(t,{DEBOUNCE_TIMEOUT_IN_MS:()=>s.DEBOUNCE_TIMEOUT_IN_MS,DEFAULT_FRIEND_LISTS:()=>n.DEFAULT_FRIEND_LISTS,DEFAULT_FRIEND_LIST_LOADING:()=>n.DEFAULT_FRIEND_LIST_LOADING,DEFAULT_FRIEND_LIST_SELECTION:()=>n.DEFAULT_FRIEND_LIST_SELECTION,FRIENDS_API_FIELDS:()=>r.FRIENDS_API_FIELDS,FRIENDS_DEFAULT_VIRTUALIZATION_ESTIMATE_SIZE:()=>r.FRIENDS_DEFAULT_VIRTUALIZATION_ESTIMATE_SIZE,FRIENDS_FROM:()=>r.FRIENDS_FROM,FRIENDS_OWNER_API_FIELDS:()=>r.FRIENDS_OWNER_API_FIELDS,FRIENDS_REQUESTS_API_FIELDS:()=>r.FRIENDS_REQUESTS_API_FIELDS,FRIENDS_SECTIONS:()=>i.FRIENDS_SECTIONS,FRIENDS_SECTION_ADD_LIST:()=>i.FRIENDS_SECTION_ADD_LIST,FRIENDS_SPA_ANALYTICS:()=>a.FRIENDS_SPA_ANALYTICS,FRIEND_LISTS_DROPDOWN_MAX_HEIGHT:()=>n.FRIEND_LISTS_DROPDOWN_MAX_HEIGHT,FRIEND_LISTS_DROPDOWN_WIDTH:()=>n.FRIEND_LISTS_DROPDOWN_WIDTH,FRIEND_LISTS_SUB_DROPDOWN_MAX_HEIGHT:()=>n.FRIEND_LISTS_SUB_DROPDOWN_MAX_HEIGHT,LEGACY_SECTIONS_IDS:()=>i.LEGACY_SECTIONS_IDS,REQUEST_VARIANT:()=>r.REQUEST_VARIANT});var n=o(117159),i=o(526788),r=o(98819),s=o(701168),a=o(114034)},701168:(e,t,o)=>{"use strict";o.d(t,{DEBOUNCE_TIMEOUT_IN_MS:()=>n});const n=250},526788:(e,t,o)=>{"use strict";o.d(t,{FRIENDS_SECTIONS:()=>n,FRIENDS_SECTION_ADD_LIST:()=>r,LEGACY_SECTIONS_IDS:()=>i});const n={ALL:"all",OUT_REQUESTS:"out_requests",FOLLOWERS:"followers",FIND:"find",REQUESTS:"requests",ALL_REQUESTS:"all_requests",ONLINE:"online",CLEANUP:"cleanup",RECENT:"recent",LIST:"list"},i=[n.FIND],r="addList"},447201:function(e){e.exports=function(){"use strict";class e{constructor(e=0,t=0){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.size=0,this.ttl=t}has(e){return e in this.items}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}evict(){const e=this.first;return delete this.items[e.key],this.first=e.next,this.first.prev=null,this.size--,this}get(e){let t;if(this.has(e)){const o=this.items[e];this.ttl>0&&o.expiry<=(new Date).getTime()?this.delete(e):(t=o.value,this.set(e,t,!0))}return t}keys(){return Object.keys(this.items)}set(e,t,o=!1){let n;if(o||this.has(e)){if(n=this.items[e],n.value=t,!1===o&&(n.expiry=this.ttl>0?(new Date).getTime()+this.ttl:this.ttl),this.last!==n){const e=this.last,t=n.next,o=n.prev;this.first===n&&(this.first=n.next),n.next=null,n.prev=this.last,e.next=n,null!==o&&(o.next=t),null!==t&&(t.prev=o)}}else this.max>0&&this.size===this.max&&this.evict(),n=this.items[e]={expiry:this.ttl>0?(new Date).getTime()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},1==++this.size?this.first=n:this.last.next=n;return this.last=n,this}}return function(t=1e3,o=0){if(isNaN(t)||t<0)throw new TypeError("Invalid max value");if(isNaN(o)||o<0)throw new TypeError("Invalid ttl value");return new e(t,o)}}()},401063:(e,t,o)=>{"use strict";var n=o(296540);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=n.useState,s=n.useEffect,a=n.useLayoutEffect,_=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!i(e,o)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),n=r({inst:{value:o,getSnapshot:t}}),i=n[0].inst,l=n[1];return a((function(){i.value=o,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,o,t]),s((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),_(o),o};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},788940:(e,t,o)=>{"use strict";var n=o(296540),i=o(19888);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,a=n.useRef,_=n.useEffect,c=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,n,i){var u=a(null);if(null===u.current){var d={hasValue:!1,value:null};u.current=d}else d=u.current;u=c((function(){function e(e){if(!_){if(_=!0,s=e,e=n(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return a=t}return a=e}if(t=a,r(s,e))return t;var o=n(e);return void 0!==i&&i(t,o)?t:(s=e,a=o)}var s,a,_=!1,c=void 0===o?null:o;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,o,n,i]);var p=s(e,u[0],u[1]);return _((function(){d.hasValue=!0,d.value=p}),[p]),l(p),p}},19888:(e,t,o)=>{"use strict";e.exports=o(401063)},69242:(e,t,o)=>{"use strict";e.exports=o(788940)},391943:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)}},913469:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},543407:(e,t,o)=>{"use strict";let n;o.d(t,{default:()=>r});const i=new Uint8Array(16);function r(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}},338823:(e,t,o)=>{"use strict";o.d(t,{unsafeStringify:()=>i});o(766382);const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function i(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}},418562:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(391943),i=o(543407),r=o(338823);const s=function(e,t,o){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const s=(e=e||{}).random||(e.rng||i.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){o=o||0;for(let e=0;e<16;++e)t[o+e]=s[e];return t}return(0,r.unsafeStringify)(s)}},766382:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(913469);const i=function(e){return"string"==typeof e&&n.default.test(e)}},402210:function(e,t,o){var n;!function(t){"use strict";function i(){}var r=i.prototype,s=t.EventEmitter;function a(e,t){for(var o=e.length;o--;)if(e[o].listener===t)return o;return-1}function _(e){return function(){return this[e].apply(this,arguments)}}function c(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&c(e.listener)}r.getListeners=function(e){var t,o,n=this._getEvents();if(e instanceof RegExp)for(o in t={},n)n.hasOwnProperty(o)&&e.test(o)&&(t[o]=n[o]);else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,o=[];for(t=0;t<e.length;t+=1)o.push(e[t].listener);return o},r.getListenersAsObject=function(e){var t,o=this.getListeners(e);return o instanceof Array&&((t={})[e]=o),t||o},r.addListener=function(e,t){if(!c(t))throw new TypeError("listener must be a function");var o,n=this.getListenersAsObject(e),i="object"==typeof t;for(o in n)n.hasOwnProperty(o)&&-1===a(n[o],t)&&n[o].push(i?t:{listener:t,once:!1});return this},r.on=_("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=_("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var o,n,i=this.getListenersAsObject(e);for(n in i)i.hasOwnProperty(n)&&-1!==(o=a(i[n],t))&&i[n].splice(o,1);return this},r.off=_("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,o){var n,i,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=o.length;n--;)r.call(this,t,o[n]);else for(n in t)t.hasOwnProperty(n)&&(i=t[n])&&("function"==typeof i?r.call(this,n,i):s.call(this,n,i));return this},r.removeEvent=function(e){var t,o=typeof e,n=this._getEvents();if("string"===o)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.removeAllListeners=_("removeEvent"),r.emitEvent=function(e,t){var o,n,i,r,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(o=s[r].slice(0),i=0;i<o.length;i++)!0===(n=o[i]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=_("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=s,i},void 0===(n=function(){return i}.call(t,o,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},773444:(e,t,o)=>{"use strict";o.d(t,{Action:()=>n});var n;o(58168);!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}))},801290:(e,t,o)=>{"use strict";function n(e,t){void 0===t&&(t={});for(var o=function(e){for(var t=[],o=0;o<e.length;){var n=e[o];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)t.push({type:"CHAR",index:o,value:e[o++]});else{var i=1,r="";if("?"===e[a=o+1])throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0==--i){a++;break}}else if("("===e[a]&&(i++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at ".concat(a));r+=e[a++]}else r+=e[a++]+e[a++];if(i)throw new TypeError("Unbalanced pattern at ".concat(o));if(!r)throw new TypeError("Missing pattern at ".concat(o));t.push({type:"PATTERN",index:o,value:r}),o=a}else{for(var s="",a=o+1;a<e.length;){var _=e.charCodeAt(a);if(!(_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||95===_))break;s+=e[a++]}if(!s)throw new TypeError("Missing parameter name at ".concat(o));t.push({type:"NAME",index:o,value:s}),o=a}else t.push({type:"CLOSE",index:o,value:e[o++]});else t.push({type:"OPEN",index:o,value:e[o++]});else t.push({type:"ESCAPED_CHAR",index:o++,value:e[o++]});else t.push({type:"MODIFIER",index:o,value:e[o++]})}return t.push({type:"END",index:o,value:""}),t}(e),n=t.prefixes,r=void 0===n?"./":n,s="[^".concat(i(t.delimiter||"/#?"),"]+?"),a=[],_=0,c=0,l="",u=function(e){if(c<o.length&&o[c].type===e)return o[c++].value},d=function(e){var t=u(e);if(void 0!==t)return t;var n=o[c],i=n.type,r=n.index;throw new TypeError("Unexpected ".concat(i," at ").concat(r,", expected ").concat(e))},p=function(){for(var e,t="";e=u("CHAR")||u("ESCAPED_CHAR");)t+=e;return t};c<o.length;){var h=u("CHAR"),m=u("NAME"),E=u("PATTERN");if(m||E){var f=h||"";-1===r.indexOf(f)&&(l+=f,f=""),l&&(a.push(l),l=""),a.push({name:m||_++,prefix:f,suffix:"",pattern:E||s,modifier:u("MODIFIER")||""})}else{var g=h||u("ESCAPED_CHAR");if(g)l+=g;else if(l&&(a.push(l),l=""),u("OPEN")){f=p();var y=u("NAME")||"",v=u("PATTERN")||"",w=p();d("CLOSE"),a.push({name:y||(v?_++:""),pattern:y&&!v?s:v,prefix:f,suffix:w,modifier:u("MODIFIER")||""})}else d("END")}}return a}function i(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function r(e){return e&&e.sensitive?"":"i"}function s(e,t,o){return function(e,t,o){void 0===o&&(o={});for(var n=o.strict,s=void 0!==n&&n,a=o.start,_=void 0===a||a,c=o.end,l=void 0===c||c,u=o.encode,d=void 0===u?function(e){return e}:u,p=o.delimiter,h=void 0===p?"/#?":p,m=o.endsWith,E="[".concat(i(void 0===m?"":m),"]|$"),f="[".concat(i(h),"]"),g=_?"^":"",y=0,v=e;y<v.length;y++){var w=v[y];if("string"==typeof w)g+=i(d(w));else{var A=i(d(w.prefix)),b=i(d(w.suffix));if(w.pattern)if(t&&t.push(w),A||b)if("+"===w.modifier||"*"===w.modifier){var T="*"===w.modifier?"?":"";g+="(?:".concat(A,"((?:").concat(w.pattern,")(?:").concat(b).concat(A,"(?:").concat(w.pattern,"))*)").concat(b,")").concat(T)}else g+="(?:".concat(A,"(").concat(w.pattern,")").concat(b,")").concat(w.modifier);else"+"===w.modifier||"*"===w.modifier?g+="((?:".concat(w.pattern,")").concat(w.modifier,")"):g+="(".concat(w.pattern,")").concat(w.modifier);else g+="(?:".concat(A).concat(b,")").concat(w.modifier)}}if(l)s||(g+="".concat(f,"?")),g+=o.endsWith?"(?=".concat(E,")"):"$";else{var I=e[e.length-1],P="string"==typeof I?f.indexOf(I[I.length-1])>-1:void 0===I;s||(g+="(?:".concat(f,"(?=").concat(E,"))?")),P||(g+="(?=".concat(f,"|").concat(E,")"))}return new RegExp(g,r(o))}(n(e,o),t,o)}function a(e,t,o){return e instanceof RegExp?function(e,t){if(!t)return e;for(var o=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=o.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=o.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,o){var n=e.map((function(e){return a(e,t,o).source}));return new RegExp("(?:".concat(n.join("|"),")"),r(o))}(e,t,o):s(e,t,o)}o.d(t,{pathToRegexp:()=>a})},548324:(e,t)=>{"use strict";t._=t._type_of=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}},58168:(e,t,o)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(null,arguments)}o.d(t,{default:()=>n})},347835:(e,t,o)=>{"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}o.d(t,{_array_like_to_array:()=>n})},18806:(e,t,o)=>{"use strict";function n(e){if(Array.isArray(e))return e}o.d(t,{_array_with_holes:()=>n})},507768:(e,t,o)=>{"use strict";o.d(t,{_array_without_holes:()=>i});var n=o(347835);function i(e){if(Array.isArray(e))return(0,n._array_like_to_array)(e)}},606184:(e,t,o)=>{"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}o.d(t,{_:()=>n,_assert_this_initialized:()=>n})},641374:(e,t,o)=>{"use strict";function n(e,t,o,n,i,r,s){try{var a=e[r](s),_=a.value}catch(e){return void o(e)}a.done?t(_):Promise.resolve(_).then(n,i)}function i(e){return function(){var t=this,o=arguments;return new Promise((function(i,r){var s=e.apply(t,o);function a(e){n(s,i,r,a,_,"next",e)}function _(e){n(s,i,r,a,_,"throw",e)}a(void 0)}))}}o.d(t,{_:()=>i})},730494:(e,t,o)=>{"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}o.d(t,{_:()=>n})},434518:(e,t,o)=>{"use strict";function n(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}o.d(t,{_:()=>n})},763812:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var n=0;function i(e){return"__private_"+n+++"_"+e}},799407:(e,t,o)=>{"use strict";function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}o.d(t,{_:()=>i})},568832:(e,t,o)=>{"use strict";o.d(t,{_:()=>s});var n=o(423239),i=o(806732),r=o(639029);function s(e){var t=(0,i._is_native_reflect_construct)();return function(){var o,i=(0,n._get_prototype_of)(e);if(t){var s=(0,n._get_prototype_of)(this).constructor;o=Reflect.construct(i,arguments,s)}else o=i.apply(this,arguments);return(0,r._possible_constructor_return)(this,o)}}},50467:(e,t,o)=>{"use strict";function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}o.d(t,{_:()=>n,_define_property:()=>n})},423239:(e,t,o)=>{"use strict";function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}o.d(t,{_get_prototype_of:()=>n})},720884:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var n=o(696467);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,n._set_prototype_of)(e,t)}},153750:(e,t,o)=>{"use strict";function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}o.d(t,{_:()=>n})},806732:(e,t,o)=>{"use strict";function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}o.d(t,{_is_native_reflect_construct:()=>n})},678882:(e,t,o)=>{"use strict";function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}o.d(t,{_iterable_to_array:()=>n})},617818:(e,t,o)=>{"use strict";function n(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,i,r=[],s=!0,a=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return r}}o.d(t,{_iterable_to_array_limit:()=>n})},252615:(e,t,o)=>{"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}o.d(t,{_non_iterable_rest:()=>n})},418474:(e,t,o)=>{"use strict";function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}o.d(t,{_non_iterable_spread:()=>n})},171893:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var n=o(50467);function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},i=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),i.forEach((function(t){(0,n._define_property)(e,t,o[t])}))}return e}},855456:(e,t,o)=>{"use strict";function n(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))})),e}o.d(t,{_:()=>n})},918542:(e,t,o)=>{"use strict";o.d(t,{_:()=>i});var n=o(140391);function i(e,t){if(null==e)return{};var o,i,r=(0,n._object_without_properties_loose)(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)o=s[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}},140391:(e,t,o)=>{"use strict";function n(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}o.d(t,{_object_without_properties_loose:()=>n})},639029:(e,t,o)=>{"use strict";o.d(t,{_possible_constructor_return:()=>r});var n=o(606184),i=o(561642);function r(e,t){return!t||"object"!==(0,i._type_of)(t)&&"function"!=typeof t?(0,n._assert_this_initialized)(e):t}},696467:(e,t,o)=>{"use strict";function n(e,t){return n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(e,t)}o.d(t,{_set_prototype_of:()=>n})},53014:(e,t,o)=>{"use strict";o.d(t,{_:()=>a});var n=o(18806),i=o(617818),r=o(252615),s=o(675134);function a(e,t){return(0,n._array_with_holes)(e)||(0,i._iterable_to_array_limit)(e,t)||(0,s._unsupported_iterable_to_array)(e,t)||(0,r._non_iterable_rest)()}},586337:(e,t,o)=>{"use strict";o.d(t,{_:()=>a});var n=o(507768),i=o(678882),r=o(418474),s=o(675134);function a(e){return(0,n._array_without_holes)(e)||(0,i._iterable_to_array)(e)||(0,s._unsupported_iterable_to_array)(e)||(0,r._non_iterable_spread)()}},561642:(e,t,o)=>{"use strict";function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}o.d(t,{_:()=>n,_type_of:()=>n})},675134:(e,t,o)=>{"use strict";o.d(t,{_unsupported_iterable_to_array:()=>i});var n=o(347835);function i(e,t){if(e){if("string"==typeof e)return(0,n._array_like_to_array)(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?(0,n._array_like_to_array)(e,t):void 0}}},43014:(e,t,o)=>{"use strict";o.d(t,{persist:()=>a});var n=o(32489),i=new Map,r=e=>(t,o)=>e(o,t.ref),s=(0,n.createEvent)();function a(e){var{adapter:t,store:o,source:a=o,target:_=o,clock:c=a,done:l,fail:u=s,finally:d,pickup:p,context:h,key:m,keyPrefix:E="",contract:f}=e;if(!t)throw Error("Adapter is not defined");if(!a)throw Error("Store or source is not defined");if(!_)throw Error("Target is not defined");if(!m&&a.shortName===a.id)throw Error("Key or name is not defined");if(a===_&&!n.is.store(a))throw Error("Source must be different from target");void 0===e.def&&n.is.store(a)&&(e.def=a.defaultState);var g="factory"in t?t(e):t,y=m||a.shortName,v=function(e,t){var o=i.get(e);void 0===o&&(o=new Map,i.set(e,o));var r=o.get(t);return void 0!==r||(r=(0,n.createStore)(null,{serialize:"ignore"}),o.set(t,r)),r}(g.keyArea||g,E+y),w=(0,n.createNode)(),A=()=>(0,n.clearNode)(w),b=e=>({status:t="fail",params:o,result:n,error:i})=>"done"===t?{status:t,key:y,keyPrefix:E,operation:e,value:"get"===e?n:o}:{status:t,key:y,keyPrefix:E,operation:e,value:o,error:i};return(0,n.withRegion)(w,(()=>{var e,t=(0,n.createStore)({ref:void 0},{serialize:"ignore"}),o=g(E+y,(e=>P(e))),i=(0,n.attach)({source:t,effect:r(o.get)}),s=(0,n.attach)({source:t,effect:r(o.set)}),m=(0,n.createEffect)((e=f,t=>!e||void 0===t||("isData"in e?e.isData(t):e(t))?t:(()=>{throw"getErrorMessages"in e?e.getErrorMessages(t):void 0})())),w=(0,n.createEvent)(),A=w.filterMap((({status:e,key:t,keyPrefix:o,operation:n,value:i})=>"done"===e?{key:t,keyPrefix:o,operation:n,value:i}:void 0)),T=w.filterMap((({status:e,key:t,keyPrefix:o,operation:n,error:i,value:r})=>"fail"===e?{key:t,keyPrefix:o,operation:n,error:i,value:r}:void 0)),I=(0,n.createEvent)(),P=i;t.updates.watch((()=>{P=(e=>{try{return(0,n.scopeBind)(e,{safe:!0})}catch(t){return e}})(i)})),(0,n.sample)({source:a,clock:c,target:I}),(0,n.guard)({source:(0,n.sample)(v,I,((e,t)=>[t,e])),filter:([e,t])=>e!==t,target:s.prepend((([e])=>e))}),(0,n.forward)({from:[i.doneData,s],to:v}),(0,n.sample)({source:(0,n.merge)([i.doneData,v]),target:m}),(0,n.forward)({from:m.doneData,to:_}),(0,n.forward)({from:[i.finally.map(b("get")),s.finally.map(b("set")),m.fail.map(b("validate"))],to:w}),(0,n.forward)({from:T,to:u}),l&&(0,n.forward)({from:A,to:l}),d&&(0,n.forward)({from:w,to:d}),h&&t.on(h,(({ref:e},t)=>({ref:void 0===t?e:t}))),p?((0,n.forward)({from:p,to:i.prepend((()=>{}))}),t.on(p,(({ref:e},t)=>({ref:void 0===t?e:t})))):i()})),A.unsubscribe=A}s.watch((e=>console.error(e.error)))},225604:(e,t,o)=>{"use strict";o.d(t,{persist:()=>_});var n=o(43014),i=o(719888),r=o(764318);function s(e){return function(){try{return"undefined"!=typeof localStorage}catch(e){return!0}}()?(0,r.storage)({storage:()=>localStorage,sync:!0,...e}):(0,i.nil)({keyArea:"local"})}s.factory=!0;var a,_=e=>(0,n.persist)({adapter:s,...a,...e})},719888:(e,t,o)=>{"use strict";function n({keyArea:e=""}={}){var t=()=>({get(){},set(){}});return t.keyArea=e,t.noop=!0,t}o.d(t,{nil:()=>n}),n.factory=!0},764318:(e,t,o)=>{"use strict";function n({storage:e,sync:t=!1,serialize:o=JSON.stringify,deserialize:n=JSON.parse,timeout:i,def:r}){var s=(s,a)=>{var _,c,l,u=()=>l.setItem(s,o(c)),d=e=>{_=clearTimeout(_),e&&u(),"undefined"!=typeof removeEventListener&&removeEventListener("beforeunload",d)};return t&&"undefined"!=typeof addEventListener&&addEventListener("storage",(o=>{o.storageArea===e()&&(o.key===s&&a("force"===t?void 0:o.newValue),null===o.key&&a(null))})),{get(t){d();var o=void 0!==t?t:e().getItem(s);return null===o?void 0!==r?r:t:n(o)},set(t){c=t,l=e(),void 0===i?u():_||(_=setTimeout(d,i,1),"undefined"!=typeof addEventListener&&addEventListener("beforeunload",d))}}};try{s.keyArea=e()}catch(e){}return s}o.d(t,{storage:()=>n}),n.factory=!0},202732:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(280702),i=o(41917);const r=(0,n.default)(i.default,"DataView")},965373:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(962944),i=o(349190),r=o(178417),s=o(18813),a=o(463957);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const c=_},277919:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(36838),i=o(362384),r=o(104787),s=o(898207),a=o(451031);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const c=_},168335:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(280702),i=o(41917);const r=(0,n.default)(i.default,"Map")},935917:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(95088),i=o(829846),r=o(831521),s=o(782509),a=o(549);function _(e){var t=-1,o=null==e?0:e.length;for(this.clear();++t<o;){var n=e[t];this.set(n[0],n[1])}}_.prototype.clear=n.default,_.prototype.delete=i.default,_.prototype.get=r.default,_.prototype.has=s.default,_.prototype.set=a.default;const c=_},20180:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(280702),i=o(41917);const r=(0,n.default)(i.default,"Promise")},439857:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(280702),i=o(41917);const r=(0,n.default)(i.default,"Set")},601275:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(935917),i=o(25668),r=o(529875);function s(e){var t=-1,o=null==e?0:e.length;for(this.__data__=new n.default;++t<o;)this.add(e[t])}s.prototype.add=s.prototype.push=i.default,s.prototype.has=r.default;const a=s},93265:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(277919),i=o(591532),r=o(42),s=o(173061),a=o(144105),_=o(487681);function c(e){var t=this.__data__=new n.default(e);this.size=t.size}c.prototype.clear=i.default,c.prototype.delete=r.default,c.prototype.get=s.default,c.prototype.has=a.default,c.prototype.set=_.default;const l=c},700241:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(41917).default.Symbol},243988:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(41917).default.Uint8Array},753631:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(280702),i=o(41917);const r=(0,n.default)(i.default,"WeakMap")},102634:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=null==e?0:e.length,i=0,r=[];++o<n;){var s=e[o];t(s,o,e)&&(r[i++]=s)}return r}},550423:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(159520),i=o(241788),r=o(292049),s=o(74616),a=o(925353),_=o(118719),c=Object.prototype.hasOwnProperty;const l=function(e,t){var o=(0,r.default)(e),l=!o&&(0,i.default)(e),u=!o&&!l&&(0,s.default)(e),d=!o&&!l&&!u&&(0,_.default)(e),p=o||l||u||d,h=p?(0,n.default)(e.length,String):[],m=h.length;for(var E in e)!t&&!c.call(e,E)||p&&("length"==E||u&&("offset"==E||"parent"==E)||d&&("buffer"==E||"byteLength"==E||"byteOffset"==E)||(0,a.default)(E,m))||h.push(E);return h}},45572:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=null==e?0:e.length,i=Array(n);++o<n;)i[o]=t(e[o],o,e);return i}},976912:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=t.length,i=e.length;++o<n;)e[i+o]=t[o];return e}},463736:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=null==e?0:e.length;++o<n;)if(t(e[o],o,e))return!0;return!1}},633331:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(770805).default)("length")},279010:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return e.split("")}},652851:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(152528),i=o(166984),r=Object.prototype.hasOwnProperty;const s=function(e,t,o){var s=e[t];r.call(e,t)&&(0,i.default)(s,o)&&(void 0!==o||t in e)||(0,n.default)(e,t,o)}},210169:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(166984);const i=function(e,t){for(var o=e.length;o--;)if((0,n.default)(e[o][0],t))return o;return-1}},152528:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(684171);const i=function(e,t,o){"__proto__"==t&&n.default?(0,n.default)(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}},966318:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(687465),i=o(930901);const r=function(e,t){for(var o=0,r=(t=(0,n.default)(t,e)).length;null!=e&&o<r;)e=e[(0,i.default)(t[o++])];return o&&o==r?e:void 0}},833831:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(976912),i=o(292049);const r=function(e,t,o){var r=t(e);return(0,i.default)(e)?r:(0,n.default)(r,o(e))}},979672:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(700241),i=o(240451),r=o(965606),s=n.default?n.default.toStringTag:void 0;const a=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?(0,i.default)(e):(0,r.default)(e)}},509789:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return null!=e&&t in Object(e)}},974846:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(979672),i=o(753098);const r=function(e){return(0,i.default)(e)&&"[object Arguments]"==(0,n.default)(e)}},891038:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(343244),i=o(753098);const r=function e(t,o,r,s,a){return t===o||(null==t||null==o||!(0,i.default)(t)&&!(0,i.default)(o)?t!=t&&o!=o:(0,n.default)(t,o,r,s,e,a))}},343244:(e,t,o)=>{"use strict";o.d(t,{default:()=>m});var n=o(93265),i=o(608967),r=o(480402),s=o(937265),a=o(935861),_=o(292049),c=o(74616),l=o(118719),u="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;const m=function(e,t,o,m,E,f){var g=(0,_.default)(e),y=(0,_.default)(t),v=g?d:(0,a.default)(e),w=y?d:(0,a.default)(t),A=(v=v==u?p:v)==p,b=(w=w==u?p:w)==p,T=v==w;if(T&&(0,c.default)(e)){if(!(0,c.default)(t))return!1;g=!0,A=!1}if(T&&!A)return f||(f=new n.default),g||(0,l.default)(e)?(0,i.default)(e,t,o,m,E,f):(0,r.default)(e,t,v,o,m,E,f);if(!(1&o)){var I=A&&h.call(e,"__wrapped__"),P=b&&h.call(t,"__wrapped__");if(I||P){var C=I?e.value():e,S=P?t.value():t;return f||(f=new n.default),E(C,S,o,m,f)}}return!!T&&(f||(f=new n.default),(0,s.default)(e,t,o,m,E,f))}},500759:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(93265),i=o(891038);const r=function(e,t,o,r){var s=o.length,a=s,_=!r;if(null==e)return!a;for(e=Object(e);s--;){var c=o[s];if(_&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var l=(c=o[s])[0],u=e[l],d=c[1];if(_&&c[2]){if(void 0===u&&!(l in e))return!1}else{var p=new n.default;if(r)var h=r(u,d,l,e,t,p);if(!(void 0===h?(0,i.default)(d,u,3,r,p):h))return!1}}return!0}},651979:(e,t,o)=>{"use strict";o.d(t,{default:()=>p});var n=o(389610),i=o(870640),r=o(523149),s=o(281121),a=/^\[object .+?Constructor\]$/,_=Function.prototype,c=Object.prototype,l=_.toString,u=c.hasOwnProperty,d=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const p=function(e){return!(!(0,r.default)(e)||(0,i.default)(e))&&((0,n.default)(e)?d:a).test((0,s.default)(e))}},712973:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(979672),i=o(753098);const r=function(e){return(0,i.default)(e)&&"[object RegExp]"==(0,n.default)(e)}},289717:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(979672),i=o(5254),r=o(753098),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(e){return(0,r.default)(e)&&(0,i.default)(e.length)&&!!s[(0,n.default)(e)]}},952141:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(544943),i=o(256474),r=o(929008),s=o(292049),a=o(792263);const _=function(e){return"function"==typeof e?e:null==e?r.default:"object"==typeof e?(0,s.default)(e)?(0,i.default)(e[0],e[1]):(0,n.default)(e):(0,a.default)(e)}},17064:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(897271),i=o(733938),r=Object.prototype.hasOwnProperty;const s=function(e){if(!(0,n.default)(e))return(0,i.default)(e);var t=[];for(var o in Object(e))r.call(e,o)&&"constructor"!=o&&t.push(o);return t}},708823:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(523149),i=o(897271),r=o(981493),s=Object.prototype.hasOwnProperty;const a=function(e){if(!(0,n.default)(e))return(0,r.default)(e);var t=(0,i.default)(e),o=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&o.push(a);return o}},544943:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(500759),i=o(997960),r=o(945997);const s=function(e){var t=(0,i.default)(e);return 1==t.length&&t[0][2]?(0,r.default)(t[0][0],t[0][1]):function(o){return o===e||(0,n.default)(o,e,t)}}},256474:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(891038),i=o(877500),r=o(217511),s=o(386586),a=o(909396),_=o(945997),c=o(930901);const l=function(e,t){return(0,s.default)(e)&&(0,a.default)(t)?(0,_.default)((0,c.default)(e),t):function(o){var s=(0,i.default)(o,e);return void 0===s&&s===t?(0,r.default)(o,e):(0,n.default)(t,s,3)}}},769084:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(966318),i=o(837346),r=o(687465);const s=function(e,t,o){for(var s=-1,a=t.length,_={};++s<a;){var c=t[s],l=(0,n.default)(e,c);o(l,c)&&(0,i.default)(_,(0,r.default)(c,e),l)}return _}},770805:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return function(t){return null==t?void 0:t[e]}}},82199:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(966318);const i=function(e){return function(t){return(0,n.default)(t,e)}}},837346:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(652851),i=o(687465),r=o(925353),s=o(523149),a=o(930901);const _=function(e,t,o,_){if(!(0,s.default)(e))return e;for(var c=-1,l=(t=(0,i.default)(t,e)).length,u=l-1,d=e;null!=d&&++c<l;){var p=(0,a.default)(t[c]),h=o;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(c!=u){var m=d[p];void 0===(h=_?_(m,p,d):void 0)&&(h=(0,s.default)(m)?m:(0,r.default)(t[c+1])?[]:{})}(0,n.default)(d,p,h),d=d[p]}return e}},237688:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t,o){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(o=o>i?i:o)<0&&(o+=i),i=t>o?0:o-t>>>0,t>>>=0;for(var r=Array(i);++n<i;)r[n]=e[n+t];return r}},159520:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){for(var o=-1,n=Array(e);++o<e;)n[o]=t(o);return n}},630052:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(700241),i=o(45572),r=o(292049),s=o(761882),a=n.default?n.default.prototype:void 0,_=a?a.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,r.default)(t))return(0,i.default)(t,e)+"";if((0,s.default)(t))return _?_.call(t):"";var o=t+"";return"0"==o&&1/t==-1/0?"-0":o}},375488:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(507880),i=/^\s+/;const r=function(e){return e?e.slice(0,(0,n.default)(e)+1).replace(i,""):e}},552789:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return function(t){return e(t)}}},764099:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return e.has(t)}},687465:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(292049),i=o(386586),r=o(865722),s=o(648182);const a=function(e,t){return(0,n.default)(e)?e:(0,i.default)(e,t)?[e]:(0,r.default)((0,s.default)(e))}},20098:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(237688);const i=function(e,t,o){var i=e.length;return o=void 0===o?i:o,!t&&o>=i?e:(0,n.default)(e,t,o)}},113161:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=o(41917).default["__core-js_shared__"]},684171:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(280702);const i=function(){try{var e=(0,n.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},608967:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(601275),i=o(463736),r=o(764099);const s=function(e,t,o,s,a,_){var c=1&o,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var d=_.get(e),p=_.get(t);if(d&&p)return d==t&&p==e;var h=-1,m=!0,E=2&o?new n.default:void 0;for(_.set(e,t),_.set(t,e);++h<l;){var f=e[h],g=t[h];if(s)var y=c?s(g,f,h,t,e,_):s(f,g,h,e,t,_);if(void 0!==y){if(y)continue;m=!1;break}if(E){if(!(0,i.default)(t,(function(e,t){if(!(0,r.default)(E,t)&&(f===e||a(f,e,o,s,_)))return E.push(t)}))){m=!1;break}}else if(f!==g&&!a(f,g,o,s,_)){m=!1;break}}return _.delete(e),_.delete(t),m}},480402:(e,t,o)=>{"use strict";o.d(t,{default:()=>u});var n=o(700241),i=o(243988),r=o(166984),s=o(608967),a=o(164877),_=o(729959),c=n.default?n.default.prototype:void 0,l=c?c.valueOf:void 0;const u=function(e,t,o,n,c,u,d){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new i.default(e),new i.default(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,r.default)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=a.default;case"[object Set]":var h=1&n;if(p||(p=_.default),e.size!=t.size&&!h)return!1;var m=d.get(e);if(m)return m==t;n|=2,d.set(e,t);var E=(0,s.default)(p(e),p(t),n,c,u,d);return d.delete(e),E;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},937265:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(719042),i=Object.prototype.hasOwnProperty;const r=function(e,t,o,r,s,a){var _=1&o,c=(0,n.default)(e),l=c.length;if(l!=(0,n.default)(t).length&&!_)return!1;for(var u=l;u--;){var d=c[u];if(!(_?d in t:i.call(t,d)))return!1}var p=a.get(e),h=a.get(t);if(p&&h)return p==t&&h==e;var m=!0;a.set(e,t),a.set(t,e);for(var E=_;++u<l;){var f=e[d=c[u]],g=t[d];if(r)var y=_?r(g,f,d,t,e,a):r(f,g,d,e,t,a);if(!(void 0===y?f===g||s(f,g,o,r,a):y)){m=!1;break}E||(E="constructor"==d)}if(m&&!E){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},272136:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},719042:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(833831),i=o(214792),r=o(327422);const s=function(e){return(0,n.default)(e,r.default,i.default)}},883973:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(833831),i=o(283511),r=o(241865);const s=function(e){return(0,n.default)(e,r.default,i.default)}},515547:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(649914);const i=function(e,t){var o=e.__data__;return(0,n.default)(t)?o["string"==typeof t?"string":"hash"]:o.map}},997960:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(909396),i=o(327422);const r=function(e){for(var t=(0,i.default)(e),o=t.length;o--;){var r=t[o],s=e[r];t[o]=[r,s,(0,n.default)(s)]}return t}},280702:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(651979),i=o(208104);const r=function(e,t){var o=(0,i.default)(e,t);return(0,n.default)(o)?o:void 0}},315647:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(40367).default)(Object.getPrototypeOf,Object)},240451:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(700241),i=Object.prototype,r=i.hasOwnProperty,s=i.toString,a=n.default?n.default.toStringTag:void 0;const _=function(e){var t=r.call(e,a),o=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[a]=o:delete e[a]),i}},214792:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(102634),i=o(613153),r=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(e){return null==e?[]:(e=Object(e),(0,n.default)(s(e),(function(t){return r.call(e,t)})))}:i.default},283511:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(976912),i=o(315647),r=o(214792),s=o(613153);const a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)(0,n.default)(t,(0,r.default)(e)),e=(0,i.default)(e);return t}:s.default},935861:(e,t,o)=>{"use strict";o.d(t,{default:()=>w});var n=o(202732),i=o(168335),r=o(20180),s=o(439857),a=o(753631),_=o(979672),c=o(281121),l="[object Map]",u="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",m=(0,c.default)(n.default),E=(0,c.default)(i.default),f=(0,c.default)(r.default),g=(0,c.default)(s.default),y=(0,c.default)(a.default),v=_.default;(n.default&&v(new n.default(new ArrayBuffer(1)))!=h||i.default&&v(new i.default)!=l||r.default&&v(r.default.resolve())!=u||s.default&&v(new s.default)!=d||a.default&&v(new a.default)!=p)&&(v=function(e){var t=(0,_.default)(e),o="[object Object]"==t?e.constructor:void 0,n=o?(0,c.default)(o):"";if(n)switch(n){case m:return h;case E:return l;case f:return u;case g:return d;case y:return p}return t});const w=v},208104:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return null==e?void 0:e[t]}},285054:(e,t,o)=>{"use strict";o.d(t,{default:()=>c});var n=o(687465),i=o(241788),r=o(292049),s=o(925353),a=o(5254),_=o(930901);const c=function(e,t,o){for(var c=-1,l=(t=(0,n.default)(t,e)).length,u=!1;++c<l;){var d=(0,_.default)(t[c]);if(!(u=null!=e&&o(e,d)))break;e=e[d]}return u||++c!=l?u:!!(l=null==e?0:e.length)&&(0,a.default)(l)&&(0,s.default)(d,l)&&((0,r.default)(e)||(0,i.default)(e))}},770898:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return n.test(e)}},962944:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(220674);const i=function(){this.__data__=n.default?(0,n.default)(null):{},this.size=0}},349190:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},178417:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(220674),i=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;if(n.default){var o=t[e];return"__lodash_hash_undefined__"===o?void 0:o}return i.call(t,e)?t[e]:void 0}},18813:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(220674),i=Object.prototype.hasOwnProperty;const r=function(e){var t=this.__data__;return n.default?void 0!==t[e]:i.call(t,e)}},463957:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(220674);const i=function(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=n.default&&void 0===t?"__lodash_hash_undefined__":t,this}},925353:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=/^(?:0|[1-9]\d*)$/;const i=function(e,t){var o=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==o||"symbol"!=o&&n.test(e))&&e>-1&&e%1==0&&e<t}},386586:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(292049),i=o(761882),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(e,t){if((0,n.default)(e))return!1;var o=typeof e;return!("number"!=o&&"symbol"!=o&&"boolean"!=o&&null!=e&&!(0,i.default)(e))||(s.test(e)||!r.test(e)||null!=t&&e in Object(t))}},649914:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},870640:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n,i=o(113161),r=(n=/[^.]+$/.exec(i.default&&i.default.keys&&i.default.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";const s=function(e){return!!r&&r in e}},897271:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=Object.prototype;const i=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},909396:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(523149);const i=function(e){return e==e&&!(0,n.default)(e)}},36838:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){this.__data__=[],this.size=0}},362384:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(210169),i=Array.prototype.splice;const r=function(e){var t=this.__data__,o=(0,n.default)(t,e);return!(o<0)&&(o==t.length-1?t.pop():i.call(t,o,1),--this.size,!0)}},104787:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(210169);const i=function(e){var t=this.__data__,o=(0,n.default)(t,e);return o<0?void 0:t[o][1]}},898207:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(210169);const i=function(e){return(0,n.default)(this.__data__,e)>-1}},451031:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(210169);const i=function(e,t){var o=this.__data__,i=(0,n.default)(o,e);return i<0?(++this.size,o.push([e,t])):o[i][1]=t,this}},95088:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(965373),i=o(277919),r=o(168335);const s=function(){this.size=0,this.__data__={hash:new n.default,map:new(r.default||i.default),string:new n.default}}},829846:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(515547);const i=function(e){var t=(0,n.default)(this,e).delete(e);return this.size-=t?1:0,t}},831521:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(515547);const i=function(e){return(0,n.default)(this,e).get(e)}},782509:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(515547);const i=function(e){return(0,n.default)(this,e).has(e)}},549:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(515547);const i=function(e,t){var o=(0,n.default)(this,e),i=o.size;return o.set(e,t),this.size+=o.size==i?0:1,this}},164877:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e,n){o[++t]=[n,e]})),o}},945997:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return function(o){return null!=o&&(o[e]===t&&(void 0!==t||e in Object(o)))}}},760608:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(446632);const i=function(e){var t=(0,n.default)(e,(function(e){return 500===o.size&&o.clear(),e})),o=t.cache;return t}},220674:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(280702).default)(Object,"create")},733938:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=(0,o(40367).default)(Object.keys,Object)},981493:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=[];if(null!=e)for(var o in Object(e))t.push(o);return t}},364841:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(272136),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,r=i&&"object"==typeof module&&module&&!module.nodeType&&module,s=r&&r.exports===i&&n.default.process;const a=function(){try{var e=r&&r.require&&r.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}()},965606:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=Object.prototype.toString;const i=function(e){return n.call(e)}},40367:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return function(o){return e(t(o))}}},41917:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(272136),i="object"==typeof self&&self&&self.Object===Object&&self;const r=n.default||i||Function("return this")()},25668:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},529875:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},729959:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=-1,o=Array(e.size);return e.forEach((function(e){o[++t]=e})),o}},591532:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(277919);const i=function(){this.__data__=new n.default,this.size=0}},42:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=this.__data__,o=t.delete(e);return this.size=t.size,o}},173061:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.get(e)}},144105:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return this.__data__.has(e)}},487681:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(277919),i=o(168335),r=o(935917);const s=function(e,t){var o=this.__data__;if(o instanceof n.default){var s=o.__data__;if(!i.default||s.length<199)return s.push([e,t]),this.size=++o.size,this;o=this.__data__=new r.default(s)}return o.set(e,t),this.size=o.size,this}},994553:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(633331),i=o(770898),r=o(138615);const s=function(e){return(0,i.default)(e)?(0,r.default)(e):(0,n.default)(e)}},174616:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(279010),i=o(770898),r=o(632694);const s=function(e){return(0,i.default)(e)?(0,r.default)(e):(0,n.default)(e)}},865722:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(760608),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g;const s=(0,n.default)((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,o,n,i){t.push(n?i.replace(r,"$1"):o||e)})),t}))},930901:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(761882);const i=function(e){if("string"==typeof e||(0,n.default)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},281121:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=Function.prototype.toString;const i=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},507880:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=/\s/;const i=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},138615:(e,t,o)=>{"use strict";o.d(t,{default:()=>m});var n="\\ud800-\\udfff",i="["+n+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",a="[^"+n+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+s+")"+"?",u="[\\ufe0e\\ufe0f]?",d=u+l+("(?:\\u200d(?:"+[a,_,c].join("|")+")"+u+l+")*"),p="(?:"+[a+r+"?",r,_,c,i].join("|")+")",h=RegExp(s+"(?="+s+")|"+p+d,"g");const m=function(e){for(var t=h.lastIndex=0;h.test(e);)++t;return t}},632694:(e,t,o)=>{"use strict";o.d(t,{default:()=>m});var n="\\ud800-\\udfff",i="["+n+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",a="[^"+n+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+s+")"+"?",u="[\\ufe0e\\ufe0f]?",d=u+l+("(?:\\u200d(?:"+[a,_,c].join("|")+")"+u+l+")*"),p="(?:"+[a+r+"?",r,_,c,i].join("|")+")",h=RegExp(s+"(?="+s+")|"+p+d,"g");const m=function(e){return e.match(h)||[]}},657697:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(818593);const i=function(e,t){var o;if("function"!=typeof t)throw new TypeError("Expected a function");return e=(0,n.default)(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=void 0),o}}},166984:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e,t){return e===t||e!=e&&t!=t}},877500:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(966318);const i=function(e,t,o){var i=null==e?void 0:(0,n.default)(e,t);return void 0===i?o:i}},217511:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(509789),i=o(285054);const r=function(e,t){return null!=e&&(0,i.default)(e,t,n.default)}},929008:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return e}},241788:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(974846),i=o(753098),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable;const _=(0,n.default)(function(){return arguments}())?n.default:function(e){return(0,i.default)(e)&&s.call(e,"callee")&&!a.call(e,"callee")}},292049:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=Array.isArray},238446:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(389610),i=o(5254);const r=function(e){return null!=e&&(0,i.default)(e.length)&&!(0,n.default)(e)}},74616:(e,t,o)=>{"use strict";o.d(t,{default:()=>_});var n=o(41917),i=o(624639),r="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=r&&"object"==typeof module&&module&&!module.nodeType&&module,a=s&&s.exports===r?n.default.Buffer:void 0;const _=(a?a.isBuffer:void 0)||i.default},389610:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(979672),i=o(523149);const r=function(e){if(!(0,i.default)(e))return!1;var t=(0,n.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5254:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},523149:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},753098:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},411767:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(712973),i=o(552789),r=o(364841),s=r.default&&r.default.isRegExp;const a=s?(0,i.default)(s):n.default},761882:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(979672),i=o(753098);const r=function(e){return"symbol"==typeof e||(0,i.default)(e)&&"[object Symbol]"==(0,n.default)(e)}},118719:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(289717),i=o(552789),r=o(364841),s=r.default&&r.default.isTypedArray;const a=s?(0,i.default)(s):n.default},269592:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){return void 0===e}},327422:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(550423),i=o(17064),r=o(238446);const s=function(e){return(0,r.default)(e)?(0,n.default)(e):(0,i.default)(e)}},241865:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(550423),i=o(708823),r=o(238446);const s=function(e){return(0,r.default)(e)?(0,n.default)(e,!0):(0,i.default)(e)}},446632:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(935917);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var o=function(){var n=arguments,i=t?t.apply(this,n):n[0],r=o.cache;if(r.has(i))return r.get(i);var s=e.apply(this,n);return o.cache=r.set(i,s)||r,s};return o.cache=new(i.Cache||n.default),o}i.Cache=n.default;const r=i},478672:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},596034:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});var n=o(952141),i=o(478672),r=o(141470);const s=function(e,t){return(0,r.default)(e,(0,i.default)((0,n.default)(t)))}},33371:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(657697);const i=function(e){return(0,n.default)(2,e)}},141470:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(45572),i=o(952141),r=o(769084),s=o(883973);const a=function(e,t){if(null==e)return{};var o=(0,n.default)((0,s.default)(e),(function(e){return[e]}));return t=(0,i.default)(t),(0,r.default)(e,o,(function(e,o){return t(e,o[0])}))}},792263:(e,t,o)=>{"use strict";o.d(t,{default:()=>a});var n=o(770805),i=o(82199),r=o(386586),s=o(930901);const a=function(e){return(0,r.default)(e)?(0,n.default)((0,s.default)(e)):(0,i.default)(e)}},613153:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){return[]}},624639:(e,t,o)=>{"use strict";o.d(t,{default:()=>n});const n=function(){return!1}},808776:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(501694),i=1/0;const r=function(e){return e?(e=(0,n.default)(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},818593:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(808776);const i=function(e){var t=(0,n.default)(e),o=t%1;return t==t?o?t-o:t:0}},501694:(e,t,o)=>{"use strict";o.d(t,{default:()=>l});var n=o(375488),i=o(523149),r=o(761882),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,_=/^0o[0-7]+$/i,c=parseInt;const l=function(e){if("number"==typeof e)return e;if((0,r.default)(e))return NaN;if((0,i.default)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,i.default)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=(0,n.default)(e);var o=a.test(e);return o||_.test(e)?c(e.slice(2),o?2:8):s.test(e)?NaN:+e}},648182:(e,t,o)=>{"use strict";o.d(t,{default:()=>i});var n=o(630052);const i=function(e){return null==e?"":(0,n.default)(e)}},609620:(e,t,o)=>{"use strict";o.d(t,{default:()=>p});var n=o(630052),i=o(20098),r=o(770898),s=o(523149),a=o(411767),_=o(994553),c=o(174616),l=o(818593),u=o(648182),d=/\w*$/;const p=function(e,t){var o=30,p="...";if((0,s.default)(t)){var h="separator"in t?t.separator:h;o="length"in t?(0,l.default)(t.length):o,p="omission"in t?(0,n.default)(t.omission):p}var m=(e=(0,u.default)(e)).length;if((0,r.default)(e)){var E=(0,c.default)(e);m=E.length}if(o>=m)return e;var f=o-(0,_.default)(p);if(f<1)return p;var g=E?(0,i.default)(E,0,f).join(""):e.slice(0,f);if(void 0===h)return g+p;if(E&&(f+=g.length-f),(0,a.default)(h)){if(e.slice(f).search(h)){var y,v=g;for(h.global||(h=RegExp(h.source,(0,u.default)(d.exec(h))+"g")),h.lastIndex=0;y=h.exec(v);)var w=y.index;g=g.slice(0,void 0===w?f:w)}}else if(e.indexOf((0,n.default)(h),f)!=f){var A=g.lastIndexOf(h);A>-1&&(g=g.slice(0,A))}return g+p}},444329:(e,t,o)=>{"use strict";o.d(t,{nanoid:()=>n});let n=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},30052:(e,t,o)=>{"use strict";o.d(t,{condition:()=>i});var n=o(32489);function i(e){var{if:t,then:o,else:i,source:s=(0,n.createEvent)({name:"source",sid:"epke23"},{name:"source",sid:"epke23"})}=e,a=n.is.unit(t)||"function"==typeof t?t:e=>e===t;return o&&i?(0,n.split)({and:[{source:s,match:{then:a,else:r(a)},cases:{then:o,else:i}}],or:{sid:"9tug3k"}}):o?(0,n.guard)({and:[{source:s,filter:a,target:o}],or:{sid:"abznoh"}}):i&&(0,n.guard)({and:[{source:s,filter:r(a),target:i}],or:{sid:"-eb29qp"}}),s}function r(e){return n.is.unit(e)?e.map((e=>!e)):t=>!e(t)}},115674:(e,t,o)=>{"use strict";o.d(t,{either:()=>i});var n=o(32489);function i(e,t,o){if(n.is.store(e,{sid:"ozzvoc"}))return(0,n.combine)({and:[e,t,o,(e,t,o)=>e?t:o],or:{sid:"-5vau2h"}});var r=e;return i(r.filter,r.then,r.other)}},630082:(e,t,o)=>{"use strict";o.d(t,{equals:()=>i});var n=o(32489);function i(e,t){return(0,n.combine)({and:[e,t,(e,t)=>e===t],or:{sid:"-pqjlti"}})}},311606:(e,t,o)=>{"use strict";o.d(t,{interval:()=>i});var n=o(32489);function i(e){var{timeout:t,start:o,stop:i,leading:r=!1,trailing:s=!1}=e,a=null!=o?o:(0,n.createEvent)({name:"setup",sid:"-ajedhm"}),_=null!=i?i:(0,n.createEvent)({name:"teardown",sid:"-ryi8gr"}),c=(0,n.createEvent)({name:"tick",sid:"-cw8a02"}),l=(0,n.createStore)(!1,{name:"$isRunning",sid:"-5gspmy"}),u=function(e){if(n.is.store(e,{sid:"8i2x6t"}))return e;if("number"==typeof e)return(0,n.createStore)(e,{and:{name:"$timeout"},sid:"-jluixv"});throw new TypeError('timeout parameter in interval method should be number or Store. "'.concat(typeof e,'" was passed'))}(t),d=l.map((e=>!e)),p=(0,n.createEvent)({name:"saveTimeout",sid:"satd6r"}),h=(0,n.createStore)(null,{name:"$timeoutId",sid:"hehxq7"}).on(p,((e,t)=>{var{timeoutId:o}=t;return o})),m=(0,n.createStore)((()=>{}),{name:"$rejecter",sid:"-sc3eh9"}).on(p,((e,t)=>{var{reject:o}=t;return o})),E=(0,n.attach)({and:{source:{timeout:u,running:l},effect:e=>{var{timeout:t,running:o}=e;return o?new Promise(((e,o)=>{var n=setTimeout(e,t);p({timeoutId:n,reject:o})})):Promise.reject()}},or:{name:"timeoutFx",sid:"-xlxric"}}),f=(0,n.attach)({and:{source:{timeoutId:h,rejecter:m},effect:e=>{var{timeoutId:t,rejecter:o}=e;o(),t&&clearTimeout(t)}},or:{name:"cleanupFx",sid:"-32ewxw"}});if((0,n.guard)({and:[{clock:a,source:u,filter:d,target:E}],or:{sid:"-us95i7"}}),r){var g=(0,n.guard)({and:[{clock:a,filter:d}],or:{name:"onReady",sid:"farho0"}});(0,n.sample)({and:[{clock:g,target:c}],or:{sid:"-ubrbnn"}})}return(0,n.sample)({and:[{clock:a,fn:()=>!0,target:l}],or:{sid:"-ua3xxa"}}),(0,n.guard)({and:[{clock:E.done,source:u,filter:l,target:E}],or:{sid:"6lcmx8"}}),(0,n.guard)({and:[{clock:E.done,filter:l,target:c.prepend((()=>{}))}],or:{sid:"6p772r"}}),s&&(0,n.sample)({and:[{clock:_,target:c}],or:{sid:"75p0xb"}}),l.on(_,(()=>!1)),(0,n.sample)({and:[{clock:_,target:f}],or:{sid:"7ln232"}}),{tick:c,isRunning:l,"@@trigger":()=>({setup:a,teardown:_,fired:c})}}},297420:(e,t,o)=>{"use strict";function n(e){return e.map((e=>!e))}o.d(t,{not:()=>n})},264874:(e,t,o)=>{"use strict";o.d(t,{once:()=>i});var n=o(32489);function i(e){var t=(0,n.createStore)(!0,{name:"$canTrigger",sid:"hqg5e0"}),o=(0,n.sample)({and:[{clock:e,filter:t}],or:{name:"trigger",sid:"-cvmmt0"}});return t.on(o,(()=>!1)),(0,n.sample)({and:[{clock:o}],or:{sid:"-pw95tp"}})}},278758:(e,t,o)=>{"use strict";o.d(t,{reset:()=>i});var n=o(32489);function i(e){var{clock:t,target:o}=e,i=Array.isArray(o)?o:[o],r=Array.isArray(t)?t:[null!=t?t:(0,n.createEvent)({name:"clocks",sid:"bqmea5"})];return i.forEach((e=>{e.reset(r)})),void 0===t?r[0]:void 0}},625523:(e,t,o)=>{"use strict";function n(e){var{source:t,shape:o}=e,n={};for(var i in o)i in o&&function(){var e=o[i];n[i]=t.map((t=>{var o=e(t);return void 0===o?null:o}))}();return n}o.d(t,{reshape:()=>n})},810780:(e,t,o)=>{"use strict";o.d(t,{spread:()=>s});var n=o(32489),i={}.hasOwnProperty,r=(e,t)=>i.call(e,t);function s(e){var{targets:t,source:o=(0,n.createEvent)({name:"source",sid:"-fkbi3c"},{name:"source",sid:"-fkbi3c"})}=e,i=function(e){if(r(t,e)){var i=t[e],s=(0,n.guard)({and:[{source:o,greedy:!0,filter:t=>"object"==typeof t&&null!==t&&e in t}],or:{name:"hasTargetKey",sid:"-cov4g4"}});(0,n.sample)({and:[{greedy:!0,clock:s,fn:t=>t[e],target:i}],or:{sid:"lpn34j"}})}};for(var s in t)i(s);return o}},331635:(e,t,o)=>{"use strict";o.d(t,{__assign:()=>r,__decorate:()=>a,__extends:()=>i,__generator:()=>c,__metadata:()=>_,__read:()=>u,__rest:()=>s,__spreadArray:()=>d,__values:()=>l});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},n(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var r=function(){return r=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};function s(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(o[n[i]]=e[n[i]])}return o}function a(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s}function _(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t){var o,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(_){return function(a){if(o)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,_])}}}Object.create;function l(e){var t="function"==typeof Symbol&&Symbol.iterator,o=t&&e[t],n=0;if(o)return o.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var n,i,r=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=r.next()).done;)s.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return s}function d(e,t,o){if(o||2===arguments.length)for(var n,i=0,r=t.length;i<r;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;"function"==typeof SuppressedError&&SuppressedError}}]);try{stManager.done("dist/web/chunks/common.ff777f3b.js")}catch(e){}